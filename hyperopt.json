{"version":2,"kind":"Article","sha256":"82758128a1bf8a70e1c2a66428f63554094bc406d03c06a38334e3decc424dcf","slug":"hyperopt","location":"/hyperopt.md","dependencies":[],"frontmatter":{"title":"Hyperopt 超参数优化指南","description":"Hyperopt 是 Freqtrade 中用于自动化策略参数优化的工具,通过搜索最佳参数组合来提升策略性能。","short_title":"Hyperopt 指南","subtitle":"使用 Hyperopt 优化策略参数","tags":["超参数优化","Hyperopt","策略优化","机器学习","参数调优"],"subject":"Freqtrade 超参数优化","authors":[{"id":"Freqtrade","name":"Freqtrade"}],"github":"https://github.com/freqtrade-cn/docs_zh-CN","keywords":["Freqtrade","中文文档","交易机器人","量化交易","加密货币","数字货币","区块链","人工智能","机器学习"],"edit_url":"https://github.com/freqtrade-cn/docs_zh-CN/blob/main/hyperopt.md","exports":[{"format":"md","filename":"hyperopt.md","url":"/build/hyperopt-ff2d5ad71f273fc66d34d868be530745.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Hyperopt","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"f7w1RpinnX"}],"identifier":"hyperopt","label":"Hyperopt","html_id":"hyperopt","implicit":true,"key":"tLphLBxFIX"},{"type":"paragraph","position":{"start":{"line":20,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"本页解释了如何通过寻找最佳参数来调整您的策略，这个过程称为超参数优化。机器人使用 ","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"PSgju1yf3b"},{"type":"inlineCode","value":"optuna","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"p2sEt2u3mY"},{"type":"text","value":" 包中包含的算法来完成这项工作。\n搜索将消耗所有 CPU 核心，让您的笔记本电脑听起来像战斗机，并且仍然需要很长时间。","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"Qaa96Z413W"}],"key":"JPbqLrCYhh"},{"type":"paragraph","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"一般来说，最佳参数的搜索从几个随机组合开始（详见","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"Bn3MroY8MX"},{"type":"crossReference","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"下文","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"TDFqbhoY48"}],"identifier":"reproducible-results","label":"reproducible-results","kind":"heading","template":"{name}","resolved":true,"html_id":"reproducible-results","key":"YyKhdmryE1"},{"type":"text","value":"），然后使用 optuna 的采样器算法之一（目前是 NSGAIIISampler）来快速找到搜索超空间中最小化","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"RpyFJF9TGD"},{"type":"crossReference","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"损失函数","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"aUhxxaQTOP"}],"identifier":"loss-functions","label":"loss-functions","kind":"heading","template":"{name}","resolved":true,"html_id":"loss-functions","key":"b8jftjou1l"},{"type":"text","value":"值的参数组合。","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"R0PZHQAtw8"}],"key":"uc1OqMRLQh"},{"type":"paragraph","position":{"start":{"line":25,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"Hyperopt 需要历史数据，就像回测一样（hyperopt 使用不同参数多次运行回测）。\n要了解如何获取您感兴趣的交易对和交易所的数据，请查看文档的","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"eR0ed619TS"},{"type":"link","url":"/data-download","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"数据下载","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"JHeVQd4mj9"}],"urlSource":"data-download.md","dataUrl":"/data-download.json","internal":true,"protocol":"file","key":"RFbODnYTrs"},{"type":"text","value":"部分。","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"BxA7CbDo6G"}],"key":"VZbwkOps33"},{"type":"admonition","kind":"error","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Hyperopt 崩溃","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"iVHV8e7QAu"}],"key":"ov6hqXQuky"},{"type":"paragraph","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"当只使用 1 个 CPU 核心时，Hyperopt 可能会崩溃，这在 ","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"Xp1i0xNO6g"},{"type":"link","url":"https://github.com/freqtrade/freqtrade/issues/1133","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"Issue #1133","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"tPB6DUEXUl"}],"urlSource":"https://github.com/freqtrade/freqtrade/issues/1133","data":{"kind":"issue","org":"freqtrade","repo":"freqtrade","issue_number":"1133"},"internal":false,"protocol":"github","key":"QHSMW7tPj3"},{"type":"text","value":" 中被发现。","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"ab6bJ2ehtp"}],"key":"aBBw4GTL01"}],"key":"uJZBra1E9M"},{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"不再需要编写单独的 hyperopt 类","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"vxsRSPIlCJ"}],"key":"ZwGKN8j086"},{"type":"paragraph","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"text","value":"自 2021.4 版本起，您不再需要编写单独的 hyperopt 类，而是可以直接在策略中配置参数。","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"eWnSlB8qMp"}],"key":"PA0a8D7XLF"},{"type":"paragraph","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"text","value":"旧方法在 2021.8 之前得到支持，并在 2021.9 中被移除。","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"yxDOm0EImA"}],"key":"CkfbP7DAim"}],"key":"uLhw3gbMPJ"},{"type":"heading","depth":3,"position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"children":[{"type":"text","value":"安装 hyperopt 依赖","position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"key":"DeS0fNDeUo"}],"identifier":"id-hyperopt","label":"安装 hyperopt 依赖","html_id":"id-hyperopt","implicit":true,"key":"sgAd7mKZxG"},{"type":"paragraph","position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"children":[{"type":"text","value":"由于 Hyperopt 依赖项不是运行机器人本身所必需的，它们很重，在某些平台（如树莓派）上不容易构建，因此默认不安装。","position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"key":"zXLRQLrzSW"}],"key":"v4NKm1mYNL"},{"type":"paragraph","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"children":[{"type":"text","value":"在运行 Hyperopt 之前，您需要安装相应的依赖项，如下所述。","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"key":"sByFeWi1OM"}],"key":"t2Dn86hypf"},{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"不支持在树莓派上运行","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"yF2qniQcH9"}],"key":"G17puHPiTw"},{"type":"paragraph","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"children":[{"type":"text","value":"由于 Hyperopt 是一个资源密集型进程，不建议也不支持在树莓派上运行。","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"mLNm3wPr2U"}],"key":"tyiQUlUkTE"}],"key":"bWEVVzCcaH"},{"type":"heading","depth":4,"position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"children":[{"type":"text","value":"Docker 安装","position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"key":"XDqIVvflsS"}],"identifier":"docker","label":"Docker 安装","html_id":"docker","implicit":true,"key":"LLoQ9BPtxV"},{"type":"paragraph","position":{"start":{"line":50,"column":1},"end":{"line":50,"column":1}},"children":[{"type":"text","value":"docker 镜像包含 hyperopt 依赖项，无需进一步操作。","position":{"start":{"line":50,"column":1},"end":{"line":50,"column":1}},"key":"mUknWo3qG8"}],"key":"AQaGSRJWGw"},{"type":"heading","depth":4,"position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"children":[{"type":"text","value":"简易安装脚本 (","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"Z2oSrrW8rd"},{"type":"link","url":"http://setup.sh","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"children":[{"type":"text","value":"setup.sh","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"dcgAo1WrSK"}],"urlSource":"http://setup.sh","key":"f4hOZ4hAAJ"},{"type":"text","value":") / 手动安装","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"lndE9a8Hzp"}],"identifier":"id-setup-sh","label":"简易安装脚本 (setup.sh) / 手动安装","html_id":"id-setup-sh","implicit":true,"key":"OmmX7f0PoT"},{"type":"code","lang":"bash","value":"source .venv/bin/activate\npip install -r requirements-hyperopt.txt","position":{"start":{"line":54,"column":1},"end":{"line":57,"column":1}},"key":"GnvvA9WMMj"},{"type":"heading","depth":3,"position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"children":[{"type":"text","value":"Hyperopt 命令参考","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"bAtAws9KnA"}],"identifier":"hyperopt","label":"Hyperopt 命令参考","html_id":"hyperopt-1","implicit":true,"key":"K7DlXFjVee"},{"type":"include","file":"commands/hyperopt.md","literal":false,"lang":"markdown","children":[{"type":"code","lang":"","value":"用法: freqtrade hyperopt [-h] [-v] [--no-color] [--logfile FILE] [-V]\n                          [-c PATH] [-d PATH] [--userdir PATH] [-s NAME]\n                          [--strategy-path PATH] [--recursive-strategy-search]\n                          [--freqaimodel NAME] [--freqaimodel-path PATH]\n                          [-i TIMEFRAME] [--timerange TIMERANGE]\n                          [--data-format-ohlcv {json,jsongz,feather,parquet}]\n                          [--max-open-trades INT]\n                          [--stake-amount STAKE_AMOUNT] [--fee FLOAT]\n                          [-p PAIRS [PAIRS ...]] [--hyperopt-path PATH]\n                          [--eps] [--enable-protections]\n                          [--dry-run-wallet DRY_RUN_WALLET]\n                          [--timeframe-detail TIMEFRAME_DETAIL] [-e INT]\n                          [--spaces {all,buy,sell,roi,stoploss,trailing,protection,trades,default} [{all,buy,sell,roi,stoploss,trailing,protection,trades,default} ...]]\n                          [--print-all] [--print-json] [-j JOBS]\n                          [--random-state INT] [--min-trades INT]\n                          [--hyperopt-loss NAME] [--disable-param-export]\n                          [--ignore-missing-spaces] [--analyze-per-epoch]\n\n选项:\n  -h, --help            显示帮助信息并退出\n  -i TIMEFRAME, --timeframe TIMEFRAME\n                        指定时间框架 (`1m`, `5m`, `30m`, `1h`, `1d`)。\n  --timerange TIMERANGE\n                        指定要使用的数据时间范围。\n  --data-format-ohlcv {json,jsongz,feather,parquet}\n                        下载的K线（OHLCV）数据的存储格式。\n                        （默认：`feather`）。\n  --max-open-trades INT\n                        覆盖配置设置中的 `max_open_trades` 值。\n  --stake-amount STAKE_AMOUNT\n                        覆盖配置设置中的 `stake_amount` 值。\n  --fee FLOAT           指定手续费比率。将应用两次（在交易进入和退出时）。\n  -p PAIRS [PAIRS ...], --pairs PAIRS [PAIRS ...]\n                        限制命令仅用于这些交易对。交易对之间用空格分隔。\n  --hyperopt-path PATH  指定超参数损失函数的额外查找路径。\n  --eps, --enable-position-stacking\n                        允许多次购买同一交易对（仓位叠加）。\n  --enable-protections, --enableprotections\n                        为回测启用保护机制。这将显著降低回测速度，但会包含已配置的保护机制。\n  --dry-run-wallet DRY_RUN_WALLET, --starting-balance DRY_RUN_WALLET\n                        起始余额，用于回测/超参数优化和模拟运行。\n  --timeframe-detail TIMEFRAME_DETAIL\n                        为回测指定详细时间框架 (`1m`, `5m`, `30m`, `1h`, `1d`)。\n  -e INT, --epochs INT  指定 epoch 数量（默认：100）。\n  --spaces {all,buy,sell,roi,stoploss,trailing,protection,trades,default} [{all,buy,sell,roi,stoploss,trailing,protection,trades,default} ...]\n                        指定要超参数优化的参数空间。空格分隔的列表。\n  --print-all           打印所有结果，而不仅仅是最佳结果。\n  --print-json          以 JSON 格式输出结果。\n  -j JOBS, --job-workers JOBS\n                        超参数优化的并发作业数（worker 进程数）。如果为 -1（默认），则使用所有 CPU；为 -2 时，使用所有 CPU 但保留一个，依此类推。如果为 1，则不使用并行计算。\n  --random-state INT    设置随机种子，以便复现超参数优化结果。\n  --min-trades INT      设置超参数优化路径中评估的最小交易次数（默认：1）。\n  --hyperopt-loss NAME, --hyperoptloss NAME\n                        指定超参数损失函数类（IHyperOptLoss）的类名。不同的损失函数会产生完全不同的结果，因为优化目标不同。内置损失函数包括：\n                        ShortTradeDurHyperOptLoss, OnlyProfitHyperOptLoss,\n                        SharpeHyperOptLoss, SharpeHyperOptLossDaily,\n                        SortinoHyperOptLoss, SortinoHyperOptLossDaily,\n                        CalmarHyperOptLoss, MaxDrawDownHyperOptLoss,\n                        MaxDrawDownRelativeHyperOptLoss,\n                        MaxDrawDownPerPairHyperOptLoss,\n                        ProfitDrawDownHyperOptLoss, MultiMetricHyperOptLoss\n  --disable-param-export\n                        禁用自动导出超参数。\n  --ignore-missing-spaces, --ignore-unparameterized-spaces\n                        对于未包含任何参数的超参数空间，抑制错误。\n  --analyze-per-epoch   每个 epoch 执行一次 populate_indicators。\n\n通用参数:\n  -v, --verbose         详细模式（-vv 获取更多信息，-vvv 获取所有消息）。\n  --no-color            禁用超参数优化结果的着色。在将输出重定向到文件时可能有用。\n  --logfile FILE, --log-file FILE\n                        记录到指定的文件。特殊值包括：\n                        'syslog', 'journald'。有关更多详细信息，请参阅文档。\n  -V, --version         显示程序版本号并退出\n  -c PATH, --config PATH\n                        指定配置文件（默认：`userdir/config.json` 或 `config.json`，以存在的为准）。\n                        可以使用多个 --config 选项。可以设置为 `-` 以从标准输入读取配置。\n  -d PATH, --datadir PATH, --data-dir PATH\n                        交易所历史回测数据的基本目录路径。要查看期货数据，需要额外使用 trading-mode。\n  --userdir PATH, --user-data-dir PATH\n                        用户数据目录的路径。\n\n策略参数:\n  -s NAME, --strategy NAME\n                        指定机器人要使用的策略类名。\n  --strategy-path PATH  指定额外的策略查找路径。\n  --recursive-strategy-search\n                        在策略文件夹中递归搜索策略。\n  --freqaimodel NAME    指定自定义的 freqaimodels。\n  --freqaimodel-path PATH\n                        为 freqaimodels 指定额外的查找路径。","position":{"start":{"line":1,"column":1},"end":{"line":93,"column":1}},"key":"ZPzYEx5bPT"}],"key":"BKXPpSu6Hg"},{"type":"heading","depth":4,"position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"children":[{"type":"text","value":"Hyperopt 清单","position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"key":"swiv5Mdohk"}],"identifier":"hyperopt","label":"Hyperopt 清单","html_id":"hyperopt-2","implicit":true,"key":"ONiFsvtgtX"},{"type":"paragraph","position":{"start":{"line":66,"column":1},"end":{"line":66,"column":1}},"children":[{"type":"text","value":"Hyperopt 中所有任务/可能性的清单","position":{"start":{"line":66,"column":1},"end":{"line":66,"column":1}},"key":"HNDmXieoQQ"}],"key":"wp17LRvu9q"},{"type":"paragraph","position":{"start":{"line":68,"column":1},"end":{"line":68,"column":1}},"children":[{"type":"text","value":"根据您想要优化的空间，只需要以下部分：","position":{"start":{"line":68,"column":1},"end":{"line":68,"column":1}},"key":"RGFw1kSEL0"}],"key":"Ltr5wGTpnt"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":70,"column":1},"end":{"line":72,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"children":[{"type":"text","value":"使用 ","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"key":"yhlqXhvJS3"},{"type":"inlineCode","value":"space='buy'","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"key":"kZhMoM6kLs"},{"type":"text","value":" 定义参数 - 用于入场信号优化","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"key":"ZiZPNGYzlT"}],"key":"izkbAbvntw"},{"type":"listItem","spread":true,"position":{"start":{"line":71,"column":1},"end":{"line":72,"column":1}},"children":[{"type":"text","value":"使用 ","position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"key":"ARP5kfdRUS"},{"type":"inlineCode","value":"space='sell'","position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"key":"DIza3epIGg"},{"type":"text","value":" 定义参数 - 用于出场信号优化","position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"key":"fa4vJbwUFY"}],"key":"vYJjqm9Qxh"}],"key":"xMAhFQ6BTW"},{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"前提","position":{"start":{"line":73,"column":1},"end":{"line":73,"column":1}},"key":"KJoEcH0YOs"}],"key":"QqgO2tvpOx"},{"type":"paragraph","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"children":[{"type":"inlineCode","value":"populate_indicators","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"key":"l5E7xYE6sY"},{"type":"text","value":" 需要创建所有空间可能使用的所有指标，否则 hyperopt 将无法工作。","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"key":"Sip7gOZSIk"}],"key":"cje4plM5WK"}],"key":"QyffyTRLFB"},{"type":"paragraph","position":{"start":{"line":77,"column":1},"end":{"line":77,"column":1}},"children":[{"type":"text","value":"很少情况下，您可能还需要创建一个名为 ","position":{"start":{"line":77,"column":1},"end":{"line":77,"column":1}},"key":"zSJ6q1MMl2"},{"type":"inlineCode","value":"HyperOpt","position":{"start":{"line":77,"column":1},"end":{"line":77,"column":1}},"key":"VKKWOWyFxX"},{"type":"text","value":" 的","position":{"start":{"line":77,"column":1},"end":{"line":77,"column":1}},"key":"gp68ZYtviM"},{"type":"crossReference","url":"/advanced-hyperopt","position":{"start":{"line":77,"column":1},"end":{"line":77,"column":1}},"children":[{"type":"text","value":"嵌套类","position":{"start":{"line":77,"column":1},"end":{"line":77,"column":1}},"key":"sfPhsFT6Vi"}],"urlSource":"advanced-hyperopt.md#overriding-pre-defined-spaces","dataUrl":"/advanced-hyperopt.json","identifier":"overriding-pre-defined-spaces","label":"overriding-pre-defined-spaces","remote":true,"protocol":"file","kind":"heading","template":"{name}","resolved":true,"html_id":"overriding-pre-defined-spaces","key":"Up7sTnCKwC"},{"type":"text","value":"并实现：","position":{"start":{"line":77,"column":1},"end":{"line":77,"column":1}},"key":"Rt40xSZpcE"}],"key":"Ck2rO9XOa7"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":79,"column":1},"end":{"line":84,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"children":[{"type":"inlineCode","value":"roi_space","position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"key":"KPlrQSZ4ob"},{"type":"text","value":" - 用于自定义 ROI 优化（如果您需要优化超空间中 ROI 参数的范围与默认值不同）","position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"key":"ItArfukf9k"}],"key":"Vd2JBtSwsN"},{"type":"listItem","spread":true,"position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"children":[{"type":"inlineCode","value":"generate_roi_table","position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"key":"REfv2EqmbT"},{"type":"text","value":" - 用于自定义 ROI 优化（如果您需要 ROI 表中值的范围与默认值不同，或者 ROI 表中的条目数（步骤）与默认的 4 个步骤不同）","position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"key":"h6XNnYQRAw"}],"key":"ktsldL4EWC"},{"type":"listItem","spread":true,"position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"children":[{"type":"inlineCode","value":"stoploss_space","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"key":"wQLrXKJqyD"},{"type":"text","value":" - 用于自定义止损优化（如果您需要优化超空间中止损参数的范围与默认值不同）","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"key":"WuJYbfI6Wn"}],"key":"VgAkEMxc5m"},{"type":"listItem","spread":true,"position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"children":[{"type":"inlineCode","value":"trailing_space","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"key":"FvLrdTSFRH"},{"type":"text","value":" - 用于自定义追踪止损优化（如果您需要优化超空间中追踪止损参数的范围与默认值不同）","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"key":"GDZLclaB9L"}],"key":"v5nIjYkc0F"},{"type":"listItem","spread":true,"position":{"start":{"line":83,"column":1},"end":{"line":84,"column":1}},"children":[{"type":"inlineCode","value":"max_open_trades_space","position":{"start":{"line":83,"column":1},"end":{"line":83,"column":1}},"key":"JEeVYR2r6L"},{"type":"text","value":" - 用于自定义 max_open_trades 优化（如果您需要优化超空间中 max_open_trades 参数的范围与默认值不同）","position":{"start":{"line":83,"column":1},"end":{"line":83,"column":1}},"key":"BFE6ytYSYU"}],"key":"lb8aNk4qWH"}],"key":"fc3RmMNf1Y"},{"type":"admonition","kind":"tip","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"快速优化 ROI、止损和追踪止损","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"IrEd4Vqn7d"}],"key":"spzCVnVnxT"},{"type":"paragraph","position":{"start":{"line":86,"column":1},"end":{"line":86,"column":1}},"children":[{"type":"text","value":"您可以快速优化 ","position":{"start":{"line":86,"column":1},"end":{"line":86,"column":1}},"key":"JFauqJR3eV"},{"type":"inlineCode","value":"roi","position":{"start":{"line":86,"column":1},"end":{"line":86,"column":1}},"key":"ZYYCiZ8SkO"},{"type":"text","value":"、","position":{"start":{"line":86,"column":1},"end":{"line":86,"column":1}},"key":"Y8gDUzlZLA"},{"type":"inlineCode","value":"stoploss","position":{"start":{"line":86,"column":1},"end":{"line":86,"column":1}},"key":"SLnAYQiCtU"},{"type":"text","value":" 和 ","position":{"start":{"line":86,"column":1},"end":{"line":86,"column":1}},"key":"mV5HPLKC27"},{"type":"inlineCode","value":"trailing","position":{"start":{"line":86,"column":1},"end":{"line":86,"column":1}},"key":"UqxXchxlMK"},{"type":"text","value":" 空间，而无需更改策略中的任何内容。","position":{"start":{"line":86,"column":1},"end":{"line":86,"column":1}},"key":"FZPe5UFAvR"}],"key":"d3rk5UUvhr"},{"type":"code","lang":"bash","value":"# 准备一个可用的策略。\nfreqtrade hyperopt --hyperopt-loss SharpeHyperOptLossDaily \\\n    --spaces roi stoploss trailing --strategy MyWorkingStrategy \\\n    --config config.json -e 100","position":{"start":{"line":88,"column":1},"end":{"line":93,"column":1}},"key":"HnoftBVJrG"}],"key":"HXKXkzXab2"},{"type":"heading","depth":4,"position":{"start":{"line":97,"column":1},"end":{"line":97,"column":1}},"children":[{"type":"text","value":"Hyperopt 执行逻辑","position":{"start":{"line":97,"column":1},"end":{"line":97,"column":1}},"key":"epQS0wJwrM"}],"identifier":"hyperopt","label":"Hyperopt 执行逻辑","html_id":"hyperopt-3","implicit":true,"key":"LmLNjvUnqr"},{"type":"paragraph","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"children":[{"type":"text","value":"Hyperopt 将首先将您的数据加载到内存中，然后为每个交易对运行一次 ","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"h3yQtHWy4g"},{"type":"inlineCode","value":"populate_indicators()","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"WIlRGsArDz"},{"type":"text","value":" 以生成所有指标，除非指定了 ","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"IJD7dyRWpB"},{"type":"inlineCode","value":"--analyze-per-epoch","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"eguAlK8YM1"},{"type":"text","value":"。","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"vFs5CGqH9q"}],"key":"CN197hybUd"},{"type":"paragraph","position":{"start":{"line":101,"column":1},"end":{"line":101,"column":1}},"children":[{"type":"text","value":"然后，Hyperopt 将分叉到不同的进程（处理器数量或 ","position":{"start":{"line":101,"column":1},"end":{"line":101,"column":1}},"key":"RwUNUUOnAE"},{"type":"inlineCode","value":"-j <n>","position":{"start":{"line":101,"column":1},"end":{"line":101,"column":1}},"key":"HIrTmAHfPE"},{"type":"text","value":"），并反复运行回测，更改属于定义的 ","position":{"start":{"line":101,"column":1},"end":{"line":101,"column":1}},"key":"mbkh6RCF4F"},{"type":"inlineCode","value":"--spaces","position":{"start":{"line":101,"column":1},"end":{"line":101,"column":1}},"key":"MRBfScW76L"},{"type":"text","value":" 的参数。","position":{"start":{"line":101,"column":1},"end":{"line":101,"column":1}},"key":"DbG12fw9AG"}],"key":"KVsfc4clos"},{"type":"paragraph","position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"children":[{"type":"text","value":"对于每组新参数，freqtrade 将首先运行 ","position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"key":"WMZmPvTRFf"},{"type":"inlineCode","value":"populate_entry_trend()","position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"key":"rUjOUl18nk"},{"type":"text","value":"，然后运行 ","position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"key":"HFm09Q9g7C"},{"type":"inlineCode","value":"populate_exit_trend()","position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"key":"QCz9rKWPR0"},{"type":"text","value":"，然后运行常规回测过程来模拟交易。","position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"key":"Kql8mpRgUB"}],"key":"RixRTlS7jS"},{"type":"paragraph","position":{"start":{"line":105,"column":1},"end":{"line":106,"column":1}},"children":[{"type":"text","value":"回测后，结果将传递给","position":{"start":{"line":105,"column":1},"end":{"line":105,"column":1}},"key":"sVlOH5YnAp"},{"type":"crossReference","position":{"start":{"line":105,"column":1},"end":{"line":105,"column":1}},"children":[{"type":"text","value":"损失函数","position":{"start":{"line":105,"column":1},"end":{"line":105,"column":1}},"key":"dMmkO3zTv9"}],"identifier":"loss-functions","label":"loss-functions","kind":"heading","template":"{name}","resolved":true,"html_id":"loss-functions","key":"IACUfcUkjZ"},{"type":"text","value":"，该函数将评估这个结果是否比之前的结果更好或更差。","position":{"start":{"line":105,"column":1},"end":{"line":105,"column":1}},"key":"xNfng72Vyu"},{"type":"break","position":{"start":{"line":105,"column":1},"end":{"line":105,"column":1}},"key":"MCxH8BaDhr"},{"type":"text","value":"基于损失函数结果，hyperopt 将确定下一轮回测中要尝试的下一组参数。","position":{"start":{"line":105,"column":1},"end":{"line":105,"column":1}},"key":"VaEZsvKRlM"}],"key":"HA5RN5tMrd"},{"type":"heading","depth":4,"position":{"start":{"line":108,"column":1},"end":{"line":108,"column":1}},"children":[{"type":"text","value":"配置您的守卫和触发器","position":{"start":{"line":108,"column":1},"end":{"line":108,"column":1}},"key":"tjidsOfmrw"}],"identifier":"id","label":"配置您的守卫和触发器","html_id":"id","implicit":true,"key":"Hn77nnStuh"},{"type":"paragraph","position":{"start":{"line":110,"column":1},"end":{"line":110,"column":1}},"children":[{"type":"text","value":"您需要在策略文件中更改两个地方来添加新的买入 hyperopt 进行测试：","position":{"start":{"line":110,"column":1},"end":{"line":110,"column":1}},"key":"Yi8yqC5XQH"}],"key":"dxphdUi72a"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":112,"column":1},"end":{"line":114,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":112,"column":1},"end":{"line":112,"column":1}},"children":[{"type":"text","value":"在类级别定义 hyperopt 将要优化的参数。","position":{"start":{"line":112,"column":1},"end":{"line":112,"column":1}},"key":"UNuJDT8Ycu"}],"key":"YN7WPlXkX0"},{"type":"listItem","spread":true,"position":{"start":{"line":113,"column":1},"end":{"line":114,"column":1}},"children":[{"type":"text","value":"在 ","position":{"start":{"line":113,"column":1},"end":{"line":113,"column":1}},"key":"ynGyZOd5DF"},{"type":"inlineCode","value":"populate_entry_trend()","position":{"start":{"line":113,"column":1},"end":{"line":113,"column":1}},"key":"InUjvJ2WJA"},{"type":"text","value":" 中 - 使用定义的参数值而不是原始常量。","position":{"start":{"line":113,"column":1},"end":{"line":113,"column":1}},"key":"lYiY7MOMV1"}],"key":"qsNgkHIAtR"}],"key":"krhoYYx2zt"},{"type":"paragraph","position":{"start":{"line":115,"column":1},"end":{"line":115,"column":1}},"children":[{"type":"text","value":"在那里您有两种不同类型的指标：1. ","position":{"start":{"line":115,"column":1},"end":{"line":115,"column":1}},"key":"YS1EshrtsM"},{"type":"inlineCode","value":"guards","position":{"start":{"line":115,"column":1},"end":{"line":115,"column":1}},"key":"iIJh8sL68f"},{"type":"text","value":"（守卫）和 2. ","position":{"start":{"line":115,"column":1},"end":{"line":115,"column":1}},"key":"kfbgH1NdaL"},{"type":"inlineCode","value":"triggers","position":{"start":{"line":115,"column":1},"end":{"line":115,"column":1}},"key":"Uu6KYRNxuQ"},{"type":"text","value":"（触发器）。","position":{"start":{"line":115,"column":1},"end":{"line":115,"column":1}},"key":"SJNIRHJ3z6"}],"key":"s63vIYiApd"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":117,"column":1},"end":{"line":119,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":117,"column":1},"end":{"line":117,"column":1}},"children":[{"type":"text","value":"守卫是类似\"当 ADX < 10 时永不买入\"或\"当当前价格超过 EMA10 时永不买入\"的条件。","position":{"start":{"line":117,"column":1},"end":{"line":117,"column":1}},"key":"RtVcFdw58s"}],"key":"MR76PmMq5D"},{"type":"listItem","spread":true,"position":{"start":{"line":118,"column":1},"end":{"line":119,"column":1}},"children":[{"type":"text","value":"触发器是在特定时刻实际触发买入的指标，如\"当 EMA5 上穿 EMA10 时买入\"或\"当收盘价触及布林带下轨时买入\"。","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"key":"yfU28FX9oQ"}],"key":"B1euPu5iFC"}],"key":"jgbQOwiQ5N"},{"type":"admonition","kind":"hint","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"守卫和触发器","position":{"start":{"line":120,"column":1},"end":{"line":120,"column":1}},"key":"TGjaVIFAyF"}],"key":"gGIVxSl5kW"},{"type":"paragraph","position":{"start":{"line":121,"column":1},"end":{"line":121,"column":1}},"children":[{"type":"text","value":"从技术上讲，守卫和触发器之间没有区别。","position":{"start":{"line":121,"column":1},"end":{"line":121,"column":1}},"key":"lO3uKGVIVe"}],"key":"hgbd3ud5o4"},{"type":"paragraph","position":{"start":{"line":123,"column":1},"end":{"line":123,"column":1}},"children":[{"type":"text","value":"但是，本指南将做出这种区分，以明确信号不应该是\"粘性\"的。","position":{"start":{"line":123,"column":1},"end":{"line":123,"column":1}},"key":"UJuA1DIWBf"}],"key":"Q2s9ukz5Rn"},{"type":"paragraph","position":{"start":{"line":125,"column":1},"end":{"line":125,"column":1}},"children":[{"type":"text","value":"粘性信号是在多个蜡烛期间保持活跃的信号。这可能导致在信号消失前（这意味着成功的机会比开始时低得多）才进入信号。","position":{"start":{"line":125,"column":1},"end":{"line":125,"column":1}},"key":"DNm6IDO6es"}],"key":"J6sxMjhYHj"}],"key":"U4xzJXlRbJ"},{"type":"paragraph","position":{"start":{"line":128,"column":1},"end":{"line":128,"column":1}},"children":[{"type":"text","value":"超参优化将在每个 epoch 轮次中选择一个触发器和可能的多个守卫。","position":{"start":{"line":128,"column":1},"end":{"line":128,"column":1}},"key":"kBeFuMZJfb"}],"key":"lQuVTf1TXO"},{"type":"heading","depth":5,"position":{"start":{"line":130,"column":1},"end":{"line":130,"column":1}},"children":[{"type":"text","value":"出场信号优化","position":{"start":{"line":130,"column":1},"end":{"line":130,"column":1}},"key":"mGgeftbjiK"}],"identifier":"id","label":"出场信号优化","html_id":"id-1","implicit":true,"key":"EhYvsfqc9V"},{"type":"paragraph","position":{"start":{"line":132,"column":1},"end":{"line":133,"column":1}},"children":[{"type":"text","value":"与上述入场信号类似，出场信号也可以优化。\n将相应的设置放入以下方法中：","position":{"start":{"line":132,"column":1},"end":{"line":132,"column":1}},"key":"msc6z0X4zs"}],"key":"RA0UEWGVBo"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":135,"column":1},"end":{"line":137,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"children":[{"type":"text","value":"在类级别定义 hyperopt 将要优化的参数，可以通过将它们命名为 ","position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"key":"lQ08nV5QcE"},{"type":"inlineCode","value":"sell_*","position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"key":"fWGuXxkwPw"},{"type":"text","value":"，或通过显式定义 ","position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"key":"fognkzo1Os"},{"type":"inlineCode","value":"space='sell'","position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"key":"cBN2IY1p6j"},{"type":"text","value":"。","position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"key":"vXiXNJEiT3"}],"key":"aUSWn5fyd0"},{"type":"listItem","spread":true,"position":{"start":{"line":136,"column":1},"end":{"line":137,"column":1}},"children":[{"type":"text","value":"在 ","position":{"start":{"line":136,"column":1},"end":{"line":136,"column":1}},"key":"fLVRu98DV3"},{"type":"inlineCode","value":"populate_exit_trend()","position":{"start":{"line":136,"column":1},"end":{"line":136,"column":1}},"key":"bmmYhfzvOx"},{"type":"text","value":" 中 - 使用定义的参数值而不是原始常量。","position":{"start":{"line":136,"column":1},"end":{"line":136,"column":1}},"key":"I5K0OrnK0q"}],"key":"IxLnZQ4CnO"}],"key":"YCSxGCnS84"},{"type":"paragraph","position":{"start":{"line":138,"column":1},"end":{"line":138,"column":1}},"children":[{"type":"text","value":"配置和规则与买入信号相同。","position":{"start":{"line":138,"column":1},"end":{"line":138,"column":1}},"key":"X4bBMgyLsX"}],"key":"MYoD7wcVKk"},{"type":"heading","depth":3,"position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"children":[{"type":"text","value":"解决一个谜题","position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"key":"pfsTCDV5sj"}],"identifier":"id","label":"解决一个谜题","html_id":"id-2","implicit":true,"key":"sNxopXWoVJ"},{"type":"paragraph","position":{"start":{"line":142,"column":1},"end":{"line":144,"column":1}},"children":[{"type":"text","value":"假设您很好奇：是否应该使用 MACD 交叉或布林带下轨来触发您的做多入场。\n您还想知道是否应该使用 RSI 或 ADX 来帮助做出这些决定。\n如果您决定使用 RSI 或 ADX，应该为它们使用哪些值？","position":{"start":{"line":142,"column":1},"end":{"line":142,"column":1}},"key":"Bm3ZiDtGyc"}],"key":"GJvIJA3CCU"},{"type":"paragraph","position":{"start":{"line":146,"column":1},"end":{"line":146,"column":1}},"children":[{"type":"text","value":"让我们使用超参数优化来解决这个谜题。","position":{"start":{"line":146,"column":1},"end":{"line":146,"column":1}},"key":"yYfTUbjee6"}],"key":"AjgcpppRVS"},{"type":"heading","depth":3,"position":{"start":{"line":148,"column":1},"end":{"line":148,"column":1}},"children":[{"type":"text","value":"优化指标参数","position":{"start":{"line":148,"column":1},"end":{"line":148,"column":1}},"key":"iIDU97NcEm"}],"identifier":"id","label":"优化指标参数","html_id":"id-3","implicit":true,"key":"wpZsEwQeM7"},{"type":"paragraph","position":{"start":{"line":150,"column":1},"end":{"line":151,"column":1}},"children":[{"type":"text","value":"假设您有一个简单的策略 - EMA 交叉策略（2 个移动平均线交叉）- 并且您想找到这个策略的理想参数。\n默认情况下，我们假设止损为 5% - 止盈（","position":{"start":{"line":150,"column":1},"end":{"line":150,"column":1}},"key":"bBqhweUVKi"},{"type":"inlineCode","value":"minimal_roi","position":{"start":{"line":150,"column":1},"end":{"line":150,"column":1}},"key":"nn1ZpsO4Mi"},{"type":"text","value":"）为 10% - 这意味着 freqtrade 将在达到 10% 利润时卖出交易。","position":{"start":{"line":150,"column":1},"end":{"line":150,"column":1}},"key":"lNDmYr4gZ4"}],"key":"u2VxXgnu9T"},{"type":"code","lang":"python","value":"from pandas import DataFrame\nfrom functools import reduce\n\nimport talib.abstract as ta\n\nfrom freqtrade.strategy import (BooleanParameter, CategoricalParameter, DecimalParameter, \n                                IStrategy, IntParameter)\nimport freqtrade.vendor.qtpylib.indicators as qtpylib\n\nclass MyAwesomeStrategy(IStrategy):\n    stoploss = -0.05\n    timeframe = '15m'\n    minimal_roi = {\n        \"0\":  0.10\n    }\n    # 定义参数空间\n    buy_ema_short = IntParameter(3, 50, default=5)\n    buy_ema_long = IntParameter(15, 200, default=50)\n\n\n    def populate_indicators(self, dataframe: DataFrame, metadata: dict) -> DataFrame:\n        \"\"\"生成策略使用的所有指标\"\"\"\n        \n        # 计算所有 ema_short 值\n        for val in self.buy_ema_short.range:\n            dataframe[f'ema_short_{val}'] = ta.EMA(dataframe, timeperiod=val)\n        \n        # 计算所有 ema_long 值\n        for val in self.buy_ema_long.range:\n            dataframe[f'ema_long_{val}'] = ta.EMA(dataframe, timeperiod=val)\n        \n        return dataframe\n\n    def populate_entry_trend(self, dataframe: DataFrame, metadata: dict) -> DataFrame:\n        conditions = []\n        conditions.append(qtpylib.crossed_above(\n                dataframe[f'ema_short_{self.buy_ema_short.value}'], dataframe[f'ema_long_{self.buy_ema_long.value}']\n            ))\n\n        # 检查交易量不为 0\n        conditions.append(dataframe['volume'] > 0)\n\n        if conditions:\n            dataframe.loc[\n                reduce(lambda x, y: x & y, conditions),\n                'enter_long'] = 1\n        return dataframe\n\n    def populate_exit_trend(self, dataframe: DataFrame, metadata: dict) -> DataFrame:\n        conditions = []\n        conditions.append(qtpylib.crossed_above(\n                dataframe[f'ema_long_{self.buy_ema_long.value}'], dataframe[f'ema_short_{self.buy_ema_short.value}']\n            ))\n\n        # 检查交易量不为 0\n        conditions.append(dataframe['volume'] > 0)\n\n        if conditions:\n            dataframe.loc[\n                reduce(lambda x, y: x & y, conditions),\n                'exit_long'] = 1\n        return dataframe","position":{"start":{"line":153,"column":1},"end":{"line":216,"column":1}},"key":"lktYR3irBd"},{"type":"paragraph","position":{"start":{"line":218,"column":1},"end":{"line":218,"column":1}},"children":[{"type":"text","value":"分解说明：","position":{"start":{"line":218,"column":1},"end":{"line":218,"column":1}},"key":"zCJjTEr9DX"}],"key":"kZaJ40MOkC"},{"type":"paragraph","position":{"start":{"line":220,"column":1},"end":{"line":222,"column":1}},"children":[{"type":"text","value":"使用 ","position":{"start":{"line":220,"column":1},"end":{"line":220,"column":1}},"key":"OFEtBgkaFg"},{"type":"inlineCode","value":"self.buy_ema_short.range","position":{"start":{"line":220,"column":1},"end":{"line":220,"column":1}},"key":"aopHGnAVCl"},{"type":"text","value":" 将返回一个包含参数低值和高值之间所有条目的范围对象。\n在这种情况下（","position":{"start":{"line":220,"column":1},"end":{"line":220,"column":1}},"key":"uXCbAdOPno"},{"type":"inlineCode","value":"IntParameter(3, 50, default=5)","position":{"start":{"line":220,"column":1},"end":{"line":220,"column":1}},"key":"hGEabMMlIY"},{"type":"text","value":"），循环将为 3 到 50 之间的所有数字运行（","position":{"start":{"line":220,"column":1},"end":{"line":220,"column":1}},"key":"j7b59meYGC"},{"type":"inlineCode","value":"[3, 4, 5, ... 49, 50]","position":{"start":{"line":220,"column":1},"end":{"line":220,"column":1}},"key":"WJN0TLefv5"},{"type":"text","value":"）。\n通过在循环中使用这个，hyperopt 将生成 48 个新列（","position":{"start":{"line":220,"column":1},"end":{"line":220,"column":1}},"key":"HNJMhwvSBd"},{"type":"inlineCode","value":"['buy_ema_3', 'buy_ema_4', ... , 'buy_ema_50']","position":{"start":{"line":220,"column":1},"end":{"line":220,"column":1}},"key":"rv4qrmUgto"},{"type":"text","value":"）。","position":{"start":{"line":220,"column":1},"end":{"line":220,"column":1}},"key":"zx0OXWKvko"}],"key":"IouJBTaQgV"},{"type":"paragraph","position":{"start":{"line":224,"column":1},"end":{"line":224,"column":1}},"children":[{"type":"text","value":"Hyperopt 本身将使用选定的值来创建买入和卖出信号。","position":{"start":{"line":224,"column":1},"end":{"line":224,"column":1}},"key":"EeaXN4Nh94"}],"key":"KAKK5Iamd8"},{"type":"paragraph","position":{"start":{"line":226,"column":1},"end":{"line":226,"column":1}},"children":[{"type":"text","value":"虽然这个策略可能过于简单，无法提供稳定的利润，但它应该作为如何优化指标参数的示例。","position":{"start":{"line":226,"column":1},"end":{"line":226,"column":1}},"key":"y80e4bKATj"}],"key":"x5a7UeJ2OG"},{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Note","key":"OLVdNP6vCH"}],"key":"VwJHP41Fmn"},{"type":"paragraph","position":{"start":{"line":229,"column":1},"end":{"line":229,"column":1}},"children":[{"type":"inlineCode","value":"self.buy_ema_short.range","position":{"start":{"line":229,"column":1},"end":{"line":229,"column":1}},"key":"R3tH7csDr0"},{"type":"text","value":" 在 hyperopt 和其他模式之间的行为会有所不同。对于 hyperopt，上面的示例可能生成 48 个新列，但是对于所有其他模式（回测、模拟/实盘），它将只为选定的值生成列。因此，您应该避免使用具有显式值的结果列（除了 ","position":{"start":{"line":229,"column":1},"end":{"line":229,"column":1}},"key":"f3zwbe7JQJ"},{"type":"inlineCode","value":"self.buy_ema_short.value","position":{"start":{"line":229,"column":1},"end":{"line":229,"column":1}},"key":"M2mz7txJqc"},{"type":"text","value":" 之外的值）。","position":{"start":{"line":229,"column":1},"end":{"line":229,"column":1}},"key":"dZgjSMB0QG"}],"key":"dvbsXw5kxI"}],"key":"mIltmNKYTJ"},{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Note","key":"U7jqPVwG57"}],"key":"CuBjynMz6s"},{"type":"paragraph","position":{"start":{"line":233,"column":1},"end":{"line":233,"column":1}},"children":[{"type":"inlineCode","value":"range","position":{"start":{"line":233,"column":1},"end":{"line":233,"column":1}},"key":"BEqPLjblDQ"},{"type":"text","value":" 属性也可以与 ","position":{"start":{"line":233,"column":1},"end":{"line":233,"column":1}},"key":"GELrK2Xk0C"},{"type":"inlineCode","value":"DecimalParameter","position":{"start":{"line":233,"column":1},"end":{"line":233,"column":1}},"key":"N3jTj4KVDo"},{"type":"text","value":" 和 ","position":{"start":{"line":233,"column":1},"end":{"line":233,"column":1}},"key":"GbsWCOVtLj"},{"type":"inlineCode","value":"CategoricalParameter","position":{"start":{"line":233,"column":1},"end":{"line":233,"column":1}},"key":"voMVthBzkf"},{"type":"text","value":" 一起使用。由于无限搜索空间，","position":{"start":{"line":233,"column":1},"end":{"line":233,"column":1}},"key":"mExkmj6M1o"},{"type":"inlineCode","value":"RealParameter","position":{"start":{"line":233,"column":1},"end":{"line":233,"column":1}},"key":"Ov2nyZvv2K"},{"type":"text","value":" 不提供此属性。","position":{"start":{"line":233,"column":1},"end":{"line":233,"column":1}},"key":"TGBopYRgh9"}],"key":"uXMCau70x4"}],"key":"S63OUYmSYk"},{"type":"admonition","kind":"hint","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"性能提示","position":{"start":{"line":236,"column":1},"end":{"line":236,"column":1}},"key":"vVYa3Jq35Z"}],"key":"cicgSkW1y2"},{"type":"paragraph","position":{"start":{"line":237,"column":1},"end":{"line":237,"column":1}},"children":[{"type":"text","value":"在正常的超参优化过程中，指标被计算一次并提供给每个 epoch，随着核心数量的增加，RAM 使用量线性增加。由于这也影响性能，有两种替代方案可以减少 RAM 使用量：","position":{"start":{"line":237,"column":1},"end":{"line":237,"column":1}},"key":"RLqVse3dc9"}],"key":"BNbJW5e2UA"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":239,"column":1},"end":{"line":241,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":239,"column":1},"end":{"line":239,"column":1}},"children":[{"type":"text","value":"将 ","position":{"start":{"line":239,"column":1},"end":{"line":239,"column":1}},"key":"ifgWORBmpD"},{"type":"inlineCode","value":"ema_short","position":{"start":{"line":239,"column":1},"end":{"line":239,"column":1}},"key":"Kl8U8XtRkn"},{"type":"text","value":" 和 ","position":{"start":{"line":239,"column":1},"end":{"line":239,"column":1}},"key":"hqQ8Y99tHP"},{"type":"inlineCode","value":"ema_long","position":{"start":{"line":239,"column":1},"end":{"line":239,"column":1}},"key":"JhieSvae2J"},{"type":"text","value":" 计算从 ","position":{"start":{"line":239,"column":1},"end":{"line":239,"column":1}},"key":"dHP1wfIHF0"},{"type":"inlineCode","value":"populate_indicators()","position":{"start":{"line":239,"column":1},"end":{"line":239,"column":1}},"key":"gmdNna7K78"},{"type":"text","value":" 移到 ","position":{"start":{"line":239,"column":1},"end":{"line":239,"column":1}},"key":"Bej01F25cT"},{"type":"inlineCode","value":"populate_entry_trend()","position":{"start":{"line":239,"column":1},"end":{"line":239,"column":1}},"key":"zWhTmiDm7F"},{"type":"text","value":"。由于 ","position":{"start":{"line":239,"column":1},"end":{"line":239,"column":1}},"key":"NnzYYX8bbc"},{"type":"inlineCode","value":"populate_entry_trend()","position":{"start":{"line":239,"column":1},"end":{"line":239,"column":1}},"key":"U7jWFMopSP"},{"type":"text","value":" 将在每个 epoch 计算，您不需要使用 ","position":{"start":{"line":239,"column":1},"end":{"line":239,"column":1}},"key":"DfXY1MpVok"},{"type":"inlineCode","value":".range","position":{"start":{"line":239,"column":1},"end":{"line":239,"column":1}},"key":"InUDXZnC96"},{"type":"text","value":" 功能。","position":{"start":{"line":239,"column":1},"end":{"line":239,"column":1}},"key":"BIPJJwLoxS"}],"key":"tsLCYVIa4Q"},{"type":"listItem","spread":true,"position":{"start":{"line":240,"column":1},"end":{"line":241,"column":1}},"children":[{"type":"text","value":"hyperopt 提供 ","position":{"start":{"line":240,"column":1},"end":{"line":240,"column":1}},"key":"HgZQw1sj3k"},{"type":"inlineCode","value":"--analyze-per-epoch","position":{"start":{"line":240,"column":1},"end":{"line":240,"column":1}},"key":"sb5zpV1lrk"},{"type":"text","value":"，这将把 ","position":{"start":{"line":240,"column":1},"end":{"line":240,"column":1}},"key":"Wh9GZSYHVR"},{"type":"inlineCode","value":"populate_indicators()","position":{"start":{"line":240,"column":1},"end":{"line":240,"column":1}},"key":"QL9In52Il6"},{"type":"text","value":" 的执行移到 epoch 进程中，每个 epoch 每个参数只计算一个值，而不是使用 ","position":{"start":{"line":240,"column":1},"end":{"line":240,"column":1}},"key":"ZHd6bTJngr"},{"type":"inlineCode","value":".range","position":{"start":{"line":240,"column":1},"end":{"line":240,"column":1}},"key":"oFth3bgTbR"},{"type":"text","value":" 功能。在这种情况下，","position":{"start":{"line":240,"column":1},"end":{"line":240,"column":1}},"key":"iqI7eWjuzH"},{"type":"inlineCode","value":".range","position":{"start":{"line":240,"column":1},"end":{"line":240,"column":1}},"key":"BNnHi57eMc"},{"type":"text","value":" 功能将只返回实际使用的值。","position":{"start":{"line":240,"column":1},"end":{"line":240,"column":1}},"key":"p3gcgCLDMY"}],"key":"xtQF830LW1"}],"key":"ipsTnDtGQw"},{"type":"paragraph","position":{"start":{"line":242,"column":1},"end":{"line":242,"column":1}},"children":[{"type":"text","value":"这些替代方案将减少 RAM 使用量，但会增加 CPU 使用量。但是，您的超参优化运行不太可能因为内存不足（OOM）问题而失败。","position":{"start":{"line":242,"column":1},"end":{"line":242,"column":1}},"key":"keIrV6TWpp"}],"key":"MtL3NtW0Zk"},{"type":"paragraph","position":{"start":{"line":244,"column":1},"end":{"line":244,"column":1}},"children":[{"type":"text","value":"无论您使用 ","position":{"start":{"line":244,"column":1},"end":{"line":244,"column":1}},"key":"YR18BCPnzy"},{"type":"inlineCode","value":".range","position":{"start":{"line":244,"column":1},"end":{"line":244,"column":1}},"key":"ebqnM8Lmok"},{"type":"text","value":" 功能还是上述替代方案，您都应该尝试使用尽可能小的空间范围，因为这将改善 CPU/RAM 使用量。","position":{"start":{"line":244,"column":1},"end":{"line":244,"column":1}},"key":"UqvKZrysPq"}],"key":"mJUciZ1XCQ"}],"key":"LsWsqycn8V"},{"type":"heading","depth":3,"position":{"start":{"line":249,"column":1},"end":{"line":249,"column":1}},"children":[{"type":"text","value":"优化保护措施","position":{"start":{"line":249,"column":1},"end":{"line":249,"column":1}},"key":"piBaJL4vhc"}],"label":"optimizing-protections","identifier":"optimizing-protections","html_id":"optimizing-protections","key":"lf06DYtqVs"},{"type":"paragraph","position":{"start":{"line":251,"column":1},"end":{"line":251,"column":1}},"children":[{"type":"text","value":"Freqtrade 也可以优化保护措施。如何优化保护措施取决于您，以下内容仅供参考。","position":{"start":{"line":251,"column":1},"end":{"line":251,"column":1}},"key":"ADL9TYaSQ1"}],"key":"ANiMGikEWR"},{"type":"paragraph","position":{"start":{"line":253,"column":1},"end":{"line":253,"column":1}},"children":[{"type":"text","value":"策略只需要将\"protections\"条目定义为返回保护配置列表的属性。","position":{"start":{"line":253,"column":1},"end":{"line":253,"column":1}},"key":"WB3xcbUPBQ"}],"key":"ry96g7wcrI"},{"type":"code","lang":"python","value":"from pandas import DataFrame\nfrom functools import reduce\n\nimport talib.abstract as ta\n\nfrom freqtrade.strategy import (BooleanParameter, CategoricalParameter, DecimalParameter, \n                                IStrategy, IntParameter)\nimport freqtrade.vendor.qtpylib.indicators as qtpylib\n\nclass MyAwesomeStrategy(IStrategy):\n    stoploss = -0.05\n    timeframe = '15m'\n    # 定义参数空间\n    cooldown_lookback = IntParameter(2, 48, default=5, space=\"protection\", optimize=True)\n    stop_duration = IntParameter(12, 200, default=5, space=\"protection\", optimize=True)\n    use_stop_protection = BooleanParameter(default=True, space=\"protection\", optimize=True)\n\n\n    @property\n    def protections(self):\n        prot = []\n\n        prot.append({\n            \"method\": \"CooldownPeriod\",\n            \"stop_duration_candles\": self.cooldown_lookback.value\n        })\n        if self.use_stop_protection.value:\n            prot.append({\n                \"method\": \"StoplossGuard\",\n                \"lookback_period_candles\": 24 * 3,\n                \"trade_limit\": 4,\n                \"stop_duration_candles\": self.stop_duration.value,\n                \"only_per_pair\": False\n            })\n\n        return prot\n\n    def populate_indicators(self, dataframe: DataFrame, metadata: dict) -> DataFrame:\n        # ...\n        ","position":{"start":{"line":255,"column":1},"end":{"line":296,"column":1}},"key":"vx6uhe6fQu"},{"type":"paragraph","position":{"start":{"line":298,"column":1},"end":{"line":299,"column":1}},"children":[{"type":"text","value":"然后您可以按如下方式运行 hyperopt：\n","position":{"start":{"line":298,"column":1},"end":{"line":298,"column":1}},"key":"fl9Bs6Z0lb"},{"type":"inlineCode","value":"freqtrade hyperopt --hyperopt-loss SharpeHyperOptLossDaily --strategy MyAwesomeStrategy --spaces protection","position":{"start":{"line":298,"column":1},"end":{"line":298,"column":1}},"key":"aKyajkL3xQ"}],"key":"VolhBDopUQ"},{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Note","key":"ZAN7pfuzPU"}],"key":"KIeClC1I6M"},{"type":"paragraph","position":{"start":{"line":302,"column":1},"end":{"line":303,"column":1}},"children":[{"type":"text","value":"保护空间不是默认空间的一部分，仅在使用参数 Hyperopt 接口时可用，不适用于旧版 hyperopt 接口（需要单独的 hyperopt 文件）。\n如果选择了保护空间，Freqtrade 也会自动更改 “--enable-protections” 标志。","position":{"start":{"line":302,"column":1},"end":{"line":302,"column":1}},"key":"NoPSzXZDpS"}],"key":"qMhoq5Xv6Z"}],"key":"rB9vKag9s0"},{"type":"admonition","kind":"warning","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Warning","key":"hOqslM98Kk"}],"key":"b8Pj3FT1jy"},{"type":"paragraph","position":{"start":{"line":307,"column":1},"end":{"line":308,"column":1}},"children":[{"type":"text","value":"如果保护措施被定义为属性，配置中的条目将被忽略。\n因此建议不要在配置中定义保护措施。","position":{"start":{"line":307,"column":1},"end":{"line":307,"column":1}},"key":"YqKaMG5442"}],"key":"vNWY1vPRa9"}],"key":"vsYOkaZkIY"},{"type":"heading","depth":4,"position":{"start":{"line":311,"column":1},"end":{"line":311,"column":1}},"children":[{"type":"text","value":"从以前的属性设置迁移","position":{"start":{"line":311,"column":1},"end":{"line":311,"column":1}},"key":"uor6lc4dcl"}],"identifier":"id","label":"从以前的属性设置迁移","html_id":"id-4","implicit":true,"key":"R9H7KiTLV9"},{"type":"paragraph","position":{"start":{"line":313,"column":1},"end":{"line":314,"column":1}},"children":[{"type":"text","value":"从以前的设置迁移非常简单，可以通过将保护措施条目转换为属性来完成。\n简单来说，以下配置将转换为下面的内容。","position":{"start":{"line":313,"column":1},"end":{"line":313,"column":1}},"key":"Q6MzFFcMI2"}],"key":"UlPk1Y1xpH"},{"type":"code","lang":"python","value":"class MyAwesomeStrategy(IStrategy):\n    protections = [\n        {\n            \"method\": \"CooldownPeriod\",\n            \"stop_duration_candles\": 4\n        }\n    ]","position":{"start":{"line":316,"column":1},"end":{"line":324,"column":1}},"key":"k1cccj8w4N"},{"type":"paragraph","position":{"start":{"line":326,"column":1},"end":{"line":326,"column":1}},"children":[{"type":"text","value":"结果","position":{"start":{"line":326,"column":1},"end":{"line":326,"column":1}},"key":"dQ1rwZ3KRx"}],"key":"HUjQgTALNm"},{"type":"code","lang":"python","value":"class MyAwesomeStrategy(IStrategy):\n    \n    @property\n    def protections(self):\n        return [\n            {\n                \"method\": \"CooldownPeriod\",\n                \"stop_duration_candles\": 4\n            }\n        ]","position":{"start":{"line":328,"column":1},"end":{"line":339,"column":1}},"key":"uRLJQUqcxt"},{"type":"paragraph","position":{"start":{"line":341,"column":1},"end":{"line":341,"column":1}},"children":[{"type":"text","value":"然后您显然也会将潜在有趣的条目更改为参数，以允许超参优化。","position":{"start":{"line":341,"column":1},"end":{"line":341,"column":1}},"key":"a9FuC8lHL4"}],"key":"q4wltbOLXZ"},{"type":"heading","depth":4,"position":{"start":{"line":343,"column":1},"end":{"line":343,"column":1}},"children":[{"type":"text","value":"优化 ","position":{"start":{"line":343,"column":1},"end":{"line":343,"column":1}},"key":"IJzG6tPGRN"},{"type":"inlineCode","value":"max_entry_position_adjustment","position":{"start":{"line":343,"column":1},"end":{"line":343,"column":1}},"key":"F6DZPi5A88"}],"identifier":"id-max-entry-position-adjustment","label":"优化 max_entry_position_adjustment","html_id":"id-max-entry-position-adjustment","implicit":true,"key":"nv4xSnsEYT"},{"type":"paragraph","position":{"start":{"line":345,"column":1},"end":{"line":345,"column":1}},"children":[{"type":"text","value":"虽然 ","position":{"start":{"line":345,"column":1},"end":{"line":345,"column":1}},"key":"tnLYFtgeky"},{"type":"inlineCode","value":"max_entry_position_adjustment","position":{"start":{"line":345,"column":1},"end":{"line":345,"column":1}},"key":"vXZ175peBB"},{"type":"text","value":" 不是一个单独的空间，但它仍然可以通过使用上面显示的属性方法在 hyperopt 中使用。","position":{"start":{"line":345,"column":1},"end":{"line":345,"column":1}},"key":"epC5Nc5xxC"}],"key":"oxiRr61sIP"},{"type":"code","lang":"python","value":"from pandas import DataFrame\nfrom functools import reduce\n\nimport talib.abstract as ta\n\nfrom freqtrade.strategy import (BooleanParameter, CategoricalParameter, DecimalParameter, \n                                IStrategy, IntParameter)\nimport freqtrade.vendor.qtpylib.indicators as qtpylib\n\nclass MyAwesomeStrategy(IStrategy):\n    stoploss = -0.05\n    timeframe = '15m'\n\n    # 定义参数空间\n    max_epa = CategoricalParameter([-1, 0, 1, 3, 5, 10], default=1, space=\"buy\", optimize=True)\n\n    @property\n    def max_entry_position_adjustment(self):\n        return self.max_epa.value\n        \n\n    def populate_indicators(self, dataframe: DataFrame, metadata: dict) -> DataFrame:\n        # ...","position":{"start":{"line":347,"column":1},"end":{"line":371,"column":1}},"key":"VDjFHu8ZEE"},{"type":"admonition","kind":"tip","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"使用 ","position":{"start":{"line":373,"column":1},"end":{"line":373,"column":1}},"key":"cRYkBNAOsz"},{"type":"inlineCode","value":"IntParameter","position":{"start":{"line":373,"column":1},"end":{"line":373,"column":1}},"key":"beKXTrZjaW"}],"key":"xIFD3yrmnE"},{"type":"paragraph","position":{"start":{"line":374,"column":1},"end":{"line":374,"column":1}},"children":[{"type":"text","value":"您也可以使用 ","position":{"start":{"line":374,"column":1},"end":{"line":374,"column":1}},"key":"pOP8ine4Z6"},{"type":"inlineCode","value":"IntParameter","position":{"start":{"line":374,"column":1},"end":{"line":374,"column":1}},"key":"QBqRFnYscL"},{"type":"text","value":" 进行此优化，但必须显式返回一个整数：","position":{"start":{"line":374,"column":1},"end":{"line":374,"column":1}},"key":"hlH5weNvv8"}],"key":"e5DB59ZLgH"},{"type":"code","lang":"python","value":"max_epa = IntParameter(-1, 10, default=1, space=\"buy\", optimize=True)\n\n@property\ndef max_entry_position_adjustment(self):\n    return int(self.max_epa.value)","position":{"start":{"line":376,"column":1},"end":{"line":382,"column":1}},"key":"tqlM9HXEyk"}],"key":"jkR7NU2KkM"},{"type":"heading","depth":3,"position":{"start":{"line":388,"column":1},"end":{"line":388,"column":1}},"children":[{"type":"text","value":"损失函数","position":{"start":{"line":388,"column":1},"end":{"line":388,"column":1}},"key":"Xf9cgVSgor"}],"label":"loss-functions","identifier":"loss-functions","html_id":"loss-functions","key":"wBYCyVeSsr"},{"type":"paragraph","position":{"start":{"line":390,"column":1},"end":{"line":390,"column":1}},"children":[{"type":"text","value":"每个超参数调优都需要一个目标。这通常被定义为损失函数（有时也称为目标函数），对于更理想的结果应该减小，对于不好的结果应该增加。","position":{"start":{"line":390,"column":1},"end":{"line":390,"column":1}},"key":"r7symVfAyF"}],"key":"HEZLoBTxfi"},{"type":"paragraph","position":{"start":{"line":392,"column":1},"end":{"line":393,"column":1}},"children":[{"type":"text","value":"损失函数必须通过 ","position":{"start":{"line":392,"column":1},"end":{"line":392,"column":1}},"key":"J6nXL0Y8Ic"},{"type":"inlineCode","value":"--hyperopt-loss <Class-name>","position":{"start":{"line":392,"column":1},"end":{"line":392,"column":1}},"key":"SsPhdJ8NBG"},{"type":"text","value":" 参数指定（或可选地通过配置中的 ","position":{"start":{"line":392,"column":1},"end":{"line":392,"column":1}},"key":"rN7IzkWXFu"},{"type":"inlineCode","value":"\"hyperopt_loss\"","position":{"start":{"line":392,"column":1},"end":{"line":392,"column":1}},"key":"VsDAgZKzRw"},{"type":"text","value":" 键）。\n这个类应该位于 ","position":{"start":{"line":392,"column":1},"end":{"line":392,"column":1}},"key":"RhpR0SjyKM"},{"type":"inlineCode","value":"user_data/hyperopts/","position":{"start":{"line":392,"column":1},"end":{"line":392,"column":1}},"key":"gJAI0gs8nq"},{"type":"text","value":" 目录中的自己的文件中。","position":{"start":{"line":392,"column":1},"end":{"line":392,"column":1}},"key":"RuJPXkCTMZ"}],"key":"lPPKTI3LFx"},{"type":"paragraph","position":{"start":{"line":395,"column":1},"end":{"line":395,"column":1}},"children":[{"type":"text","value":"目前，以下损失函数是内置的：","position":{"start":{"line":395,"column":1},"end":{"line":395,"column":1}},"key":"y38BJYTR3r"}],"key":"DpGOeWbMTC"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":397,"column":1},"end":{"line":409,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":397,"column":1},"end":{"line":397,"column":1}},"children":[{"type":"inlineCode","value":"ShortTradeDurHyperOptLoss","position":{"start":{"line":397,"column":1},"end":{"line":397,"column":1}},"key":"n1rCWOniOP"},{"type":"text","value":" - （默认的旧版 Freqtrade 超参优化损失函数）- 主要用于短交易持续时间和避免损失。","position":{"start":{"line":397,"column":1},"end":{"line":397,"column":1}},"key":"H0pqLVQ0e3"}],"key":"WcxoKdB7ow"},{"type":"listItem","spread":true,"position":{"start":{"line":398,"column":1},"end":{"line":398,"column":1}},"children":[{"type":"inlineCode","value":"OnlyProfitHyperOptLoss","position":{"start":{"line":398,"column":1},"end":{"line":398,"column":1}},"key":"hyWQW0qVQt"},{"type":"text","value":" - 只考虑利润金额。","position":{"start":{"line":398,"column":1},"end":{"line":398,"column":1}},"key":"uwUZHpKSUc"}],"key":"O2ThGHrZVU"},{"type":"listItem","spread":true,"position":{"start":{"line":399,"column":1},"end":{"line":399,"column":1}},"children":[{"type":"inlineCode","value":"SharpeHyperOptLoss","position":{"start":{"line":399,"column":1},"end":{"line":399,"column":1}},"key":"m8LKgZRznw"},{"type":"text","value":" - 优化相对于标准差的交易回报的夏普比率。","position":{"start":{"line":399,"column":1},"end":{"line":399,"column":1}},"key":"yETwYOIAEL"}],"key":"ZmhcS7ubiw"},{"type":"listItem","spread":true,"position":{"start":{"line":400,"column":1},"end":{"line":400,"column":1}},"children":[{"type":"inlineCode","value":"SharpeHyperOptLossDaily","position":{"start":{"line":400,"column":1},"end":{"line":400,"column":1}},"key":"THuSVyWgbt"},{"type":"text","value":" - 优化相对于标准差的","position":{"start":{"line":400,"column":1},"end":{"line":400,"column":1}},"key":"v58KVrVE2v"},{"type":"strong","position":{"start":{"line":400,"column":1},"end":{"line":400,"column":1}},"children":[{"type":"text","value":"每日","position":{"start":{"line":400,"column":1},"end":{"line":400,"column":1}},"key":"mFLjv17CXF"}],"key":"JPPHwNU5EE"},{"type":"text","value":"交易回报的夏普比率。","position":{"start":{"line":400,"column":1},"end":{"line":400,"column":1}},"key":"OLkFrPS8wA"}],"key":"u8hGbqDQZW"},{"type":"listItem","spread":true,"position":{"start":{"line":401,"column":1},"end":{"line":401,"column":1}},"children":[{"type":"inlineCode","value":"SortinoHyperOptLoss","position":{"start":{"line":401,"column":1},"end":{"line":401,"column":1}},"key":"YLyNjRHCGo"},{"type":"text","value":" - 优化相对于","position":{"start":{"line":401,"column":1},"end":{"line":401,"column":1}},"key":"Tska88m2z4"},{"type":"strong","position":{"start":{"line":401,"column":1},"end":{"line":401,"column":1}},"children":[{"type":"text","value":"下行","position":{"start":{"line":401,"column":1},"end":{"line":401,"column":1}},"key":"N3FkNkHlkx"}],"key":"dOXUDHjF2g"},{"type":"text","value":"标准差的交易回报的索提诺比率。","position":{"start":{"line":401,"column":1},"end":{"line":401,"column":1}},"key":"eQ9FkmzxDA"}],"key":"Nqkp3SPvXo"},{"type":"listItem","spread":true,"position":{"start":{"line":402,"column":1},"end":{"line":402,"column":1}},"children":[{"type":"inlineCode","value":"SortinoHyperOptLossDaily","position":{"start":{"line":402,"column":1},"end":{"line":402,"column":1}},"key":"akcS5ThkeR"},{"type":"text","value":" - 优化相对于","position":{"start":{"line":402,"column":1},"end":{"line":402,"column":1}},"key":"sPHzazyfmf"},{"type":"strong","position":{"start":{"line":402,"column":1},"end":{"line":402,"column":1}},"children":[{"type":"text","value":"下行","position":{"start":{"line":402,"column":1},"end":{"line":402,"column":1}},"key":"irCuVBzGfv"}],"key":"sG6LB7wAvc"},{"type":"text","value":"标准差的","position":{"start":{"line":402,"column":1},"end":{"line":402,"column":1}},"key":"boiYHJpJ7a"},{"type":"strong","position":{"start":{"line":402,"column":1},"end":{"line":402,"column":1}},"children":[{"type":"text","value":"每日","position":{"start":{"line":402,"column":1},"end":{"line":402,"column":1}},"key":"mg9NWcDl2w"}],"key":"UO2gg0wOwD"},{"type":"text","value":"交易回报的索提诺比率。","position":{"start":{"line":402,"column":1},"end":{"line":402,"column":1}},"key":"BEHliTltmN"}],"key":"Ir7twBMCk8"},{"type":"listItem","spread":true,"position":{"start":{"line":403,"column":1},"end":{"line":403,"column":1}},"children":[{"type":"inlineCode","value":"MaxDrawDownHyperOptLoss","position":{"start":{"line":403,"column":1},"end":{"line":403,"column":1}},"key":"oRhNg5ajwo"},{"type":"text","value":" - 优化最大绝对回撤。","position":{"start":{"line":403,"column":1},"end":{"line":403,"column":1}},"key":"AyAHh4Cx9c"}],"key":"F5tBKme1Rt"},{"type":"listItem","spread":true,"position":{"start":{"line":404,"column":1},"end":{"line":404,"column":1}},"children":[{"type":"inlineCode","value":"MaxDrawDownRelativeHyperOptLoss","position":{"start":{"line":404,"column":1},"end":{"line":404,"column":1}},"key":"cVggBoqP8W"},{"type":"text","value":" - 优化最大绝对回撤，同时调整最大相对回撤。","position":{"start":{"line":404,"column":1},"end":{"line":404,"column":1}},"key":"YLBwIRgPNU"}],"key":"wF5B9ZgQjR"},{"type":"listItem","spread":true,"position":{"start":{"line":405,"column":1},"end":{"line":405,"column":1}},"children":[{"type":"inlineCode","value":"MaxDrawDownPerPairHyperOptLoss","position":{"start":{"line":405,"column":1},"end":{"line":405,"column":1}},"key":"qkn0cRp4zu"},{"type":"text","value":" - 计算每对交易对的利润/回撤比率，并返回最差结果作为目标，强制 hyperopt 优化交易对列表中所有交易对的参数。这样，我们防止一个或多个具有良好结果的交易对夸大指标，而表现不佳的交易对不被表示，因此不被优化。","position":{"start":{"line":405,"column":1},"end":{"line":405,"column":1}},"key":"mWmdg6U9RM"}],"key":"K1TIrZGCbd"},{"type":"listItem","spread":true,"position":{"start":{"line":406,"column":1},"end":{"line":406,"column":1}},"children":[{"type":"inlineCode","value":"CalmarHyperOptLoss","position":{"start":{"line":406,"column":1},"end":{"line":406,"column":1}},"key":"HAteWg75A8"},{"type":"text","value":" - 优化相对于最大回撤的交易回报的卡玛比率。","position":{"start":{"line":406,"column":1},"end":{"line":406,"column":1}},"key":"VTvhZ7qCDm"}],"key":"Uq8fwkE468"},{"type":"listItem","spread":true,"position":{"start":{"line":407,"column":1},"end":{"line":407,"column":1}},"children":[{"type":"inlineCode","value":"ProfitDrawDownHyperOptLoss","position":{"start":{"line":407,"column":1},"end":{"line":407,"column":1}},"key":"J9Av1YJIWm"},{"type":"text","value":" - 通过最大利润和最小回撤目标进行优化。可以在 hyperoptloss 文件中调整 ","position":{"start":{"line":407,"column":1},"end":{"line":407,"column":1}},"key":"yIaHeeKmJn"},{"type":"inlineCode","value":"DRAWDOWN_MULT","position":{"start":{"line":407,"column":1},"end":{"line":407,"column":1}},"key":"huvNfU69jn"},{"type":"text","value":" 变量，以在回撤目的上更严格或更灵活。","position":{"start":{"line":407,"column":1},"end":{"line":407,"column":1}},"key":"rNzjZaGKd7"}],"key":"FyMamjevI7"},{"type":"listItem","spread":true,"position":{"start":{"line":408,"column":1},"end":{"line":409,"column":1}},"children":[{"type":"inlineCode","value":"MultiMetricHyperOptLoss","position":{"start":{"line":408,"column":1},"end":{"line":408,"column":1}},"key":"v0U6WvogAa"},{"type":"text","value":" - 通过几个关键指标进行优化，以实现平衡的性能。主要重点是最大化利润和最小化回撤，同时还考虑其他指标，如利润因子、期望比率和胜率。此外，它对交易次数少的 epoch 应用惩罚，鼓励具有足够交易频率的策略。","position":{"start":{"line":408,"column":1},"end":{"line":408,"column":1}},"key":"D6bPv5G2m7"}],"key":"sZiYmbp4lF"}],"key":"jx9ygSBawQ"},{"type":"paragraph","position":{"start":{"line":410,"column":1},"end":{"line":410,"column":1}},"children":[{"type":"text","value":"创建自定义损失函数在文档的","position":{"start":{"line":410,"column":1},"end":{"line":410,"column":1}},"key":"SJjcUkDmXY"},{"type":"link","url":"/advanced-hyperopt","position":{"start":{"line":410,"column":1},"end":{"line":410,"column":1}},"children":[{"type":"text","value":"高级 Hyperopt","position":{"start":{"line":410,"column":1},"end":{"line":410,"column":1}},"key":"Om22j82TKe"}],"urlSource":"advanced-hyperopt.md","dataUrl":"/advanced-hyperopt.json","internal":true,"protocol":"file","key":"ynf4S5WPvt"},{"type":"text","value":" 部分中介绍。","position":{"start":{"line":410,"column":1},"end":{"line":410,"column":1}},"key":"pad1c6PhEl"}],"key":"sRtUiVKCRc"},{"type":"heading","depth":3,"position":{"start":{"line":412,"column":1},"end":{"line":412,"column":1}},"children":[{"type":"text","value":"执行 Hyperopt","position":{"start":{"line":412,"column":1},"end":{"line":412,"column":1}},"key":"C3bgQ4SZVl"}],"identifier":"id-hyperopt","label":"执行 Hyperopt","html_id":"id-hyperopt-1","implicit":true,"key":"eBrntgT20r"},{"type":"paragraph","position":{"start":{"line":414,"column":1},"end":{"line":415,"column":1}},"children":[{"type":"text","value":"一旦您更新了 hyperopt 配置，您就可以运行它。\n因为 hyperopt 尝试很多组合来找到最佳参数，所以需要时间才能获得好的结果。","position":{"start":{"line":414,"column":1},"end":{"line":414,"column":1}},"key":"x9Kb72WII1"}],"key":"VN93NRzR8i"},{"type":"paragraph","position":{"start":{"line":417,"column":1},"end":{"line":417,"column":1}},"children":[{"type":"text","value":"我们强烈建议使用 ","position":{"start":{"line":417,"column":1},"end":{"line":417,"column":1}},"key":"oRWx5IRpOM"},{"type":"inlineCode","value":"screen","position":{"start":{"line":417,"column":1},"end":{"line":417,"column":1}},"key":"YUkDq2LCzv"},{"type":"text","value":" 或 ","position":{"start":{"line":417,"column":1},"end":{"line":417,"column":1}},"key":"xa4G2gEcGS"},{"type":"inlineCode","value":"tmux","position":{"start":{"line":417,"column":1},"end":{"line":417,"column":1}},"key":"cgYPqDW9y3"},{"type":"text","value":" 来防止任何连接丢失。","position":{"start":{"line":417,"column":1},"end":{"line":417,"column":1}},"key":"jPRj0RTQVD"}],"key":"El374P6DEV"},{"type":"code","lang":"bash","value":"freqtrade hyperopt --config config.json --hyperopt-loss <hyperoptlossname> --strategy <strategyname> -e 500 --spaces all","position":{"start":{"line":419,"column":1},"end":{"line":421,"column":1}},"key":"N4YMxpT7Wb"},{"type":"paragraph","position":{"start":{"line":423,"column":1},"end":{"line":424,"column":1}},"children":[{"type":"inlineCode","value":"-e","position":{"start":{"line":423,"column":1},"end":{"line":423,"column":1}},"key":"tDqq0f6YmF"},{"type":"text","value":" 选项将设置 hyperopt 将进行多少次评估。由于 hyperopt 使用贝叶斯搜索，一次运行太多 epoch 可能不会产生更好的结果。经验表明，最佳结果通常在 500-1000 epoch 后不会有太大改善。","position":{"start":{"line":423,"column":1},"end":{"line":423,"column":1}},"key":"U2RDSfo67F"},{"type":"break","position":{"start":{"line":423,"column":1},"end":{"line":423,"column":1}},"key":"WO8kTVuXGo"},{"type":"text","value":"使用不同的随机状态进行多次运行（执行），每次运行几百个 epoch，很可能会产生不同的结果。","position":{"start":{"line":423,"column":1},"end":{"line":423,"column":1}},"key":"s56QhHsydK"}],"key":"OyQLjtj798"},{"type":"paragraph","position":{"start":{"line":426,"column":1},"end":{"line":426,"column":1}},"children":[{"type":"inlineCode","value":"--spaces all","position":{"start":{"line":426,"column":1},"end":{"line":426,"column":1}},"key":"cdnX1YYmxX"},{"type":"text","value":" 选项确定应该优化所有可能的参数。可能性如下所示。","position":{"start":{"line":426,"column":1},"end":{"line":426,"column":1}},"key":"hKAW7Thxaj"}],"key":"NTmdUq0lmJ"},{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Note","key":"IPVyesKYvJ"}],"key":"bS2zjhbp6F"},{"type":"paragraph","position":{"start":{"line":429,"column":1},"end":{"line":431,"column":1}},"children":[{"type":"text","value":"Hyperopt 将使用 hyperopt 开始时间的时间戳存储 hyperopt 结果。\n读取命令（","position":{"start":{"line":429,"column":1},"end":{"line":429,"column":1}},"key":"Z7XLcjCkDu"},{"type":"inlineCode","value":"hyperopt-list","position":{"start":{"line":429,"column":1},"end":{"line":429,"column":1}},"key":"vWj8hcEJcG"},{"type":"text","value":"、","position":{"start":{"line":429,"column":1},"end":{"line":429,"column":1}},"key":"DiHpP7uaMc"},{"type":"inlineCode","value":"hyperopt-show","position":{"start":{"line":429,"column":1},"end":{"line":429,"column":1}},"key":"GaAQPCHgxT"},{"type":"text","value":"）可以使用 ","position":{"start":{"line":429,"column":1},"end":{"line":429,"column":1}},"key":"stKkbiX8bM"},{"type":"inlineCode","value":"--hyperopt-filename <filename>","position":{"start":{"line":429,"column":1},"end":{"line":429,"column":1}},"key":"G2alU16WIh"},{"type":"text","value":" 来读取和显示较旧的 hyperopt 结果。\n您可以使用 ","position":{"start":{"line":429,"column":1},"end":{"line":429,"column":1}},"key":"V5hywEcEBP"},{"type":"inlineCode","value":"ls -l user_data/hyperopt_results/","position":{"start":{"line":429,"column":1},"end":{"line":429,"column":1}},"key":"W8JiVHUKrT"},{"type":"text","value":" 找到文件名列表。","position":{"start":{"line":429,"column":1},"end":{"line":429,"column":1}},"key":"f0ipHXy4gW"}],"key":"zuno4IvQb3"}],"key":"wguOGGtYk4"},{"type":"heading","depth":4,"position":{"start":{"line":434,"column":1},"end":{"line":434,"column":1}},"children":[{"type":"text","value":"使用不同的历史数据源执行 Hyperopt","position":{"start":{"line":434,"column":1},"end":{"line":434,"column":1}},"key":"WOrRDzOyap"}],"identifier":"id-hyperopt","label":"使用不同的历史数据源执行 Hyperopt","html_id":"id-hyperopt-2","implicit":true,"key":"aRoPHuinJ5"},{"type":"paragraph","position":{"start":{"line":436,"column":1},"end":{"line":437,"column":1}},"children":[{"type":"text","value":"如果您想使用磁盘上的替代历史数据集来超参优化参数，\n请使用 ","position":{"start":{"line":436,"column":1},"end":{"line":436,"column":1}},"key":"IWNdvFctg2"},{"type":"inlineCode","value":"--datadir PATH","position":{"start":{"line":436,"column":1},"end":{"line":436,"column":1}},"key":"VTNH22yFU8"},{"type":"text","value":" 选项。默认情况下，hyperopt 使用 ","position":{"start":{"line":436,"column":1},"end":{"line":436,"column":1}},"key":"IdugJbaQuX"},{"type":"inlineCode","value":"user_data/data","position":{"start":{"line":436,"column":1},"end":{"line":436,"column":1}},"key":"qbC3CTnVvz"},{"type":"text","value":" 目录中的数据。","position":{"start":{"line":436,"column":1},"end":{"line":436,"column":1}},"key":"FyLLz7ojae"}],"key":"JVOs7eueDY"},{"type":"heading","depth":4,"position":{"start":{"line":439,"column":1},"end":{"line":439,"column":1}},"children":[{"type":"text","value":"使用较小的测试集运行 Hyperopt","position":{"start":{"line":439,"column":1},"end":{"line":439,"column":1}},"key":"QFOjmCEfdl"}],"identifier":"id-hyperopt","label":"使用较小的测试集运行 Hyperopt","html_id":"id-hyperopt-3","implicit":true,"key":"ziAeLFGPK3"},{"type":"paragraph","position":{"start":{"line":441,"column":1},"end":{"line":442,"column":1}},"children":[{"type":"text","value":"使用 ","position":{"start":{"line":441,"column":1},"end":{"line":441,"column":1}},"key":"Bu3eDcfXUA"},{"type":"inlineCode","value":"--timerange","position":{"start":{"line":441,"column":1},"end":{"line":441,"column":1}},"key":"kEIQDfy1yU"},{"type":"text","value":" 参数来更改您想要使用的测试集数量。\n例如，要使用一个月的数据，将 ","position":{"start":{"line":441,"column":1},"end":{"line":441,"column":1}},"key":"prGtkIhFXZ"},{"type":"inlineCode","value":"--timerange 20210101-20210201","position":{"start":{"line":441,"column":1},"end":{"line":441,"column":1}},"key":"jzcSniHov0"},{"type":"text","value":"（从 2021 年 1 月到 2021 年 2 月）传递给 hyperopt 调用。","position":{"start":{"line":441,"column":1},"end":{"line":441,"column":1}},"key":"OthkwP80ub"}],"key":"uO575zuL0B"},{"type":"paragraph","position":{"start":{"line":444,"column":1},"end":{"line":444,"column":1}},"children":[{"type":"text","value":"完整命令：","position":{"start":{"line":444,"column":1},"end":{"line":444,"column":1}},"key":"xeoVwzq2Jy"}],"key":"WSNP8vUrm3"},{"type":"code","lang":"bash","value":"freqtrade hyperopt --strategy <strategyname> --timerange 20210101-20210201","position":{"start":{"line":446,"column":1},"end":{"line":448,"column":1}},"key":"cwfeKiU59s"},{"type":"heading","depth":4,"position":{"start":{"line":450,"column":1},"end":{"line":450,"column":1}},"children":[{"type":"text","value":"使用较小的搜索空间运行 Hyperopt","position":{"start":{"line":450,"column":1},"end":{"line":450,"column":1}},"key":"t9VbPj6ah1"}],"identifier":"id-hyperopt","label":"使用较小的搜索空间运行 Hyperopt","html_id":"id-hyperopt-4","implicit":true,"key":"QNvNK5i4IS"},{"type":"paragraph","position":{"start":{"line":452,"column":1},"end":{"line":455,"column":1}},"children":[{"type":"text","value":"使用 ","position":{"start":{"line":452,"column":1},"end":{"line":452,"column":1}},"key":"VBBaHX6lct"},{"type":"inlineCode","value":"--spaces","position":{"start":{"line":452,"column":1},"end":{"line":452,"column":1}},"key":"D9LuQJKagq"},{"type":"text","value":" 选项来限制 hyperopt 使用的搜索空间。\n让 Hyperopt 优化所有内容是一个巨大的搜索空间。\n通常，从只搜索初始买入算法开始可能更有意义。\n或者，也许您只想为您拥有的那个很棒的新买入策略优化止损或 roi 表。","position":{"start":{"line":452,"column":1},"end":{"line":452,"column":1}},"key":"a2azDS7TF0"}],"key":"NtspK5Z80J"},{"type":"paragraph","position":{"start":{"line":457,"column":1},"end":{"line":457,"column":1}},"children":[{"type":"text","value":"合法值是：","position":{"start":{"line":457,"column":1},"end":{"line":457,"column":1}},"key":"fhXVYFZhfM"}],"key":"hX483zPagU"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":459,"column":1},"end":{"line":469,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":459,"column":1},"end":{"line":459,"column":1}},"children":[{"type":"inlineCode","value":"all","position":{"start":{"line":459,"column":1},"end":{"line":459,"column":1}},"key":"LLonspEt6b"},{"type":"text","value":"：优化所有内容","position":{"start":{"line":459,"column":1},"end":{"line":459,"column":1}},"key":"gfMrqilSTm"}],"key":"usmtls25UH"},{"type":"listItem","spread":true,"position":{"start":{"line":460,"column":1},"end":{"line":460,"column":1}},"children":[{"type":"inlineCode","value":"buy","position":{"start":{"line":460,"column":1},"end":{"line":460,"column":1}},"key":"bgbDdjbbg0"},{"type":"text","value":"：只搜索新的买入策略","position":{"start":{"line":460,"column":1},"end":{"line":460,"column":1}},"key":"N0KOpTH1eB"}],"key":"uZtxvWPGYN"},{"type":"listItem","spread":true,"position":{"start":{"line":461,"column":1},"end":{"line":461,"column":1}},"children":[{"type":"inlineCode","value":"sell","position":{"start":{"line":461,"column":1},"end":{"line":461,"column":1}},"key":"LYdFt77Caj"},{"type":"text","value":"：只搜索新的卖出策略","position":{"start":{"line":461,"column":1},"end":{"line":461,"column":1}},"key":"dPclMnwpl0"}],"key":"ciQE2ZQnB2"},{"type":"listItem","spread":true,"position":{"start":{"line":462,"column":1},"end":{"line":462,"column":1}},"children":[{"type":"inlineCode","value":"roi","position":{"start":{"line":462,"column":1},"end":{"line":462,"column":1}},"key":"RpyS99W8z3"},{"type":"text","value":"：只为您的策略优化最小利润表","position":{"start":{"line":462,"column":1},"end":{"line":462,"column":1}},"key":"MIuPDhGn3i"}],"key":"E93O3EcBGI"},{"type":"listItem","spread":true,"position":{"start":{"line":463,"column":1},"end":{"line":463,"column":1}},"children":[{"type":"inlineCode","value":"stoploss","position":{"start":{"line":463,"column":1},"end":{"line":463,"column":1}},"key":"Q1d4qs74Kx"},{"type":"text","value":"：搜索最佳止损值","position":{"start":{"line":463,"column":1},"end":{"line":463,"column":1}},"key":"UXgX0c8z0p"}],"key":"iTKUM1s2QQ"},{"type":"listItem","spread":true,"position":{"start":{"line":464,"column":1},"end":{"line":464,"column":1}},"children":[{"type":"inlineCode","value":"trailing","position":{"start":{"line":464,"column":1},"end":{"line":464,"column":1}},"key":"MCpUtJ020U"},{"type":"text","value":"：搜索最佳追踪止损值","position":{"start":{"line":464,"column":1},"end":{"line":464,"column":1}},"key":"pTk4gByGCq"}],"key":"Z82ew1z6P7"},{"type":"listItem","spread":true,"position":{"start":{"line":465,"column":1},"end":{"line":465,"column":1}},"children":[{"type":"inlineCode","value":"trades","position":{"start":{"line":465,"column":1},"end":{"line":465,"column":1}},"key":"tFZxX2gDLc"},{"type":"text","value":"：搜索最佳最大开放交易值","position":{"start":{"line":465,"column":1},"end":{"line":465,"column":1}},"key":"T5RxgFbiIu"}],"key":"psc6LImrWT"},{"type":"listItem","spread":true,"position":{"start":{"line":466,"column":1},"end":{"line":466,"column":1}},"children":[{"type":"inlineCode","value":"protection","position":{"start":{"line":466,"column":1},"end":{"line":466,"column":1}},"key":"oWcHk8JTl3"},{"type":"text","value":"：搜索最佳保护参数（阅读","position":{"start":{"line":466,"column":1},"end":{"line":466,"column":1}},"key":"TLyNTGmAMs"},{"type":"crossReference","position":{"start":{"line":466,"column":1},"end":{"line":466,"column":1}},"children":[{"type":"text","value":"保护部分","position":{"start":{"line":466,"column":1},"end":{"line":466,"column":1}},"key":"maZUBcn4cv"}],"identifier":"optimizing-protections","label":"optimizing-protections","kind":"heading","template":"{name}","resolved":true,"html_id":"optimizing-protections","key":"zQj1hLCtXo"},{"type":"text","value":"了解如何正确定义这些）","position":{"start":{"line":466,"column":1},"end":{"line":466,"column":1}},"key":"TYTylAzwCL"}],"key":"zsYGaaR9wl"},{"type":"listItem","spread":true,"position":{"start":{"line":467,"column":1},"end":{"line":467,"column":1}},"children":[{"type":"inlineCode","value":"default","position":{"start":{"line":467,"column":1},"end":{"line":467,"column":1}},"key":"k9hrXuq0Xn"},{"type":"text","value":"：","position":{"start":{"line":467,"column":1},"end":{"line":467,"column":1}},"key":"O1kW87KCRB"},{"type":"inlineCode","value":"all","position":{"start":{"line":467,"column":1},"end":{"line":467,"column":1}},"key":"sw8qayQl8h"},{"type":"text","value":" 除了 ","position":{"start":{"line":467,"column":1},"end":{"line":467,"column":1}},"key":"LgyVGAG6Ho"},{"type":"inlineCode","value":"trailing","position":{"start":{"line":467,"column":1},"end":{"line":467,"column":1}},"key":"b2Ah494wPP"},{"type":"text","value":" 和 ","position":{"start":{"line":467,"column":1},"end":{"line":467,"column":1}},"key":"DshjuC7opy"},{"type":"inlineCode","value":"protection","position":{"start":{"line":467,"column":1},"end":{"line":467,"column":1}},"key":"Q9uaNRlZJI"}],"key":"Ob8tuZTLh8"},{"type":"listItem","spread":true,"position":{"start":{"line":468,"column":1},"end":{"line":469,"column":1}},"children":[{"type":"text","value":"任何上述值的空格分隔列表，例如 ","position":{"start":{"line":468,"column":1},"end":{"line":468,"column":1}},"key":"ffe9ynaFLM"},{"type":"inlineCode","value":"--spaces roi stoploss","position":{"start":{"line":468,"column":1},"end":{"line":468,"column":1}},"key":"gvJsq6j34N"}],"key":"h4zKgQtSGO"}],"key":"q0Od3JUYn7"},{"type":"paragraph","position":{"start":{"line":470,"column":1},"end":{"line":470,"column":1}},"children":[{"type":"text","value":"当未指定 ","position":{"start":{"line":470,"column":1},"end":{"line":470,"column":1}},"key":"UXONIV1TuL"},{"type":"inlineCode","value":"--space","position":{"start":{"line":470,"column":1},"end":{"line":470,"column":1}},"key":"WlRo9gFeHy"},{"type":"text","value":" 命令行选项时使用的默认 Hyperopt 搜索空间不包括 ","position":{"start":{"line":470,"column":1},"end":{"line":470,"column":1}},"key":"tx1FLSWqZu"},{"type":"inlineCode","value":"trailing","position":{"start":{"line":470,"column":1},"end":{"line":470,"column":1}},"key":"M3nlC1mwjh"},{"type":"text","value":" 超空间。我们建议您在找到、验证并将其他超空间的最佳参数粘贴到您的自定义策略中后，单独运行 ","position":{"start":{"line":470,"column":1},"end":{"line":470,"column":1}},"key":"sMxqJRvX9F"},{"type":"inlineCode","value":"trailing","position":{"start":{"line":470,"column":1},"end":{"line":470,"column":1}},"key":"zP7qktE5IV"},{"type":"text","value":" 超空间的优化。","position":{"start":{"line":470,"column":1},"end":{"line":470,"column":1}},"key":"x9WjYulVaT"}],"key":"JrcprMTfku"},{"type":"heading","depth":3,"position":{"start":{"line":472,"column":1},"end":{"line":472,"column":1}},"children":[{"type":"text","value":"理解 Hyperopt 结果","position":{"start":{"line":472,"column":1},"end":{"line":472,"column":1}},"key":"sSQU8GykQJ"}],"identifier":"id-hyperopt","label":"理解 Hyperopt 结果","html_id":"id-hyperopt-5","implicit":true,"key":"DlmEzu3JKI"},{"type":"paragraph","position":{"start":{"line":474,"column":1},"end":{"line":475,"column":1}},"children":[{"type":"text","value":"一旦 Hyperopt 完成，您可以使用结果来更新您的策略。\n给定以下结果来自 hyperopt：","position":{"start":{"line":474,"column":1},"end":{"line":474,"column":1}},"key":"ua6pqWWq6k"}],"key":"jg4KpAVNdQ"},{"type":"code","lang":"text","value":"Best result:\n\n    44/100:    135 trades. Avg profit  0.57%. Total profit  0.03871918 BTC (0.7722%). Avg duration 180:34 min. Objective: 1.94367\n\nBuy hyperspace params:\n{\n    'buy_adx': 44,\n    'buy_adx_enabled': False,\n    'buy_rsi': 29,\n    'buy_rsi_enabled': True,\n    'buy_trigger': 'bb_lower'\n}","position":{"start":{"line":477,"column":1},"end":{"line":490,"column":1}},"key":"sYCDIQfKOx"},{"type":"paragraph","position":{"start":{"line":492,"column":1},"end":{"line":492,"column":1}},"children":[{"type":"text","value":"您应该理解这个结果如下：","position":{"start":{"line":492,"column":1},"end":{"line":492,"column":1}},"key":"bBBFxOWRYr"}],"key":"ms6jRUNA7s"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":494,"column":1},"end":{"line":497,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":494,"column":1},"end":{"line":494,"column":1}},"children":[{"type":"text","value":"最好的买入触发器是 ","position":{"start":{"line":494,"column":1},"end":{"line":494,"column":1}},"key":"SePI3lfLCZ"},{"type":"inlineCode","value":"bb_lower","position":{"start":{"line":494,"column":1},"end":{"line":494,"column":1}},"key":"p04YbIgFgV"},{"type":"text","value":"。","position":{"start":{"line":494,"column":1},"end":{"line":494,"column":1}},"key":"CBP9FRZ9QW"}],"key":"V3pix5LpNE"},{"type":"listItem","spread":true,"position":{"start":{"line":495,"column":1},"end":{"line":495,"column":1}},"children":[{"type":"text","value":"您不应该使用 ADX，因为 ","position":{"start":{"line":495,"column":1},"end":{"line":495,"column":1}},"key":"SAVg9CgyVc"},{"type":"inlineCode","value":"'buy_adx_enabled': False","position":{"start":{"line":495,"column":1},"end":{"line":495,"column":1}},"key":"ILzZUpNOmk"},{"type":"text","value":"。","position":{"start":{"line":495,"column":1},"end":{"line":495,"column":1}},"key":"kEdvdZf9xk"}],"key":"BathRcho5X"},{"type":"listItem","spread":true,"position":{"start":{"line":496,"column":1},"end":{"line":497,"column":1}},"children":[{"type":"text","value":"您应该","position":{"start":{"line":496,"column":1},"end":{"line":496,"column":1}},"key":"vLupnIbZpY"},{"type":"strong","position":{"start":{"line":496,"column":1},"end":{"line":496,"column":1}},"children":[{"type":"text","value":"考虑","position":{"start":{"line":496,"column":1},"end":{"line":496,"column":1}},"key":"grSn2oxIXX"}],"key":"KktN7qxUOh"},{"type":"text","value":"使用 RSI 指标 (","position":{"start":{"line":496,"column":1},"end":{"line":496,"column":1}},"key":"NMCCX2WCaj"},{"type":"inlineCode","value":"'buy_rsi_enabled': True","position":{"start":{"line":496,"column":1},"end":{"line":496,"column":1}},"key":"fVLC373rBq"},{"type":"text","value":") 并且最好的值是 ","position":{"start":{"line":496,"column":1},"end":{"line":496,"column":1}},"key":"hhlNC4rGI0"},{"type":"inlineCode","value":"29.0","position":{"start":{"line":496,"column":1},"end":{"line":496,"column":1}},"key":"Ffh3f0yyrl"},{"type":"text","value":" (","position":{"start":{"line":496,"column":1},"end":{"line":496,"column":1}},"key":"IJ7uw0de2Q"},{"type":"inlineCode","value":"'buy_rsi': 29.0","position":{"start":{"line":496,"column":1},"end":{"line":496,"column":1}},"key":"EiBwBMh9Xe"},{"type":"text","value":")","position":{"start":{"line":496,"column":1},"end":{"line":496,"column":1}},"key":"YHsqPpFYUC"}],"key":"cTIBeMprHk"}],"key":"ZJrkyVn9sB"},{"type":"heading","depth":4,"position":{"start":{"line":498,"column":1},"end":{"line":498,"column":1}},"children":[{"type":"text","value":"自动参数应用到策略","position":{"start":{"line":498,"column":1},"end":{"line":498,"column":1}},"key":"SvQz6Jt9sy"}],"identifier":"id","label":"自动参数应用到策略","html_id":"id-5","implicit":true,"key":"eaUuAvxP0c"},{"type":"paragraph","position":{"start":{"line":500,"column":1},"end":{"line":501,"column":1}},"children":[{"type":"text","value":"当使用 Hyperoptable 参数时，您的 hyperopt-run 结果将写入策略旁边的 json 文件（所以对于 ","position":{"start":{"line":500,"column":1},"end":{"line":500,"column":1}},"key":"OviAe7LFqq"},{"type":"inlineCode","value":"MyAwesomeStrategy.py","position":{"start":{"line":500,"column":1},"end":{"line":500,"column":1}},"key":"qrARKZ4Is4"},{"type":"text","value":"，文件将是 ","position":{"start":{"line":500,"column":1},"end":{"line":500,"column":1}},"key":"aSH12slVRa"},{"type":"inlineCode","value":"MyAwesomeStrategy.json","position":{"start":{"line":500,"column":1},"end":{"line":500,"column":1}},"key":"OnDWc8QuQJ"},{"type":"text","value":"）。","position":{"start":{"line":500,"column":1},"end":{"line":500,"column":1}},"key":"m1pT2Dqacu"},{"type":"break","position":{"start":{"line":500,"column":1},"end":{"line":500,"column":1}},"key":"l3dZS5Td7z"},{"type":"text","value":"如果使用 ","position":{"start":{"line":500,"column":1},"end":{"line":500,"column":1}},"key":"cpM4iscxPY"},{"type":"inlineCode","value":"hyperopt-show","position":{"start":{"line":500,"column":1},"end":{"line":500,"column":1}},"key":"jzWAvUPraX"},{"type":"text","value":" 子命令，除非 ","position":{"start":{"line":500,"column":1},"end":{"line":500,"column":1}},"key":"tpINHrFpaB"},{"type":"inlineCode","value":"--disable-param-export","position":{"start":{"line":500,"column":1},"end":{"line":500,"column":1}},"key":"SIfqZWRlbz"},{"type":"text","value":" 提供给两个命令中的任何一个，否则也会更新此文件。","position":{"start":{"line":500,"column":1},"end":{"line":500,"column":1}},"key":"isjaFHzsLO"}],"key":"qeABmWogdr"},{"type":"paragraph","position":{"start":{"line":503,"column":1},"end":{"line":503,"column":1}},"children":[{"type":"text","value":"您的策略类也可以包含这些结果明确。只需复制 hyperopt 结果块并将其粘贴到类级别，替换旧参数（如果有）。新参数将自动在下一次策略执行时加载。","position":{"start":{"line":503,"column":1},"end":{"line":503,"column":1}},"key":"XR1YR5qZd3"}],"key":"BehYl8Icdx"},{"type":"paragraph","position":{"start":{"line":505,"column":1},"end":{"line":505,"column":1}},"children":[{"type":"text","value":"将整个 hyperopt 结果传输到您的策略将如下所示：","position":{"start":{"line":505,"column":1},"end":{"line":505,"column":1}},"key":"tcJsz4g5mY"}],"key":"RXwstWoql3"},{"type":"code","lang":"python","value":"class MyAwesomeStrategy(IStrategy):\n    # 最佳参数\n    buy_rsi = IntParameter(20, 40, default=30, space=\"buy\", optimize=True)\n    buy_rsi_enabled = CategoricalParameter([True, False], default=True, space=\"buy\", optimize=True)\n    buy_trigger = CategoricalParameter([\"bb_lower\", \"macd_cross_signal\", \"sar_reversal\"], default=\"bb_lower\", space=\"buy\", optimize=True)\n    buy_adx = IntParameter(20, 50, default=30, space=\"buy\", optimize=True)\n    buy_adx_enabled = CategoricalParameter([True, False], default=True, space=\"buy\", optimize=True)\n\n    # 最佳结果\n    # 买入参数\n    buy_params = {\n        'buy_adx': 44,\n        'buy_adx_enabled': False,\n        'buy_rsi': 29,\n        'buy_rsi_enabled': True,\n        'buy_trigger': 'bb_lower'\n    }","position":{"start":{"line":507,"column":1},"end":{"line":525,"column":1}},"key":"O5zD4z9vhR"},{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Note","key":"wl4agIDa1A"}],"key":"MlwdbVzumG"},{"type":"paragraph","position":{"start":{"line":528,"column":1},"end":{"line":529,"column":1}},"children":[{"type":"text","value":"配置文件中的值将覆盖参数文件级别的参数 - 两者都将覆盖策略中的参数。\n因此优先级是：config > parameter file > strategy ","position":{"start":{"line":528,"column":1},"end":{"line":528,"column":1}},"key":"gQlPEQBTzR"},{"type":"inlineCode","value":"*_params","position":{"start":{"line":528,"column":1},"end":{"line":528,"column":1}},"key":"C5iQwHUOzi"},{"type":"text","value":" > parameter default","position":{"start":{"line":528,"column":1},"end":{"line":528,"column":1}},"key":"MVmlH7Ddjn"}],"key":"LIxaNd4P1L"}],"key":"CxYyD29PB1"},{"type":"heading","depth":4,"position":{"start":{"line":532,"column":1},"end":{"line":532,"column":1}},"children":[{"type":"text","value":"理解 Hyperopt ROI 结果","position":{"start":{"line":532,"column":1},"end":{"line":532,"column":1}},"key":"QwnD9uL2qe"}],"identifier":"id-hyperopt-roi","label":"理解 Hyperopt ROI 结果","html_id":"id-hyperopt-roi","implicit":true,"key":"ZNCRF7NAjm"},{"type":"paragraph","position":{"start":{"line":534,"column":1},"end":{"line":534,"column":1}},"children":[{"type":"text","value":"如果您正在优化 ROI（即如果优化搜索空间包含 ‘all’、‘default’ 或 ‘roi’），您的结果将如下所示并包括 ROI 表：","position":{"start":{"line":534,"column":1},"end":{"line":534,"column":1}},"key":"gvUC1Ngu9G"}],"key":"Cgmvvgru9O"},{"type":"code","lang":"text","value":"Best result:\n\n    44/100:    135 trades. Avg profit  0.57%. Total profit  0.03871918 BTC (0.7722%). Avg duration 180:34 min. Objective: 1.94367\n\nROI table:\n{\n    0: 0.106,\n    10: 0.079,\n    20: 0.053,\n    30: 0.027\n}","position":{"start":{"line":536,"column":1},"end":{"line":548,"column":1}},"key":"PLDDr9rMkw"},{"type":"paragraph","position":{"start":{"line":550,"column":1},"end":{"line":550,"column":1}},"children":[{"type":"text","value":"为了在回测和实时交易/干运行中使用这个最佳 ROI 表，复制并粘贴它作为自定义策略的 ","position":{"start":{"line":550,"column":1},"end":{"line":550,"column":1}},"key":"b0UGIMdaYZ"},{"type":"inlineCode","value":"minimal_roi","position":{"start":{"line":550,"column":1},"end":{"line":550,"column":1}},"key":"ZIT3EpmLC0"},{"type":"text","value":" 属性值：","position":{"start":{"line":550,"column":1},"end":{"line":550,"column":1}},"key":"KPxkHWX5Hu"}],"key":"dAtu2sLeT0"},{"type":"code","lang":"python","value":"    # 最佳 ROI 表\n    minimal_roi = {\n        \"0\":  0.106,\n        \"10\": 0.079,\n        \"20\": 0.053,\n        \"30\": 0.027\n    }","position":{"start":{"line":552,"column":1},"end":{"line":560,"column":1}},"key":"bIqzZg90gF"},{"type":"paragraph","position":{"start":{"line":562,"column":1},"end":{"line":562,"column":1}},"children":[{"type":"text","value":"如评论中所述，您也可以将其用作配置文件中的 ","position":{"start":{"line":562,"column":1},"end":{"line":562,"column":1}},"key":"VnKTGxqoNH"},{"type":"inlineCode","value":"minimal_roi","position":{"start":{"line":562,"column":1},"end":{"line":562,"column":1}},"key":"sJInGFTZqH"},{"type":"text","value":" 设置值。","position":{"start":{"line":562,"column":1},"end":{"line":562,"column":1}},"key":"Flc3cZY7Vs"}],"key":"SgozTENxLO"},{"type":"heading","depth":5,"position":{"start":{"line":564,"column":1},"end":{"line":564,"column":1}},"children":[{"type":"text","value":"默认 ROI 搜索空间","position":{"start":{"line":564,"column":1},"end":{"line":564,"column":1}},"key":"w2Kybr15vK"}],"identifier":"id-roi","label":"默认 ROI 搜索空间","html_id":"id-roi","implicit":true,"key":"tL1o5ADh5P"},{"type":"paragraph","position":{"start":{"line":566,"column":1},"end":{"line":566,"column":1}},"children":[{"type":"text","value":"如果您正在优化 ROI，Freqtrade 为您创建了 ‘roi’ 优化超空间——它是 ROI 表组件的超空间。默认情况下，每个由 Freqtrade 生成的 ROI 表包含 4 行（步骤）。Hyperopt 实现了自适应范围，用于 ROI 表中的值，这些值取决于使用的时间框架。默认情况下，值在以下范围内变化（对于一些最常用的时间框架，值四舍五入到小数点后三位）：","position":{"start":{"line":566,"column":1},"end":{"line":566,"column":1}},"key":"QTAtGjYM5e"}],"key":"BYj7dcItBs"},{"type":"table","position":{"start":{"line":568,"column":1},"end":{"line":573,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":568,"column":1},"end":{"line":568,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":568,"column":1},"end":{"line":568,"column":1}},"children":[{"type":"text","value":"# step","position":{"start":{"line":568,"column":1},"end":{"line":568,"column":1}},"key":"KGlCtFyuOz"}],"key":"IHUt4JOwGM"},{"type":"tableCell","header":true,"position":{"start":{"line":568,"column":1},"end":{"line":568,"column":1}},"children":[{"type":"text","value":"1m","position":{"start":{"line":568,"column":1},"end":{"line":568,"column":1}},"key":"M0YpUilF0e"}],"key":"QcQo8Tzvhj"},{"type":"tableCell","header":true,"position":{"start":{"line":568,"column":1},"end":{"line":568,"column":1}},"children":[],"key":"eyODqVEygu"},{"type":"tableCell","header":true,"position":{"start":{"line":568,"column":1},"end":{"line":568,"column":1}},"children":[{"type":"text","value":"5m","position":{"start":{"line":568,"column":1},"end":{"line":568,"column":1}},"key":"G4p3wkuJUY"}],"key":"pdowHueG6b"},{"type":"tableCell","header":true,"position":{"start":{"line":568,"column":1},"end":{"line":568,"column":1}},"children":[],"key":"Jb8Aquhwcj"},{"type":"tableCell","header":true,"position":{"start":{"line":568,"column":1},"end":{"line":568,"column":1}},"children":[{"type":"text","value":"1h","position":{"start":{"line":568,"column":1},"end":{"line":568,"column":1}},"key":"waNg9LNQ6u"}],"key":"u6lo7oxmKk"},{"type":"tableCell","header":true,"position":{"start":{"line":568,"column":1},"end":{"line":568,"column":1}},"children":[],"key":"ArIRH4WMx5"},{"type":"tableCell","header":true,"position":{"start":{"line":568,"column":1},"end":{"line":568,"column":1}},"children":[{"type":"text","value":"1d","position":{"start":{"line":568,"column":1},"end":{"line":568,"column":1}},"key":"f7JENbb7Gq"}],"key":"cccipYTAGA"},{"type":"tableCell","header":true,"position":{"start":{"line":568,"column":1},"end":{"line":568,"column":1}},"children":[],"key":"DrTTssCqVq"}],"key":"urVJszNixo"},{"type":"tableRow","position":{"start":{"line":570,"column":1},"end":{"line":570,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":570,"column":1},"end":{"line":570,"column":1}},"children":[{"type":"text","value":"1","position":{"start":{"line":570,"column":1},"end":{"line":570,"column":1}},"key":"P71FFNerdr"}],"key":"GEuU4lVChD"},{"type":"tableCell","position":{"start":{"line":570,"column":1},"end":{"line":570,"column":1}},"children":[{"type":"text","value":"2...12","position":{"start":{"line":570,"column":1},"end":{"line":570,"column":1}},"key":"sdYF1XPvOL"}],"key":"pqDNUfR2Vi"},{"type":"tableCell","position":{"start":{"line":570,"column":1},"end":{"line":570,"column":1}},"children":[{"type":"text","value":"0.02...0.15","position":{"start":{"line":570,"column":1},"end":{"line":570,"column":1}},"key":"WsFNqlsTJP"}],"key":"I7bPhELved"},{"type":"tableCell","position":{"start":{"line":570,"column":1},"end":{"line":570,"column":1}},"children":[{"type":"text","value":"10...60","position":{"start":{"line":570,"column":1},"end":{"line":570,"column":1}},"key":"qvKNsHPZW9"}],"key":"jDqBNytQ7p"},{"type":"tableCell","position":{"start":{"line":570,"column":1},"end":{"line":570,"column":1}},"children":[{"type":"text","value":"0.02...0.15","position":{"start":{"line":570,"column":1},"end":{"line":570,"column":1}},"key":"LMP5WStFXM"}],"key":"BMj3NsZjZb"},{"type":"tableCell","position":{"start":{"line":570,"column":1},"end":{"line":570,"column":1}},"children":[{"type":"text","value":"120...720","position":{"start":{"line":570,"column":1},"end":{"line":570,"column":1}},"key":"WonduGB8Gr"}],"key":"lh38yPVguf"},{"type":"tableCell","position":{"start":{"line":570,"column":1},"end":{"line":570,"column":1}},"children":[{"type":"text","value":"0.02...0.15","position":{"start":{"line":570,"column":1},"end":{"line":570,"column":1}},"key":"MjJq1lGCe7"}],"key":"YyqkmJMVFY"},{"type":"tableCell","position":{"start":{"line":570,"column":1},"end":{"line":570,"column":1}},"children":[{"type":"text","value":"2880...17280","position":{"start":{"line":570,"column":1},"end":{"line":570,"column":1}},"key":"R3ZuZvQU9P"}],"key":"jaxfjNiIGn"},{"type":"tableCell","position":{"start":{"line":570,"column":1},"end":{"line":570,"column":1}},"children":[{"type":"text","value":"0.02...0.15","position":{"start":{"line":570,"column":1},"end":{"line":570,"column":1}},"key":"IA9snekNMB"}],"key":"O0rTrXQcdG"}],"key":"rcicChXeM7"},{"type":"tableRow","position":{"start":{"line":571,"column":1},"end":{"line":571,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":571,"column":1},"end":{"line":571,"column":1}},"children":[{"type":"text","value":"2","position":{"start":{"line":571,"column":1},"end":{"line":571,"column":1}},"key":"gLQj8L0mHm"}],"key":"waDnW5hurS"},{"type":"tableCell","position":{"start":{"line":571,"column":1},"end":{"line":571,"column":1}},"children":[{"type":"text","value":"3...18","position":{"start":{"line":571,"column":1},"end":{"line":571,"column":1}},"key":"bhWTj7Hxbo"}],"key":"UvBdPDemrY"},{"type":"tableCell","position":{"start":{"line":571,"column":1},"end":{"line":571,"column":1}},"children":[{"type":"text","value":"0.01...0.10","position":{"start":{"line":571,"column":1},"end":{"line":571,"column":1}},"key":"iPMy1sNmGG"}],"key":"JOTI98ruBa"},{"type":"tableCell","position":{"start":{"line":571,"column":1},"end":{"line":571,"column":1}},"children":[{"type":"text","value":"15...90","position":{"start":{"line":571,"column":1},"end":{"line":571,"column":1}},"key":"s649UU5NMt"}],"key":"Q2h5FNkwS3"},{"type":"tableCell","position":{"start":{"line":571,"column":1},"end":{"line":571,"column":1}},"children":[{"type":"text","value":"0.01...0.10","position":{"start":{"line":571,"column":1},"end":{"line":571,"column":1}},"key":"QRzGYLD4qI"}],"key":"fvfFCUQJzJ"},{"type":"tableCell","position":{"start":{"line":571,"column":1},"end":{"line":571,"column":1}},"children":[{"type":"text","value":"180...1080","position":{"start":{"line":571,"column":1},"end":{"line":571,"column":1}},"key":"guogOHsD6c"}],"key":"wyGOkcOTjG"},{"type":"tableCell","position":{"start":{"line":571,"column":1},"end":{"line":571,"column":1}},"children":[{"type":"text","value":"0.01...0.10","position":{"start":{"line":571,"column":1},"end":{"line":571,"column":1}},"key":"KLRgCdBRTM"}],"key":"cUAxJhjoA8"},{"type":"tableCell","position":{"start":{"line":571,"column":1},"end":{"line":571,"column":1}},"children":[{"type":"text","value":"4320...25920","position":{"start":{"line":571,"column":1},"end":{"line":571,"column":1}},"key":"pHYl55Vhit"}],"key":"AlFycQIUyp"},{"type":"tableCell","position":{"start":{"line":571,"column":1},"end":{"line":571,"column":1}},"children":[{"type":"text","value":"0.01...0.10","position":{"start":{"line":571,"column":1},"end":{"line":571,"column":1}},"key":"pSoO2eCBaz"}],"key":"UA0mNAl5kB"}],"key":"gZ1M9Fs4R5"},{"type":"tableRow","position":{"start":{"line":572,"column":1},"end":{"line":572,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":572,"column":1},"end":{"line":572,"column":1}},"children":[{"type":"text","value":"3","position":{"start":{"line":572,"column":1},"end":{"line":572,"column":1}},"key":"hUZqm68xSH"}],"key":"JY2T3zpyiX"},{"type":"tableCell","position":{"start":{"line":572,"column":1},"end":{"line":572,"column":1}},"children":[{"type":"text","value":"4...24","position":{"start":{"line":572,"column":1},"end":{"line":572,"column":1}},"key":"TyKZlNzYHN"}],"key":"w2CkjzjHY8"},{"type":"tableCell","position":{"start":{"line":572,"column":1},"end":{"line":572,"column":1}},"children":[{"type":"text","value":"0.01...0.07","position":{"start":{"line":572,"column":1},"end":{"line":572,"column":1}},"key":"gIe0HVoZJT"}],"key":"dkd45aecAb"},{"type":"tableCell","position":{"start":{"line":572,"column":1},"end":{"line":572,"column":1}},"children":[{"type":"text","value":"20...120","position":{"start":{"line":572,"column":1},"end":{"line":572,"column":1}},"key":"EzSRGGv6I7"}],"key":"E07vVuuhCD"},{"type":"tableCell","position":{"start":{"line":572,"column":1},"end":{"line":572,"column":1}},"children":[{"type":"text","value":"0.01...0.07","position":{"start":{"line":572,"column":1},"end":{"line":572,"column":1}},"key":"zClkQLHfsY"}],"key":"BrEELKLvWr"},{"type":"tableCell","position":{"start":{"line":572,"column":1},"end":{"line":572,"column":1}},"children":[{"type":"text","value":"240...1440","position":{"start":{"line":572,"column":1},"end":{"line":572,"column":1}},"key":"ueAj6xPGFe"}],"key":"qbwbV3AcIz"},{"type":"tableCell","position":{"start":{"line":572,"column":1},"end":{"line":572,"column":1}},"children":[{"type":"text","value":"0.01...0.07","position":{"start":{"line":572,"column":1},"end":{"line":572,"column":1}},"key":"dhXebsnfW4"}],"key":"wDMcdfUBX2"},{"type":"tableCell","position":{"start":{"line":572,"column":1},"end":{"line":572,"column":1}},"children":[{"type":"text","value":"5760...34560","position":{"start":{"line":572,"column":1},"end":{"line":572,"column":1}},"key":"XqRyuhGOES"}],"key":"GV6jRhiuLp"},{"type":"tableCell","position":{"start":{"line":572,"column":1},"end":{"line":572,"column":1}},"children":[{"type":"text","value":"0.01...0.07","position":{"start":{"line":572,"column":1},"end":{"line":572,"column":1}},"key":"k2yjb7dgzU"}],"key":"ImDA5kxCZr"}],"key":"zuSzJ7P0NY"},{"type":"tableRow","position":{"start":{"line":573,"column":1},"end":{"line":573,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":573,"column":1},"end":{"line":573,"column":1}},"children":[{"type":"text","value":"4","position":{"start":{"line":573,"column":1},"end":{"line":573,"column":1}},"key":"H9IcPkn1ZT"}],"key":"oTjbS2LvhL"},{"type":"tableCell","position":{"start":{"line":573,"column":1},"end":{"line":573,"column":1}},"children":[{"type":"text","value":"6...44","position":{"start":{"line":573,"column":1},"end":{"line":573,"column":1}},"key":"lHbfDETYlG"}],"key":"zPBI1Nkx2b"},{"type":"tableCell","position":{"start":{"line":573,"column":1},"end":{"line":573,"column":1}},"children":[{"type":"text","value":"0.0","position":{"start":{"line":573,"column":1},"end":{"line":573,"column":1}},"key":"v9OoRF80eY"}],"key":"eIecZ3bKBc"},{"type":"tableCell","position":{"start":{"line":573,"column":1},"end":{"line":573,"column":1}},"children":[{"type":"text","value":"30...220","position":{"start":{"line":573,"column":1},"end":{"line":573,"column":1}},"key":"M8IibsK2s8"}],"key":"MTEVpyESDc"},{"type":"tableCell","position":{"start":{"line":573,"column":1},"end":{"line":573,"column":1}},"children":[{"type":"text","value":"0.0","position":{"start":{"line":573,"column":1},"end":{"line":573,"column":1}},"key":"y1BkhsnLpM"}],"key":"atBw76TYth"},{"type":"tableCell","position":{"start":{"line":573,"column":1},"end":{"line":573,"column":1}},"children":[{"type":"text","value":"360...2640","position":{"start":{"line":573,"column":1},"end":{"line":573,"column":1}},"key":"BJRiNxiyR5"}],"key":"rnF5udpqGg"},{"type":"tableCell","position":{"start":{"line":573,"column":1},"end":{"line":573,"column":1}},"children":[{"type":"text","value":"0.0","position":{"start":{"line":573,"column":1},"end":{"line":573,"column":1}},"key":"qE9SnxQLIW"}],"key":"rVogc0PlZS"},{"type":"tableCell","position":{"start":{"line":573,"column":1},"end":{"line":573,"column":1}},"children":[{"type":"text","value":"8640...63360","position":{"start":{"line":573,"column":1},"end":{"line":573,"column":1}},"key":"FKFN2CmgVm"}],"key":"dt02pbPgRk"},{"type":"tableCell","position":{"start":{"line":573,"column":1},"end":{"line":573,"column":1}},"children":[{"type":"text","value":"0.0","position":{"start":{"line":573,"column":1},"end":{"line":573,"column":1}},"key":"SEi8Km7aDn"}],"key":"vWEp5SvkSF"}],"key":"ICRy0jjgop"}],"key":"NHPYSUiWU3"},{"type":"paragraph","position":{"start":{"line":575,"column":1},"end":{"line":575,"column":1}},"children":[{"type":"text","value":"这些范围应该足以满足大多数情况。步骤中的分钟（ROI dict 键）按比例缩放，取决于使用的时间框架。步骤中的 ROI 值按比例缩放，取决于使用的时间框架。","position":{"start":{"line":575,"column":1},"end":{"line":575,"column":1}},"key":"ZlCdzfk0op"}],"key":"cE1v2HzReA"},{"type":"paragraph","position":{"start":{"line":577,"column":1},"end":{"line":577,"column":1}},"children":[{"type":"text","value":"如果您有 ","position":{"start":{"line":577,"column":1},"end":{"line":577,"column":1}},"key":"EcgtI7hVkM"},{"type":"inlineCode","value":"generate_roi_table()","position":{"start":{"line":577,"column":1},"end":{"line":577,"column":1}},"key":"pVciuDyn39"},{"type":"text","value":" 和 ","position":{"start":{"line":577,"column":1},"end":{"line":577,"column":1}},"key":"Mugo7RGNQZ"},{"type":"inlineCode","value":"roi_space()","position":{"start":{"line":577,"column":1},"end":{"line":577,"column":1}},"key":"OVNpKOZM3v"},{"type":"text","value":" 方法，请删除它们，以利用这些自适应 ROI 表和 Freqtrade 生成的 ROI 超参优化空间。","position":{"start":{"line":577,"column":1},"end":{"line":577,"column":1}},"key":"iOrKpjavbf"}],"key":"KlQ0KzUeT9"},{"type":"paragraph","position":{"start":{"line":579,"column":1},"end":{"line":579,"column":1}},"children":[{"type":"text","value":"覆盖 ","position":{"start":{"line":579,"column":1},"end":{"line":579,"column":1}},"key":"e9bE84rCVz"},{"type":"inlineCode","value":"roi_space()","position":{"start":{"line":579,"column":1},"end":{"line":579,"column":1}},"key":"Qz5sOuvps3"},{"type":"text","value":" 方法，如果您需要 ROI 表组件在其他范围内变化。覆盖 ","position":{"start":{"line":579,"column":1},"end":{"line":579,"column":1}},"key":"mlhhYWvacd"},{"type":"inlineCode","value":"generate_roi_table()","position":{"start":{"line":579,"column":1},"end":{"line":579,"column":1}},"key":"suzkeD6gmx"},{"type":"text","value":" 和 ","position":{"start":{"line":579,"column":1},"end":{"line":579,"column":1}},"key":"eUJ8zICrbu"},{"type":"inlineCode","value":"roi_space()","position":{"start":{"line":579,"column":1},"end":{"line":579,"column":1}},"key":"m6F72nF1In"},{"type":"text","value":" 方法并实现您自己的自定义方法，以在 hyperoptimization 期间生成 ROI 表。","position":{"start":{"line":579,"column":1},"end":{"line":579,"column":1}},"key":"w4CtABb7FP"}],"key":"LXo7fH8Khn"},{"type":"paragraph","position":{"start":{"line":581,"column":1},"end":{"line":581,"column":1}},"children":[{"type":"text","value":"这些方法的示例可以在 ","position":{"start":{"line":581,"column":1},"end":{"line":581,"column":1}},"key":"eGYry6lm35"},{"type":"crossReference","url":"/advanced-hyperopt","position":{"start":{"line":581,"column":1},"end":{"line":581,"column":1}},"children":[{"type":"text","value":"overriding pre-defined spaces section","position":{"start":{"line":581,"column":1},"end":{"line":581,"column":1}},"key":"vm2DiKSHTq"}],"urlSource":"advanced-hyperopt.md#overriding-pre-defined-spaces","dataUrl":"/advanced-hyperopt.json","identifier":"overriding-pre-defined-spaces","label":"overriding-pre-defined-spaces","remote":true,"protocol":"file","kind":"heading","template":"{name}","resolved":true,"html_id":"overriding-pre-defined-spaces","key":"P0ZfvEXkJF"},{"type":"text","value":" 中找到。","position":{"start":{"line":581,"column":1},"end":{"line":581,"column":1}},"key":"w6qbS1AlHd"}],"key":"VK6HFwv8l7"},{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Reduced search space","position":{"start":{"line":583,"column":1},"end":{"line":583,"column":1}},"key":"uEWhUU6ssx"}],"key":"aQSGuVxuda"},{"type":"paragraph","position":{"start":{"line":584,"column":1},"end":{"line":584,"column":1}},"children":[{"type":"text","value":"为了进一步限制搜索空间，小数限制为 3 位小数（精度为 0.001）。这通常足够了，每个比这更精确的值通常会导致过拟合结果。但是，您可以 ","position":{"start":{"line":584,"column":1},"end":{"line":584,"column":1}},"key":"U93NYQxGkQ"},{"type":"crossReference","url":"/advanced-hyperopt","position":{"start":{"line":584,"column":1},"end":{"line":584,"column":1}},"children":[{"type":"text","value":"overriding pre-defined spaces","position":{"start":{"line":584,"column":1},"end":{"line":584,"column":1}},"key":"QJaFk75KC2"}],"urlSource":"advanced-hyperopt.md#overriding-pre-defined-spaces","dataUrl":"/advanced-hyperopt.json","identifier":"overriding-pre-defined-spaces","label":"overriding-pre-defined-spaces","remote":true,"protocol":"file","kind":"heading","template":"{name}","resolved":true,"html_id":"overriding-pre-defined-spaces","key":"pm1dxLGlt1"},{"type":"text","value":" 来根据需要更改此设置。","position":{"start":{"line":584,"column":1},"end":{"line":584,"column":1}},"key":"YXy0lSLTvQ"}],"key":"OffyLxOzAR"}],"key":"OqjWzsuTpg"},{"type":"heading","depth":4,"position":{"start":{"line":587,"column":1},"end":{"line":587,"column":1}},"children":[{"type":"text","value":"理解 Hyperopt Stoploss 结果","position":{"start":{"line":587,"column":1},"end":{"line":587,"column":1}},"key":"UdHwJry1vw"}],"identifier":"id-hyperopt-stoploss","label":"理解 Hyperopt Stoploss 结果","html_id":"id-hyperopt-stoploss","implicit":true,"key":"HnOHXpLMcB"},{"type":"paragraph","position":{"start":{"line":589,"column":1},"end":{"line":589,"column":1}},"children":[{"type":"text","value":"如果您正在优化止损值（即如果优化搜索空间包含 ‘all’、‘default’ 或 ‘stoploss’），您的结果将如下所示并包括止损：","position":{"start":{"line":589,"column":1},"end":{"line":589,"column":1}},"key":"nkKjb8LY6B"}],"key":"NoXk0cc9xW"},{"type":"code","lang":"text","value":"Best result:\n\n    44/100:    135 trades. Avg profit  0.57%. Total profit  0.03871918 BTC (0.7722%). Avg duration 180:34 min. Objective: 1.94367\n\nStoploss: -0.0699","position":{"start":{"line":591,"column":1},"end":{"line":597,"column":1}},"key":"AR4wsVRcon"},{"type":"paragraph","position":{"start":{"line":599,"column":1},"end":{"line":599,"column":1}},"children":[{"type":"text","value":"为了在回测和实时交易/干运行中使用这个最佳止损值，复制并粘贴它作为自定义策略的 ","position":{"start":{"line":599,"column":1},"end":{"line":599,"column":1}},"key":"oMo1r2nv9G"},{"type":"inlineCode","value":"stoploss","position":{"start":{"line":599,"column":1},"end":{"line":599,"column":1}},"key":"gAhG4rqawC"},{"type":"text","value":" 属性值：","position":{"start":{"line":599,"column":1},"end":{"line":599,"column":1}},"key":"ri9aVHr2ue"}],"key":"qvSGesddpl"},{"type":"code","lang":"python","value":"    # 最佳止损值\n    stoploss = -0.0699","position":{"start":{"line":601,"column":1},"end":{"line":604,"column":1}},"key":"kch2p0oKHZ"},{"type":"paragraph","position":{"start":{"line":606,"column":1},"end":{"line":606,"column":1}},"children":[{"type":"text","value":"如评论中所述，您也可以将其用作配置文件中的 ","position":{"start":{"line":606,"column":1},"end":{"line":606,"column":1}},"key":"wP947hw4vC"},{"type":"inlineCode","value":"stoploss","position":{"start":{"line":606,"column":1},"end":{"line":606,"column":1}},"key":"IN8shcJZqf"},{"type":"text","value":" 设置值。","position":{"start":{"line":606,"column":1},"end":{"line":606,"column":1}},"key":"jpuPGe3EwY"}],"key":"IoFnTspHGZ"},{"type":"heading","depth":5,"position":{"start":{"line":608,"column":1},"end":{"line":608,"column":1}},"children":[{"type":"text","value":"默认止损搜索空间","position":{"start":{"line":608,"column":1},"end":{"line":608,"column":1}},"key":"WumV5bdInR"}],"identifier":"id","label":"默认止损搜索空间","html_id":"id-6","implicit":true,"key":"GkfZL4t1Vx"},{"type":"paragraph","position":{"start":{"line":610,"column":1},"end":{"line":610,"column":1}},"children":[{"type":"text","value":"如果您正在优化止损值，Freqtrade 为您创建了 ‘stoploss’ 优化超空间。默认情况下，该超空间中的止损值范围为 -0.35...-0.02，足以满足大多数情况。","position":{"start":{"line":610,"column":1},"end":{"line":610,"column":1}},"key":"FA5KgxtAAE"}],"key":"NDo2EbvliQ"},{"type":"paragraph","position":{"start":{"line":612,"column":1},"end":{"line":612,"column":1}},"children":[{"type":"text","value":"如果您有 ","position":{"start":{"line":612,"column":1},"end":{"line":612,"column":1}},"key":"ojViqVpjaN"},{"type":"inlineCode","value":"stoploss_space()","position":{"start":{"line":612,"column":1},"end":{"line":612,"column":1}},"key":"ridjxd2vLY"},{"type":"text","value":" 方法，请删除它以利用 Freqtrade 生成的 Stoploss 超参优化空间。","position":{"start":{"line":612,"column":1},"end":{"line":612,"column":1}},"key":"jZBxoqVApB"}],"key":"kZK9jQqmDl"},{"type":"paragraph","position":{"start":{"line":614,"column":1},"end":{"line":614,"column":1}},"children":[{"type":"text","value":"覆盖 ","position":{"start":{"line":614,"column":1},"end":{"line":614,"column":1}},"key":"Um9NYgvmF3"},{"type":"inlineCode","value":"stoploss_space()","position":{"start":{"line":614,"column":1},"end":{"line":614,"column":1}},"key":"BswhpR9zkj"},{"type":"text","value":" 方法并定义您需要的范围，如果您需要止损值在 hyperoptimization 期间在其他范围内变化。这个方法的示例可以在 ","position":{"start":{"line":614,"column":1},"end":{"line":614,"column":1}},"key":"DJZvpEYEj1"},{"type":"crossReference","url":"/advanced-hyperopt","position":{"start":{"line":614,"column":1},"end":{"line":614,"column":1}},"children":[{"type":"text","value":"overriding pre-defined spaces section","position":{"start":{"line":614,"column":1},"end":{"line":614,"column":1}},"key":"BHRlQED2fo"}],"urlSource":"advanced-hyperopt.md#overriding-pre-defined-spaces","dataUrl":"/advanced-hyperopt.json","identifier":"overriding-pre-defined-spaces","label":"overriding-pre-defined-spaces","remote":true,"protocol":"file","kind":"heading","template":"{name}","resolved":true,"html_id":"overriding-pre-defined-spaces","key":"hodvPXNFtW"},{"type":"text","value":" 中找到。","position":{"start":{"line":614,"column":1},"end":{"line":614,"column":1}},"key":"f6vT2goWY2"}],"key":"V8pqq00o90"},{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Reduced search space","position":{"start":{"line":616,"column":1},"end":{"line":616,"column":1}},"key":"zr0BmQyXQR"}],"key":"XJ25aKsu7D"},{"type":"paragraph","position":{"start":{"line":617,"column":1},"end":{"line":617,"column":1}},"children":[{"type":"text","value":"为了进一步限制搜索空间，小数限制为 3 位小数（精度为 0.001）。这通常足够了，每个比这更精确的值通常会导致过拟合结果。但是，您可以 ","position":{"start":{"line":617,"column":1},"end":{"line":617,"column":1}},"key":"YzW5sAMShK"},{"type":"crossReference","url":"/advanced-hyperopt","position":{"start":{"line":617,"column":1},"end":{"line":617,"column":1}},"children":[{"type":"text","value":"overriding pre-defined spaces","position":{"start":{"line":617,"column":1},"end":{"line":617,"column":1}},"key":"cZtxIIZ1lo"}],"urlSource":"advanced-hyperopt.md#overriding-pre-defined-spaces","dataUrl":"/advanced-hyperopt.json","identifier":"overriding-pre-defined-spaces","label":"overriding-pre-defined-spaces","remote":true,"protocol":"file","kind":"heading","template":"{name}","resolved":true,"html_id":"overriding-pre-defined-spaces","key":"CHNqKw7BQM"},{"type":"text","value":" 来根据需要更改此设置。","position":{"start":{"line":617,"column":1},"end":{"line":617,"column":1}},"key":"dGROQOI0tJ"}],"key":"BFN3FA98kf"}],"key":"sxrRMz5C2K"},{"type":"heading","depth":4,"position":{"start":{"line":620,"column":1},"end":{"line":620,"column":1}},"children":[{"type":"text","value":"理解 Hyperopt Trailing Stop 结果","position":{"start":{"line":620,"column":1},"end":{"line":620,"column":1}},"key":"mwhlXF2s6e"}],"identifier":"id-hyperopt-trailing-stop","label":"理解 Hyperopt Trailing Stop 结果","html_id":"id-hyperopt-trailing-stop","implicit":true,"key":"phCabVwXII"},{"type":"paragraph","position":{"start":{"line":622,"column":1},"end":{"line":622,"column":1}},"children":[{"type":"text","value":"如果您正在优化追踪止损值（即如果优化搜索空间包含 ‘all’ 或 ‘trailing’），您的结果将如下所示并包括追踪止损参数：","position":{"start":{"line":622,"column":1},"end":{"line":622,"column":1}},"key":"tJfAXJjQuz"}],"key":"jSf6Ga8XCj"},{"type":"code","lang":"text","value":"Best result:\n\n    44/100:    135 trades. Avg profit  0.57%. Total profit  0.03871918 BTC (0.7722%). Avg duration 180:34 min. Objective: 1.94367\n\nTrailing stop:\n{\n    'trailing_stop': True,\n    'trailing_stop_positive': 0.0201,\n    'trailing_stop_positive_offset': 0.0547,\n    'trailing_only_offset_is_reached': True\n}","position":{"start":{"line":624,"column":1},"end":{"line":636,"column":1}},"key":"wufllrClKl"},{"type":"paragraph","position":{"start":{"line":638,"column":1},"end":{"line":638,"column":1}},"children":[{"type":"text","value":"为了在回测和实时交易/干运行中使用这些最佳追踪止损参数，复制并粘贴它们作为自定义策略的相应属性值：","position":{"start":{"line":638,"column":1},"end":{"line":638,"column":1}},"key":"yZMcIKWoYp"}],"key":"s5UQX26XQs"},{"type":"code","lang":"python","value":"    # 追踪止损\n    # 如果配置文件包含相应的值，这些属性将被覆盖。\n    trailing_stop = True\n    trailing_stop_positive = 0.0201\n    trailing_stop_positive_offset = 0.0547\n    trailing_only_offset_is_reached = True","position":{"start":{"line":640,"column":1},"end":{"line":647,"column":1}},"key":"hZQsDh6u7V"},{"type":"paragraph","position":{"start":{"line":649,"column":1},"end":{"line":649,"column":1}},"children":[{"type":"text","value":"如评论中所述，您也可以将其用作配置文件中的相应设置值。","position":{"start":{"line":649,"column":1},"end":{"line":649,"column":1}},"key":"umxFW922im"}],"key":"I2YKPPCTpo"},{"type":"heading","depth":5,"position":{"start":{"line":651,"column":1},"end":{"line":651,"column":1}},"children":[{"type":"text","value":"默认追踪止损搜索空间","position":{"start":{"line":651,"column":1},"end":{"line":651,"column":1}},"key":"BJQiaTR9lc"}],"identifier":"id","label":"默认追踪止损搜索空间","html_id":"id-7","implicit":true,"key":"AaH0us5yNP"},{"type":"paragraph","position":{"start":{"line":653,"column":1},"end":{"line":653,"column":1}},"children":[{"type":"text","value":"如果您正在优化追踪止损值，Freqtrade 为您创建了 ‘trailing’ 优化超空间。默认情况下，","position":{"start":{"line":653,"column":1},"end":{"line":653,"column":1}},"key":"ZzhX5TNKTM"},{"type":"inlineCode","value":"trailing_stop","position":{"start":{"line":653,"column":1},"end":{"line":653,"column":1}},"key":"JRhGxup9Tm"},{"type":"text","value":" 参数在该超空间中始终设置为 True，","position":{"start":{"line":653,"column":1},"end":{"line":653,"column":1}},"key":"PsyYIRF1wH"},{"type":"inlineCode","value":"trailing_only_offset_is_reached","position":{"start":{"line":653,"column":1},"end":{"line":653,"column":1}},"key":"vngVAClg1w"},{"type":"text","value":" 值在 True 和 False 之间变化，","position":{"start":{"line":653,"column":1},"end":{"line":653,"column":1}},"key":"G4epMxV5SW"},{"type":"inlineCode","value":"trailing_stop_positive","position":{"start":{"line":653,"column":1},"end":{"line":653,"column":1}},"key":"sy7jUUlvxk"},{"type":"text","value":" 和 ","position":{"start":{"line":653,"column":1},"end":{"line":653,"column":1}},"key":"LoLXynRSr8"},{"type":"inlineCode","value":"trailing_stop_positive_offset","position":{"start":{"line":653,"column":1},"end":{"line":653,"column":1}},"key":"zRgSvh5CMn"},{"type":"text","value":" 参数在 0.02...0.35 和 0.01...0.1 范围内变化，足以满足大多数情况。","position":{"start":{"line":653,"column":1},"end":{"line":653,"column":1}},"key":"bjEEFQ4wOS"}],"key":"EahI68GhB6"},{"type":"paragraph","position":{"start":{"line":655,"column":1},"end":{"line":655,"column":1}},"children":[{"type":"text","value":"覆盖 ","position":{"start":{"line":655,"column":1},"end":{"line":655,"column":1}},"key":"pybm3J3Qy3"},{"type":"inlineCode","value":"trailing_space()","position":{"start":{"line":655,"column":1},"end":{"line":655,"column":1}},"key":"VIMQRbzFuU"},{"type":"text","value":" 方法并定义您需要的范围，如果您需要值在 hyperoptimization 期间在其他范围内变化。这个方法的示例可以在 ","position":{"start":{"line":655,"column":1},"end":{"line":655,"column":1}},"key":"r0aG0HT7nS"},{"type":"crossReference","url":"/advanced-hyperopt","position":{"start":{"line":655,"column":1},"end":{"line":655,"column":1}},"children":[{"type":"text","value":"overriding pre-defined spaces section","position":{"start":{"line":655,"column":1},"end":{"line":655,"column":1}},"key":"iEPTSErDNB"}],"urlSource":"advanced-hyperopt.md#overriding-pre-defined-spaces","dataUrl":"/advanced-hyperopt.json","identifier":"overriding-pre-defined-spaces","label":"overriding-pre-defined-spaces","remote":true,"protocol":"file","kind":"heading","template":"{name}","resolved":true,"html_id":"overriding-pre-defined-spaces","key":"ivATfAHstJ"},{"type":"text","value":" 中找到。","position":{"start":{"line":655,"column":1},"end":{"line":655,"column":1}},"key":"eWGGkqOsFb"}],"key":"M8hIopNg3J"},{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Reduced search space","position":{"start":{"line":657,"column":1},"end":{"line":657,"column":1}},"key":"Ad8HpQOr51"}],"key":"o4UmnYHQyJ"},{"type":"paragraph","position":{"start":{"line":658,"column":1},"end":{"line":658,"column":1}},"children":[{"type":"text","value":"为了进一步限制搜索空间，小数限制为 3 位小数（精度为 0.001）。这通常足够了，每个比这更精确的值通常会导致过拟合结果。但是，您可以 ","position":{"start":{"line":658,"column":1},"end":{"line":658,"column":1}},"key":"A0HXgKtgyP"},{"type":"crossReference","url":"/advanced-hyperopt","position":{"start":{"line":658,"column":1},"end":{"line":658,"column":1}},"children":[{"type":"text","value":"overriding pre-defined spaces","position":{"start":{"line":658,"column":1},"end":{"line":658,"column":1}},"key":"Ir8zVBxq1U"}],"urlSource":"advanced-hyperopt.md#overriding-pre-defined-spaces","dataUrl":"/advanced-hyperopt.json","identifier":"overriding-pre-defined-spaces","label":"overriding-pre-defined-spaces","remote":true,"protocol":"file","kind":"heading","template":"{name}","resolved":true,"html_id":"overriding-pre-defined-spaces","key":"cV7KZgqbVY"},{"type":"text","value":" 来根据需要更改此设置。","position":{"start":{"line":658,"column":1},"end":{"line":658,"column":1}},"key":"puuezlY3Ug"}],"key":"uCS8UXenXl"}],"key":"ntaSL3grWZ"},{"type":"heading","depth":4,"position":{"start":{"line":663,"column":1},"end":{"line":663,"column":1}},"children":[{"type":"text","value":"可重复的结果","position":{"start":{"line":663,"column":1},"end":{"line":663,"column":1}},"key":"XWtwVY9ore"}],"label":"reproducible-results","identifier":"reproducible-results","html_id":"reproducible-results","key":"zthIofBx4W"},{"type":"paragraph","position":{"start":{"line":665,"column":1},"end":{"line":665,"column":1}},"children":[{"type":"text","value":"最佳参数搜索从参数空间中的几个（目前是 30）随机组合开始，随机 Hyperopt 轮次。这些随机轮次在 Hyperopt 输出中的第一列中用星号字符 (","position":{"start":{"line":665,"column":1},"end":{"line":665,"column":1}},"key":"Ek8xb9eMwW"},{"type":"inlineCode","value":"*","position":{"start":{"line":665,"column":1},"end":{"line":665,"column":1}},"key":"z7CO8i5zY3"},{"type":"text","value":") 标记。","position":{"start":{"line":665,"column":1},"end":{"line":665,"column":1}},"key":"gBDub5zJhe"}],"key":"Mq1XJE9gjg"},{"type":"paragraph","position":{"start":{"line":667,"column":1},"end":{"line":667,"column":1}},"children":[{"type":"text","value":"这些随机值的初始状态（随机状态）由 ","position":{"start":{"line":667,"column":1},"end":{"line":667,"column":1}},"key":"Vv0qFz5YI5"},{"type":"inlineCode","value":"--random-state","position":{"start":{"line":667,"column":1},"end":{"line":667,"column":1}},"key":"xTGUZAWLEA"},{"type":"text","value":" 命令行选项的值控制。您可以将其设置为任意值，以获得可重复的结果。","position":{"start":{"line":667,"column":1},"end":{"line":667,"column":1}},"key":"sfvLeH8DKG"}],"key":"Kr0kvHBtY4"},{"type":"paragraph","position":{"start":{"line":669,"column":1},"end":{"line":669,"column":1}},"children":[{"type":"text","value":"如果您没有在命令行选项中明确设置此值，Hyperopt 会为您提供一些随机值。每个 Hyperopt 运行的随机状态值显示在日志中，因此您可以复制并粘贴它到 ","position":{"start":{"line":669,"column":1},"end":{"line":669,"column":1}},"key":"PuEFKWJggm"},{"type":"inlineCode","value":"--random-state","position":{"start":{"line":669,"column":1},"end":{"line":669,"column":1}},"key":"eAYuixEAR1"},{"type":"text","value":" 命令行选项中，以重复使用初始随机轮次集。","position":{"start":{"line":669,"column":1},"end":{"line":669,"column":1}},"key":"KTMKtaWUVb"}],"key":"XzfNmXbXpn"},{"type":"paragraph","position":{"start":{"line":671,"column":1},"end":{"line":671,"column":1}},"children":[{"type":"text","value":"如果您没有更改命令行选项、配置、时间范围、策略和 Hyperopt 类、历史数据和损失函数，您应该获得相同的超参优化结果，使用相同的随机状态值。","position":{"start":{"line":671,"column":1},"end":{"line":671,"column":1}},"key":"GGuwafnsVc"}],"key":"sDKbHgUrsx"},{"type":"heading","depth":3,"position":{"start":{"line":673,"column":1},"end":{"line":673,"column":1}},"children":[{"type":"text","value":"输出格式化","position":{"start":{"line":673,"column":1},"end":{"line":673,"column":1}},"key":"SMTfuXSzd6"}],"identifier":"id","label":"输出格式化","html_id":"id-8","implicit":true,"key":"Dsmwbfcajq"},{"type":"paragraph","position":{"start":{"line":675,"column":1},"end":{"line":675,"column":1}},"children":[{"type":"text","value":"默认情况下，hyperopt 打印彩色结果——利润为正的 epoch 以绿色打印。此高亮帮助您找到可以稍后分析的有趣 epoch。利润为零或利润为负（损失）的 epoch 以正常颜色打印。如果您不需要结果的颜色化（例如，当您将 hyperopt 输出重定向到文件时），您可以通过在命令行中指定 ","position":{"start":{"line":675,"column":1},"end":{"line":675,"column":1}},"key":"erOdWFoY0G"},{"type":"inlineCode","value":"--no-color","position":{"start":{"line":675,"column":1},"end":{"line":675,"column":1}},"key":"aYZ0c8fXSl"},{"type":"text","value":" 选项来切换颜色化。","position":{"start":{"line":675,"column":1},"end":{"line":675,"column":1}},"key":"KfLleCdMp6"}],"key":"PibTXnVOsU"},{"type":"paragraph","position":{"start":{"line":677,"column":1},"end":{"line":677,"column":1}},"children":[{"type":"text","value":"您可以使用 ","position":{"start":{"line":677,"column":1},"end":{"line":677,"column":1}},"key":"HimNYcB1zJ"},{"type":"inlineCode","value":"--print-all","position":{"start":{"line":677,"column":1},"end":{"line":677,"column":1}},"key":"ALVI7Oy1MS"},{"type":"text","value":" 命令行选项，如果您想在 hyperopt 输出中看到所有结果，而不仅仅是最佳结果。当 ","position":{"start":{"line":677,"column":1},"end":{"line":677,"column":1}},"key":"iCCk0V3Scr"},{"type":"inlineCode","value":"--print-all","position":{"start":{"line":677,"column":1},"end":{"line":677,"column":1}},"key":"kivRWcaaSV"},{"type":"text","value":" 被使用时，当前最佳结果也默认高亮显示——它们以粗体（亮）样式打印。此功能也可以通过 ","position":{"start":{"line":677,"column":1},"end":{"line":677,"column":1}},"key":"hDWwH48w9G"},{"type":"inlineCode","value":"--no-color","position":{"start":{"line":677,"column":1},"end":{"line":677,"column":1}},"key":"ZJFSRvz74A"},{"type":"text","value":" 命令行选项关闭。","position":{"start":{"line":677,"column":1},"end":{"line":677,"column":1}},"key":"BsvKajXwEI"}],"key":"DBzamvA9vD"},{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Windows 和颜色输出","position":{"start":{"line":679,"column":1},"end":{"line":679,"column":1}},"key":"HvXuBVdbQ5"}],"key":"wjuU1CRE4e"},{"type":"paragraph","position":{"start":{"line":680,"column":1},"end":{"line":680,"column":1}},"children":[{"type":"text","value":"Windows 不支持颜色输出，因此默认禁用。要为在 Windows 下运行的 hyperopt 获得颜色输出，请考虑使用 WSL。","position":{"start":{"line":680,"column":1},"end":{"line":680,"column":1}},"key":"hfqvvL7wNv"}],"key":"NsWTojHDT7"}],"key":"MbQ5dNUmEL"},{"type":"heading","depth":3,"position":{"start":{"line":683,"column":1},"end":{"line":683,"column":1}},"children":[{"type":"text","value":"位置堆叠和禁用最大市场位置","position":{"start":{"line":683,"column":1},"end":{"line":683,"column":1}},"key":"MB0XaZudFg"}],"identifier":"id","label":"位置堆叠和禁用最大市场位置","html_id":"id-9","implicit":true,"key":"WtSvnhy5NJ"},{"type":"paragraph","position":{"start":{"line":685,"column":1},"end":{"line":685,"column":1}},"children":[{"type":"text","value":"在某些情况下，您可能需要运行 Hyperopt（和回测）与 ","position":{"start":{"line":685,"column":1},"end":{"line":685,"column":1}},"key":"t43tEXqtAJ"},{"type":"inlineCode","value":"--eps","position":{"start":{"line":685,"column":1},"end":{"line":685,"column":1}},"key":"CogR4MRuO1"},{"type":"text","value":"/","position":{"start":{"line":685,"column":1},"end":{"line":685,"column":1}},"key":"mFq6zXcZFi"},{"type":"inlineCode","value":"--enable-position-staking","position":{"start":{"line":685,"column":1},"end":{"line":685,"column":1}},"key":"r0yLkdShtE"},{"type":"text","value":" 参数，或者您可能需要将 ","position":{"start":{"line":685,"column":1},"end":{"line":685,"column":1}},"key":"lMGaRG9IcX"},{"type":"inlineCode","value":"max_open_trades","position":{"start":{"line":685,"column":1},"end":{"line":685,"column":1}},"key":"PmDVgtvXwF"},{"type":"text","value":" 设置为非常高的数字以禁用对打开交易的限制。","position":{"start":{"line":685,"column":1},"end":{"line":685,"column":1}},"key":"vyob6CDQ9P"}],"key":"zX6JuAbeSL"},{"type":"paragraph","position":{"start":{"line":687,"column":1},"end":{"line":687,"column":1}},"children":[{"type":"text","value":"默认情况下，hyperopt 模仿 Freqtrade Live Run/Dry Run 的行为，其中仅允许每对一个打开交易。所有对的交易总数也受 ","position":{"start":{"line":687,"column":1},"end":{"line":687,"column":1}},"key":"a29GPof0Pa"},{"type":"inlineCode","value":"max_open_trades","position":{"start":{"line":687,"column":1},"end":{"line":687,"column":1}},"key":"KsJC7EhPOs"},{"type":"text","value":" 设置的限制。在 Hyperopt/Backtesting 期间，这可能导致潜在的交易被已打开的交易隐藏（或屏蔽）。","position":{"start":{"line":687,"column":1},"end":{"line":687,"column":1}},"key":"zkdxn11Zqn"}],"key":"oW356ru0Kb"},{"type":"paragraph","position":{"start":{"line":689,"column":1},"end":{"line":689,"column":1}},"children":[{"type":"inlineCode","value":"--eps","position":{"start":{"line":689,"column":1},"end":{"line":689,"column":1}},"key":"X9bscoaqFL"},{"type":"text","value":"/","position":{"start":{"line":689,"column":1},"end":{"line":689,"column":1}},"key":"ndSeJiLWiC"},{"type":"inlineCode","value":"--enable-position-stacking","position":{"start":{"line":689,"column":1},"end":{"line":689,"column":1}},"key":"h1QVUlPO0C"},{"type":"text","value":" 参数允许模拟多次购买同一对。使用 ","position":{"start":{"line":689,"column":1},"end":{"line":689,"column":1}},"key":"BHPxJPQEyN"},{"type":"inlineCode","value":"--max-open-trades","position":{"start":{"line":689,"column":1},"end":{"line":689,"column":1}},"key":"btcgytr8mV"},{"type":"text","value":" 与非常高的数字将禁用对打开交易的限制。","position":{"start":{"line":689,"column":1},"end":{"line":689,"column":1}},"key":"GDRMaf8mGL"}],"key":"UOp9xUTHIC"},{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Note","key":"fhKFibdxZN"}],"key":"DXS64YFoNf"},{"type":"paragraph","position":{"start":{"line":692,"column":1},"end":{"line":692,"column":1}},"children":[{"type":"text","value":"Dry/live runs 将 ","position":{"start":{"line":692,"column":1},"end":{"line":692,"column":1}},"key":"howTRIjpvR"},{"type":"strong","position":{"start":{"line":692,"column":1},"end":{"line":692,"column":1}},"children":[{"type":"text","value":"NOT","position":{"start":{"line":692,"column":1},"end":{"line":692,"column":1}},"key":"EwaZZxolbm"}],"key":"P5bPIb1wh5"},{"type":"text","value":" 使用位置堆叠——因此也有意义也验证策略而没有它更接近现实。","position":{"start":{"line":692,"column":1},"end":{"line":692,"column":1}},"key":"bl9ehLJIIr"}],"key":"hdyLir1qH7"}],"key":"vMEGFXVl6U"},{"type":"paragraph","position":{"start":{"line":695,"column":1},"end":{"line":695,"column":1}},"children":[{"type":"text","value":"您还可以在配置文件中通过明确设置 ","position":{"start":{"line":695,"column":1},"end":{"line":695,"column":1}},"key":"M8xRsX8oOz"},{"type":"inlineCode","value":"\"position_stacking\"=true","position":{"start":{"line":695,"column":1},"end":{"line":695,"column":1}},"key":"FySpCe0FUj"},{"type":"text","value":" 来启用位置堆叠。","position":{"start":{"line":695,"column":1},"end":{"line":695,"column":1}},"key":"H7zYHOmWtS"}],"key":"FAlZQEmeoG"},{"type":"heading","depth":3,"position":{"start":{"line":697,"column":1},"end":{"line":697,"column":1}},"children":[{"type":"text","value":"内存错误","position":{"start":{"line":697,"column":1},"end":{"line":697,"column":1}},"key":"VnoQVjRO8Y"}],"identifier":"id","label":"内存错误","html_id":"id-10","implicit":true,"key":"txnUKQ1LYH"},{"type":"paragraph","position":{"start":{"line":699,"column":1},"end":{"line":700,"column":1}},"children":[{"type":"text","value":"由于 hyperopt 消耗大量内存（每次并行回测过程需要一次将完整数据加载到内存中），您可能会遇到 “内存不足” 错误。\n为了应对这些，您有多种选择：","position":{"start":{"line":699,"column":1},"end":{"line":699,"column":1}},"key":"dwmtywaILf"}],"key":"cl5s58blwy"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":702,"column":1},"end":{"line":708,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":702,"column":1},"end":{"line":702,"column":1}},"children":[{"type":"text","value":"减少对数。","position":{"start":{"line":702,"column":1},"end":{"line":702,"column":1}},"key":"oKM4y6Le4A"}],"key":"VfPVMgG6X8"},{"type":"listItem","spread":true,"position":{"start":{"line":703,"column":1},"end":{"line":703,"column":1}},"children":[{"type":"text","value":"减少使用的时间范围（","position":{"start":{"line":703,"column":1},"end":{"line":703,"column":1}},"key":"xjlG2hkmUr"},{"type":"inlineCode","value":"--timerange <timerange>","position":{"start":{"line":703,"column":1},"end":{"line":703,"column":1}},"key":"WH9OTGioCw"},{"type":"text","value":"）。","position":{"start":{"line":703,"column":1},"end":{"line":703,"column":1}},"key":"UJTaFfrui1"}],"key":"MCnUeNxhmh"},{"type":"listItem","spread":true,"position":{"start":{"line":704,"column":1},"end":{"line":704,"column":1}},"children":[{"type":"text","value":"避免使用 ","position":{"start":{"line":704,"column":1},"end":{"line":704,"column":1}},"key":"uiDs8qAdyt"},{"type":"inlineCode","value":"--timeframe-detail","position":{"start":{"line":704,"column":1},"end":{"line":704,"column":1}},"key":"m358L9RDB1"},{"type":"text","value":"（这会加载大量额外数据到内存中）。","position":{"start":{"line":704,"column":1},"end":{"line":704,"column":1}},"key":"MhohI4gXy6"}],"key":"nc1nSp8brN"},{"type":"listItem","spread":true,"position":{"start":{"line":705,"column":1},"end":{"line":705,"column":1}},"children":[{"type":"text","value":"减少并行进程的数量（","position":{"start":{"line":705,"column":1},"end":{"line":705,"column":1}},"key":"jfVIL8iQ6f"},{"type":"inlineCode","value":"-j <n>","position":{"start":{"line":705,"column":1},"end":{"line":705,"column":1}},"key":"rCHv87t5le"},{"type":"text","value":"）。","position":{"start":{"line":705,"column":1},"end":{"line":705,"column":1}},"key":"WtblMp8fD2"}],"key":"lqVktgiGlc"},{"type":"listItem","spread":true,"position":{"start":{"line":706,"column":1},"end":{"line":706,"column":1}},"children":[{"type":"text","value":"增加机器的内存。","position":{"start":{"line":706,"column":1},"end":{"line":706,"column":1}},"key":"fNVCjZyzHF"}],"key":"cLAqV9nyvA"},{"type":"listItem","spread":true,"position":{"start":{"line":707,"column":1},"end":{"line":708,"column":1}},"children":[{"type":"text","value":"如果您使用大量具有 ","position":{"start":{"line":707,"column":1},"end":{"line":707,"column":1}},"key":"SCFEknYVlT"},{"type":"inlineCode","value":".range","position":{"start":{"line":707,"column":1},"end":{"line":707,"column":1}},"key":"ikWidjH0gK"},{"type":"text","value":" 功能的参数，请使用 ","position":{"start":{"line":707,"column":1},"end":{"line":707,"column":1}},"key":"PUVAvTwcmP"},{"type":"inlineCode","value":"--analyze-per-epoch","position":{"start":{"line":707,"column":1},"end":{"line":707,"column":1}},"key":"jY7nDVRKxT"},{"type":"text","value":"。","position":{"start":{"line":707,"column":1},"end":{"line":707,"column":1}},"key":"YmchdmeKxR"}],"key":"ShLIhMWpak"}],"key":"pPiiCjaOSi"},{"type":"heading","depth":3,"position":{"start":{"line":709,"column":1},"end":{"line":709,"column":1}},"children":[{"type":"text","value":"目标已经在此点之前评估过","position":{"start":{"line":709,"column":1},"end":{"line":709,"column":1}},"key":"npTIgSgPBB"}],"identifier":"id","label":"目标已经在此点之前评估过","html_id":"id-11","implicit":true,"key":"Zd4tsSuGj3"},{"type":"paragraph","position":{"start":{"line":711,"column":1},"end":{"line":713,"column":1}},"children":[{"type":"text","value":"如果您看到 ","position":{"start":{"line":711,"column":1},"end":{"line":711,"column":1}},"key":"DFcOMZNLGY"},{"type":"inlineCode","value":"The objective has been evaluated at this point before.","position":{"start":{"line":711,"column":1},"end":{"line":711,"column":1}},"key":"ULcyVdthgZ"},{"type":"text","value":" - 那么这是一个信号，您的空间已经耗尽，或者接近耗尽。\n基本上空间中的所有点都已被击中（或局部最小值已被击中） - 并且 hyperopt 不再在多维空间中尝试尚未尝试的点。\nFreqtrade 尝试通过使用新的、随机化的点来解决 “局部最小值” 问题。","position":{"start":{"line":711,"column":1},"end":{"line":711,"column":1}},"key":"mvef2KRBe9"}],"key":"AYs4ykxqfj"},{"type":"paragraph","position":{"start":{"line":715,"column":1},"end":{"line":715,"column":1}},"children":[{"type":"text","value":"示例：","position":{"start":{"line":715,"column":1},"end":{"line":715,"column":1}},"key":"Hh8amlmC9M"}],"key":"RF8mw2FLxK"},{"type":"code","lang":"python","value":"buy_ema_short = IntParameter(5, 20, default=10, space=\"buy\", optimize=True)\n# 这是买入空间中唯一的参数","position":{"start":{"line":717,"column":1},"end":{"line":720,"column":1}},"key":"uCQZbNEfMQ"},{"type":"paragraph","position":{"start":{"line":722,"column":1},"end":{"line":723,"column":1}},"children":[{"type":"text","value":"买入空间有 15 个可能的值（","position":{"start":{"line":722,"column":1},"end":{"line":722,"column":1}},"key":"GWwHPNCyE9"},{"type":"inlineCode","value":"5, 6, ... 19, 20","position":{"start":{"line":722,"column":1},"end":{"line":722,"column":1}},"key":"yLEAcl4A0m"},{"type":"text","value":"）。如果您现在运行买入空间的超参优化，hyperopt 将只有 15 个值可以尝试，然后运行完选项。\n因此，您的 epoch 应该与可能的值对齐 - 或者您应该准备好中断运行，如果您注意到很多 ","position":{"start":{"line":722,"column":1},"end":{"line":722,"column":1}},"key":"VQDReZ2uCR"},{"type":"inlineCode","value":"The objective has been evaluated at this point before.","position":{"start":{"line":722,"column":1},"end":{"line":722,"column":1}},"key":"jQivCaYwrO"},{"type":"text","value":" 警告。","position":{"start":{"line":722,"column":1},"end":{"line":722,"column":1}},"key":"lnmqNCspTd"}],"key":"qYf7ANSYXD"},{"type":"heading","depth":3,"position":{"start":{"line":725,"column":1},"end":{"line":725,"column":1}},"children":[{"type":"text","value":"显示 Hyperopt 结果的详细信息","position":{"start":{"line":725,"column":1},"end":{"line":725,"column":1}},"key":"yaqblCNbiA"}],"identifier":"id-hyperopt","label":"显示 Hyperopt 结果的详细信息","html_id":"id-hyperopt-6","implicit":true,"key":"bCJO8fnKPf"},{"type":"paragraph","position":{"start":{"line":727,"column":1},"end":{"line":727,"column":1}},"children":[{"type":"text","value":"在您运行 Hyperopt 以获得所需的 epoch 数量后，您可以稍后列出所有结果进行分析，仅选择最佳或盈利一次，并显示以前评估的任何 epoch 的详细信息。这可以通过 ","position":{"start":{"line":727,"column":1},"end":{"line":727,"column":1}},"key":"AF4ilD7zRR"},{"type":"inlineCode","value":"hyperopt-list","position":{"start":{"line":727,"column":1},"end":{"line":727,"column":1}},"key":"jVky78POBG"},{"type":"text","value":" 和 ","position":{"start":{"line":727,"column":1},"end":{"line":727,"column":1}},"key":"g0TyJUEih1"},{"type":"inlineCode","value":"hyperopt-show","position":{"start":{"line":727,"column":1},"end":{"line":727,"column":1}},"key":"jPowAWcpM2"},{"type":"text","value":" 子命令完成。这些子命令的使用在 ","position":{"start":{"line":727,"column":1},"end":{"line":727,"column":1}},"key":"kFuwKnyZwL"},{"type":"crossReference","url":"/utils","position":{"start":{"line":727,"column":1},"end":{"line":727,"column":1}},"children":[{"type":"text","value":"实用工具子集相关","position":{"start":{"line":727,"column":1},"end":{"line":727,"column":1}},"key":"pbiB83GqyK"}],"urlSource":"utils.md#list-hyperopt-results","dataUrl":"/utils.json","identifier":"list-hyperopt-results","label":"list-hyperopt-results","remote":true,"protocol":"file","kind":"heading","template":"{name}","resolved":true,"html_id":"list-hyperopt-results","key":"nGeUkHN8Gw"},{"type":"text","value":" 章节中描述。","position":{"start":{"line":727,"column":1},"end":{"line":727,"column":1}},"key":"vHfkhIJc0D"}],"key":"jaBTdrUUOD"},{"type":"heading","depth":3,"position":{"start":{"line":729,"column":1},"end":{"line":729,"column":1}},"children":[{"type":"text","value":"输出来自策略的调试消息","position":{"start":{"line":729,"column":1},"end":{"line":729,"column":1}},"key":"qf9a1mv1IB"}],"identifier":"id","label":"输出来自策略的调试消息","html_id":"id-12","implicit":true,"key":"cdREWz0ppB"},{"type":"paragraph","position":{"start":{"line":731,"column":1},"end":{"line":731,"column":1}},"children":[{"type":"text","value":"如果您想输出策略的调试消息，您可以使用 ","position":{"start":{"line":731,"column":1},"end":{"line":731,"column":1}},"key":"XPz1RLknBQ"},{"type":"inlineCode","value":"logging","position":{"start":{"line":731,"column":1},"end":{"line":731,"column":1}},"key":"xYVC0akUXL"},{"type":"text","value":" 模块。默认情况下，Freqtrade 将输出所有级别为 ","position":{"start":{"line":731,"column":1},"end":{"line":731,"column":1}},"key":"RUbdgQJWr2"},{"type":"inlineCode","value":"INFO","position":{"start":{"line":731,"column":1},"end":{"line":731,"column":1}},"key":"KReQDLuuR3"},{"type":"text","value":" 或更高的消息。","position":{"start":{"line":731,"column":1},"end":{"line":731,"column":1}},"key":"yFtTW8rNSK"}],"key":"DInjX7YD3v"},{"type":"code","lang":"python","value":"import logging\n\nclass MyAwesomeStrategy(IStrategy):\n    def populate_indicators(self, dataframe: DataFrame, metadata: dict) -> DataFrame:\n        # 这将输出到日志文件\n        logging.info(\"计算指标\")\n        # 这将输出到日志文件\n        logging.debug(\"计算指标 - 调试级别\")\n        # 这将输出到日志文件\n        logging.warning(\"计算指标 - 警告级别\")\n        # 这将输出到日志文件\n        logging.error(\"计算指标 - 错误级别\")\n        # 这将输出到日志文件\n        logging.critical(\"计算指标 - 严重级别\")\n        return dataframe","position":{"start":{"line":733,"column":1},"end":{"line":749,"column":1}},"key":"yUAymKxMhD"},{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Note","key":"A2W5z9eh6a"}],"key":"i3ZW1JraRE"},{"type":"paragraph","position":{"start":{"line":752,"column":1},"end":{"line":753,"column":1}},"children":[{"type":"text","value":"不推荐使用 ","position":{"start":{"line":752,"column":1},"end":{"line":752,"column":1}},"key":"xLHfZWBoAS"},{"type":"inlineCode","value":"print()","position":{"start":{"line":752,"column":1},"end":{"line":752,"column":1}},"key":"CaOk8hddKR"},{"type":"text","value":" 函数，因为它会干扰 hyperopt 的输出。\n建议使用 ","position":{"start":{"line":752,"column":1},"end":{"line":752,"column":1}},"key":"pMHWdfm6XP"},{"type":"inlineCode","value":"logging","position":{"start":{"line":752,"column":1},"end":{"line":752,"column":1}},"key":"HLr4UKE2Kn"},{"type":"text","value":" 模块代替。","position":{"start":{"line":752,"column":1},"end":{"line":752,"column":1}},"key":"qL3ahtIt6o"}],"key":"tHBSmMK1zq"}],"key":"MKynOAJPmJ"},{"type":"heading","depth":3,"position":{"start":{"line":756,"column":1},"end":{"line":756,"column":1}},"children":[{"type":"text","value":"验证回测结果","position":{"start":{"line":756,"column":1},"end":{"line":756,"column":1}},"key":"cA8EzGB578"}],"identifier":"id","label":"验证回测结果","html_id":"id-13","implicit":true,"key":"I7Kd2vI0DP"},{"type":"paragraph","position":{"start":{"line":758,"column":1},"end":{"line":758,"column":1}},"children":[{"type":"text","value":"一旦优化策略实现到您的策略中，您应该回测此策略，以确保一切按预期工作。","position":{"start":{"line":758,"column":1},"end":{"line":758,"column":1}},"key":"D9aipXBPhf"}],"key":"yFOGTPt5GO"},{"type":"paragraph","position":{"start":{"line":760,"column":1},"end":{"line":760,"column":1}},"children":[{"type":"text","value":"为了获得与 Hyperopt 期间相同的相同结果（交易次数、持续时间、利润等），请使用与 Hyperopt 相同的配置和参数（时间范围、时间框架、...）进行回测。","position":{"start":{"line":760,"column":1},"end":{"line":760,"column":1}},"key":"zShFkPU9Ck"}],"key":"oi0qsa7R2o"},{"type":"heading","depth":4,"position":{"start":{"line":762,"column":1},"end":{"line":762,"column":1}},"children":[{"type":"text","value":"为什么我的回测结果与我的 Hyperopt 结果不匹配？","position":{"start":{"line":762,"column":1},"end":{"line":762,"column":1}},"key":"ajWBrdnS1o"}],"identifier":"id-hyperopt","label":"为什么我的回测结果与我的 Hyperopt 结果不匹配？","html_id":"id-hyperopt-7","implicit":true,"key":"UZ02uuZAdN"},{"type":"paragraph","position":{"start":{"line":764,"column":1},"end":{"line":764,"column":1}},"children":[{"type":"text","value":"如果结果不匹配，请检查以下因素：","position":{"start":{"line":764,"column":1},"end":{"line":764,"column":1}},"key":"MDCh8x0rx9"}],"key":"SfzCFsw7Gr"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":766,"column":1},"end":{"line":771,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":766,"column":1},"end":{"line":766,"column":1}},"children":[{"type":"text","value":"您可能已在 ","position":{"start":{"line":766,"column":1},"end":{"line":766,"column":1}},"key":"sPkYVnQLeE"},{"type":"inlineCode","value":"populate_indicators()","position":{"start":{"line":766,"column":1},"end":{"line":766,"column":1}},"key":"UvclXhOtXR"},{"type":"text","value":" 中添加了参数，这些参数仅在 ","position":{"start":{"line":766,"column":1},"end":{"line":766,"column":1}},"key":"fc5ZqLDmL2"},{"type":"strong","position":{"start":{"line":766,"column":1},"end":{"line":766,"column":1}},"children":[{"type":"text","value":"所有 epoch","position":{"start":{"line":766,"column":1},"end":{"line":766,"column":1}},"key":"umkKJmpx8n"}],"key":"qKcPKLf5Qa"},{"type":"text","value":" 中计算一次。如果您是，例如，尝试优化多个 SMA 时间周期值，hyperoptable 时间周期参数应放置在 ","position":{"start":{"line":766,"column":1},"end":{"line":766,"column":1}},"key":"ITAcjhNy1o"},{"type":"inlineCode","value":"populate_entry_trend()","position":{"start":{"line":766,"column":1},"end":{"line":766,"column":1}},"key":"wNHoeB4Vf2"},{"type":"text","value":" 中，该参数在每个 epoch 中计算。请参阅 ","position":{"start":{"line":766,"column":1},"end":{"line":766,"column":1}},"key":"ccl8PBed1n"},{"type":"link","url":"https://www.freqtrade.io/en/stable/hyperopt/#optimizing-an-indicator-parameter","position":{"start":{"line":766,"column":1},"end":{"line":766,"column":1}},"children":[{"type":"text","value":"Optimizing an indicator parameter","position":{"start":{"line":766,"column":1},"end":{"line":766,"column":1}},"key":"B10aCEkkhQ"}],"urlSource":"https://www.freqtrade.io/en/stable/hyperopt/#optimizing-an-indicator-parameter","key":"Ej04oQSu41"},{"type":"text","value":"。","position":{"start":{"line":766,"column":1},"end":{"line":766,"column":1}},"key":"DdknZaNCEW"}],"key":"fZsHRberms"},{"type":"listItem","spread":true,"position":{"start":{"line":767,"column":1},"end":{"line":767,"column":1}},"children":[{"type":"text","value":"如果您已禁用自动将 hyperopt 参数导出到 JSON 参数文件中，请双检查以确保您已将所有 hyperopted 值传输到策略中。","position":{"start":{"line":767,"column":1},"end":{"line":767,"column":1}},"key":"OZB3UVWzxa"}],"key":"LVcamCCjDj"},{"type":"listItem","spread":true,"position":{"start":{"line":768,"column":1},"end":{"line":768,"column":1}},"children":[{"type":"text","value":"检查日志以验证设置了哪些参数以及使用了哪些值。","position":{"start":{"line":768,"column":1},"end":{"line":768,"column":1}},"key":"ZzSY7zUfcQ"}],"key":"QwFqbFZtaa"},{"type":"listItem","spread":true,"position":{"start":{"line":769,"column":1},"end":{"line":769,"column":1}},"children":[{"type":"text","value":"特别注意止损、max_open_trades 和追踪止损参数，因为这些参数通常在配置文件中设置，这些参数会覆盖对策略的更改。检查您的回测日志以确保没有参数无意中由配置设置（如 ","position":{"start":{"line":769,"column":1},"end":{"line":769,"column":1}},"key":"RdB9wUCxhZ"},{"type":"inlineCode","value":"stoploss","position":{"start":{"line":769,"column":1},"end":{"line":769,"column":1}},"key":"ar3GrbKJkW"},{"type":"text","value":"、","position":{"start":{"line":769,"column":1},"end":{"line":769,"column":1}},"key":"hJSybXrEl6"},{"type":"inlineCode","value":"max_open_trades","position":{"start":{"line":769,"column":1},"end":{"line":769,"column":1}},"key":"hVLEBKMSgq"},{"type":"text","value":" 或 ","position":{"start":{"line":769,"column":1},"end":{"line":769,"column":1}},"key":"HMXKLPnRHk"},{"type":"inlineCode","value":"trailing_stop","position":{"start":{"line":769,"column":1},"end":{"line":769,"column":1}},"key":"FJwuIQEACd"},{"type":"text","value":"）。","position":{"start":{"line":769,"column":1},"end":{"line":769,"column":1}},"key":"R6nsuMB6Xa"}],"key":"qmOKijX2uS"},{"type":"listItem","spread":true,"position":{"start":{"line":770,"column":1},"end":{"line":770,"column":1}},"children":[{"type":"text","value":"验证您是否没有意外的参数 JSON 文件覆盖策略参数或策略中的默认 hyperopt 设置。","position":{"start":{"line":770,"column":1},"end":{"line":770,"column":1}},"key":"IxzzFOofzP"}],"key":"NjMfkN5Unv"},{"type":"listItem","spread":true,"position":{"start":{"line":771,"column":1},"end":{"line":771,"column":1}},"children":[{"type":"text","value":"验证如果您在回测中启用的任何保护措施在 hyperopting 时也已启用，反之亦然。当使用 ","position":{"start":{"line":771,"column":1},"end":{"line":771,"column":1}},"key":"dIWkjkQCYY"},{"type":"inlineCode","value":"--space protection","position":{"start":{"line":771,"column":1},"end":{"line":771,"column":1}},"key":"iIIDywLHO0"},{"type":"text","value":" 时，保护措施自动为 hyperopting 启用。","position":{"start":{"line":771,"column":1},"end":{"line":771,"column":1}},"key":"w1tpGd919I"}],"key":"rEQAnX4qHB"}],"key":"zVCbwd7MR2"}],"key":"VTmbZRjcNM"}],"key":"VEWvyCnRaG"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"回测","short_title":"回测","url":"/backtesting","group":"机器人控制和管理"},"next":{"title":"Freqai","url":"/freqai","group":"FreqAI"}}},"domain":"http://localhost:3002"}