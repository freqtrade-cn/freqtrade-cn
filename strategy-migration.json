{"version":2,"kind":"Article","sha256":"b44c313508c040ef4746dcda73c54e51deb29c0e4b76ba92381958071d469117","slug":"strategy-migration","location":"/strategy_migration.md","dependencies":[],"frontmatter":{"title":"策略迁移指南","description":"本文档详细介绍了如何将 Freqtrade V2 策略迁移到 V3，包括接口变更、方法重命名以及新增功能的完整说明。","short_title":"策略迁移","subtitle":"从 V2 到 V3 的策略迁移完整指南","subject":"Freqtrade V2 到 V3 迁移","authors":[{"id":"Freqtrade","name":"Freqtrade"}],"github":"https://github.com/freqtrade-cn/docs_zh-CN","keywords":["Freqtrade","中文文档","交易机器人","量化交易","加密货币","数字货币","区块链","人工智能","机器学习"],"edit_url":"https://github.com/freqtrade-cn/docs_zh-CN/blob/main/strategy_migration.md","exports":[{"format":"md","filename":"strategy_migration.md","url":"/build/strategy_migration-9186f124d7303f9dbe602f22b1136893.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"V2 和 V3 之间的策略迁移","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"sWQ7543e9C"}],"identifier":"v2-v3","label":"V2 和 V3 之间的策略迁移","html_id":"v2-v3","implicit":true,"key":"rYNTkfkW1r"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"为了支持新的市场和交易类型（即空头交易/杠杆交易），接口必须进行一些更改。\n如果你打算使用现货市场以外的市场，请将你的策略迁移到新格式。","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"qvNuYLkE6w"}],"key":"SCnDBBvrom"},{"type":"paragraph","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"我们付出了很大努力来保持与现有策略的兼容性，所以如果你只想继续在__现货市场__使用 freqtrade，目前应该不需要任何更改。","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"osVEbPEXfd"}],"key":"YxO4PXxew0"},{"type":"paragraph","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"你可以使用快速摘要作为检查清单。请参阅下面的详细部分以获取完整的迁移详情。","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"uo0vpBPBCK"}],"key":"W35YKKY87C"},{"type":"heading","depth":3,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"快速摘要/迁移检查清单","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"sM7sWI3TuC"}],"identifier":"id","label":"快速摘要/迁移检查清单","html_id":"id","implicit":true,"key":"n5zRYeQaqW"},{"type":"paragraph","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"注意：","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"DR92RU1y9s"},{"type":"inlineCode","value":"forcesell","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"vQTQb7cxac"},{"type":"text","value":"、","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"k5fSeBJPym"},{"type":"inlineCode","value":"forcebuy","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"aPhUvMjwdN"},{"type":"text","value":"、","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"CmlsaorzsE"},{"type":"inlineCode","value":"emergencysell","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"H3725ALUu2"},{"type":"text","value":" 分别改为 ","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"XWRLKEvczK"},{"type":"inlineCode","value":"force_exit","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"kPruQ4m5Hb"},{"type":"text","value":"、","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"tr85Re2FMM"},{"type":"inlineCode","value":"force_enter","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"sjijIxJPe3"},{"type":"text","value":"、","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"BedmWIpHSw"},{"type":"inlineCode","value":"emergency_exit","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"f77vwTjmM5"},{"type":"text","value":"。","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"JG9ZvqnRJF"}],"key":"CaSvkEHxcb"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":22,"column":1},"end":{"line":86,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":22,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"text","value":"策略方法：","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"BIqoVuaD2B"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":23,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"link","url":"#populate_buy_trend","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"inlineCode","value":"populate_buy_trend()","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"ay8CUPM8Js"},{"type":"text","value":" -> ","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"iRo1XupBLU"},{"type":"inlineCode","value":"populate_entry_trend()","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"k10aLk5Jgj"}],"urlSource":"#populate_buy_trend","key":"LPi2qeOCAX"}],"key":"lKY5tjoVLo"},{"type":"listItem","spread":true,"position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"link","url":"#populate_sell_trend","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"inlineCode","value":"populate_sell_trend()","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"F9u9PSr926"},{"type":"text","value":" -> ","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"VuUDjB8x5i"},{"type":"inlineCode","value":"populate_exit_trend()","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"b30RRjwTqE"}],"urlSource":"#populate_sell_trend","key":"Dbn2JqQWMM"}],"key":"B5ZeL0K7KO"},{"type":"listItem","spread":true,"position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"link","url":"#custom_sell","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"inlineCode","value":"custom_sell()","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"a83cH48LB6"},{"type":"text","value":" -> ","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"ArVSW8RIcE"},{"type":"inlineCode","value":"custom_exit()","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"VgcnLBDva3"}],"urlSource":"#custom_sell","key":"AxFrejkVXx"}],"key":"aixNydmw2z"},{"type":"listItem","spread":true,"position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"link","url":"#custom_entry_timeout","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"inlineCode","value":"check_buy_timeout()","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"zkH7QVJI5L"},{"type":"text","value":" -> ","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"TTK5hhHhOj"},{"type":"inlineCode","value":"check_entry_timeout()","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"U0eJyo8wve"}],"urlSource":"#custom_entry_timeout","key":"KaApxyBZES"}],"key":"XeACYTKSaC"},{"type":"listItem","spread":true,"position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"link","url":"#custom_entry_timeout","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"inlineCode","value":"check_sell_timeout()","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"cQhE33hjGM"},{"type":"text","value":" -> ","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"JFs2GaIW7H"},{"type":"inlineCode","value":"check_exit_timeout()","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"tYXCkl7IMZ"}],"urlSource":"#custom_entry_timeout","key":"beNGHemw3t"}],"key":"fLiELpSsJG"},{"type":"listItem","spread":true,"position":{"start":{"line":28,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"没有交易对象的回调新增 ","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"fBmdeUr7AH"},{"type":"inlineCode","value":"side","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"TAU6Ewfevl"},{"type":"text","value":" 参数","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"abVAHAFI3m"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":29,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"link","url":"#custom_stake_amount","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"inlineCode","value":"custom_stake_amount","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"l1V67pQ2oT"}],"urlSource":"#custom_stake_amount","key":"uMs1w6mgrU"}],"key":"NC2xkBEObm"},{"type":"listItem","spread":true,"position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"link","url":"#confirm_trade_entry","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"inlineCode","value":"confirm_trade_entry","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"Ao9KAPMo5g"}],"urlSource":"#confirm_trade_entry","key":"eIyFcJTjyF"}],"key":"BIkcWDoFMA"},{"type":"listItem","spread":true,"position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"link","url":"#custom_entry_price","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"inlineCode","value":"custom_entry_price","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"kuy9d9Xpyg"}],"urlSource":"#custom_entry_price","key":"k7U8taUt8A"}],"key":"nJtsQUPMJK"}],"key":"HgPGCIGMnN"}],"key":"QnkRfdzyMr"},{"type":"listItem","spread":true,"position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"link","url":"#confirm_trade_exit","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"inlineCode","value":"confirm_trade_exit","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"EEELpNXn7Y"},{"type":"text","value":" 中更改参数名称","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"BbH3yIQkeh"}],"urlSource":"#confirm_trade_exit","key":"Y3mXHcuJC2"}],"key":"T1XYGY8spj"}],"key":"x1h5QKNk0q"}],"key":"lLELxIffXZ"},{"type":"listItem","spread":true,"position":{"start":{"line":33,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"text","value":"数据框列：","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"iBN6uYb1bG"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":34,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"link","url":"#populate_buy_trend","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"inlineCode","value":"buy","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"fGqnFlpLjY"},{"type":"text","value":" -> ","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"kcAwLMT5bs"},{"type":"inlineCode","value":"enter_long","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"sTgcHNvXZB"}],"urlSource":"#populate_buy_trend","key":"FFOBckpL3Z"}],"key":"Ocy92ZBAcG"},{"type":"listItem","spread":true,"position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"link","url":"#populate_sell_trend","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"inlineCode","value":"sell","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"wJsQuSEEo2"},{"type":"text","value":" -> ","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"GPCt9GVwmi"},{"type":"inlineCode","value":"exit_long","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"nGv6nUZ4Tz"}],"urlSource":"#populate_sell_trend","key":"GFZmwForpS"}],"key":"a0ceGujlXn"},{"type":"listItem","spread":true,"position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"children":[{"type":"link","url":"#populate_buy_trend","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"children":[{"type":"inlineCode","value":"buy_tag","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"oJ4owR2KXj"},{"type":"text","value":" -> ","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"rN75keW72H"},{"type":"inlineCode","value":"enter_tag","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"EFO2qkEEyj"},{"type":"text","value":"（用于多头和空头交易）","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"GcqJ9qbT1S"}],"urlSource":"#populate_buy_trend","key":"lcKfew7S8R"}],"key":"ciYwoLzhCT"},{"type":"listItem","spread":true,"position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"link","url":"#populate_sell_trend","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"text","value":"新增列 ","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"e9adak2i8R"},{"type":"inlineCode","value":"enter_short","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"jQZgQcpmzo"},{"type":"text","value":" 和相应的新列 ","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"kz5qJe9MrR"},{"type":"inlineCode","value":"exit_short","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"ZScH4xgct7"}],"urlSource":"#populate_sell_trend","key":"xuuJKgiZIx"}],"key":"EqG3YcCQOd"}],"key":"n77WqiqFnV"}],"key":"h1eHQkuUAI"},{"type":"listItem","spread":true,"position":{"start":{"line":38,"column":1},"end":{"line":43,"column":1}},"children":[{"type":"text","value":"trade-object 现在有以下新属性：","position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"key":"DfdDTgDzSo"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":39,"column":1},"end":{"line":43,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"children":[{"type":"inlineCode","value":"is_short","position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"key":"TYKuFCa0Vr"}],"key":"nViTVomtwh"},{"type":"listItem","spread":true,"position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"children":[{"type":"inlineCode","value":"entry_side","position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"key":"hFaSQtreU5"}],"key":"FifseU8CwN"},{"type":"listItem","spread":true,"position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"children":[{"type":"inlineCode","value":"exit_side","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"xpqOIErlHw"}],"key":"PdovBWvkD7"},{"type":"listItem","spread":true,"position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"children":[{"type":"inlineCode","value":"trade_direction","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"key":"s2RykUnw4V"}],"key":"R1b0A0krVB"},{"type":"listItem","spread":true,"position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"children":[{"type":"text","value":"重命名：","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"Ag0P31zKbB"},{"type":"inlineCode","value":"sell_reason","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"sVofvhdVbv"},{"type":"text","value":" -> ","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"imk2Il8O5C"},{"type":"inlineCode","value":"exit_reason","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"i5kE1iNaDZ"}],"key":"UODmEeoduB"}],"key":"yrv3KtbKbA"}],"key":"DXzS8v3vYm"},{"type":"listItem","spread":true,"position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"children":[{"type":"link","url":"#adjust-trade-position-changes","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"children":[{"type":"text","value":"将 ","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"HOAHRaU2o6"},{"type":"inlineCode","value":"trade.nr_of_successful_buys","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"nv1pq2sxiM"},{"type":"text","value":" 重命名为 ","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"fAyrXOAb5A"},{"type":"inlineCode","value":"trade.nr_of_successful_entries","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"rg7tN9wJNa"},{"type":"text","value":"（主要与 ","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"tbNLogUcWC"},{"type":"inlineCode","value":"adjust_trade_position()","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"K38Y1bBnb7"},{"type":"text","value":" 相关）","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"X03cFOc0js"}],"urlSource":"#adjust-trade-position-changes","key":"pyGonDGZUM"}],"key":"KWzWjiOTa8"},{"type":"listItem","spread":true,"position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"children":[{"type":"text","value":"引入新的 ","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"YsSf7xUlLM"},{"type":"crossReference","url":"/strategy-callbacks","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"children":[{"type":"inlineCode","value":"leverage","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"ONmuArwXZz"},{"type":"text","value":" 回调","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"rmqwmqHkcf"}],"urlSource":"strategy-callbacks.md#leverage-callback","dataUrl":"/strategy-callbacks.json","identifier":"leverage-callback","label":"leverage-callback","remote":true,"protocol":"file","key":"OGY2Xj4cqE"},{"type":"text","value":"。","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"m9m1MLXN3W"}],"key":"PqeNVOLWRA"},{"type":"listItem","spread":true,"position":{"start":{"line":46,"column":1},"end":{"line":46,"column":1}},"children":[{"type":"text","value":"信息对现在可以在元组中传递第三个元素，定义蜡烛类型。","position":{"start":{"line":46,"column":1},"end":{"line":46,"column":1}},"key":"vt2CjHJ0MK"}],"key":"VFNhOsH50P"},{"type":"listItem","spread":true,"position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"children":[{"type":"inlineCode","value":"@informative","position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"key":"rbbpvBcr9k"},{"type":"text","value":" 装饰器现在接受可选的 ","position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"key":"f6sz8Dcchw"},{"type":"inlineCode","value":"candle_type","position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"key":"wT3rxbnGhp"},{"type":"text","value":" 参数。","position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"key":"GpOJ607AO8"}],"key":"fddqycfuZ4"},{"type":"listItem","spread":true,"position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"children":[{"type":"link","url":"#helper-methods","position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"children":[{"type":"text","value":"辅助方法","position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"key":"pzZapsANLh"}],"urlSource":"#helper-methods","key":"umdbHRoTRN"},{"type":"text","value":" ","position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"key":"hVXDA7skH2"},{"type":"inlineCode","value":"stoploss_from_open","position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"key":"sjwx9yyRXp"},{"type":"text","value":" 和 ","position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"key":"a5X1PQHiQW"},{"type":"inlineCode","value":"stoploss_from_absolute","position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"key":"JLxFkXTqDQ"},{"type":"text","value":" 现在接受 ","position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"key":"se0CCyloFB"},{"type":"inlineCode","value":"is_short","position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"key":"rQMjQrnYz2"},{"type":"text","value":" 作为附加参数。","position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"key":"FDvK501Ufy"}],"key":"t3cZiOtcyr"},{"type":"listItem","spread":true,"position":{"start":{"line":49,"column":1},"end":{"line":49,"column":1}},"children":[{"type":"inlineCode","value":"INTERFACE_VERSION","position":{"start":{"line":49,"column":1},"end":{"line":49,"column":1}},"key":"wILLfh3v7T"},{"type":"text","value":" 应设置为 3。","position":{"start":{"line":49,"column":1},"end":{"line":49,"column":1}},"key":"j4v1qSOJB6"}],"key":"ipZoF8ESES"},{"type":"listItem","spread":true,"position":{"start":{"line":50,"column":1},"end":{"line":54,"column":1}},"children":[{"type":"link","url":"#strategyconfiguration-settings","position":{"start":{"line":50,"column":1},"end":{"line":50,"column":1}},"children":[{"type":"text","value":"策略/配置设置","position":{"start":{"line":50,"column":1},"end":{"line":50,"column":1}},"key":"oh8T9GXTjT"}],"urlSource":"#strategyconfiguration-settings","key":"oXhlkfsgMw"},{"type":"text","value":"。","position":{"start":{"line":50,"column":1},"end":{"line":50,"column":1}},"key":"ddnCtnaZsn"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":51,"column":1},"end":{"line":54,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"children":[{"type":"inlineCode","value":"order_time_in_force","position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"key":"DDrPRVlYKw"},{"type":"text","value":" buy -> entry, sell -> exit。","position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"key":"XNDrvoEw5R"}],"key":"jT52fjPTIU"},{"type":"listItem","spread":true,"position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"children":[{"type":"inlineCode","value":"order_types","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"lQ0qbC9rNA"},{"type":"text","value":" buy -> entry, sell -> exit。","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"e9NCZRXeD1"}],"key":"Q1mZL6vKFJ"},{"type":"listItem","spread":true,"position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"children":[{"type":"inlineCode","value":"unfilledtimeout","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"key":"GfnGxLbz1I"},{"type":"text","value":" buy -> entry, sell -> exit。","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"key":"oiZiSzohgJ"}],"key":"ICf2sbhiCX"},{"type":"listItem","spread":true,"position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"children":[{"type":"inlineCode","value":"ignore_buying_expired_candle_after","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"AE7m6eDMYa"},{"type":"text","value":" -> 移到根级别而不是 “ask_strategy/exit_pricing”","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"mTSYhOdycV"}],"key":"tmxwHMS71y"}],"key":"zyWmqnE3EP"}],"key":"rCQ8QqufCg"},{"type":"listItem","spread":true,"position":{"start":{"line":55,"column":1},"end":{"line":86,"column":1}},"children":[{"type":"text","value":"术语更改","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"dF2xGiEQyK"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":56,"column":1},"end":{"line":86,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":56,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"text","value":"卖出原因改为反映新的\"exit\"命名而不是 sells。如果你在策略中使用 ","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"rXsQJ7rtzw"},{"type":"inlineCode","value":"exit_reason","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"Lwb3t3ahgc"},{"type":"text","value":" 检查，请小心并最终更新你的策略。","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"FXcHmNhT0T"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":57,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"children":[{"type":"inlineCode","value":"sell_signal","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"aZejrMzmFN"},{"type":"text","value":" -> ","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"PQD9zQywkm"},{"type":"inlineCode","value":"exit_signal","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"YLslmF9Uo0"}],"key":"iBXrpRO77b"},{"type":"listItem","spread":true,"position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"children":[{"type":"inlineCode","value":"custom_sell","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"key":"KwLTcUqsbc"},{"type":"text","value":" -> ","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"key":"TAf2z7th4c"},{"type":"inlineCode","value":"custom_exit","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"key":"iGPiyLUqdE"}],"key":"avyfO3qU8d"},{"type":"listItem","spread":true,"position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"children":[{"type":"inlineCode","value":"force_sell","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"S5wmzWl61d"},{"type":"text","value":" -> ","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"n74jKLccEl"},{"type":"inlineCode","value":"force_exit","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"MtAdSItk2o"}],"key":"my6XKgaU7x"},{"type":"listItem","spread":true,"position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"inlineCode","value":"emergency_sell","position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"key":"fS4QoG6obG"},{"type":"text","value":" -> ","position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"key":"DveXkSjQkR"},{"type":"inlineCode","value":"emergency_exit","position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"key":"XxYT1PGZN1"}],"key":"JnsbzluUJN"}],"key":"NCHbAUAP2M"}],"key":"hl3stKL0aB"},{"type":"listItem","spread":true,"position":{"start":{"line":61,"column":1},"end":{"line":65,"column":1}},"children":[{"type":"text","value":"订单定价","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"key":"j1U2tVHEz4"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":62,"column":1},"end":{"line":65,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":62,"column":1},"end":{"line":62,"column":1}},"children":[{"type":"inlineCode","value":"bid_strategy","position":{"start":{"line":62,"column":1},"end":{"line":62,"column":1}},"key":"m9kGsGmY8j"},{"type":"text","value":" -> ","position":{"start":{"line":62,"column":1},"end":{"line":62,"column":1}},"key":"V9DCWDT9QK"},{"type":"inlineCode","value":"entry_pricing","position":{"start":{"line":62,"column":1},"end":{"line":62,"column":1}},"key":"jvnPihnlu7"}],"key":"fU7kfU4ynS"},{"type":"listItem","spread":true,"position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"children":[{"type":"inlineCode","value":"ask_strategy","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"YEyYtTsAuo"},{"type":"text","value":" -> ","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"BBvAKohGML"},{"type":"inlineCode","value":"exit_pricing","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"oa4cbavtoF"}],"key":"yNPsjWq3bH"},{"type":"listItem","spread":true,"position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"children":[{"type":"inlineCode","value":"ask_last_balance","position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"key":"d6iWGsiKpO"},{"type":"text","value":" -> ","position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"key":"i4eg6rsc8m"},{"type":"inlineCode","value":"price_last_balance","position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"key":"VBqf0VIyJI"}],"key":"s3AhRnBG5Y"},{"type":"listItem","spread":true,"position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"children":[{"type":"inlineCode","value":"bid_last_balance","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"Q5jMxmAEQN"},{"type":"text","value":" -> ","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"rSlRy5bu8U"},{"type":"inlineCode","value":"price_last_balance","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"Y6Us7ynly1"}],"key":"G5S3d0q8DG"}],"key":"UFKLdoxLNU"}],"key":"PvMAn8Vd6u"},{"type":"listItem","spread":true,"position":{"start":{"line":66,"column":1},"end":{"line":72,"column":1}},"children":[{"type":"text","value":"Webhook 术语从\"sell\"改为\"exit\"，从\"buy\"改为 entry","position":{"start":{"line":66,"column":1},"end":{"line":66,"column":1}},"key":"wVJLsOBj0c"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":67,"column":1},"end":{"line":72,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":67,"column":1},"end":{"line":67,"column":1}},"children":[{"type":"inlineCode","value":"webhookbuy","position":{"start":{"line":67,"column":1},"end":{"line":67,"column":1}},"key":"pQE8Fw2x3a"},{"type":"text","value":" -> ","position":{"start":{"line":67,"column":1},"end":{"line":67,"column":1}},"key":"xS5v6irQMn"},{"type":"inlineCode","value":"entry","position":{"start":{"line":67,"column":1},"end":{"line":67,"column":1}},"key":"TisNMMojAB"}],"key":"dfMxOkWU6O"},{"type":"listItem","spread":true,"position":{"start":{"line":68,"column":1},"end":{"line":68,"column":1}},"children":[{"type":"inlineCode","value":"webhookbuyfill","position":{"start":{"line":68,"column":1},"end":{"line":68,"column":1}},"key":"mkB8Oxnc55"},{"type":"text","value":" -> ","position":{"start":{"line":68,"column":1},"end":{"line":68,"column":1}},"key":"A8j6CgTdKY"},{"type":"inlineCode","value":"entry_fill","position":{"start":{"line":68,"column":1},"end":{"line":68,"column":1}},"key":"Y1TwACiIVC"}],"key":"heF3gMA5ry"},{"type":"listItem","spread":true,"position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"children":[{"type":"inlineCode","value":"webhookbuycancel","position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"key":"fr0h6pXjr5"},{"type":"text","value":" -> ","position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"key":"lxM9O0d05C"},{"type":"inlineCode","value":"entry_cancel","position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"key":"nhcumL7GzQ"}],"key":"WcWUlOXLF3"},{"type":"listItem","spread":true,"position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"children":[{"type":"inlineCode","value":"webhooksell","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"key":"kccUz8MI0Y"},{"type":"text","value":" -> ","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"key":"rHAd94JB2Y"},{"type":"inlineCode","value":"exit","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"key":"GyjfDm8HjA"}],"key":"xYzLiiwxRr"},{"type":"listItem","spread":true,"position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"children":[{"type":"inlineCode","value":"webhooksellfill","position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"key":"u3kwafjSF4"},{"type":"text","value":" -> ","position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"key":"Ro5n8nxIYR"},{"type":"inlineCode","value":"exit_fill","position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"key":"wKDFxDE0VV"}],"key":"oYKyrjgUmn"},{"type":"listItem","spread":true,"position":{"start":{"line":72,"column":1},"end":{"line":72,"column":1}},"children":[{"type":"inlineCode","value":"webhooksellcancel","position":{"start":{"line":72,"column":1},"end":{"line":72,"column":1}},"key":"FlgVNI7v30"},{"type":"text","value":" -> ","position":{"start":{"line":72,"column":1},"end":{"line":72,"column":1}},"key":"ub0y0kFy7F"},{"type":"inlineCode","value":"exit_cancel","position":{"start":{"line":72,"column":1},"end":{"line":72,"column":1}},"key":"ktQeZHm0qV"}],"key":"S14yHWEwrs"}],"key":"wPX7h74Nc3"}],"key":"rS9tGcmfnr"},{"type":"listItem","spread":true,"position":{"start":{"line":73,"column":1},"end":{"line":79,"column":1}},"children":[{"type":"text","value":"Telegram 通知设置","position":{"start":{"line":73,"column":1},"end":{"line":73,"column":1}},"key":"wnuGObSru6"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":74,"column":1},"end":{"line":79,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"children":[{"type":"inlineCode","value":"buy","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"key":"KZzmUQ2htE"},{"type":"text","value":" -> ","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"key":"PlUobnNrO4"},{"type":"inlineCode","value":"entry","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"key":"qykO4n9A0U"}],"key":"sQPKV0kCa3"},{"type":"listItem","spread":true,"position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"children":[{"type":"inlineCode","value":"buy_fill","position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"key":"iZeGhAHH5g"},{"type":"text","value":" -> ","position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"key":"X2qeTzb87N"},{"type":"inlineCode","value":"entry_fill","position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"key":"VNhderUfFy"}],"key":"u1vGzSxE5m"},{"type":"listItem","spread":true,"position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"children":[{"type":"inlineCode","value":"buy_cancel","position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"key":"SX3Qr9EogB"},{"type":"text","value":" -> ","position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"key":"oqLADEus8x"},{"type":"inlineCode","value":"entry_cancel","position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"key":"gf3AARh7EG"}],"key":"TQUwQMMXW9"},{"type":"listItem","spread":true,"position":{"start":{"line":77,"column":1},"end":{"line":77,"column":1}},"children":[{"type":"inlineCode","value":"sell","position":{"start":{"line":77,"column":1},"end":{"line":77,"column":1}},"key":"RjRGWywJrB"},{"type":"text","value":" -> ","position":{"start":{"line":77,"column":1},"end":{"line":77,"column":1}},"key":"cnIm5Tn9fE"},{"type":"inlineCode","value":"exit","position":{"start":{"line":77,"column":1},"end":{"line":77,"column":1}},"key":"RfpfnftJ0R"}],"key":"E2c87uBqLP"},{"type":"listItem","spread":true,"position":{"start":{"line":78,"column":1},"end":{"line":78,"column":1}},"children":[{"type":"inlineCode","value":"sell_fill","position":{"start":{"line":78,"column":1},"end":{"line":78,"column":1}},"key":"ycWcduM3PI"},{"type":"text","value":" -> ","position":{"start":{"line":78,"column":1},"end":{"line":78,"column":1}},"key":"QgwyMEvPC8"},{"type":"inlineCode","value":"exit_fill","position":{"start":{"line":78,"column":1},"end":{"line":78,"column":1}},"key":"nKeQySsnqQ"}],"key":"brkzfjIhNZ"},{"type":"listItem","spread":true,"position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"children":[{"type":"inlineCode","value":"sell_cancel","position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"key":"YVaNx3GH93"},{"type":"text","value":" -> ","position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"key":"aTZbbsYpJg"},{"type":"inlineCode","value":"exit_cancel","position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"key":"HWjVCds2SC"}],"key":"w45swoED5r"}],"key":"IdrgBbGRj3"}],"key":"LyG99RUMvl"},{"type":"listItem","spread":true,"position":{"start":{"line":80,"column":1},"end":{"line":86,"column":1}},"children":[{"type":"text","value":"策略/配置设置：","position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"key":"mn2ZHLFHkv"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":81,"column":1},"end":{"line":86,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"children":[{"type":"inlineCode","value":"use_sell_signal","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"key":"Ukiq37j4kd"},{"type":"text","value":" -> ","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"key":"wwzDzdzb5U"},{"type":"inlineCode","value":"use_exit_signal","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"key":"BvrcBz4RCq"}],"key":"yLNK5FSHeK"},{"type":"listItem","spread":true,"position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"children":[{"type":"inlineCode","value":"sell_profit_only","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"key":"wBjSLHntdS"},{"type":"text","value":" -> ","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"key":"LNUH8C6j9r"},{"type":"inlineCode","value":"exit_profit_only","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"key":"wGHXwONPHy"}],"key":"NAQMKuwjMT"},{"type":"listItem","spread":true,"position":{"start":{"line":83,"column":1},"end":{"line":83,"column":1}},"children":[{"type":"inlineCode","value":"sell_profit_offset","position":{"start":{"line":83,"column":1},"end":{"line":83,"column":1}},"key":"cKX2wIJJ8X"},{"type":"text","value":" -> ","position":{"start":{"line":83,"column":1},"end":{"line":83,"column":1}},"key":"J3ALWQGlhp"},{"type":"inlineCode","value":"exit_profit_offset","position":{"start":{"line":83,"column":1},"end":{"line":83,"column":1}},"key":"qFevVX730c"}],"key":"yFVXN9plsj"},{"type":"listItem","spread":true,"position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"children":[{"type":"inlineCode","value":"ignore_roi_if_buy_signal","position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"key":"foYotdIq9v"},{"type":"text","value":" -> ","position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"key":"VwRB4emEvX"},{"type":"inlineCode","value":"ignore_roi_if_entry_signal","position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"key":"b7vkukPZNS"}],"key":"qymt3mKuO1"},{"type":"listItem","spread":true,"position":{"start":{"line":85,"column":1},"end":{"line":86,"column":1}},"children":[{"type":"inlineCode","value":"forcebuy_enable","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"mjdcSCtCaY"},{"type":"text","value":" -> ","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"uOsUyb8gKo"},{"type":"inlineCode","value":"force_entry_enable","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"zzWa0AYS7K"}],"key":"yTPEC1MQmp"}],"key":"VLIR8csA9c"}],"key":"AZSGe42k4o"}],"key":"nA9JVTt4a3"}],"key":"bGYM8WHndc"}],"key":"MTpAaENFcW"},{"type":"heading","depth":3,"position":{"start":{"line":87,"column":1},"end":{"line":87,"column":1}},"children":[{"type":"text","value":"详细说明","position":{"start":{"line":87,"column":1},"end":{"line":87,"column":1}},"key":"TxnnHK25NQ"}],"identifier":"id","label":"详细说明","html_id":"id-1","implicit":true,"key":"i1NeSNJ52x"},{"type":"heading","depth":4,"position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"children":[{"type":"inlineCode","value":"populate_buy_trend","position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"key":"A2s5GQ8nOx"}],"identifier":"populate-buy-trend","label":"populate_buy_trend","html_id":"populate-buy-trend","implicit":true,"key":"CY7kbLZbxN"},{"type":"paragraph","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"children":[{"type":"text","value":"在 ","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"key":"j2fcC4uJSW"},{"type":"inlineCode","value":"populate_buy_trend()","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"key":"wVwoeB9r2f"},{"type":"text","value":" 中 - 你需要将分配的列从 ","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"key":"DoRM1ZNC6F"},{"type":"inlineCode","value":"'buy'","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"key":"gwkqROByh9"},{"type":"text","value":" 改为 ","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"key":"VNUSeGdNSb"},{"type":"inlineCode","value":"'enter_long'","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"key":"MYccaURgiN"},{"type":"text","value":"，同时将方法名从 ","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"key":"LXtuWTyWy1"},{"type":"inlineCode","value":"populate_buy_trend","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"key":"FoHeofBotq"},{"type":"text","value":" 改为 ","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"key":"qaQfhpu70L"},{"type":"inlineCode","value":"populate_entry_trend","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"key":"ie2AYvNkNw"},{"type":"text","value":"。","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"key":"kZANq7yOt6"}],"key":"TjAkK9QCoI"},{"type":"code","lang":"python","value":"def populate_buy_trend(self, dataframe: DataFrame, metadata: dict) -> DataFrame:\n    dataframe.loc[\n        (\n            (qtpylib.crossed_above(dataframe['rsi'], 30)) &  # 信号：RSI 上穿 30\n            (dataframe['tema'] <= dataframe['bb_middleband']) &  # 守卫\n            (dataframe['tema'] > dataframe['tema'].shift(1)) &  # 守卫\n            (dataframe['volume'] > 0)  # 确保成交量不为 0\n        ),\n        ['buy', 'buy_tag']] = (1, 'rsi_cross')\n\n    return dataframe","position":{"start":{"line":93,"column":1},"end":{"line":105,"column":1}},"key":"V890tVB20m"},{"type":"paragraph","position":{"start":{"line":107,"column":1},"end":{"line":107,"column":1}},"children":[{"type":"text","value":"之后：","position":{"start":{"line":107,"column":1},"end":{"line":107,"column":1}},"key":"zmRC0pnRLY"}],"key":"UiztpzFekZ"},{"type":"code","lang":"python","value":"def populate_entry_trend(self, dataframe: DataFrame, metadata: dict) -> DataFrame:\n    dataframe.loc[\n        (\n            (qtpylib.crossed_above(dataframe['rsi'], 30)) &  # 信号：RSI 上穿 30\n            (dataframe['tema'] <= dataframe['bb_middleband']) &  # 守卫\n            (dataframe['tema'] > dataframe['tema'].shift(1)) &  # 守卫\n            (dataframe['volume'] > 0)  # 确保成交量不为 0\n        ),\n        ['enter_long', 'enter_tag']] = (1, 'rsi_cross')\n\n    return dataframe","position":{"start":{"line":109,"column":1},"end":{"line":121,"column":1}},"key":"bJFg4Fyn0n"},{"type":"paragraph","position":{"start":{"line":123,"column":1},"end":{"line":123,"column":1}},"children":[{"type":"text","value":"请参阅","position":{"start":{"line":123,"column":1},"end":{"line":123,"column":1}},"key":"Iw60JfNFo7"},{"type":"crossReference","url":"/strategy-customization","position":{"start":{"line":123,"column":1},"end":{"line":123,"column":1}},"children":[{"type":"text","value":"策略文档","position":{"start":{"line":123,"column":1},"end":{"line":123,"column":1}},"key":"LoLSnVCmqH"}],"urlSource":"strategy-customization.md#entry-signal-rules","dataUrl":"/strategy-customization.json","identifier":"entry-signal-rules","label":"entry-signal-rules","remote":true,"protocol":"file","key":"v2wOvr3NG6"},{"type":"text","value":"了解如何入场和出场空头交易。","position":{"start":{"line":123,"column":1},"end":{"line":123,"column":1}},"key":"s9mjBpxL8L"}],"key":"Oa0ORqJ9JN"},{"type":"heading","depth":4,"position":{"start":{"line":125,"column":1},"end":{"line":125,"column":1}},"children":[{"type":"inlineCode","value":"populate_sell_trend","position":{"start":{"line":125,"column":1},"end":{"line":125,"column":1}},"key":"qu5cBWidLR"}],"identifier":"populate-sell-trend","label":"populate_sell_trend","html_id":"populate-sell-trend","implicit":true,"key":"tgMi2BpSlM"},{"type":"paragraph","position":{"start":{"line":127,"column":1},"end":{"line":128,"column":1}},"children":[{"type":"text","value":"与 ","position":{"start":{"line":127,"column":1},"end":{"line":127,"column":1}},"key":"UzME3cLHiZ"},{"type":"inlineCode","value":"populate_buy_trend","position":{"start":{"line":127,"column":1},"end":{"line":127,"column":1}},"key":"S4hfy5AtRd"},{"type":"text","value":" 类似，","position":{"start":{"line":127,"column":1},"end":{"line":127,"column":1}},"key":"h8qxPB56Ir"},{"type":"inlineCode","value":"populate_sell_trend()","position":{"start":{"line":127,"column":1},"end":{"line":127,"column":1}},"key":"KEuXK37D5G"},{"type":"text","value":" 将重命名为 ","position":{"start":{"line":127,"column":1},"end":{"line":127,"column":1}},"key":"oX58JLNFcY"},{"type":"inlineCode","value":"populate_exit_trend()","position":{"start":{"line":127,"column":1},"end":{"line":127,"column":1}},"key":"w9FhNetnET"},{"type":"text","value":"。\n我们还将列从 ","position":{"start":{"line":127,"column":1},"end":{"line":127,"column":1}},"key":"t2IfQmIVHN"},{"type":"inlineCode","value":"'sell'","position":{"start":{"line":127,"column":1},"end":{"line":127,"column":1}},"key":"xPMAxU5VE4"},{"type":"text","value":" 改为 ","position":{"start":{"line":127,"column":1},"end":{"line":127,"column":1}},"key":"wlQ0WkhViC"},{"type":"inlineCode","value":"'exit_long'","position":{"start":{"line":127,"column":1},"end":{"line":127,"column":1}},"key":"p86b3q4dav"},{"type":"text","value":"。","position":{"start":{"line":127,"column":1},"end":{"line":127,"column":1}},"key":"evlf3kvWO9"}],"key":"JSK3PKkaCB"},{"type":"code","lang":"python","value":"def populate_sell_trend(self, dataframe: DataFrame, metadata: dict) -> DataFrame:\n    dataframe.loc[\n        (\n            (qtpylib.crossed_above(dataframe['rsi'], 70)) &  # 信号：RSI 上穿 70\n            (dataframe['tema'] > dataframe['bb_middleband']) &  # 守卫\n            (dataframe['tema'] < dataframe['tema'].shift(1)) &  # 守卫\n            (dataframe['volume'] > 0)  # 确保成交量不为 0\n        ),\n        ['sell', 'exit_tag']] = (1, 'some_exit_tag')\n    return dataframe","position":{"start":{"line":130,"column":1},"end":{"line":141,"column":1}},"key":"MNl6vZ5zrq"},{"type":"paragraph","position":{"start":{"line":143,"column":1},"end":{"line":143,"column":1}},"children":[{"type":"text","value":"之后：","position":{"start":{"line":143,"column":1},"end":{"line":143,"column":1}},"key":"iDOsZzghqu"}],"key":"Q9Ack8lf7d"},{"type":"code","lang":"python","value":"def populate_exit_trend(self, dataframe: DataFrame, metadata: dict) -> DataFrame:\n    dataframe.loc[\n        (\n            (qtpylib.crossed_above(dataframe['rsi'], 70)) &  # 信号：RSI 上穿 70\n            (dataframe['tema'] > dataframe['bb_middleband']) &  # 守卫\n            (dataframe['tema'] < dataframe['tema'].shift(1)) &  # 守卫\n            (dataframe['volume'] > 0)  # 确保成交量不为 0\n        ),\n        ['exit_long', 'exit_tag']] = (1, 'some_exit_tag')\n    return dataframe","position":{"start":{"line":145,"column":1},"end":{"line":156,"column":1}},"key":"xSJk3aw6rL"},{"type":"paragraph","position":{"start":{"line":158,"column":1},"end":{"line":158,"column":1}},"children":[{"type":"text","value":"请参阅","position":{"start":{"line":158,"column":1},"end":{"line":158,"column":1}},"key":"vU54gBoii5"},{"type":"crossReference","url":"/strategy-customization","position":{"start":{"line":158,"column":1},"end":{"line":158,"column":1}},"children":[{"type":"text","value":"策略文档","position":{"start":{"line":158,"column":1},"end":{"line":158,"column":1}},"key":"sYWZ0vtRBk"}],"urlSource":"strategy-customization.md#exit-signal-rules","dataUrl":"/strategy-customization.json","identifier":"exit-signal-rules","label":"exit-signal-rules","remote":true,"protocol":"file","key":"C7GdSnFtPf"},{"type":"text","value":"了解如何入场和出场空头交易。","position":{"start":{"line":158,"column":1},"end":{"line":158,"column":1}},"key":"HhDFR1a1d6"}],"key":"KeDSEB8xFD"},{"type":"heading","depth":4,"position":{"start":{"line":160,"column":1},"end":{"line":160,"column":1}},"children":[{"type":"inlineCode","value":"custom_sell","position":{"start":{"line":160,"column":1},"end":{"line":160,"column":1}},"key":"jrx94Xj7DH"}],"identifier":"custom-sell","label":"custom_sell","html_id":"custom-sell","implicit":true,"key":"JyzqtVWC2s"},{"type":"paragraph","position":{"start":{"line":162,"column":1},"end":{"line":163,"column":1}},"children":[{"type":"inlineCode","value":"custom_sell","position":{"start":{"line":162,"column":1},"end":{"line":162,"column":1}},"key":"OjSFfy14wA"},{"type":"text","value":" 已重命名为 ","position":{"start":{"line":162,"column":1},"end":{"line":162,"column":1}},"key":"fht067rpZx"},{"type":"inlineCode","value":"custom_exit","position":{"start":{"line":162,"column":1},"end":{"line":162,"column":1}},"key":"weN83Z9O0A"},{"type":"text","value":"。\n它现在也会在每次迭代时被调用，与当前利润和 ","position":{"start":{"line":162,"column":1},"end":{"line":162,"column":1}},"key":"oI9mhZC38i"},{"type":"inlineCode","value":"exit_profit_only","position":{"start":{"line":162,"column":1},"end":{"line":162,"column":1}},"key":"KNPkcZDCda"},{"type":"text","value":" 设置无关。","position":{"start":{"line":162,"column":1},"end":{"line":162,"column":1}},"key":"lEvLNLCZYZ"}],"key":"OgW5Ug5d3y"},{"type":"code","lang":"python","value":"class AwesomeStrategy(IStrategy):\n    def custom_sell(self, pair: str, trade: 'Trade', current_time: 'datetime', current_rate: float,\n                    current_profit: float, **kwargs):\n        dataframe, _ = self.dp.get_analyzed_dataframe(pair, self.timeframe)\n        last_candle = dataframe.iloc[-1].squeeze()\n        # ...","position":{"start":{"line":165,"column":1},"end":{"line":172,"column":1}},"key":"TPVCLFzMm3"},{"type":"code","lang":"python","value":"class AwesomeStrategy(IStrategy):\n    def custom_exit(self, pair: str, trade: 'Trade', current_time: 'datetime', current_rate: float,\n                    current_profit: float, **kwargs):\n        dataframe, _ = self.dp.get_analyzed_dataframe(pair, self.timeframe)\n        last_candle = dataframe.iloc[-1].squeeze()\n        # ...","position":{"start":{"line":174,"column":1},"end":{"line":181,"column":1}},"key":"n8H6dziNnZ"},{"type":"heading","depth":4,"position":{"start":{"line":183,"column":1},"end":{"line":183,"column":1}},"children":[{"type":"inlineCode","value":"custom_entry_timeout","position":{"start":{"line":183,"column":1},"end":{"line":183,"column":1}},"key":"ZO7bGa9rCv"}],"identifier":"custom-entry-timeout","label":"custom_entry_timeout","html_id":"custom-entry-timeout","implicit":true,"key":"ITymm55cny"},{"type":"paragraph","position":{"start":{"line":185,"column":1},"end":{"line":185,"column":1}},"children":[{"type":"inlineCode","value":"check_buy_timeout()","position":{"start":{"line":185,"column":1},"end":{"line":185,"column":1}},"key":"FyKHQL2IGl"},{"type":"text","value":" 已重命名为 ","position":{"start":{"line":185,"column":1},"end":{"line":185,"column":1}},"key":"v1aEdF7Nnf"},{"type":"inlineCode","value":"check_entry_timeout()","position":{"start":{"line":185,"column":1},"end":{"line":185,"column":1}},"key":"MnF2cDa9LN"},{"type":"text","value":"，","position":{"start":{"line":185,"column":1},"end":{"line":185,"column":1}},"key":"CDcGT6P8Gi"},{"type":"inlineCode","value":"check_sell_timeout()","position":{"start":{"line":185,"column":1},"end":{"line":185,"column":1}},"key":"IdQJXBD4vd"},{"type":"text","value":" 已重命名为 ","position":{"start":{"line":185,"column":1},"end":{"line":185,"column":1}},"key":"O1ehMVM3dD"},{"type":"inlineCode","value":"check_exit_timeout()","position":{"start":{"line":185,"column":1},"end":{"line":185,"column":1}},"key":"nOcNs1LJeK"},{"type":"text","value":"。","position":{"start":{"line":185,"column":1},"end":{"line":185,"column":1}},"key":"LIxnfRPFmy"}],"key":"iep0bnET4a"},{"type":"code","lang":"python","value":"class AwesomeStrategy(IStrategy):\n    def check_buy_timeout(self, pair: str, trade: 'Trade', order: dict, \n                            current_time: datetime, **kwargs) -> bool:\n        return False\n\n    def check_sell_timeout(self, pair: str, trade: 'Trade', order: dict, \n                            current_time: datetime, **kwargs) -> bool:\n        return False ","position":{"start":{"line":187,"column":1},"end":{"line":196,"column":1}},"key":"Gh7wG9NUWS"},{"type":"code","lang":"python","value":"class AwesomeStrategy(IStrategy):\n    def check_entry_timeout(self, pair: str, trade: 'Trade', order: 'Order', \n                            current_time: datetime, **kwargs) -> bool:\n        return False\n\n    def check_exit_timeout(self, pair: str, trade: 'Trade', order: 'Order', \n                            current_time: datetime, **kwargs) -> bool:\n        return False ","position":{"start":{"line":198,"column":1},"end":{"line":207,"column":1}},"key":"zQf0qM6QD9"},{"type":"heading","depth":4,"position":{"start":{"line":209,"column":1},"end":{"line":209,"column":1}},"children":[{"type":"inlineCode","value":"custom_stake_amount","position":{"start":{"line":209,"column":1},"end":{"line":209,"column":1}},"key":"QdF4C5J6UW"}],"identifier":"custom-stake-amount","label":"custom_stake_amount","html_id":"custom-stake-amount","implicit":true,"key":"HECP2mK2Sp"},{"type":"paragraph","position":{"start":{"line":211,"column":1},"end":{"line":211,"column":1}},"children":[{"type":"text","value":"新增字符串参数 ","position":{"start":{"line":211,"column":1},"end":{"line":211,"column":1}},"key":"mHnn4iUWZL"},{"type":"inlineCode","value":"side","position":{"start":{"line":211,"column":1},"end":{"line":211,"column":1}},"key":"nsGt0mvBBm"},{"type":"text","value":" - 可以是 ","position":{"start":{"line":211,"column":1},"end":{"line":211,"column":1}},"key":"b2urB48WSE"},{"type":"inlineCode","value":"\"long\"","position":{"start":{"line":211,"column":1},"end":{"line":211,"column":1}},"key":"ZAVEs7S8jc"},{"type":"text","value":" 或 ","position":{"start":{"line":211,"column":1},"end":{"line":211,"column":1}},"key":"tktYtxt3NS"},{"type":"inlineCode","value":"\"short\"","position":{"start":{"line":211,"column":1},"end":{"line":211,"column":1}},"key":"bBnZjXT4JA"},{"type":"text","value":"。","position":{"start":{"line":211,"column":1},"end":{"line":211,"column":1}},"key":"WJZg9QakfQ"}],"key":"SSmcr0Yonp"},{"type":"code","lang":"python","value":"class AwesomeStrategy(IStrategy):\n    def custom_stake_amount(self, pair: str, current_time: datetime, current_rate: float,\n                            proposed_stake: float, min_stake: Optional[float], max_stake: float,\n                            entry_tag: Optional[str], **kwargs) -> float:\n        # ... \n        return proposed_stake","position":{"start":{"line":213,"column":1},"end":{"line":220,"column":1}},"key":"Jk4WFBIawT"},{"type":"code","lang":"python","value":"class AwesomeStrategy(IStrategy):\n    def custom_stake_amount(self, pair: str, current_time: datetime, current_rate: float,\n                            proposed_stake: float, min_stake: float | None, max_stake: float,\n                            entry_tag: str | None, side: str, **kwargs) -> float:\n        # ... \n        return proposed_stake","position":{"start":{"line":222,"column":1},"end":{"line":229,"column":1}},"key":"iVMvADeWCy"},{"type":"heading","depth":4,"position":{"start":{"line":231,"column":1},"end":{"line":231,"column":1}},"children":[{"type":"inlineCode","value":"confirm_trade_entry","position":{"start":{"line":231,"column":1},"end":{"line":231,"column":1}},"key":"oBo6zVbA8N"}],"identifier":"confirm-trade-entry","label":"confirm_trade_entry","html_id":"confirm-trade-entry","implicit":true,"key":"kSLCsQ7zCP"},{"type":"paragraph","position":{"start":{"line":233,"column":1},"end":{"line":233,"column":1}},"children":[{"type":"text","value":"新增字符串参数 ","position":{"start":{"line":233,"column":1},"end":{"line":233,"column":1}},"key":"vcNyUw4kGv"},{"type":"inlineCode","value":"side","position":{"start":{"line":233,"column":1},"end":{"line":233,"column":1}},"key":"peJmplk8dA"},{"type":"text","value":" - 可以是 ","position":{"start":{"line":233,"column":1},"end":{"line":233,"column":1}},"key":"XGqJh1rAZU"},{"type":"inlineCode","value":"\"long\"","position":{"start":{"line":233,"column":1},"end":{"line":233,"column":1}},"key":"H12oTVAz0r"},{"type":"text","value":" 或 ","position":{"start":{"line":233,"column":1},"end":{"line":233,"column":1}},"key":"em1cNXFmVA"},{"type":"inlineCode","value":"\"short\"","position":{"start":{"line":233,"column":1},"end":{"line":233,"column":1}},"key":"e4cc4fxId7"},{"type":"text","value":"。","position":{"start":{"line":233,"column":1},"end":{"line":233,"column":1}},"key":"N4Ki0rDNQn"}],"key":"ZGqPanNaxV"},{"type":"code","lang":"python","value":"class AwesomeStrategy(IStrategy):\n    def confirm_trade_entry(self, pair: str, order_type: str, amount: float, rate: float,\n                            time_in_force: str, current_time: datetime, entry_tag: Optional[str], \n                            **kwargs) -> bool:\n      return True","position":{"start":{"line":235,"column":1},"end":{"line":241,"column":1}},"key":"Hv16PrSXow"},{"type":"paragraph","position":{"start":{"line":243,"column":1},"end":{"line":243,"column":1}},"children":[{"type":"text","value":"之后：","position":{"start":{"line":243,"column":1},"end":{"line":243,"column":1}},"key":"KhBuvMxvAk"}],"key":"L9rogyiYXg"},{"type":"code","lang":"python","value":"class AwesomeStrategy(IStrategy):\n    def confirm_trade_entry(self, pair: str, order_type: str, amount: float, rate: float,\n                            time_in_force: str, current_time: datetime, entry_tag: str | None, \n                            side: str, **kwargs) -> bool:\n      return True","position":{"start":{"line":245,"column":1},"end":{"line":251,"column":1}},"key":"DK5eJm7tkA"},{"type":"heading","depth":4,"position":{"start":{"line":253,"column":1},"end":{"line":253,"column":1}},"children":[{"type":"inlineCode","value":"confirm_trade_exit","position":{"start":{"line":253,"column":1},"end":{"line":253,"column":1}},"key":"drpTh1PlKi"}],"identifier":"confirm-trade-exit","label":"confirm_trade_exit","html_id":"confirm-trade-exit","implicit":true,"key":"WUBfaxP0Ze"},{"type":"paragraph","position":{"start":{"line":255,"column":1},"end":{"line":256,"column":1}},"children":[{"type":"text","value":"将参数 ","position":{"start":{"line":255,"column":1},"end":{"line":255,"column":1}},"key":"Ps2vvqKM6c"},{"type":"inlineCode","value":"sell_reason","position":{"start":{"line":255,"column":1},"end":{"line":255,"column":1}},"key":"MbVtSo2OZi"},{"type":"text","value":" 改为 ","position":{"start":{"line":255,"column":1},"end":{"line":255,"column":1}},"key":"cDkJq4YzkH"},{"type":"inlineCode","value":"exit_reason","position":{"start":{"line":255,"column":1},"end":{"line":255,"column":1}},"key":"c8BdcDdeFT"},{"type":"text","value":"。\n为了兼容性，","position":{"start":{"line":255,"column":1},"end":{"line":255,"column":1}},"key":"WlSy1u80d5"},{"type":"inlineCode","value":"sell_reason","position":{"start":{"line":255,"column":1},"end":{"line":255,"column":1}},"key":"rLMG3YL1pO"},{"type":"text","value":" 仍将在有限时间内提供。","position":{"start":{"line":255,"column":1},"end":{"line":255,"column":1}},"key":"isXmNpstnU"}],"key":"t5GY6lABfN"},{"type":"code","lang":"python","value":"class AwesomeStrategy(IStrategy):\n    def confirm_trade_exit(self, pair: str, trade: Trade, order_type: str, amount: float,\n                           rate: float, time_in_force: str, sell_reason: str,\n                           current_time: datetime, **kwargs) -> bool:\n    return True","position":{"start":{"line":258,"column":1},"end":{"line":264,"column":1}},"key":"fm4P0mVVb1"},{"type":"paragraph","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"children":[{"type":"text","value":"之后：","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"key":"jVm1ic9L56"}],"key":"vIMvdRhFoA"},{"type":"code","lang":"python","value":"class AwesomeStrategy(IStrategy):\n    def confirm_trade_exit(self, pair: str, trade: Trade, order_type: str, amount: float,\n                           rate: float, time_in_force: str, exit_reason: str,\n                           current_time: datetime, **kwargs) -> bool:\n    return True","position":{"start":{"line":268,"column":1},"end":{"line":274,"column":1}},"key":"f917BTK4ud"},{"type":"heading","depth":4,"position":{"start":{"line":276,"column":1},"end":{"line":276,"column":1}},"children":[{"type":"inlineCode","value":"custom_entry_price","position":{"start":{"line":276,"column":1},"end":{"line":276,"column":1}},"key":"IsS5BhaLKB"}],"identifier":"custom-entry-price","label":"custom_entry_price","html_id":"custom-entry-price","implicit":true,"key":"caTB0DWJuv"},{"type":"paragraph","position":{"start":{"line":278,"column":1},"end":{"line":278,"column":1}},"children":[{"type":"text","value":"新增字符串参数 ","position":{"start":{"line":278,"column":1},"end":{"line":278,"column":1}},"key":"IzORYf2lDJ"},{"type":"inlineCode","value":"side","position":{"start":{"line":278,"column":1},"end":{"line":278,"column":1}},"key":"c9wtnc1mCN"},{"type":"text","value":" - 可以是 ","position":{"start":{"line":278,"column":1},"end":{"line":278,"column":1}},"key":"DBuOykOYnK"},{"type":"inlineCode","value":"\"long\"","position":{"start":{"line":278,"column":1},"end":{"line":278,"column":1}},"key":"SE4lQednOA"},{"type":"text","value":" 或 ","position":{"start":{"line":278,"column":1},"end":{"line":278,"column":1}},"key":"RLoF3U7bla"},{"type":"inlineCode","value":"\"short\"","position":{"start":{"line":278,"column":1},"end":{"line":278,"column":1}},"key":"Bd7qlKuZ4t"},{"type":"text","value":"。","position":{"start":{"line":278,"column":1},"end":{"line":278,"column":1}},"key":"Z8ByHQPkrI"}],"key":"cAaKMOw3OM"},{"type":"code","lang":"python","value":"class AwesomeStrategy(IStrategy):\n    def custom_entry_price(self, pair: str, current_time: datetime, proposed_rate: float,\n                           entry_tag: Optional[str], **kwargs) -> float:\n      return proposed_rate","position":{"start":{"line":280,"column":1},"end":{"line":285,"column":1}},"key":"hAlxXWjBLS"},{"type":"paragraph","position":{"start":{"line":287,"column":1},"end":{"line":287,"column":1}},"children":[{"type":"text","value":"之后：","position":{"start":{"line":287,"column":1},"end":{"line":287,"column":1}},"key":"NB9QVSe490"}],"key":"p3GQ6hGR83"},{"type":"code","lang":"python","value":"class AwesomeStrategy(IStrategy):\n    def custom_entry_price(self, pair: str, trade: Trade | None, current_time: datetime, proposed_rate: float,\n                           entry_tag: str | None, side: str, **kwargs) -> float:\n      return proposed_rate","position":{"start":{"line":289,"column":1},"end":{"line":294,"column":1}},"key":"lzJWzeklKg"},{"type":"heading","depth":4,"position":{"start":{"line":296,"column":1},"end":{"line":296,"column":1}},"children":[{"type":"text","value":"调整交易仓位更改","position":{"start":{"line":296,"column":1},"end":{"line":296,"column":1}},"key":"OE42XfpY3r"}],"identifier":"id","label":"调整交易仓位更改","html_id":"id-2","implicit":true,"key":"xFHllu80oz"},{"type":"paragraph","position":{"start":{"line":298,"column":1},"end":{"line":298,"column":1}},"children":[{"type":"text","value":"虽然 adjust-trade-position 本身没有改变，但你不应该再使用 ","position":{"start":{"line":298,"column":1},"end":{"line":298,"column":1}},"key":"Bw1ZFrVOqw"},{"type":"inlineCode","value":"trade.nr_of_successful_buys","position":{"start":{"line":298,"column":1},"end":{"line":298,"column":1}},"key":"J7j5U4lVVQ"},{"type":"text","value":" - 而是使用 ","position":{"start":{"line":298,"column":1},"end":{"line":298,"column":1}},"key":"byuZdqi7Ti"},{"type":"inlineCode","value":"trade.nr_of_successful_entries","position":{"start":{"line":298,"column":1},"end":{"line":298,"column":1}},"key":"JqHwJQhh7E"},{"type":"text","value":"，它也将包括空头入场。","position":{"start":{"line":298,"column":1},"end":{"line":298,"column":1}},"key":"IVhIxx3sBv"}],"key":"T8Ouqcl725"},{"type":"heading","depth":4,"position":{"start":{"line":300,"column":1},"end":{"line":300,"column":1}},"children":[{"type":"text","value":"辅助方法","position":{"start":{"line":300,"column":1},"end":{"line":300,"column":1}},"key":"ubz4RdJhDY"}],"identifier":"id","label":"辅助方法","html_id":"id-3","implicit":true,"key":"E0mD0VMpML"},{"type":"paragraph","position":{"start":{"line":302,"column":1},"end":{"line":303,"column":1}},"children":[{"type":"text","value":"为 ","position":{"start":{"line":302,"column":1},"end":{"line":302,"column":1}},"key":"J0JbN9BE4o"},{"type":"inlineCode","value":"stoploss_from_open","position":{"start":{"line":302,"column":1},"end":{"line":302,"column":1}},"key":"j26aHMAOKn"},{"type":"text","value":" 和 ","position":{"start":{"line":302,"column":1},"end":{"line":302,"column":1}},"key":"gPAR5PM366"},{"type":"inlineCode","value":"stoploss_from_absolute","position":{"start":{"line":302,"column":1},"end":{"line":302,"column":1}},"key":"WpAILPNLu2"},{"type":"text","value":" 添加参数 “is_short”。\n这应该给出 ","position":{"start":{"line":302,"column":1},"end":{"line":302,"column":1}},"key":"TlYA3ekgrz"},{"type":"inlineCode","value":"trade.is_short","position":{"start":{"line":302,"column":1},"end":{"line":302,"column":1}},"key":"fsp73QZXmi"},{"type":"text","value":" 的值。","position":{"start":{"line":302,"column":1},"end":{"line":302,"column":1}},"key":"g6v7k5xGqU"}],"key":"jzWqbZC5ed"},{"type":"code","lang":"python","value":"    def custom_stoploss(self, pair: str, trade: 'Trade', current_time: datetime,\n                        current_rate: float, current_profit: float, **kwargs) -> float:\n        # 一旦利润上升到 10% 以上，将止损保持在开盘价上方 7%\n        if current_profit > 0.10:\n            return stoploss_from_open(0.07, current_profit)\n\n        return stoploss_from_absolute(current_rate - (candle['atr'] * 2), current_rate)\n\n        return 1\n","position":{"start":{"line":305,"column":1},"end":{"line":316,"column":1}},"key":"BKHjIlCY91"},{"type":"paragraph","position":{"start":{"line":318,"column":1},"end":{"line":318,"column":1}},"children":[{"type":"text","value":"之后：","position":{"start":{"line":318,"column":1},"end":{"line":318,"column":1}},"key":"zYR9I5HhTi"}],"key":"R8vLpp0Sqx"},{"type":"code","lang":"python","value":"    def custom_stoploss(self, pair: str, trade: 'Trade', current_time: datetime,\n                        current_rate: float, current_profit: float, after_fill: bool, \n                        **kwargs) -> float | None:\n        # 一旦利润上升到 10% 以上，将止损保持在开盘价上方 7%\n        if current_profit > 0.10:\n            return stoploss_from_open(0.07, current_profit, is_short=trade.is_short)\n\n        return stoploss_from_absolute(current_rate - (candle['atr'] * 2), current_rate, is_short=trade.is_short, leverage=trade.leverage)\n\n","position":{"start":{"line":320,"column":1},"end":{"line":331,"column":1}},"key":"pbXUfKCUQO"},{"type":"heading","depth":4,"position":{"start":{"line":333,"column":1},"end":{"line":333,"column":1}},"children":[{"type":"text","value":"策略/配置设置","position":{"start":{"line":333,"column":1},"end":{"line":333,"column":1}},"key":"ZXk6IULoEm"}],"identifier":"id","label":"策略/配置设置","html_id":"id-4","implicit":true,"key":"apoAbN48wy"},{"type":"heading","depth":5,"position":{"start":{"line":335,"column":1},"end":{"line":335,"column":1}},"children":[{"type":"inlineCode","value":"order_time_in_force","position":{"start":{"line":335,"column":1},"end":{"line":335,"column":1}},"key":"Ba1oxuRt9O"}],"identifier":"order-time-in-force","label":"order_time_in_force","html_id":"order-time-in-force","implicit":true,"key":"YlfRs5NpVB"},{"type":"paragraph","position":{"start":{"line":337,"column":1},"end":{"line":337,"column":1}},"children":[{"type":"inlineCode","value":"order_time_in_force","position":{"start":{"line":337,"column":1},"end":{"line":337,"column":1}},"key":"V5ASbi8ZcW"},{"type":"text","value":" 属性从 ","position":{"start":{"line":337,"column":1},"end":{"line":337,"column":1}},"key":"uhbFfFqTWw"},{"type":"inlineCode","value":"\"buy\"","position":{"start":{"line":337,"column":1},"end":{"line":337,"column":1}},"key":"V7NkwOkz5d"},{"type":"text","value":" 改为 ","position":{"start":{"line":337,"column":1},"end":{"line":337,"column":1}},"key":"XxVMYRpMuc"},{"type":"inlineCode","value":"\"entry\"","position":{"start":{"line":337,"column":1},"end":{"line":337,"column":1}},"key":"wjZfaTOYdX"},{"type":"text","value":"，从 ","position":{"start":{"line":337,"column":1},"end":{"line":337,"column":1}},"key":"RlIuPos5jS"},{"type":"inlineCode","value":"\"sell\"","position":{"start":{"line":337,"column":1},"end":{"line":337,"column":1}},"key":"PnXj7bSHk6"},{"type":"text","value":" 改为 ","position":{"start":{"line":337,"column":1},"end":{"line":337,"column":1}},"key":"E2EMfvCGDu"},{"type":"inlineCode","value":"\"exit\"","position":{"start":{"line":337,"column":1},"end":{"line":337,"column":1}},"key":"TRJP4oknbV"},{"type":"text","value":"。","position":{"start":{"line":337,"column":1},"end":{"line":337,"column":1}},"key":"laUdY8AGW6"}],"key":"jYy298BEPo"},{"type":"code","lang":"python","value":"    order_time_in_force: dict = {\n        \"buy\": \"gtc\",\n        \"sell\": \"gtc\",\n    }","position":{"start":{"line":339,"column":1},"end":{"line":344,"column":1}},"key":"YnR9pYyDQn"},{"type":"paragraph","position":{"start":{"line":346,"column":1},"end":{"line":346,"column":1}},"children":[{"type":"text","value":"之后：","position":{"start":{"line":346,"column":1},"end":{"line":346,"column":1}},"key":"XAg5mBtdxL"}],"key":"WbOJQHtUTL"},{"type":"code","lang":"python","value":"    order_time_in_force: dict = {\n        \"entry\": \"GTC\",\n        \"exit\": \"GTC\",\n    }","position":{"start":{"line":348,"column":1},"end":{"line":353,"column":1}},"key":"DKNs7OPaJy"},{"type":"heading","depth":5,"position":{"start":{"line":355,"column":1},"end":{"line":355,"column":1}},"children":[{"type":"inlineCode","value":"order_types","position":{"start":{"line":355,"column":1},"end":{"line":355,"column":1}},"key":"cvdr4UlvXg"}],"identifier":"order-types","label":"order_types","html_id":"order-types","implicit":true,"key":"oIxiriHF8e"},{"type":"paragraph","position":{"start":{"line":357,"column":1},"end":{"line":358,"column":1}},"children":[{"type":"inlineCode","value":"order_types","position":{"start":{"line":357,"column":1},"end":{"line":357,"column":1}},"key":"Q9uLYE0Pci"},{"type":"text","value":" 已将所有措辞从 ","position":{"start":{"line":357,"column":1},"end":{"line":357,"column":1}},"key":"A6evKh6T9A"},{"type":"inlineCode","value":"buy","position":{"start":{"line":357,"column":1},"end":{"line":357,"column":1}},"key":"h0SKHRSsmm"},{"type":"text","value":" 改为 ","position":{"start":{"line":357,"column":1},"end":{"line":357,"column":1}},"key":"UOMsIhJAFg"},{"type":"inlineCode","value":"entry","position":{"start":{"line":357,"column":1},"end":{"line":357,"column":1}},"key":"MBbdxbqBZA"},{"type":"text","value":" - 从 ","position":{"start":{"line":357,"column":1},"end":{"line":357,"column":1}},"key":"o7Rjj0gLG7"},{"type":"inlineCode","value":"sell","position":{"start":{"line":357,"column":1},"end":{"line":357,"column":1}},"key":"milE4exITN"},{"type":"text","value":" 改为 ","position":{"start":{"line":357,"column":1},"end":{"line":357,"column":1}},"key":"DAWPE6byly"},{"type":"inlineCode","value":"exit","position":{"start":{"line":357,"column":1},"end":{"line":357,"column":1}},"key":"AwiZCcGINn"},{"type":"text","value":"。\n并且两个词用 ","position":{"start":{"line":357,"column":1},"end":{"line":357,"column":1}},"key":"unmcpnEXcj"},{"type":"inlineCode","value":"_","position":{"start":{"line":357,"column":1},"end":{"line":357,"column":1}},"key":"litbOtQZ3l"},{"type":"text","value":" 连接。","position":{"start":{"line":357,"column":1},"end":{"line":357,"column":1}},"key":"XmPInF14z6"}],"key":"PPa5l6MzW0"},{"type":"code","lang":"python","value":"    order_types = {\n        \"buy\": \"limit\",\n        \"sell\": \"limit\",\n        \"emergencysell\": \"market\",\n        \"forcesell\": \"market\",\n        \"forcebuy\": \"market\",\n        \"stoploss\": \"market\",\n        \"stoploss_on_exchange\": false,\n        \"stoploss_on_exchange_interval\": 60\n    }","position":{"start":{"line":360,"column":1},"end":{"line":371,"column":1}},"key":"qp0AeDEB8p"},{"type":"paragraph","position":{"start":{"line":373,"column":1},"end":{"line":373,"column":1}},"children":[{"type":"text","value":"之后：","position":{"start":{"line":373,"column":1},"end":{"line":373,"column":1}},"key":"vkuXlFTCnj"}],"key":"A4yQMuIoNQ"},{"type":"code","lang":"python","value":"    order_types = {\n        \"entry\": \"limit\",\n        \"exit\": \"limit\",\n        \"emergency_exit\": \"market\",\n        \"force_exit\": \"market\",\n        \"force_entry\": \"market\",\n        \"stoploss\": \"market\",\n        \"stoploss_on_exchange\": false,\n        \"stoploss_on_exchange_interval\": 60\n    }","position":{"start":{"line":375,"column":1},"end":{"line":386,"column":1}},"key":"ou5L9VECYw"},{"type":"heading","depth":5,"position":{"start":{"line":388,"column":1},"end":{"line":388,"column":1}},"children":[{"type":"text","value":"策略级别设置","position":{"start":{"line":388,"column":1},"end":{"line":388,"column":1}},"key":"j6SeCWMgFG"}],"identifier":"id","label":"策略级别设置","html_id":"id-5","implicit":true,"key":"rFxTOYE5UY"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":390,"column":1},"end":{"line":394,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":390,"column":1},"end":{"line":390,"column":1}},"children":[{"type":"inlineCode","value":"use_sell_signal","position":{"start":{"line":390,"column":1},"end":{"line":390,"column":1}},"key":"wNrpXoJWm4"},{"type":"text","value":" -> ","position":{"start":{"line":390,"column":1},"end":{"line":390,"column":1}},"key":"X22k2IlD6p"},{"type":"inlineCode","value":"use_exit_signal","position":{"start":{"line":390,"column":1},"end":{"line":390,"column":1}},"key":"TyrwdljVwL"}],"key":"tPw0RMejt5"},{"type":"listItem","spread":true,"position":{"start":{"line":391,"column":1},"end":{"line":391,"column":1}},"children":[{"type":"inlineCode","value":"sell_profit_only","position":{"start":{"line":391,"column":1},"end":{"line":391,"column":1}},"key":"d1DUsD0jdu"},{"type":"text","value":" -> ","position":{"start":{"line":391,"column":1},"end":{"line":391,"column":1}},"key":"mG7Z8K71ZL"},{"type":"inlineCode","value":"exit_profit_only","position":{"start":{"line":391,"column":1},"end":{"line":391,"column":1}},"key":"YXVLtsPSZM"}],"key":"nLffEc5w3y"},{"type":"listItem","spread":true,"position":{"start":{"line":392,"column":1},"end":{"line":392,"column":1}},"children":[{"type":"inlineCode","value":"sell_profit_offset","position":{"start":{"line":392,"column":1},"end":{"line":392,"column":1}},"key":"QVPCKxf7Xb"},{"type":"text","value":" -> ","position":{"start":{"line":392,"column":1},"end":{"line":392,"column":1}},"key":"uqtU9M8Nr4"},{"type":"inlineCode","value":"exit_profit_offset","position":{"start":{"line":392,"column":1},"end":{"line":392,"column":1}},"key":"mOBFkkRC0H"}],"key":"lie85U1Vvb"},{"type":"listItem","spread":true,"position":{"start":{"line":393,"column":1},"end":{"line":394,"column":1}},"children":[{"type":"inlineCode","value":"ignore_roi_if_buy_signal","position":{"start":{"line":393,"column":1},"end":{"line":393,"column":1}},"key":"hUiPbq7LLO"},{"type":"text","value":" -> ","position":{"start":{"line":393,"column":1},"end":{"line":393,"column":1}},"key":"eBWHNbQ062"},{"type":"inlineCode","value":"ignore_roi_if_entry_signal","position":{"start":{"line":393,"column":1},"end":{"line":393,"column":1}},"key":"UbINGVH0nf"}],"key":"kMYvdaKfYD"}],"key":"jVqOqH1Xw9"},{"type":"code","lang":"python","value":"    # 这些值可以在配置中被覆盖。\n    use_sell_signal = True\n    sell_profit_only = True\n    sell_profit_offset: 0.01\n    ignore_roi_if_buy_signal = False","position":{"start":{"line":395,"column":1},"end":{"line":401,"column":1}},"key":"p1X1GFuRsZ"},{"type":"paragraph","position":{"start":{"line":403,"column":1},"end":{"line":403,"column":1}},"children":[{"type":"text","value":"之后：","position":{"start":{"line":403,"column":1},"end":{"line":403,"column":1}},"key":"gMygBqsxIX"}],"key":"bgHSbnWxnm"},{"type":"code","lang":"python","value":"    # 这些值可以在配置中被覆盖。\n    use_exit_signal = True\n    exit_profit_only = True\n    exit_profit_offset: 0.01\n    ignore_roi_if_entry_signal = False","position":{"start":{"line":405,"column":1},"end":{"line":411,"column":1}},"key":"GuuGSz9XSU"},{"type":"heading","depth":5,"position":{"start":{"line":413,"column":1},"end":{"line":413,"column":1}},"children":[{"type":"inlineCode","value":"unfilledtimeout","position":{"start":{"line":413,"column":1},"end":{"line":413,"column":1}},"key":"m2vvsuVTVB"}],"identifier":"unfilledtimeout","label":"unfilledtimeout","html_id":"unfilledtimeout","implicit":true,"key":"FNUusEiTJH"},{"type":"paragraph","position":{"start":{"line":415,"column":1},"end":{"line":415,"column":1}},"children":[{"type":"inlineCode","value":"unfilledtimeout","position":{"start":{"line":415,"column":1},"end":{"line":415,"column":1}},"key":"fWdBuOaizT"},{"type":"text","value":" 已将所有措辞从 ","position":{"start":{"line":415,"column":1},"end":{"line":415,"column":1}},"key":"ixYYSygUgy"},{"type":"inlineCode","value":"buy","position":{"start":{"line":415,"column":1},"end":{"line":415,"column":1}},"key":"Z9CUFNdktP"},{"type":"text","value":" 改为 ","position":{"start":{"line":415,"column":1},"end":{"line":415,"column":1}},"key":"shZeREf3Fj"},{"type":"inlineCode","value":"entry","position":{"start":{"line":415,"column":1},"end":{"line":415,"column":1}},"key":"TqzAYoluv8"},{"type":"text","value":" - 从 ","position":{"start":{"line":415,"column":1},"end":{"line":415,"column":1}},"key":"W5ffyQ0VfO"},{"type":"inlineCode","value":"sell","position":{"start":{"line":415,"column":1},"end":{"line":415,"column":1}},"key":"o5hncFrHcS"},{"type":"text","value":" 改为 ","position":{"start":{"line":415,"column":1},"end":{"line":415,"column":1}},"key":"CaC8CNm9He"},{"type":"inlineCode","value":"exit","position":{"start":{"line":415,"column":1},"end":{"line":415,"column":1}},"key":"JzY0bMTmDh"},{"type":"text","value":"。","position":{"start":{"line":415,"column":1},"end":{"line":415,"column":1}},"key":"V73cuTxyKA"}],"key":"C29vXvnyqv"},{"type":"code","lang":"python","value":"unfilledtimeout = {\n        \"buy\": 10,\n        \"sell\": 10,\n        \"exit_timeout_count\": 0,\n        \"unit\": \"minutes\"\n    }","position":{"start":{"line":417,"column":1},"end":{"line":424,"column":1}},"key":"cK1R2UzKZO"},{"type":"paragraph","position":{"start":{"line":426,"column":1},"end":{"line":426,"column":1}},"children":[{"type":"text","value":"之后：","position":{"start":{"line":426,"column":1},"end":{"line":426,"column":1}},"key":"NVjXPY1PZL"}],"key":"aWx0Xsk845"},{"type":"code","lang":"python","value":"unfilledtimeout = {\n        \"entry\": 10,\n        \"exit\": 10,\n        \"exit_timeout_count\": 0,\n        \"unit\": \"minutes\"\n    }","position":{"start":{"line":428,"column":1},"end":{"line":435,"column":1}},"key":"gy56mgeE1A"},{"type":"heading","depth":5,"position":{"start":{"line":437,"column":1},"end":{"line":437,"column":1}},"children":[{"type":"inlineCode","value":"order pricing","position":{"start":{"line":437,"column":1},"end":{"line":437,"column":1}},"key":"GhRSeRhdH2"}],"identifier":"order-pricing","label":"order pricing","html_id":"order-pricing","implicit":true,"key":"Ery3tUMyrY"},{"type":"paragraph","position":{"start":{"line":439,"column":1},"end":{"line":442,"column":1}},"children":[{"type":"text","value":"订单定价有两种变化。","position":{"start":{"line":439,"column":1},"end":{"line":439,"column":1}},"key":"hEK5egi36t"},{"type":"inlineCode","value":"bid_strategy","position":{"start":{"line":439,"column":1},"end":{"line":439,"column":1}},"key":"HU6eaaywEv"},{"type":"text","value":" 重命名为 ","position":{"start":{"line":439,"column":1},"end":{"line":439,"column":1}},"key":"Ieu4e7LUmg"},{"type":"inlineCode","value":"entry_pricing","position":{"start":{"line":439,"column":1},"end":{"line":439,"column":1}},"key":"QvcxyRi5NJ"},{"type":"text","value":"，","position":{"start":{"line":439,"column":1},"end":{"line":439,"column":1}},"key":"DWslkgymOK"},{"type":"inlineCode","value":"ask_strategy","position":{"start":{"line":439,"column":1},"end":{"line":439,"column":1}},"key":"fRXZdEf00H"},{"type":"text","value":" 重命名为 ","position":{"start":{"line":439,"column":1},"end":{"line":439,"column":1}},"key":"Wqik02IN8O"},{"type":"inlineCode","value":"exit_pricing","position":{"start":{"line":439,"column":1},"end":{"line":439,"column":1}},"key":"X7kjXCoHcH"},{"type":"text","value":"。\n属性 ","position":{"start":{"line":439,"column":1},"end":{"line":439,"column":1}},"key":"qa9AbMpJTT"},{"type":"inlineCode","value":"ask_last_balance","position":{"start":{"line":439,"column":1},"end":{"line":439,"column":1}},"key":"GUv67FrAfI"},{"type":"text","value":" -> ","position":{"start":{"line":439,"column":1},"end":{"line":439,"column":1}},"key":"fx3jscC0c9"},{"type":"inlineCode","value":"price_last_balance","position":{"start":{"line":439,"column":1},"end":{"line":439,"column":1}},"key":"EeP013ZRXw"},{"type":"text","value":" 和 ","position":{"start":{"line":439,"column":1},"end":{"line":439,"column":1}},"key":"SSbqyinyDR"},{"type":"inlineCode","value":"bid_last_balance","position":{"start":{"line":439,"column":1},"end":{"line":439,"column":1}},"key":"KCdhPB4qoS"},{"type":"text","value":" -> ","position":{"start":{"line":439,"column":1},"end":{"line":439,"column":1}},"key":"wFIf5ZaKhp"},{"type":"inlineCode","value":"price_last_balance","position":{"start":{"line":439,"column":1},"end":{"line":439,"column":1}},"key":"djXYtCxF0H"},{"type":"text","value":" 也被重命名。\n此外，价格端现在可以定义为 ","position":{"start":{"line":439,"column":1},"end":{"line":439,"column":1}},"key":"L6tpjaTeE5"},{"type":"inlineCode","value":"ask","position":{"start":{"line":439,"column":1},"end":{"line":439,"column":1}},"key":"j9qZfT2UdR"},{"type":"text","value":"、","position":{"start":{"line":439,"column":1},"end":{"line":439,"column":1}},"key":"AsNbJMZSBv"},{"type":"inlineCode","value":"bid","position":{"start":{"line":439,"column":1},"end":{"line":439,"column":1}},"key":"cCMs02uqLq"},{"type":"text","value":"、","position":{"start":{"line":439,"column":1},"end":{"line":439,"column":1}},"key":"akOdSFlZ3U"},{"type":"inlineCode","value":"same","position":{"start":{"line":439,"column":1},"end":{"line":439,"column":1}},"key":"KcwBHequHq"},{"type":"text","value":" 或 ","position":{"start":{"line":439,"column":1},"end":{"line":439,"column":1}},"key":"EMdUWSxRDE"},{"type":"inlineCode","value":"other","position":{"start":{"line":439,"column":1},"end":{"line":439,"column":1}},"key":"UAtvMrNOVS"},{"type":"text","value":"。\n请参阅","position":{"start":{"line":439,"column":1},"end":{"line":439,"column":1}},"key":"Za2NMNjIVc"},{"type":"crossReference","url":"/configuration","position":{"start":{"line":439,"column":1},"end":{"line":439,"column":1}},"children":[{"type":"text","value":"定价文档","position":{"start":{"line":439,"column":1},"end":{"line":439,"column":1}},"key":"lJDyl2ddPf"}],"urlSource":"configuration.md#prices-used-for-orders","dataUrl":"/configuration.json","identifier":"prices-used-for-orders","label":"prices-used-for-orders","remote":true,"protocol":"file","key":"xVWrcosfww"},{"type":"text","value":"了解更多信息。","position":{"start":{"line":439,"column":1},"end":{"line":439,"column":1}},"key":"e1ClyeG2Yz"}],"key":"aLLTdVFLbu"},{"type":"code","lang":"json","value":"{\n    \"bid_strategy\": {\n        \"price_side\": \"bid\",\n        \"use_order_book\": true,\n        \"order_book_top\": 1,\n        \"ask_last_balance\": 0.0,\n        \"check_depth_of_market\": {\n            \"enabled\": false,\n            \"bids_to_ask_delta\": 1\n        }\n    },\n    \"ask_strategy\":{\n        \"price_side\": \"ask\",\n        \"use_order_book\": true,\n        \"order_book_top\": 1,\n        \"bid_last_balance\": 0.0\n        \"ignore_buying_expired_candle_after\": 120\n    }\n}","position":{"start":{"line":444,"column":1},"end":{"line":464,"column":1}},"key":"dPtgSY0NLR"},{"type":"paragraph","position":{"start":{"line":466,"column":1},"end":{"line":466,"column":1}},"children":[{"type":"text","value":"之后：","position":{"start":{"line":466,"column":1},"end":{"line":466,"column":1}},"key":"z0TODpapdl"}],"key":"ZtKuiyEQR9"},{"type":"code","lang":"json","value":"{\n    \"entry_pricing\": {\n        \"price_side\": \"same\",\n        \"use_order_book\": true,\n        \"order_book_top\": 1,\n        \"price_last_balance\": 0.0,\n        \"check_depth_of_market\": {\n            \"enabled\": false,\n            \"bids_to_ask_delta\": 1\n        }\n    },\n    \"exit_pricing\":{\n        \"price_side\": \"same\",\n        \"use_order_book\": true,\n        \"order_book_top\": 1,\n        \"price_last_balance\": 0.0\n    },\n    \"ignore_buying_expired_candle_after\": 120\n}","position":{"start":{"line":468,"column":1},"end":{"line":488,"column":1}},"key":"CpgtI9je1s"},{"type":"heading","depth":3,"position":{"start":{"line":490,"column":1},"end":{"line":490,"column":1}},"children":[{"type":"text","value":"FreqAI 策略","position":{"start":{"line":490,"column":1},"end":{"line":490,"column":1}},"key":"Y3P7eQJXG5"}],"identifier":"freqai","label":"FreqAI 策略","html_id":"freqai","implicit":true,"key":"TYc6NDsqjw"},{"type":"paragraph","position":{"start":{"line":492,"column":1},"end":{"line":492,"column":1}},"children":[{"type":"inlineCode","value":"populate_any_indicators()","position":{"start":{"line":492,"column":1},"end":{"line":492,"column":1}},"key":"pvzcl4iTw5"},{"type":"text","value":" 方法已被拆分为 ","position":{"start":{"line":492,"column":1},"end":{"line":492,"column":1}},"key":"pzHbvlXvkb"},{"type":"inlineCode","value":"feature_engineering_expand_all()","position":{"start":{"line":492,"column":1},"end":{"line":492,"column":1}},"key":"i8pUX04Zex"},{"type":"text","value":"、","position":{"start":{"line":492,"column":1},"end":{"line":492,"column":1}},"key":"i2bJS6m4m2"},{"type":"inlineCode","value":"feature_engineering_expand_basic()","position":{"start":{"line":492,"column":1},"end":{"line":492,"column":1}},"key":"xtZGFaC9CO"},{"type":"text","value":"、","position":{"start":{"line":492,"column":1},"end":{"line":492,"column":1}},"key":"qDMZpjQ6um"},{"type":"inlineCode","value":"feature_engineering_standard()","position":{"start":{"line":492,"column":1},"end":{"line":492,"column":1}},"key":"RsfQj5GEvc"},{"type":"text","value":" 和 ","position":{"start":{"line":492,"column":1},"end":{"line":492,"column":1}},"key":"F1k5ooINZu"},{"type":"inlineCode","value":"set_freqai_targets()","position":{"start":{"line":492,"column":1},"end":{"line":492,"column":1}},"key":"H6JSLrkEAk"},{"type":"text","value":"。","position":{"start":{"line":492,"column":1},"end":{"line":492,"column":1}},"key":"kIUEwzsqd0"}],"key":"XrHLlkv8fB"},{"type":"paragraph","position":{"start":{"line":494,"column":1},"end":{"line":495,"column":1}},"children":[{"type":"text","value":"对于每个新函数，交易对（和必要的时间框架）将自动添加到列中。\n因此，使用新逻辑定义特征变得更加简单。","position":{"start":{"line":494,"column":1},"end":{"line":494,"column":1}},"key":"IHBjbg6r3C"}],"key":"Kmu7UaVgmM"},{"type":"paragraph","position":{"start":{"line":497,"column":1},"end":{"line":497,"column":1}},"children":[{"type":"text","value":"有关每个方法的完整说明，请转到相应的 ","position":{"start":{"line":497,"column":1},"end":{"line":497,"column":1}},"key":"Q95meJivnm"},{"type":"crossReference","url":"/freqai-feature-engineering","position":{"start":{"line":497,"column":1},"end":{"line":497,"column":1}},"children":[{"type":"text","value":"freqAI 文档页面","position":{"start":{"line":497,"column":1},"end":{"line":497,"column":1}},"key":"hkZrqzwPXa"}],"urlSource":"freqai-feature-engineering.md#defining-the-features","dataUrl":"/freqai-feature-engineering.json","identifier":"defining-the-features","label":"defining-the-features","remote":true,"protocol":"file","key":"xVF8kRhE14"}],"key":"bbbCn2r51U"},{"type":"code","lang":"python","value":"\ndef populate_any_indicators(\n        self, pair, df, tf, informative=None, set_generalized_indicators=False\n    ):\n\n        if informative is None:\n            informative = self.dp.get_pair_dataframe(pair, tf)\n\n        # 第一个循环自动复制时间周期的指标\n        for t in self.freqai_info[\"feature_parameters\"][\"indicator_periods_candles\"]:\n\n            t = int(t)\n            informative[f\"%-{pair}rsi-period_{t}\"] = ta.RSI(informative, timeperiod=t)\n            informative[f\"%-{pair}mfi-period_{t}\"] = ta.MFI(informative, timeperiod=t)\n            informative[f\"%-{pair}adx-period_{t}\"] = ta.ADX(informative, timeperiod=t)\n            informative[f\"%-{pair}sma-period_{t}\"] = ta.SMA(informative, timeperiod=t)\n            informative[f\"%-{pair}ema-period_{t}\"] = ta.EMA(informative, timeperiod=t)\n\n            bollinger = qtpylib.bollinger_bands(\n                qtpylib.typical_price(informative), window=t, stds=2.2\n            )\n            informative[f\"{pair}bb_lowerband-period_{t}\"] = bollinger[\"lower\"]\n            informative[f\"{pair}bb_middleband-period_{t}\"] = bollinger[\"mid\"]\n            informative[f\"{pair}bb_upperband-period_{t}\"] = bollinger[\"upper\"]\n\n            informative[f\"%-{pair}bb_width-period_{t}\"] = (\n                informative[f\"{pair}bb_upperband-period_{t}\"]\n                - informative[f\"{pair}bb_lowerband-period_{t}\"]\n            ) / informative[f\"{pair}bb_middleband-period_{t}\"]\n            informative[f\"%-{pair}close-bb_lower-period_{t}\"] = (\n                informative[\"close\"] / informative[f\"{pair}bb_lowerband-period_{t}\"]\n            )\n\n            informative[f\"%-{pair}roc-period_{t}\"] = ta.ROC(informative, timeperiod=t)\n\n            informative[f\"%-{pair}relative_volume-period_{t}\"] = (\n                informative[\"volume\"] / informative[\"volume\"].rolling(t).mean()\n            ) # (1)\n\n        informative[f\"%-{pair}pct-change\"] = informative[\"close\"].pct_change()\n        informative[f\"%-{pair}raw_volume\"] = informative[\"volume\"]\n        informative[f\"%-{pair}raw_price\"] = informative[\"close\"]\n        # (2)\n\n        indicators = [col for col in informative if col.startswith(\"%\")]\n        # 这个循环复制并移动所有指标，为数据添加时效性\n        for n in range(self.freqai_info[\"feature_parameters\"][\"include_shifted_candles\"] + 1):\n            if n == 0:\n                continue\n            informative_shift = informative[indicators].shift(n)\n            informative_shift = informative_shift.add_suffix(\"_shift-\" + str(n))\n            informative = pd.concat((informative, informative_shift), axis=1)\n\n        df = merge_informative_pair(df, informative, self.config[\"timeframe\"], tf, ffill=True)\n        skip_columns = [\n            (s + \"_\" + tf) for s in [\"date\", \"open\", \"high\", \"low\", \"close\", \"volume\"]\n        ]\n        df = df.drop(columns=skip_columns)\n\n        # 在这里添加通用指标（因为在实盘中，它将调用此函数在训练期间填充指标）。注意我们如何确保不多次添加它们\n        if set_generalized_indicators:\n            df[\"%-day_of_week\"] = (df[\"date\"].dt.dayofweek + 1) / 7\n            df[\"%-hour_of_day\"] = (df[\"date\"].dt.hour + 1) / 25\n            # (3)\n\n            # 用户通过在前面添加 &- 来添加目标（见下面的约定）\n            df[\"&-s_close\"] = (\n                df[\"close\"]\n                .shift(-self.freqai_info[\"feature_parameters\"][\"label_period_candles\"])\n                .rolling(self.freqai_info[\"feature_parameters\"][\"label_period_candles\"])\n                .mean()\n                / df[\"close\"]\n                - 1\n            )  # (4)\n\n        return df","position":{"start":{"line":499,"column":1},"end":{"line":576,"column":1}},"key":"DCvCuU448w"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":578,"column":1},"end":{"line":582,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":578,"column":1},"end":{"line":578,"column":1}},"children":[{"type":"text","value":"特征 - 移到 ","position":{"start":{"line":578,"column":1},"end":{"line":578,"column":1}},"key":"hQpFvSP2Bq"},{"type":"inlineCode","value":"feature_engineering_expand_all","position":{"start":{"line":578,"column":1},"end":{"line":578,"column":1}},"key":"EwzoVHbodj"}],"key":"DRwzBWTIP9"},{"type":"listItem","spread":true,"position":{"start":{"line":579,"column":1},"end":{"line":579,"column":1}},"children":[{"type":"text","value":"基本特征，不在 ","position":{"start":{"line":579,"column":1},"end":{"line":579,"column":1}},"key":"kDislI4a4w"},{"type":"inlineCode","value":"indicator_periods_candles","position":{"start":{"line":579,"column":1},"end":{"line":579,"column":1}},"key":"QAVrLbrPaB"},{"type":"text","value":" 中扩展 - 移到 ","position":{"start":{"line":579,"column":1},"end":{"line":579,"column":1}},"key":"FO10glxkew"},{"type":"inlineCode","value":"feature_engineering_expand_basic()","position":{"start":{"line":579,"column":1},"end":{"line":579,"column":1}},"key":"FdiORYv1AR"},{"type":"text","value":"。","position":{"start":{"line":579,"column":1},"end":{"line":579,"column":1}},"key":"ZCWWS21Zlz"}],"key":"Yy9w9BhHru"},{"type":"listItem","spread":true,"position":{"start":{"line":580,"column":1},"end":{"line":580,"column":1}},"children":[{"type":"text","value":"不应扩展的标准特征 - 移到 ","position":{"start":{"line":580,"column":1},"end":{"line":580,"column":1}},"key":"FM6bntatJ2"},{"type":"inlineCode","value":"feature_engineering_standard()","position":{"start":{"line":580,"column":1},"end":{"line":580,"column":1}},"key":"jWdW6TXCql"},{"type":"text","value":"。","position":{"start":{"line":580,"column":1},"end":{"line":580,"column":1}},"key":"XutK0FQGHk"}],"key":"nTkqtA1CR1"},{"type":"listItem","spread":true,"position":{"start":{"line":581,"column":1},"end":{"line":582,"column":1}},"children":[{"type":"text","value":"目标 - 移到 ","position":{"start":{"line":581,"column":1},"end":{"line":581,"column":1}},"key":"lemhoyjRod"},{"type":"inlineCode","value":"set_freqai_targets()","position":{"start":{"line":581,"column":1},"end":{"line":581,"column":1}},"key":"dG42itlUMa"},{"type":"text","value":"。","position":{"start":{"line":581,"column":1},"end":{"line":581,"column":1}},"key":"AottNofZ4z"}],"key":"xOtjV4yH85"}],"key":"xpGC1cvOF0"},{"type":"heading","depth":4,"position":{"start":{"line":583,"column":1},"end":{"line":583,"column":1}},"children":[{"type":"text","value":"freqai - 特征工程扩展全部","position":{"start":{"line":583,"column":1},"end":{"line":583,"column":1}},"key":"e883brsKfe"}],"identifier":"freqai","label":"freqai - 特征工程扩展全部","html_id":"freqai-1","implicit":true,"key":"SpJuTQoKZs"},{"type":"paragraph","position":{"start":{"line":585,"column":1},"end":{"line":585,"column":1}},"children":[{"type":"text","value":"特征现在会自动扩展。因此，需要删除扩展循环以及 ","position":{"start":{"line":585,"column":1},"end":{"line":585,"column":1}},"key":"nrZ0Y45N3a"},{"type":"inlineCode","value":"{pair}","position":{"start":{"line":585,"column":1},"end":{"line":585,"column":1}},"key":"w5vX8nh0Id"},{"type":"text","value":" / ","position":{"start":{"line":585,"column":1},"end":{"line":585,"column":1}},"key":"DUdiRUIx50"},{"type":"inlineCode","value":"{timeframe}","position":{"start":{"line":585,"column":1},"end":{"line":585,"column":1}},"key":"M2yJpz6DYk"},{"type":"text","value":" 部分。","position":{"start":{"line":585,"column":1},"end":{"line":585,"column":1}},"key":"o4RZK4nFFA"}],"key":"Lvtx32I0v8"},{"type":"code","lang":"python","value":"    def feature_engineering_expand_all(self, dataframe, period, **kwargs) -> DataFrame::\n        \"\"\"\n        *仅在使用 FreqAI 启用的策略时有效*\n        此函数将根据配置定义的 `indicator_periods_candles`、`include_timeframes`、`include_shifted_candles` 和 `include_corr_pairs` 自动扩展定义的特征。\n        换句话说，在此函数中定义的单个特征将自动扩展为总共\n        `indicator_periods_candles` * `include_timeframes` * `include_shifted_candles` *\n        `include_corr_pairs` 个添加到模型的特征。\n\n        所有特征必须以 `%` 开头才能被 FreqAI 内部识别。\n\n        有关这些配置定义的参数如何加速特征工程的更多详细信息，请参阅文档：\n\n        https://www.freqtrade.io/en/latest/freqai-parameter-table/#feature-parameters\n\n        https://www.freqtrade.io/en/latest/freqai-feature-engineering/#defining-the-features\n\n        :param df: 将接收特征的策略数据框\n        :param period: 指标的周期 - 使用示例：\n        dataframe[\"%-ema-period\"] = ta.EMA(dataframe, timeperiod=period)\n        \"\"\"\n\n        dataframe[\"%-rsi-period\"] = ta.RSI(dataframe, timeperiod=period)\n        dataframe[\"%-mfi-period\"] = ta.MFI(dataframe, timeperiod=period)\n        dataframe[\"%-adx-period\"] = ta.ADX(dataframe, timeperiod=period)\n        dataframe[\"%-sma-period\"] = ta.SMA(dataframe, timeperiod=period)\n        dataframe[\"%-ema-period\"] = ta.EMA(dataframe, timeperiod=period)\n\n        bollinger = qtpylib.bollinger_bands(\n            qtpylib.typical_price(dataframe), window=period, stds=2.2\n        )\n        dataframe[\"bb_lowerband-period\"] = bollinger[\"lower\"]\n        dataframe[\"bb_middleband-period\"] = bollinger[\"mid\"]\n        dataframe[\"bb_upperband-period\"] = bollinger[\"upper\"]\n\n        dataframe[\"%-bb_width-period\"] = (\n            dataframe[\"bb_upperband-period\"]\n            - dataframe[\"bb_lowerband-period\"]\n        ) / dataframe[\"bb_middleband-period\"]\n        dataframe[\"%-close-bb_lower-period\"] = (\n            dataframe[\"close\"] / dataframe[\"bb_lowerband-period\"]\n        )\n\n        dataframe[\"%-roc-period\"] = ta.ROC(dataframe, timeperiod=period)\n\n        dataframe[\"%-relative_volume-period\"] = (\n            dataframe[\"volume\"] / dataframe[\"volume\"].rolling(period).mean()\n        )\n\n        return dataframe\n","position":{"start":{"line":587,"column":1},"end":{"line":638,"column":1}},"key":"KszYWhgkFl"},{"type":"heading","depth":4,"position":{"start":{"line":640,"column":1},"end":{"line":640,"column":1}},"children":[{"type":"text","value":"Freqai - 特征工程基础","position":{"start":{"line":640,"column":1},"end":{"line":640,"column":1}},"key":"n3o54xgFmh"}],"identifier":"freqai","label":"Freqai - 特征工程基础","html_id":"freqai-2","implicit":true,"key":"rxtlgw2N9A"},{"type":"paragraph","position":{"start":{"line":642,"column":1},"end":{"line":642,"column":1}},"children":[{"type":"text","value":"基本特征。确保从特征中删除 ","position":{"start":{"line":642,"column":1},"end":{"line":642,"column":1}},"key":"iQVJgImuSp"},{"type":"inlineCode","value":"{pair}","position":{"start":{"line":642,"column":1},"end":{"line":642,"column":1}},"key":"FuWRYPM8x0"},{"type":"text","value":" 部分。","position":{"start":{"line":642,"column":1},"end":{"line":642,"column":1}},"key":"IwX6kKHkfm"}],"key":"t4tZTrhcGh"},{"type":"code","lang":"python","value":"    def feature_engineering_expand_basic(self, dataframe: DataFrame, **kwargs) -> DataFrame::\n        \"\"\"\n        *仅在使用 FreqAI 启用的策略时有效*\n        此函数将根据配置定义的 `include_timeframes`、`include_shifted_candles` 和 `include_corr_pairs` 自动扩展定义的特征。\n        换句话说，在此函数中定义的单个特征将自动扩展为总共\n        `include_timeframes` * `include_shifted_candles` * `include_corr_pairs`\n        个添加到模型的特征。\n\n        此处定义的特征将*不会*在用户定义的 `indicator_periods_candles` 上自动复制\n\n        所有特征必须以 `%` 开头才能被 FreqAI 内部识别。\n\n        有关这些配置定义的参数如何加速特征工程的更多详细信息，请参阅文档：\n\n        https://www.freqtrade.io/en/latest/freqai-parameter-table/#feature-parameters\n\n        https://www.freqtrade.io/en/latest/freqai-feature-engineering/#defining-the-features\n\n        :param df: 将接收特征的策略数据框\n        dataframe[\"%-pct-change\"] = dataframe[\"close\"].pct_change()\n        dataframe[\"%-ema-200\"] = ta.EMA(dataframe, timeperiod=200)\n        \"\"\"\n        dataframe[\"%-pct-change\"] = dataframe[\"close\"].pct_change()\n        dataframe[\"%-raw_volume\"] = dataframe[\"volume\"]\n        dataframe[\"%-raw_price\"] = dataframe[\"close\"]\n        return dataframe","position":{"start":{"line":644,"column":1},"end":{"line":671,"column":1}},"key":"DFaqJBaPf6"},{"type":"heading","depth":4,"position":{"start":{"line":673,"column":1},"end":{"line":673,"column":1}},"children":[{"type":"text","value":"FreqAI - 特征工程标准","position":{"start":{"line":673,"column":1},"end":{"line":673,"column":1}},"key":"LLwNaEnm7u"}],"identifier":"freqai","label":"FreqAI - 特征工程标准","html_id":"freqai-3","implicit":true,"key":"R10YUfdCQ6"},{"type":"code","lang":"python","value":"    def feature_engineering_standard(self, dataframe: DataFrame, **kwargs) -> DataFrame:\n        \"\"\"\n        *仅在使用 FreqAI 启用的策略时有效*\n        此可选函数将使用基本时间框架的数据框调用一次。\n        这是要调用的最终函数，这意味着进入此函数的数据框将包含所有其他\n        freqai_feature_engineering_* 函数创建的所有特征和列。\n\n        此函数是进行自定义异国特征提取的好地方（例如 tsfresh）。\n        此函数是任何不应自动扩展的特征的好地方（例如星期几）。\n\n        所有特征必须以 `%` 开头才能被 FreqAI 内部识别。\n\n        有关特征工程的更多详细信息：\n\n        https://www.freqtrade.io/en/latest/freqai-feature-engineering\n\n        :param df: 将接收特征的策略数据框\n        使用示例：dataframe[\"%-day_of_week\"] = (dataframe[\"date\"].dt.dayofweek + 1) / 7\n        \"\"\"\n        dataframe[\"%-day_of_week\"] = dataframe[\"date\"].dt.dayofweek\n        dataframe[\"%-hour_of_day\"] = dataframe[\"date\"].dt.hour\n        return dataframe","position":{"start":{"line":675,"column":1},"end":{"line":698,"column":1}},"key":"WtGY0TZNPm"},{"type":"heading","depth":4,"position":{"start":{"line":700,"column":1},"end":{"line":700,"column":1}},"children":[{"type":"text","value":"FreqAI - 设置目标","position":{"start":{"line":700,"column":1},"end":{"line":700,"column":1}},"key":"Y0PekOxBoO"}],"identifier":"freqai","label":"FreqAI - 设置目标","html_id":"freqai-4","implicit":true,"key":"SAPZZTrtYX"},{"type":"paragraph","position":{"start":{"line":702,"column":1},"end":{"line":702,"column":1}},"children":[{"type":"text","value":"目标现在有了自己的专用方法。","position":{"start":{"line":702,"column":1},"end":{"line":702,"column":1}},"key":"XTJpr7irGT"}],"key":"sPUJ68BwEY"},{"type":"code","lang":"python","value":"    def set_freqai_targets(self, dataframe: DataFrame, **kwargs) -> DataFrame:\n        \"\"\"\n        *仅在使用 FreqAI 启用的策略时有效*\n        设置模型目标的必需函数。\n        所有目标必须以 `&` 开头才能被 FreqAI 内部识别。\n\n        有关特征工程的更多详细信息：\n\n        https://www.freqtrade.io/en/latest/freqai-feature-engineering\n\n        :param df: 将接收目标的策略数据框\n        使用示例：dataframe[\"&-target\"] = dataframe[\"close\"].shift(-1) / dataframe[\"close\"]\n        \"\"\"\n        dataframe[\"&-s_close\"] = (\n            dataframe[\"close\"]\n            .shift(-self.freqai_info[\"feature_parameters\"][\"label_period_candles\"])\n            .rolling(self.freqai_info[\"feature_parameters\"][\"label_period_candles\"])\n            .mean()\n            / dataframe[\"close\"]\n            - 1\n            )\n\n        return dataframe","position":{"start":{"line":704,"column":1},"end":{"line":728,"column":1}},"key":"DqRR4jDdBz"},{"type":"heading","depth":4,"position":{"start":{"line":731,"column":1},"end":{"line":731,"column":1}},"children":[{"type":"text","value":"FreqAI - 新数据管道","position":{"start":{"line":731,"column":1},"end":{"line":731,"column":1}},"key":"Qt5j0iHTcz"}],"identifier":"freqai","label":"FreqAI - 新数据管道","html_id":"freqai-5","implicit":true,"key":"HoaqplOolq"},{"type":"paragraph","position":{"start":{"line":733,"column":1},"end":{"line":733,"column":1}},"children":[{"type":"text","value":"如果你创建了自己的自定义 ","position":{"start":{"line":733,"column":1},"end":{"line":733,"column":1}},"key":"Rkkn9pRvLm"},{"type":"inlineCode","value":"IFreqaiModel","position":{"start":{"line":733,"column":1},"end":{"line":733,"column":1}},"key":"ppolAGamR6"},{"type":"text","value":"，带有自定义 ","position":{"start":{"line":733,"column":1},"end":{"line":733,"column":1}},"key":"wIP3vqOJXm"},{"type":"inlineCode","value":"train()","position":{"start":{"line":733,"column":1},"end":{"line":733,"column":1}},"key":"nAkfjTrWtK"},{"type":"text","value":"/","position":{"start":{"line":733,"column":1},"end":{"line":733,"column":1}},"key":"pK30HBV5vS"},{"type":"inlineCode","value":"predict()","position":{"start":{"line":733,"column":1},"end":{"line":733,"column":1}},"key":"pqMt6mHNja"},{"type":"text","value":" 函数，","position":{"start":{"line":733,"column":1},"end":{"line":733,"column":1}},"key":"IIYv1s96s6"},{"type":"emphasis","position":{"start":{"line":733,"column":1},"end":{"line":733,"column":1}},"children":[{"type":"text","value":"并且","position":{"start":{"line":733,"column":1},"end":{"line":733,"column":1}},"key":"mfjhClE4Zy"}],"key":"EPCbYVv90d"},{"type":"text","value":"你仍然依赖 ","position":{"start":{"line":733,"column":1},"end":{"line":733,"column":1}},"key":"aY2JdjgtfU"},{"type":"inlineCode","value":"data_cleaning_train/predict()","position":{"start":{"line":733,"column":1},"end":{"line":733,"column":1}},"key":"F2bPrNsmCy"},{"type":"text","value":"，那么你需要迁移到新的管道。如果你的模型","position":{"start":{"line":733,"column":1},"end":{"line":733,"column":1}},"key":"EsAmH8ZgmA"},{"type":"emphasis","position":{"start":{"line":733,"column":1},"end":{"line":733,"column":1}},"children":[{"type":"text","value":"不","position":{"start":{"line":733,"column":1},"end":{"line":733,"column":1}},"key":"InD9E46V6v"}],"key":"VZvqoK8PM2"},{"type":"text","value":"依赖 ","position":{"start":{"line":733,"column":1},"end":{"line":733,"column":1}},"key":"UgXGoH57xx"},{"type":"inlineCode","value":"data_cleaning_train/predict()","position":{"start":{"line":733,"column":1},"end":{"line":733,"column":1}},"key":"hMdY3MBAjW"},{"type":"text","value":"，那么你不需要担心这个迁移。这意味着这个迁移指南只与很小一部分高级用户相关。如果你偶然看到这个指南，欢迎在 Freqtrade discord 服务器上深入询问你的问题。","position":{"start":{"line":733,"column":1},"end":{"line":733,"column":1}},"key":"drnfqhbKgA"}],"key":"rSLVSZpq2L"},{"type":"paragraph","position":{"start":{"line":735,"column":1},"end":{"line":735,"column":1}},"children":[{"type":"text","value":"转换涉及首先删除 ","position":{"start":{"line":735,"column":1},"end":{"line":735,"column":1}},"key":"HRO8WZl9EL"},{"type":"inlineCode","value":"data_cleaning_train/predict()","position":{"start":{"line":735,"column":1},"end":{"line":735,"column":1}},"key":"SjUEajVmMF"},{"type":"text","value":"，并用 ","position":{"start":{"line":735,"column":1},"end":{"line":735,"column":1}},"key":"PtCZv2Aom7"},{"type":"inlineCode","value":"define_data_pipeline()","position":{"start":{"line":735,"column":1},"end":{"line":735,"column":1}},"key":"N4Ep1kNXUw"},{"type":"text","value":" 和 ","position":{"start":{"line":735,"column":1},"end":{"line":735,"column":1}},"key":"S3jY2lUmQN"},{"type":"inlineCode","value":"define_label_pipeline()","position":{"start":{"line":735,"column":1},"end":{"line":735,"column":1}},"key":"Y3sVScRPoF"},{"type":"text","value":" 函数替换它们到你的 ","position":{"start":{"line":735,"column":1},"end":{"line":735,"column":1}},"key":"CpkE9GBfyJ"},{"type":"inlineCode","value":"IFreqaiModel","position":{"start":{"line":735,"column":1},"end":{"line":735,"column":1}},"key":"GPtvqWv5WO"},{"type":"text","value":" 类：","position":{"start":{"line":735,"column":1},"end":{"line":735,"column":1}},"key":"GgKZOX7L3L"}],"key":"uL8rIvHs0f"},{"type":"code","lang":"python","value":"class MyCoolFreqaiModel(BaseRegressionModel):\n    \"\"\"\n    你在 Freqtrade 版本 2023.6 之前制作的一些很酷的自定义 IFreqaiModel\n    \"\"\"\n    def train(\n        self, unfiltered_df: DataFrame, pair: str, dk: FreqaiDataKitchen, **kwargs\n    ) -> Any:\n\n        # ... 你的自定义内容\n\n        # 删除这些行\n        # data_dictionary = dk.make_train_test_datasets(features_filtered, labels_filtered)\n        # self.data_cleaning_train(dk)\n        # data_dictionary = dk.normalize_data(data_dictionary)\n        # (1)\n\n        # 添加这些行。现在我们自己控制管道的 fit/transform\n        dd = dk.make_train_test_datasets(features_filtered, labels_filtered)\n        dk.feature_pipeline = self.define_data_pipeline(threads=dk.thread_count)\n        dk.label_pipeline = self.define_label_pipeline(threads=dk.thread_count)\n\n        (dd[\"train_features\"],\n         dd[\"train_labels\"],\n         dd[\"train_weights\"]) = dk.feature_pipeline.fit_transform(dd[\"train_features\"],\n                                                                  dd[\"train_labels\"],\n                                                                  dd[\"train_weights\"])\n\n        (dd[\"test_features\"],\n         dd[\"test_labels\"],\n         dd[\"test_weights\"]) = dk.feature_pipeline.transform(dd[\"test_features\"],\n                                                             dd[\"test_labels\"],\n                                                             dd[\"test_weights\"])\n\n        dd[\"train_labels\"], _, _ = dk.label_pipeline.fit_transform(dd[\"train_labels\"])\n        dd[\"test_labels\"], _, _ = dk.label_pipeline.transform(dd[\"test_labels\"])\n\n        # ... 你的自定义代码\n\n        return model\n\n    def predict(\n        self, unfiltered_df: DataFrame, dk: FreqaiDataKitchen, **kwargs\n    ) -> tuple[DataFrame, npt.NDArray[np.int_]]:\n\n        # ... 你的自定义内容\n\n        # 删除这些行：\n        # self.data_cleaning_predict(dk)\n        # (2)\n\n        # 添加这些行：\n        dk.data_dictionary[\"prediction_features\"], outliers, _ = dk.feature_pipeline.transform(\n            dk.data_dictionary[\"prediction_features\"], outlier_check=True)\n\n        # 删除这行\n        # pred_df = dk.denormalize_labels_from_metadata(pred_df)\n        # (3)\n\n        # 用这些行替换\n        pred_df, _, _ = dk.label_pipeline.inverse_transform(pred_df)\n        if self.freqai_info.get(\"DI_threshold\", 0) > 0:\n            dk.DI_values = dk.feature_pipeline[\"di\"].di_values\n        else:\n            dk.DI_values = np.zeros(outliers.shape[0])\n        dk.do_predict = outliers\n\n        # ... 你的自定义代码\n        return (pred_df, dk.do_predict)","position":{"start":{"line":737,"column":1},"end":{"line":806,"column":1}},"key":"rK4ZCHBAni"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":809,"column":1},"end":{"line":811,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":809,"column":1},"end":{"line":809,"column":1}},"children":[{"type":"text","value":"数据规范化和清理现在与新管道定义统一。这是在新的 ","position":{"start":{"line":809,"column":1},"end":{"line":809,"column":1}},"key":"Ad8H6aJc26"},{"type":"inlineCode","value":"define_data_pipeline()","position":{"start":{"line":809,"column":1},"end":{"line":809,"column":1}},"key":"d8ursjG5UC"},{"type":"text","value":" 和 ","position":{"start":{"line":809,"column":1},"end":{"line":809,"column":1}},"key":"egjzyM3n3p"},{"type":"inlineCode","value":"define_label_pipeline()","position":{"start":{"line":809,"column":1},"end":{"line":809,"column":1}},"key":"um6mQoJqlA"},{"type":"text","value":" 函数中创建的。不再使用 ","position":{"start":{"line":809,"column":1},"end":{"line":809,"column":1}},"key":"YbjyWs1l7p"},{"type":"inlineCode","value":"data_cleaning_train()","position":{"start":{"line":809,"column":1},"end":{"line":809,"column":1}},"key":"BddGEQ4wYI"},{"type":"text","value":" 和 ","position":{"start":{"line":809,"column":1},"end":{"line":809,"column":1}},"key":"jLmoQesHIN"},{"type":"inlineCode","value":"data_cleaning_predict()","position":{"start":{"line":809,"column":1},"end":{"line":809,"column":1}},"key":"kAt52hpUwn"},{"type":"text","value":" 函数。如果你愿意，你可以覆盖 ","position":{"start":{"line":809,"column":1},"end":{"line":809,"column":1}},"key":"aQvej3e7Fc"},{"type":"inlineCode","value":"define_data_pipeline()","position":{"start":{"line":809,"column":1},"end":{"line":809,"column":1}},"key":"Od8NFTOObV"},{"type":"text","value":" 来创建自己的自定义管道。","position":{"start":{"line":809,"column":1},"end":{"line":809,"column":1}},"key":"W7RHREW5BQ"}],"key":"HpiqVhCyhY"},{"type":"listItem","spread":true,"position":{"start":{"line":810,"column":1},"end":{"line":810,"column":1}},"children":[{"type":"text","value":"数据规范化和清理现在与新管道定义统一。这是在新的 ","position":{"start":{"line":810,"column":1},"end":{"line":810,"column":1}},"key":"HUhlUY39Xg"},{"type":"inlineCode","value":"define_data_pipeline()","position":{"start":{"line":810,"column":1},"end":{"line":810,"column":1}},"key":"KnwvU4qLsd"},{"type":"text","value":" 和 ","position":{"start":{"line":810,"column":1},"end":{"line":810,"column":1}},"key":"TcamT9nKgJ"},{"type":"inlineCode","value":"define_label_pipeline()","position":{"start":{"line":810,"column":1},"end":{"line":810,"column":1}},"key":"zzjcs2EzzN"},{"type":"text","value":" 函数中创建的。不再使用 ","position":{"start":{"line":810,"column":1},"end":{"line":810,"column":1}},"key":"JGwJc8BRUO"},{"type":"inlineCode","value":"data_cleaning_train()","position":{"start":{"line":810,"column":1},"end":{"line":810,"column":1}},"key":"WuYLLqyQg5"},{"type":"text","value":" 和 ","position":{"start":{"line":810,"column":1},"end":{"line":810,"column":1}},"key":"okR47lIf7f"},{"type":"inlineCode","value":"data_cleaning_predict()","position":{"start":{"line":810,"column":1},"end":{"line":810,"column":1}},"key":"hB6XIeW1F8"},{"type":"text","value":" 函数。如果你愿意，你可以覆盖 ","position":{"start":{"line":810,"column":1},"end":{"line":810,"column":1}},"key":"uKuPwMcS9f"},{"type":"inlineCode","value":"define_data_pipeline()","position":{"start":{"line":810,"column":1},"end":{"line":810,"column":1}},"key":"PHW4NaxPne"},{"type":"text","value":" 来创建自己的自定义管道。","position":{"start":{"line":810,"column":1},"end":{"line":810,"column":1}},"key":"CCqXrX4hLJ"}],"key":"FYrRCALOLR"},{"type":"listItem","spread":true,"position":{"start":{"line":811,"column":1},"end":{"line":811,"column":1}},"children":[{"type":"text","value":"数据反规范化使用新管道完成。用下面的行替换。","position":{"start":{"line":811,"column":1},"end":{"line":811,"column":1}},"key":"ag8gwIQX8g"}],"key":"BjAhMy7Csd"}],"key":"c5uhFXwkJV"}],"key":"kR4NUjhO6n"}],"key":"qf9iPLm6Pa"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Freqtrade 常见问题","short_title":"FAQ","url":"/faq","group":"高级话题"},"next":{"title":"更新指南","short_title":"更新指南","url":"/updating","group":"高级话题"}}},"domain":"http://localhost:3002"}