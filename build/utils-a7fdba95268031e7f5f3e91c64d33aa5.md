---
title: 实用工具命令指南
subject: Freqtrade 实用工具命令指南
subtitle: 实用工具子命令的使用说明
short_title: 实用工具指南
description: 本文档详细介绍了 Freqtrade 中的各种实用工具子命令,包括创建用户目录、配置文件、列出交易所和交易对等功能。
tags: [工具, 命令, 配置, 策略, 交易所]
categories: [工具与命令]
prerequisites: [Freqtrade已安装]
difficulty: beginner
estimated_time: 20分钟
last_updated: 2024-01-15
version: 1.0
nav_order: 15
toc: true
---

# 实用工具子命令

除了实盘交易和模拟交易模式、`backtesting`、`edge` 和 `hyperopt` 优化子命令，以及用于准备历史数据的 `download-data` 子命令外，机器人还包含许多实用工具子命令。本节将介绍这些命令。

## 创建用户目录

创建用于存放 freqtrade 文件的目录结构。
同时会创建策略和超参数优化示例，帮助你快速入门。
可以多次使用 - 使用 `--reset` 将重置示例策略和超参数优化文件到默认状态。

```{include} commands/create-userdir.md
```

:::{warning}
使用 `--reset` 可能导致数据丢失，因为这将在不询问的情况下覆盖所有示例文件。
:::

```text
├── backtest_results
├── data
├── hyperopt_results
├── hyperopts
│   ├── sample_hyperopt_loss.py
├── notebooks 
│   └── strategy_analysis_example.ipynb
├── plot
└── strategies
    └── sample_strategy.py
```

## 创建新配置

创建新的配置文件，询问一些对配置很重要的选择性问题。

```{include} commands/new-config.md
```

:::{warning}
只询问关键问题。Freqtrade 提供了更多配置选项，这些选项在[配置文档](configuration.md#configuration-parameters)中列出。
:::

### 创建配置示例

```bash
$ freqtrade new-config --config user_data/config_binance.json

? 是否启用模拟交易？  Yes
? 请输入您的交易货币： BTC
? 请输入您的交易金额： 0.05
? 请输入最大开放交易数（整数或 -1 表示无限制）： 3
? 请输入您期望的时间周期（例如 5m）： 5m
? 请输入您的显示货币（用于报告）： USD
? 选择交易所  binance
? 是否启用 Telegram？  No
```

(show-config)=

## 显示配置

显示配置文件（默认情况下敏感值会被隐藏）。

在使用[拆分配置文件](configuration.md#multiple-configuration-files)或[环境变量](configuration.md#environment-variables)时特别有用，此命令将显示合并后的配置。

![显示配置输出](assets/show-config-output.png)

```{include} commands/show-config.md
```

``` output
您的组合配置是：
{
  "exit_pricing": {
    "price_side": "other",
    "use_order_book": true,
    "order_book_top": 1
  },
  "stake_currency": "USDT",
  "exchange": {
    "name": "binance",
    "key": "REDACTED",
    "secret": "REDACTED",
    "ccxt_config": {},
    "ccxt_async_config": {},
  }
  // ...
}
```

:::{warning} 共享此命令提供的信息
我们尝试从默认输出中删除所有已知的敏感信息（不使用 `--show-sensitive`）。

但是，请仔细检查输出中的敏感值，以确保您不会意外泄露任何私人信息。
:::

## 创建新策略

从类似于 SampleStrategy 的模板创建新策略。

文件将根据您的类名命名，并且不会覆盖现有文件。

结果将位于 `user_data/strategies/<strategyclassname>.py`。

```{include} commands/new-strategy.md
```

### 新策略使用示例

```bash
freqtrade new-strategy --strategy AwesomeStrategy
```

使用自定义用户目录

```bash
freqtrade new-strategy --userdir ~/.freqtrade/ --strategy AwesomeStrategy
```

使用高级模板（填充所有可选函数和方法）

```bash
freqtrade new-strategy --strategy AwesomeStrategy --template advanced
```

## 列出策略

使用 `list-strategies` 子命令查看特定目录中的所有策略。

此子命令对于查找环境中加载策略的问题很有用：包含错误且加载失败的策略模块将以红色显示（LOAD FAILED），而具有重复名称的策略将以黄色显示（DUPLICATE NAME）。

```{include} commands/list-strategies.md
```

:::{warning}
使用这些命令将尝试从目录加载所有 Python 文件。如果该目录中存在不受信任的文件，这可能存在安全风险，因为所有模块级代码都会被执行。
:::

示例：搜索默认策略目录（在默认用户目录内）。

```bash
freqtrade list-strategies
```

示例：搜索用户目录中的策略目录。

```bash
freqtrade list-strategies --userdir ~/.freqtrade/
```

示例：搜索专用策略路径。

```bash
freqtrade list-strategies --strategy-path ~/.freqtrade/strategies/
```

## 列出超参数优化损失函数

使用 `list-hyperoptloss` 子命令查看所有可用的超参数优化损失函数。

它提供了环境中所有可用损失函数的快速列表。

此子命令对于查找环境中加载损失函数的问题很有用：包含错误且加载失败的损失函数模块将以红色显示（LOAD FAILED），而具有重复名称的损失函数将以黄色显示（DUPLICATE NAME）。

```{include} commands/list-hyperoptloss.md
```

## 列出 freqAI 模型

使用 `list-freqaimodels` 子命令查看所有可用的 freqAI 模型。

此子命令对于查找环境中加载 freqAI 模型的问题很有用：包含错误且加载失败的模型模块将以红色显示（LOAD FAILED），而具有重复名称的模型将以黄色显示（DUPLICATE NAME）。

```{include} commands/list-freqaimodels.md
```

## 列出交易所

使用 `list-exchanges` 子命令查看机器人可用的交易所。

```{include} commands/list-exchanges.md
```

示例：查看机器人可用的交易所：

```bash
$ freqtrade list-exchanges
Freqtrade 可用的交易所：
交易所名称        支持状态    市场                    原因
------------------  -----------  ----------------------  ------------------------------------------------------------------------
binance            官方支持    现货、隔离期货
bitmart            官方支持    现货
bybit                         现货、隔离期货
gate               官方支持    现货、隔离期货
htx                官方支持    现货
huobi                         现货
kraken             官方支持    现货
okx                官方支持    现货、隔离期货
```

:::{hint} 简化
为清晰起见，输出已简化 - 支持和可用的交易所可能随时间变化。
:::

:::{note} 缺少优化选项的交易所
标记为 "missing opt:" 的值可能需要特殊配置（例如，如果缺少 `fetchTickers`，则使用订单簿）- 但理论上应该可以工作（尽管我们不能保证它们会工作）。
:::

示例：查看 `ccxt` 库支持的所有交易所（包括"不良"交易所，即已知不能与 Freqtrade 一起工作的交易所）

```bash
$ freqtrade list-exchanges -a
ccxt 库支持的所有交易所：
交易所名称        有效    支持状态    市场                    原因
------------------  -------  -----------  ----------------------  ---------------------------------------------------------------------------------
binance            True    官方支持    现货、隔离期货
bitflyer           False                现货                    missing: fetchOrder. missing opt: fetchTickers.
bitmart            True    官方支持    现货
bybit              True                 现货、隔离期货
gate               True    官方支持    现货、隔离期货
htx                True    官方支持    现货
kraken             True    官方支持    现货
okx                True    官方支持    现货、隔离期货
```

:::{hint} 简化
输出已简化 - 支持和可用的交易所可能随时间变化。
:::

## 列出时间周期

使用 `list-timeframes` 子命令查看交易所可用的时间周期列表。

```{include} commands/list-timeframes.md
```

* 示例：查看配置文件中设置的 'binance' 交易所的时间周期：

```bash
$ freqtrade list-timeframes -c config_binance.json
...
交易所 `binance` 可用的时间周期： 
    1m, 3m, 5m, 15m, 30m, 1h, 2h, 4h, 6h, 8h, 12h, 1d, 3d, 1w, 1M
```

* 示例：枚举 Freqtrade 可用的交易所并打印每个交易所支持的时间周期：

```bash
> for i in `freqtrade list-exchanges -1`; do freqtrade list-timeframes --exchange $i; done
```

## 列出交易对/市场

`list-pairs` 和 `list-markets` 子命令允许查看交易所上可用的交易对/市场。

交易对是在市场符号中基础货币部分和计价货币部分之间带有 '/' 字符的市场。
例如，在 'ETH/BTC' 交易对中，'ETH' 是基础货币，而 'BTC' 是计价货币。

对于 Freqtrade 交易的交易对，交易对的计价货币由配置设置中的 `stake_currency` 值定义。

您可以使用这些子命令打印任何交易对/市场的信息 - 并且您可以使用 `--quote BTC` 按计价货币过滤输出，或使用 `--base ETH` 选项按基础货币过滤输出。

这些子命令具有相同的用法和相同的可用选项集：

```{include} commands/list-pairs.md
```

默认情况下，只显示活跃的交易对/市场。活跃的交易对/市场是当前可以在交易所交易的交易对/市场。
您可以使用 `-a`/`-all` 选项查看所有交易对/市场的列表，包括不活跃的。
如果市场的最小可交易价格非常小，即小于 `1e-11`（`0.00000000001`），则交易对可能被列为不可交易。

在打印输出中，交易对/市场按其符号字符串排序。

### 示例

* 以 JSON 格式打印默认配置文件中指定的交易所（即 "Binance" 交易所）上以 USD 为计价货币的活跃交易对列表：

```bash
> freqtrade list-pairs --quote USD --print-json
```

* 打印 `config_binance.json` 配置文件指定的交易所（即 "Binance" 交易所）上所有以 BTC 或 ETH 为基础货币，以 USDT 或 USD 为计价货币的交易对列表，以人类可读的列表形式显示并带有摘要：

```bash
> freqtrade list-pairs -c config_binance.json --all --base BTC ETH --quote USDT USD --print-list
```

* 以表格格式打印 "Kraken" 交易所上的所有市场：

```bash
> freqtrade list-markets --exchange kraken --all
```

## 测试交易对列表

使用 `test-pairlist` 子命令测试[动态交易对列表](plugins.md#pairlists)的配置。

需要具有指定 `pairlists` 属性的配置。
可用于生成在回测/超参数优化期间使用的静态交易对列表。

```{include} commands/test-pairlist.md
```

### 示例

显示使用[动态交易对列表](plugins.md#pairlists)时的白名单。

```bash
freqtrade test-pairlist --config config.json --quote USDT BTC
```

## 转换数据库

`freqtrade convert-db` 可用于将数据库从一个系统转换到另一个系统（sqlite -> postgres，postgres -> 其他 postgres），迁移所有交易、订单和交易对锁定。

请参阅[相应文档](advanced-setup.md#use-a-different-database-system)了解不同数据库系统的要求。

```{include} commands/convert-db.md
```

:::{warning}
请确保仅在空的目标数据库上使用此功能。Freqtrade 将执行常规迁移，但如果已存在条目，可能会失败。
:::

## 网页服务器模式

:::{warning} 实验性
网页服务器模式是一种实验性模式，用于提高回测和策略开发效率。
可能仍存在错误 - 如果您遇到这些错误，请将其报告为 github issues，谢谢。
:::

以网页服务器模式运行 freqtrade。
Freqtrade 将启动网页服务器并允许 FreqUI 启动和控制回测进程。
这样做的好处是，只要时间周期和时间范围保持不变，数据就不会在回测运行之间重新加载。
FreqUI 还将显示回测结果。

```{include} commands/webserver.md
```

### 网页服务器模式 - docker

您也可以通过 docker 使用网页服务器模式。
启动一次性容器需要明确配置端口，因为默认情况下不会暴露端口。
您可以使用 `docker compose run --rm -p 127.0.0.1:8080:8080 freqtrade webserver` 启动一个一次性容器，一旦停止就会被删除。这假设端口 8080 仍然可用，并且没有其他机器人在该端口上运行。

或者，您可以重新配置 docker-compose 文件以更新命令：

``` yml
    command: >
      webserver
      --config /freqtrade/user_data/config.json
```

您现在可以使用 `docker compose up` 启动网页服务器。
这假设配置已启用网页服务器并为 docker 配置（监听端口 = `0.0.0.0`）。

:::{tip}
如果您想启动实盘或模拟交易机器人，别忘了将命令重置回交易命令。
:::

## 显示之前的回测结果

允许您显示之前的回测结果。
添加 `--show-pair-list` 会输出一个排序后的交易对列表，您可以轻松地复制/粘贴到配置中（省略不好的交易对）。

:::{warning} 策略过拟合
仅使用盈利的交易对可能导致策略过拟合，这在未来的数据上效果不会很好。在冒险使用真实资金之前，请确保在模拟交易中广泛测试您的策略。
:::

```{include} commands/backtesting-show.md
```

## 详细回测分析

高级回测结果分析。

更多详情请参阅[回测分析](advanced-backtesting.md#analyze-the-buyentry-and-sellexit-tags)部分。

```{include} commands/backtesting-analysis.md
```

(list-hyperopt-results)=

## 列出超参数优化结果

您可以使用 `hyperopt-list` 子命令列出超参数优化模块之前评估的超参数优化周期。

```{include} commands/hyperopt-list.md
```

:::{note}
`hyperopt-list` 将自动使用最新的可用超参数优化结果文件。
您可以使用 `--hyperopt-filename` 参数覆盖此设置，并指定另一个可用的文件名（不带路径！）。
:::

### 示例

列出所有结果，在末尾打印最佳结果的详细信息：

```bash
freqtrade hyperopt-list
```

仅列出具有正利润的周期。不打印最佳周期的详细信息，以便可以在脚本中迭代列表：

```bash
freqtrade hyperopt-list --profitable --no-details
```

## 显示超参数优化结果的详细信息

您可以使用 `hyperopt-show` 子命令显示超参数优化模块之前评估的任何超参数优化周期的详细信息。

```{include} commands/hyperopt-show.md
```

:::{note}
`hyperopt-show` 将自动使用最新的可用超参数优化结果文件。
您可以使用 `--hyperopt-filename` 参数覆盖此设置，并指定另一个可用的文件名（不带路径！）。
:::

### 示例

打印周期 168 的详细信息（周期编号由 `hyperopt-list` 子命令或超参数优化运行期间的超参数优化本身显示）：

```bash
freqtrade hyperopt-show -n 168
```

打印最后一个最佳周期（即所有周期中最好的）的 JSON 数据：

```bash
freqtrade hyperopt-show --best -n -1 --print-json --no-header
```

## 显示交易

将数据库中的选定（或所有）交易打印到屏幕。

```{include} commands/show-trades.md
```

### 示例

以 json 格式打印 id 为 2 和 3 的交易

```bash
freqtrade show-trades --db-url sqlite:///tradesv3.sqlite --trade-ids 2 3 --print-json
```

## 策略更新器

更新列出的策略或策略文件夹中的所有策略，使其符合 v3 标准。
如果命令在没有 --strategy-list 的情况下运行，则策略文件夹中的所有策略都将被转换。
您的原始策略将保留在 `user_data/strategies_orig_updater/` 目录中。

:::{warning} 转换结果
策略更新器将以"尽力而为"的方式工作。请尽职调查并验证转换结果。
我们还建议运行 python 格式化工具（例如 `black`）以合理的方式格式化结果。
:::

```{include} commands/strategy-updater.md
```
