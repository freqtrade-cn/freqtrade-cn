<!DOCTYPE html><html lang="en" class="" style="scroll-padding:60px"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>策略自定义指南 - Freqtrade 中文文档</title><meta property="og:title" content="策略自定义指南 - Freqtrade 中文文档"/><meta name="generator" content="mystmd"/><meta name="description" content="本文档介绍如何在 Freqtrade 中自定义交易策略,包括添加新指标、设置交易规则等内容。"/><meta property="og:description" content="本文档介绍如何在 Freqtrade 中自定义交易策略,包括添加新指标、设置交易规则等内容。"/><meta name="keywords" content="Freqtrade, 中文文档, 交易机器人, 量化交易, 加密货币, 数字货币, 区块链, 人工智能, 机器学习"/><meta name="image" content="/build/freqtrade_poweredby-54c1a23e325977ebc310429538f96a71.svg"/><meta property="og:image" content="/build/freqtrade_poweredby-54c1a23e325977ebc310429538f96a71.svg"/><link rel="stylesheet" href="/build/_assets/app-5WKS5EPQ.css"/><link rel="stylesheet" href="/build/_assets/thebe-core-VKVHG5VY.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jupyter-matplotlib@0.11.3/css/mpl_widget.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous"/><link rel="icon" href="/favicon.ico"/><link rel="stylesheet" href="/myst-theme.css"/><script>
  const savedTheme = localStorage.getItem("myst:theme");
  const theme = window.matchMedia("(prefers-color-scheme: light)").matches ? 'light' : 'dark';
  const classes = document.documentElement.classList;
  const hasAnyTheme = classes.contains('light') || classes.contains('dark');
  if (!hasAnyTheme) classes.add(savedTheme ?? theme);
</script></head><body class="m-0 transition-colors duration-500 bg-white dark:bg-stone-900"><div class="fixed top-1 left-1 h-[0px] w-[0px] focus-within:z-40 focus-within:h-auto focus-within:w-auto bg-white overflow-hidden focus-within:p-2 focus-within:ring-1" aria-label="skip to content options"><a href="#skip-to-frontmatter" class="block px-2 py-1 text-black underline">Skip to article frontmatter</a><a href="#skip-to-article" class="block px-2 py-1 text-black underline">Skip to article content</a></div><div class="bg-white/80 backdrop-blur dark:bg-stone-900/80 shadow dark:shadow-stone-700 p-3 md:px-8 sticky w-screen top-0 z-30 h-[60px]"><nav class="flex items-center justify-between flex-nowrap max-w-[1440px] mx-auto"><div class="flex flex-row xl:min-w-[19.5rem] mr-2 sm:mr-7 justify-start items-center shrink-0"><div class="block xl:hidden"><button class="flex items-center border-stone-400 text-stone-800 hover:text-stone-900 dark:text-stone-200 hover:dark:text-stone-100"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="m-1"><path fill-rule="evenodd" d="M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z" clip-rule="evenodd"></path></svg><span class="sr-only">Open Menu</span></button></div><a class="flex items-center ml-3 dark:text-white w-fit md:ml-5 xl:ml-7" href="/"><span class="text-md sm:text-xl tracking-tight sm:mr-5">Freqtrade 中文文档</span></a></div><div class="flex items-center flex-grow w-auto"><div class="flex-grow hidden text-md lg:block"><div class="relative inline-block mx-2 grow-0" data-headlessui-state=""><div class="inline-block"><button class="inline-flex items-center justify-center w-full py-1 mx-2 font-medium rounded-md text-md text-stone-900 dark:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75" id="headlessui-menu-button-:R2j4op:" type="button" aria-haspopup="menu" aria-expanded="false" data-headlessui-state=""><span>Freqtrade 官方</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="1.25rem" height="1.25rem" class="ml-2 -mr-1 text-violet-200 hover:text-violet-100"><path fill-rule="evenodd" d="M12.53 16.28a.75.75 0 0 1-1.06 0l-7.5-7.5a.75.75 0 0 1 1.06-1.06L12 14.69l6.97-6.97a.75.75 0 1 1 1.06 1.06l-7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div></div><div class="relative inline-block mx-2 grow-0"><a href="https://github.com/freqtrade-cn/freqtrade" target="_blank" rel="noopener noreferrer" class="inline-flex items-center justify-center w-full mx-2 py-1 text-md font-medium dark:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75">Freqtrade-CN GitHub</a></div></div><div class="flex-grow block"></div><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R74op:" data-state="closed" class="flex items-center h-10 aspect-square sm:w-64 text-left text-gray-400 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 hover:ring-blue-500 dark:hover:ring-blue-500 hover:border-blue-500 dark:hover:border-blue-500"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="p-2.5 h-10 w-10 aspect-square"><path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z" clip-rule="evenodd"></path></svg><span class="hidden sm:block grow">Search</span><div aria-hidden="true" class="items-center hidden mx-1 font-mono text-sm text-gray-400 sm:flex gap-x-1"><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none hide-mac">CTRL</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none show-mac">⌘</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none ">K</kbd><script>
;(() => {
const script = document.currentScript;
const root = script.parentElement;

const isMac = /mac/i.test(
      window.navigator.userAgentData?.platform ?? window.navigator.userAgent,
    );
root.querySelectorAll(".hide-mac").forEach(node => {node.classList.add(isMac ? "hidden" : "block")});
root.querySelectorAll(".show-mac").forEach(node => {node.classList.add(!isMac ? "hidden" : "block")});
})()</script></div></button><button class="theme rounded-full aspect-square border border-stone-700 dark:border-white hover:bg-neutral-100 border-solid overflow-hidden text-stone-700 dark:text-white hover:text-stone-500 dark:hover:text-neutral-800 w-8 h-8 mx-3" title="Toggle theme between light and dark mode" aria-label="Toggle theme between light and dark mode"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="h-full w-full p-0.5 hidden dark:block"><path fill-rule="evenodd" d="M9.528 1.718a.75.75 0 0 1 .162.819A8.97 8.97 0 0 0 9 6a9 9 0 0 0 9 9 8.97 8.97 0 0 0 3.463-.69.75.75 0 0 1 .981.98 10.503 10.503 0 0 1-9.694 6.46c-5.799 0-10.5-4.7-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 0 1 .818.162Z" clip-rule="evenodd"></path></svg><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="h-full w-full p-0.5 dark:hidden"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"></path></svg></button><div class="block sm:hidden"></div><div class="hidden sm:block"></div></div></nav></div><div class="fixed xl:article-grid grid-gap xl:w-screen xl:pointer-events-none overflow-auto max-xl:min-w-[300px] hidden z-10" style="top:60px"><div class="pointer-events-auto xl:col-margin-left flex-col overflow-hidden hidden xl:flex"><div class="flex-grow py-6 overflow-y-auto primary-scrollbar"><nav aria-label="Navigation" class="overflow-y-hidden transition-opacity ml-3 xl:ml-0 mr-3 max-w-[350px] lg:hidden"><div class="w-full px-1 dark:text-white font-medium"><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><a class="py-2 grow" href="/">Freqtrade 官方</a><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:Rap8p:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:Rap8p:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><a href="https://github.com/freqtrade-cn/freqtrade" target="_blank" rel="noopener noreferrer" class="p-2 my-1 rounded-lg hover:bg-slate-300/30 block break-words focus:outline outline-blue-200 outline-2 rounded">Freqtrade-CN GitHub</a></div></nav><div class="my-3 border-b-2 lg:hidden"></div><nav aria-label="Table of Contents" class="flex-grow overflow-y-hidden transition-opacity ml-3 xl:ml-0 mr-3 max-w-[350px]"><div class="w-full px-1 dark:text-white"><a title="Freqtrade 中文文档" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30 font-bold" href="/">Freqtrade 中文文档</a><a title="Freqtrade 术语词典" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/terms">术语词典</a><a title="使用 Docker 运行 Freqtrade" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/docker-quickstart">Docker 快速入门</a><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="安装" class="block break-words rounded py-2 grow cursor-pointer">安装</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:R16p8p:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:R16p8p:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><a title="Freqtrade 基础" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/bot-basics">基础指南</a><a title="配置 Freqtrade" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/configuration">配置</a><a title="Freqtrade 策略开发指南" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/strategy-101">策略开发指南</a><a title="策略自定义指南" aria-current="page" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg bg-blue-300/30 active" href="/strategy-customization">策略自定义</a><a title="策略回调指南" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/strategy-callbacks">策略回调</a><a title="止损配置指南" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/stoploss">止损</a><a title="插件体系" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/plugins">插件体系</a><a title="机器人使用指南" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/bot-usage">机器人使用</a><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="机器人控制和管理" class="block break-words rounded py-2 grow cursor-pointer">机器人控制和管理</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:R3ep8p:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:R3ep8p:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><a title="数据下载" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/data-download">数据下载</a><a title="回测" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/backtesting">回测</a><a title="Hyperopt 超参数优化指南" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/hyperopt">Hyperopt 指南</a><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="FreqAI" class="block break-words rounded py-2 grow cursor-pointer">FreqAI</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:R4ep8p:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:R4ep8p:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><a title="使用杠杆交易" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/leverage">使用杠杆交易</a><a title="实用工具命令指南" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/utils">实用工具指南</a><a title="绘图" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/plotting">绘图</a><a title="交易所特定说明" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/exchanges">交易所说明</a><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="数据分析" class="block break-words rounded py-2 grow cursor-pointer">数据分析</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:R5mp8p:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:R5mp8p:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="高级话题" class="block break-words rounded py-2 grow cursor-pointer">高级话题</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:R5up8p:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:R5up8p:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><a title="Freqtrade 常见问题" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/faq">FAQ</a><a title="策略迁移指南" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/strategy-migration">策略迁移</a><a title="更新指南" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/updating">更新指南</a><a title="Commands" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/commands">Commands</a><a title="已弃用功能" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/deprecated">已弃用功能</a><a title="开发者指南" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/developer">开发者指南</a><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="Commands" class="block break-words rounded py-2 grow cursor-pointer">Commands</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:R7mp8p:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:R7mp8p:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div></div></nav></div><div class="flex-none py-6 transition-all duration-700 translate-y-6 opacity-0"><a class="flex mx-auto text-gray-700 w-fit hover:text-blue-700 dark:text-gray-200 dark:hover:text-blue-400" href="https://github.com/freqtrade-cn/docs_zh-CN" target="_blank" rel="noreferrer"><span class="self-center text-sm">Made with love by Freqtrade-CN🏅🏅</span></a></div></div></div><main class="article-grid grid-gap"><article class="article-grid subgrid-gap col-screen article content"><div class="hidden"></div><div id="skip-to-frontmatter" aria-label="article frontmatter" class="mb-8 pt-9"><div class="flex items-center h-6 mb-5 text-sm font-light"><div class="flex-none pr-2 smallcaps">Freqtrade 策略开发</div><div class="flex-grow"></div><a href="https://github.com/freqtrade-cn/docs_zh-CN" title="GitHub Repository: freqtrade-cn/docs_zh-CN" target="_blank" rel="noopener noreferrer" class="text-inherit hover:text-inherit"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="inline-block mr-1 opacity-60 hover:opacity-100"><path d="M12 2.5c-5.4 0-9.8 4.4-9.8 9.7 0 4.3 2.8 8 6.7 9.2.5.1.7-.2.7-.5v-1.8c-2.4.5-3.1-.6-3.3-1.1-.1-.3-.6-1.1-1-1.4-.3-.2-.8-.6 0-.6s1.3.7 1.5 1c.9 1.5 2.3 1.1 2.8.8.1-.6.3-1.1.6-1.3-2.2-.2-4.4-1.1-4.4-4.8 0-1.1.4-1.9 1-2.6-.1-.2-.4-1.2.1-2.6 0 0 .8-.3 2.7 1 .8-.2 1.6-.3 2.4-.3.8 0 1.7.1 2.4.3 1.9-1.3 2.7-1 2.7-1 .5 1.3.2 2.3.1 2.6.6.7 1 1.5 1 2.6 0 3.7-2.3 4.6-4.4 4.8.4.3.7.9.7 1.8V21c0 .3.2.6.7.5 3.9-1.3 6.6-4.9 6.6-9.2 0-5.4-4.4-9.8-9.8-9.8z"></path></svg></a><a href="https://github.com/freqtrade-cn/docs_zh-CN/blob/main/strategy-customization.md" title="Edit This Page" target="_blank" rel="noopener noreferrer" class="text-inherit hover:text-inherit"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.25rem" height="1.25rem" class="inline-block mr-1 opacity-60 hover:opacity-100"><path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"></path></svg></a><div class="relative flex inline-block mx-1 grow-0" data-headlessui-state=""><button class="relative ml-2 -mr-1" id="headlessui-menu-button-:Rs8top:" type="button" aria-haspopup="menu" aria-expanded="false" data-headlessui-state=""><span class="sr-only">Downloads</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.25rem" height="1.25rem"><title>Download</title><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"></path></svg></button></div></div><h1 class="mb-0">策略自定义指南</h1><p class="mt-2 mb-0 lead text-zinc-600 dark:text-zinc-400">如何开发自己的交易策略</p><header class="mt-4 not-prose"><div><span class="font-semibold text-sm inline-block"><button class="focus:shadow-[0_0_0_2px] focus:shadow-black outline-none hover:underline" aria-label="Author Details" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R78top:" data-state="closed">Freqtrade</button></span></div></header></div><div class="block my-10 lg:sticky lg:z-10 lg:h-0 lg:pt-0 lg:my-0 lg:ml-10 lg:col-margin-right" style="top:60px"><nav></nav></div><div id="skip-to-article"></div><h2 id="id" class="relative group"><span class="heading-text">策略自定义</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>本页将介绍如何自定义你的策略、添加新指标以及设置交易规则。</p><p>如果你还没有了解过，建议先阅读：</p><ul><li><a class="" data-state="closed" href="/strategy-101">Freqtrade 策略 101</a>，快速入门策略开发</li><li><a class="" data-state="closed" href="/bot-basics">Freqtrade 机器人基础</a>，了解机器人整体运行机制</li></ul><h3 id="id-1" class="relative group"><span class="heading-text">开发你自己的策略</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-1" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>机器人自带了一个默认策略文件。</p><p>此外，<a target="_blank" rel="noreferrer" href="https://github.com/freqtrade/freqtrade-strategies" class="">策略仓库</a>中还提供了其他策略。</p><p>不过你很可能有自己的策略想法。本文档旨在帮助你将想法转化为可运行的策略。</p><h4 id="id-2" class="relative group"><span class="heading-text">生成策略模板</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-2" title="Link to this Section" aria-label="Link to this Section">¶</a></h4><p>你可以通过以下命令快速开始：</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-bash" style="white-space:pre">freqtrade new-strategy --strategy AwesomeStrategy</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p>这会基于模板创建一个名为 <code>AwesomeStrategy</code> 的新策略，文件路径为 <code>user_data/strategies/AwesomeStrategy.py</code>。</p><aside class="myst-admonition myst-admonition-warning my-5 shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-gray-50/10 dark:bg-stone-800 overflow-hidden myst-admonition-default rounded border-l-4 border-amber-600"><div class="myst-admonition-header m-0 font-medium py-1 flex min-w-0 text-lg text-amber-600 bg-amber-50 dark:bg-slate-900"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="myst-admonition-header-icon inline-block pl-2 mr-2 self-center flex-none text-amber-600"><path fill-rule="evenodd" d="M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z" clip-rule="evenodd"></path></svg><div class="myst-admonition-header-text text-neutral-900 dark:text-white grow self-center overflow-hidden break-words">名称区别</div></div><div class="myst-admonition-body px-4 py-1"><p>策略的<em>名称</em>和文件名是有区别的。大多数命令中，Freqtrade 使用的是<em>策略类名</em>，而不是文件名。</p><p><code>new-strategy</code> 命令生成的示例策略并不会直接盈利。</p></div></aside><aside class="myst-admonition myst-admonition-tip my-5 shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-gray-50/10 dark:bg-stone-800 overflow-hidden myst-admonition-default rounded border-l-4 border-green-600"><div class="myst-admonition-header m-0 font-medium py-1 flex min-w-0 text-lg text-green-600 bg-green-50 dark:bg-slate-900"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="myst-admonition-header-icon inline-block pl-2 mr-2 self-center flex-none text-green-600"><path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"></path></svg><div class="myst-admonition-header-text text-neutral-900 dark:text-white grow self-center overflow-hidden break-words">不同模板级别</div></div><div class="myst-admonition-body px-4 py-1"><p><code>freqtrade new-strategy</code> 有一个额外参数 <code>--template</code>，可控制生成策略的复杂程度。用 <code>--template minimal</code> 可获得一个空白策略，无任何指标示例；用 <code>--template advanced</code> 可获得包含更多复杂特性的模板。</p></div></aside><h4 id="id-3" class="relative group"><span class="heading-text">策略结构剖析</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-3" title="Link to this Section" aria-label="Link to this Section">¶</a></h4><p>一个策略文件包含构建策略逻辑所需的全部信息：</p><ul><li>K线数据（OHLCV 格式）</li><li>各类指标</li><li>入场逻辑<ul><li>信号</li></ul></li><li>出场逻辑<ul><li>信号</li><li>最小收益率（ROI）</li><li>回调函数（自定义函数）</li></ul></li><li>止损<ul><li>固定/绝对止损</li><li>跟踪止损</li><li>回调函数（自定义函数）</li></ul></li><li>定价（可选）</li><li>持仓调整（可选）</li></ul><p>机器人自带一个名为 <code>SampleStrategy</code> 的示例策略，可作为参考：<code>user_data/strategies/sample_strategy.py</code>。</p><p>你可以用参数 <code>--strategy SampleStrategy</code> 进行测试。注意这里用的是策略类名，而不是文件名。</p><p>此外，还有一个名为 <code>INTERFACE_VERSION</code> 的属性，用于定义策略接口的版本。当前版本为 <code>3</code>，如果未在策略中显式设置，则默认为 <code>3</code>。</p><p>你可能会看到旧策略设置为接口版本 <code>2</code>，未来版本会要求升级到 <code>v3</code>。</p><p>用 <code>trade</code> 命令即可启动机器人进入 <code>dry</code> 或 <code>live</code> 模式：</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-bash" style="white-space:pre">freqtrade trade --strategy AwesomeStrategy</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><h4 id="id-4" class="relative group"><span class="heading-text">机器人运行模式</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-4" title="Link to this Section" aria-label="Link to this Section">¶</a></h4><p>Freqtrade 策略可在 <code>5</code> 种主要模式下被机器人处理：</p><ul><li>回测（backtesting）</li><li>超参优化（hyperopting）</li><li>模拟盘（dry/forward testing）</li><li>实盘（live）</li><li>FreqAI（本页不涉及）</li></ul><p>关于如何设置 <code>dry</code> 或 <code>live</code> 模式，请查阅<span data-state="closed"><a class="hover-link" href="/configuration#dry-run-live-mode">配置文档</a></span>。</p><p><strong>测试时请始终使用 dry 模式，这样可以在不冒资金风险的情况下了解策略实际表现。</strong></p><h3 id="id-5" class="relative group"><span class="heading-text">深入剖析</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-5" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p><strong>以下内容将以 <a href="https://github.com/freqtrade/freqtrade/blob/develop/freqtrade/templates/sample_strategy.py" class="italic" target="_blank" rel="noreferrer" data-state="closed">user<wbr/>_data<wbr/>/strategies<wbr/>/sample<wbr/>_strategy<wbr/>.py</a> 为参考。</strong></p><aside class="myst-admonition myst-admonition-caution my-5 shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-gray-50/10 dark:bg-stone-800 overflow-hidden myst-admonition-default rounded border-l-4 border-amber-600"><div class="myst-admonition-header m-0 font-medium py-1 flex min-w-0 text-lg text-amber-600 bg-amber-50 dark:bg-slate-900"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="myst-admonition-header-icon inline-block pl-2 mr-2 self-center flex-none text-amber-600"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"></path></svg><div class="myst-admonition-header-text text-neutral-900 dark:text-white grow self-center overflow-hidden break-words">策略与回测</div></div><div class="myst-admonition-body px-4 py-1"><p>为避免回测与 dry/live 模式下出现问题和意外差异，请注意回测时 <code>populate_*()</code> 方法会一次性传入完整时间区间。</p><p>因此建议使用向量化操作（针对整个 dataframe，而非循环），避免用 <code>df.iloc[-1]</code>，而应用 <code>df.shift()</code> 获取前一根K线。</p></div></aside><aside class="myst-admonition myst-admonition-warning my-5 shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-gray-50/10 dark:bg-stone-800 overflow-hidden myst-admonition-default rounded border-l-4 border-amber-600"><div class="myst-admonition-header m-0 font-medium py-1 flex min-w-0 text-lg text-amber-600 bg-amber-50 dark:bg-slate-900"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="myst-admonition-header-icon inline-block pl-2 mr-2 self-center flex-none text-amber-600"><path fill-rule="evenodd" d="M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z" clip-rule="evenodd"></path></svg><div class="myst-admonition-header-text text-neutral-900 dark:text-white grow self-center overflow-hidden break-words">警惕未来数据</div></div><div class="myst-admonition-body px-4 py-1"><p>回测时 <code>populate_*()</code> 方法会传入完整时间区间，策略作者需确保不使用未来数据。</p><p>常见错误模式见文档后面的<span data-state="closed"><a href="#common-mistakes-when-developing-strategies" class="hover-link">常见错误</a></span>章节。</p></div></aside><aside class="myst-admonition myst-admonition-tip my-5 shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-gray-50/10 dark:bg-stone-800 overflow-hidden myst-admonition-default rounded border-l-4 border-green-600"><div class="myst-admonition-header m-0 font-medium py-1 flex min-w-0 text-lg text-green-600 bg-green-50 dark:bg-slate-900"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="myst-admonition-header-icon inline-block pl-2 mr-2 self-center flex-none text-green-600"><path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"></path></svg><div class="myst-admonition-header-text text-neutral-900 dark:text-white grow self-center overflow-hidden break-words">前视与递归分析</div></div><div class="myst-admonition-body px-4 py-1"><p>Freqtrade 提供了两条命令帮助检测常见的前视（未来数据）和递归偏差（指标值方差）问题。在 dry/live 前，建议先用 <a class="" data-state="closed" href="/lookahead-analysis">lookahead</a> 和 <a class="" data-state="closed" href="/recursive-analysis">recursive</a> 工具分析。</p></div></aside><h4 id="dataframe" class="relative group"><span class="heading-text">DataFrame</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#dataframe" title="Link to this Section" aria-label="Link to this Section">¶</a></h4><p>Freqtrade 使用 <a target="_blank" rel="noreferrer" href="https://pandas.pydata.org/" class="">pandas</a> 存储/提供 K 线（OHLCV）数据。
Pandas 是处理表格数据的强大库。</p><p>DataFrame 的每一行对应一根K线，最新的完整K线总是排在最后（按日期排序）。</p><p>用 pandas 的 <code>head()</code> 查看前几行：</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-text" style="white-space:pre">&gt; dataframe.head()
                       date      open      high       low     close     volume
0 2021-11-09 23:25:00+00:00  67279.67  67321.84  67255.01  67300.97   44.62253
1 2021-11-09 23:30:00+00:00  67300.97  67301.34  67183.03  67187.01   61.38076
2 2021-11-09 23:35:00+00:00  67187.02  67187.02  67031.93  67123.81  113.42728
3 2021-11-09 23:40:00+00:00  67123.80  67222.40  67080.33  67160.48   78.96008
4 2021-11-09 23:45:00+00:00  67160.48  67160.48  66901.26  66943.37  111.39292</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p>DataFrame 是一个表格，列不是单一值，而是一组数据。因此，像下面这样直接用 Python 比较会报错：</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">    if dataframe[&#x27;rsi&#x27;] &gt; 30:
        dataframe[&#x27;enter_long&#x27;] = 1</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p>上述写法会报错：<code>The truth value of a Series is ambiguous [...]</code>。</p><p>应改为 pandas 向量化写法，对整个 dataframe 执行操作：</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">    dataframe.loc[
        (dataframe[&#x27;rsi&#x27;] &gt; 30)
    , &#x27;enter_long&#x27;] = 1</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p>这样会在 RSI 大于 30 时，为新列 <code>enter_long</code> 赋值 1。</p><p>Freqtrade 会用这个新列作为入场信号，假定下一根K线开盘时开仓。</p><p>Pandas 支持高效的向量化计算，建议尽量避免循环，直接用向量化方法。</p><p>向量化操作会对整列数据进行计算，比逐行循环快得多。</p><aside class="myst-admonition myst-admonition-tip my-5 shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-gray-50/10 dark:bg-stone-800 overflow-hidden myst-admonition-default rounded border-l-4 border-green-600"><div class="myst-admonition-header m-0 font-medium py-1 flex min-w-0 text-lg text-green-600 bg-green-50 dark:bg-slate-900"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="myst-admonition-header-icon inline-block pl-2 mr-2 self-center flex-none text-green-600"><path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"></path></svg><div class="myst-admonition-header-text text-neutral-900 dark:text-white grow self-center overflow-hidden break-words">信号 vs 交易</div></div><div class="myst-admonition-body px-4 py-1"><ul><li>信号由指标在K线收盘时生成，表示有意愿开仓。</li><li>交易是在实际下单（实盘时在交易所），会尽量在下一根K线开盘时成交。</li></ul></div></aside><aside class="myst-admonition myst-admonition-warning my-5 shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-gray-50/10 dark:bg-stone-800 overflow-hidden myst-admonition-default rounded border-l-4 border-amber-600"><div class="myst-admonition-header m-0 font-medium py-1 flex min-w-0 text-lg text-amber-600 bg-amber-50 dark:bg-slate-900"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="myst-admonition-header-icon inline-block pl-2 mr-2 self-center flex-none text-amber-600"><path fill-rule="evenodd" d="M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z" clip-rule="evenodd"></path></svg><div class="myst-admonition-header-text text-neutral-900 dark:text-white grow self-center overflow-hidden break-words">交易下单假设</div></div><div class="myst-admonition-body px-4 py-1"><p>回测时，信号在K线收盘时生成，交易在下一根K线开盘时执行。</p><p>dry/live 模式下，因需先分析所有交易对 dataframe，再处理下单，可能有延迟。建议减少交易对数量，并用高主频 CPU。</p></div></aside><h5 id="id-k" class="relative group"><span class="heading-text">为什么看不到&quot;实时&quot;K线数据？</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-k" title="Link to this Section" aria-label="Link to this Section">¶</a></h5><p>Freqtrade 不会在 dataframe 中存储未完成/未收盘的K线。</p><p>用未完成数据做决策叫&quot;重绘&quot;，有些平台允许，但 Freqtrade 不支持。只有完整K线数据可用。</p><h4 id="id-6" class="relative group"><span class="heading-text">自定义指标</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-6" title="Link to this Section" aria-label="Link to this Section">¶</a></h4><p>入场和出场信号需要用到指标。你可以在策略文件的 <code>populate_indicators()</code> 方法中添加更多指标。</p><p>只应添加在 <code>populate_entry_trend()</code>、<code>populate_exit_trend()</code> 或用于生成其他指标的指标，否则会影响性能。</p><p>务必返回 dataframe，且不要删除/修改 “open”, “high”, “low”, “close”, “volume” 这几列，否则会导致异常。</p><p>示例：</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">def populate_indicators(self, dataframe: DataFrame, metadata: dict) -&gt; DataFrame:
    &quot;&quot;&quot;
    为给定 DataFrame 添加多种技术指标

    性能提示：为获得最佳性能，请只用你策略或超参优化用到的指标，否则会浪费内存和 CPU。
    :param dataframe: 交易所数据 DataFrame
    :param metadata: 额外信息，如当前交易对
    :return: 包含所有策略所需指标的 DataFrame
    &quot;&quot;&quot;
    dataframe[&#x27;sar&#x27;] = ta.SAR(dataframe)
    dataframe[&#x27;adx&#x27;] = ta.ADX(dataframe)
    stoch = ta.STOCHF(dataframe)
    dataframe[&#x27;fastd&#x27;] = stoch[&#x27;fastd&#x27;]
    dataframe[&#x27;fastk&#x27;] = stoch[&#x27;fastk&#x27;]
    dataframe[&#x27;bb_lower&#x27;] = ta.BBANDS(dataframe, nbdevup=2, nbdevdn=2)[&#x27;lowerband&#x27;]
    dataframe[&#x27;sma&#x27;] = ta.SMA(dataframe, timeperiod=40)
    dataframe[&#x27;tema&#x27;] = ta.TEMA(dataframe, timeperiod=9)
    dataframe[&#x27;mfi&#x27;] = ta.MFI(dataframe)
    dataframe[&#x27;rsi&#x27;] = ta.RSI(dataframe)
    dataframe[&#x27;ema5&#x27;] = ta.EMA(dataframe, timeperiod=5)
    dataframe[&#x27;ema10&#x27;] = ta.EMA(dataframe, timeperiod=10)
    dataframe[&#x27;ema50&#x27;] = ta.EMA(dataframe, timeperiod=50)
    dataframe[&#x27;ema100&#x27;] = ta.EMA(dataframe, timeperiod=100)
    dataframe[&#x27;ao&#x27;] = awesome_oscillator(dataframe)
    macd = ta.MACD(dataframe)
    dataframe[&#x27;macd&#x27;] = macd[&#x27;macd&#x27;]
    dataframe[&#x27;macdsignal&#x27;] = macd[&#x27;macdsignal&#x27;]
    dataframe[&#x27;macdhist&#x27;] = macd[&#x27;macdhist&#x27;]
    hilbert = ta.HT_SINE(dataframe)
    dataframe[&#x27;htsine&#x27;] = hilbert[&#x27;sine&#x27;]
    dataframe[&#x27;htleadsine&#x27;] = hilbert[&#x27;leadsine&#x27;]
    dataframe[&#x27;plus_dm&#x27;] = ta.PLUS_DM(dataframe)
    dataframe[&#x27;plus_di&#x27;] = ta.PLUS_DI(dataframe)
    dataframe[&#x27;minus_dm&#x27;] = ta.MINUS_DM(dataframe)
    dataframe[&#x27;minus_di&#x27;] = ta.MINUS_DI(dataframe)

    # 记得始终返回 dataframe
    return dataframe</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><aside class="myst-admonition myst-admonition-warning my-5 shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-gray-50/10 dark:bg-stone-800 overflow-hidden myst-admonition-default rounded border-l-4 border-amber-600"><div class="myst-admonition-header m-0 font-medium py-1 flex min-w-0 text-lg text-amber-600 bg-amber-50 dark:bg-slate-900"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="myst-admonition-header-icon inline-block pl-2 mr-2 self-center flex-none text-amber-600"><path fill-rule="evenodd" d="M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z" clip-rule="evenodd"></path></svg><div class="myst-admonition-header-text text-neutral-900 dark:text-white grow self-center overflow-hidden break-words">想要更多指标示例？</div></div><div class="myst-admonition-body px-4 py-1"><p>请参考 <a href="https://github.com/freqtrade/freqtrade/blob/develop/freqtrade/templates/sample_strategy.py" class="italic" target="_blank" rel="noreferrer" data-state="closed">user<wbr/>_data<wbr/>/strategies<wbr/>/sample<wbr/>_strategy<wbr/>.py</a>，取消注释你需要的指标。</p></div></aside><h5 id="id-7" class="relative group"><span class="heading-text">指标库</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-7" title="Link to this Section" aria-label="Link to this Section">¶</a></h5><p>Freqtrade 默认安装了以下技术指标库：</p><ul><li><a target="_blank" rel="noreferrer" href="https://ta-lib.github.io/ta-lib-python/" class="">ta-lib</a></li><li><a target="_blank" rel="noreferrer" href="https://twopirllc.github.io/pandas-ta/" class="">pandas-ta</a></li><li><a target="_blank" rel="noreferrer" href="https://technical.freqtrade.io" class="">technical</a></li></ul><p>如有需要可安装其他技术指标库，或自行编写自定义指标。</p><h4 id="strategy-startup-period" class="relative group"><span class="heading-text">策略启动期</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#strategy-startup-period" title="Link to this Section" aria-label="Link to this Section">¶</a></h4><p>部分指标在启动初期因数据不足会出现 NaN 或计算不准确。Freqtrade 无法自动判断不稳定期长度，会直接用 dataframe 中的指标值。</p><p>为此，策略可设置 <code>startup_candle_count</code> 属性。</p><p>该值应设为策略中所有指标所需的最大历史K线数。若用到高阶时间周期 informative pair，<code>startup_candle_count</code> 也无需改变，只需用最大周期。</p><p>可用 <a class="" data-state="closed" href="/recursive-analysis">recursive-analysis</a> 检查合适的 <code>startup_candle_count</code>。当递归分析显示方差为 0% 时，说明历史数据已足够。</p><p>如本例策略用到 ema100，则应设为 400（<code>startup_candle_count = 400</code>），以保证 ema100 计算准确。</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">    dataframe[&#x27;ema100&#x27;] = ta.EMA(dataframe, timeperiod=100)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p>告知机器人所需历史长度后，回测和超参优化可从指定时间点开始。</p><aside class="myst-admonition myst-admonition-warning my-5 shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-gray-50/10 dark:bg-stone-800 overflow-hidden myst-admonition-default rounded border-l-4 border-amber-600"><div class="myst-admonition-header m-0 font-medium py-1 flex min-w-0 text-lg text-amber-600 bg-amber-50 dark:bg-slate-900"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="myst-admonition-header-icon inline-block pl-2 mr-2 self-center flex-none text-amber-600"><path fill-rule="evenodd" d="M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z" clip-rule="evenodd"></path></svg><div class="myst-admonition-header-text text-neutral-900 dark:text-white grow self-center overflow-hidden break-words">多次获取 OHLCV 的警告</div></div><div class="myst-admonition-body px-4 py-1"><p>若收到 <code>WARNING - Using 3 calls to get OHLCV...</code>，请考虑是否真的需要这么多历史数据。过多会导致多次网络请求，拖慢机器人刷新速度。</p><p>最多允许 5 次请求，避免过载。</p></div></aside><aside class="myst-admonition myst-admonition-warning my-5 shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-gray-50/10 dark:bg-stone-800 overflow-hidden myst-admonition-default rounded border-l-4 border-amber-600"><div class="myst-admonition-header m-0 font-medium py-1 flex min-w-0 text-lg text-amber-600 bg-amber-50 dark:bg-slate-900"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="myst-admonition-header-icon inline-block pl-2 mr-2 self-center flex-none text-amber-600"><path fill-rule="evenodd" d="M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z" clip-rule="evenodd"></path></svg><div class="myst-admonition-header-text text-neutral-900 dark:text-white grow self-center overflow-hidden break-words">Warning</div></div><div class="myst-admonition-body px-4 py-1"><p><code>startup_candle_count</code> 应小于 <code>ohlcv_candle_limit * 5</code>（大多数交易所为 500 * 5），Dry-Run/Live 模式下只会有这么多K线。</p></div></aside><h5 id="id-8" class="relative group"><span class="heading-text">示例</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-8" title="Link to this Section" aria-label="Link to this Section">¶</a></h5><p>假设用 EMA100 策略回测 2019 年 1 月的 5m K 线：</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-bash" style="white-space:pre">freqtrade backtesting --timerange 20190101-20190201 --timeframe 5m</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p>若 <code>startup_candle_count</code> 设为 400，回测会自动加载 400 根K线的历史数据，即从 <code>20190101 - (400 * 5m)</code>，约等于 2018-12-30 11:40:00。</p><p>若有该数据，指标会用扩展时间段计算，启动期（到 2019-01-01 00:00:00）会被剔除。</p><aside class="myst-admonition myst-admonition-warning my-5 shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-gray-50/10 dark:bg-stone-800 overflow-hidden myst-admonition-default rounded border-l-4 border-amber-600"><div class="myst-admonition-header m-0 font-medium py-1 flex min-w-0 text-lg text-amber-600 bg-amber-50 dark:bg-slate-900"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="myst-admonition-header-icon inline-block pl-2 mr-2 self-center flex-none text-amber-600"><path fill-rule="evenodd" d="M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z" clip-rule="evenodd"></path></svg><div class="myst-admonition-header-text text-neutral-900 dark:text-white grow self-center overflow-hidden break-words">启动期数据不可用</div></div><div class="myst-admonition-body px-4 py-1"><p>若历史数据不足，回测会自动调整起始时间。例如本例会从 2019-01-02 09:20:00 开始。</p></div></aside><h4 id="id-9" class="relative group"><span class="heading-text">入场信号规则</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-9" title="Link to this Section" aria-label="Link to this Section">¶</a></h4><p>编辑策略文件中的 <code>populate_entry_trend()</code> 方法，更新入场逻辑。</p><p>务必返回 dataframe，且不要删除/修改 “open”, “high”, “low”, “close”, “volume” 这几列，否则会导致异常。</p><p>该方法还需定义新列 <code>enter_long</code>（做空为 <code>enter_short</code>），入场时为 1，无操作为 0。即使只做空也必须设置 <code>enter_long</code>。</p><p>可用 <code>enter_tag</code> 列为信号命名，便于后续调试和分析。</p><p>示例（来自 sample_strategy.py）：</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">def populate_entry_trend(self, dataframe: DataFrame, metadata: dict) -&gt; DataFrame:
    &quot;&quot;&quot;
    基于技术指标，为给定 dataframe 生成买入信号
    :param dataframe: 已填充指标的 DataFrame
    :param metadata: 额外信息，如当前交易对
    :return: 包含买入信号的 DataFrame
    &quot;&quot;&quot;
    dataframe.loc[
        (
            (qtpylib.crossed_above(dataframe[&#x27;rsi&#x27;], 30)) &amp;  # RSI 上穿 30
            (dataframe[&#x27;tema&#x27;] &lt;= dataframe[&#x27;bb_middleband&#x27;]) &amp;  # 条件
            (dataframe[&#x27;tema&#x27;] &gt; dataframe[&#x27;tema&#x27;].shift(1)) &amp;  # 条件
            (dataframe[&#x27;volume&#x27;] &gt; 0)  # 确保有成交量
        ),
        [&#x27;enter_long&#x27;, &#x27;enter_tag&#x27;]] = (1, &#x27;rsi_cross&#x27;)

    return dataframe</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><aside class="myst-admonition myst-admonition-warning my-5 shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-gray-50/10 dark:bg-stone-800 overflow-hidden myst-admonition-default rounded border-l-4 border-amber-600"><div class="myst-admonition-header m-0 font-medium py-1 flex min-w-0 text-lg text-amber-600 bg-amber-50 dark:bg-slate-900"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="myst-admonition-header-icon inline-block pl-2 mr-2 self-center flex-none text-amber-600"><path fill-rule="evenodd" d="M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z" clip-rule="evenodd"></path></svg><div class="myst-admonition-header-text text-neutral-900 dark:text-white grow self-center overflow-hidden break-words">做空信号</div></div><div class="myst-admonition-body px-4 py-1"><p>做空可通过设置 <code>enter_short</code>（对应多头的 <code>enter_long</code>）实现。
<code>enter_tag</code> 列用法相同。
做空需交易所和市场支持！如需做空，务必设置 <a target="_blank" rel="noreferrer" href="#can-short" class=""><code>can_short</code></a> 为 True。</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># 支持多空
can_short = True

def populate_entry_trend(self, dataframe: DataFrame, metadata: dict) -&gt; DataFrame:
    dataframe.loc[
        (
            (qtpylib.crossed_above(dataframe[&#x27;rsi&#x27;], 30)) &amp;
            (dataframe[&#x27;tema&#x27;] &lt;= dataframe[&#x27;bb_middleband&#x27;]) &amp;
            (dataframe[&#x27;tema&#x27;] &gt; dataframe[&#x27;tema&#x27;].shift(1)) &amp;
            (dataframe[&#x27;volume&#x27;] &gt; 0)
        ),
        [&#x27;enter_long&#x27;, &#x27;enter_tag&#x27;]] = (1, &#x27;rsi_cross&#x27;)

    dataframe.loc[
        (
            (qtpylib.crossed_below(dataframe[&#x27;rsi&#x27;], 70)) &amp;
            (dataframe[&#x27;tema&#x27;] &gt; dataframe[&#x27;bb_middleband&#x27;]) &amp;
            (dataframe[&#x27;tema&#x27;] &lt; dataframe[&#x27;tema&#x27;].shift(1)) &amp;
            (dataframe[&#x27;volume&#x27;] &gt; 0)
        ),
        [&#x27;enter_short&#x27;, &#x27;enter_tag&#x27;]] = (1, &#x27;rsi_cross&#x27;)

    return dataframe</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div></div></aside><aside class="myst-admonition myst-admonition-tip my-5 shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-gray-50/10 dark:bg-stone-800 overflow-hidden myst-admonition-default rounded border-l-4 border-green-600"><div class="myst-admonition-header m-0 font-medium py-1 flex min-w-0 text-lg text-green-600 bg-green-50 dark:bg-slate-900"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="myst-admonition-header-icon inline-block pl-2 mr-2 self-center flex-none text-green-600"><path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"></path></svg><div class="myst-admonition-header-text text-neutral-900 dark:text-white grow self-center overflow-hidden break-words">Tip</div></div><div class="myst-admonition-body px-4 py-1"><p>买入需要有卖方，因此需 <code>dataframe[&#x27;volume&#x27;] &gt; 0</code>，避免在无成交量时买入/卖出。</p></div></aside><h4 id="id-10" class="relative group"><span class="heading-text">出场信号规则</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-10" title="Link to this Section" aria-label="Link to this Section">¶</a></h4><p>编辑策略文件中的 <code>populate_exit_trend()</code> 方法，更新出场逻辑。</p><p>可通过在配置或策略中设置 <code>use_exit_signal</code> 为 false 禁用出场信号。</p><p><code>use_exit_signal</code> 不影响<span data-state="closed"><a href="#colliding-signals" class="hover-link">信号冲突规则</a></span>，后者仍然生效，可能阻止入场。</p><p>务必返回 dataframe，且不要删除/修改 “open”, “high”, “low”, “close”, “volume” 这几列，否则会导致异常。</p><p>该方法还需定义新列 <code>exit_long</code>（做空为 <code>exit_short</code>），出场时为 1，无操作为 0。</p><p>可用 <code>exit_tag</code> 列为信号命名，便于后续调试和分析。</p><p>示例（来自 sample_strategy.py）：</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">def populate_exit_trend(self, dataframe: DataFrame, metadata: dict) -&gt; DataFrame:
    &quot;&quot;&quot;
    基于技术指标，为给定 dataframe 生成卖出信号
    :param dataframe: 已填充指标的 DataFrame
    :param metadata: 额外信息，如当前交易对
    :return: 包含卖出信号的 DataFrame
    &quot;&quot;&quot;
    dataframe.loc[
        (
            (qtpylib.crossed_above(dataframe[&#x27;rsi&#x27;], 70)) &amp;  # RSI 上穿 70
            (dataframe[&#x27;tema&#x27;] &gt; dataframe[&#x27;bb_middleband&#x27;]) &amp;  # 条件
            (dataframe[&#x27;tema&#x27;] &lt; dataframe[&#x27;tema&#x27;].shift(1)) &amp;  # 条件
            (dataframe[&#x27;volume&#x27;] &gt; 0)  # 确保有成交量
        ),
        [&#x27;exit_long&#x27;, &#x27;exit_tag&#x27;]] = (1, &#x27;rsi_too_high&#x27;)
    return dataframe</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><aside class="myst-admonition myst-admonition-warning my-5 shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-gray-50/10 dark:bg-stone-800 overflow-hidden myst-admonition-default rounded border-l-4 border-amber-600"><div class="myst-admonition-header m-0 font-medium py-1 flex min-w-0 text-lg text-amber-600 bg-amber-50 dark:bg-slate-900"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="myst-admonition-header-icon inline-block pl-2 mr-2 self-center flex-none text-amber-600"><path fill-rule="evenodd" d="M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z" clip-rule="evenodd"></path></svg><div class="myst-admonition-header-text text-neutral-900 dark:text-white grow self-center overflow-hidden break-words">做空平仓</div></div><div class="myst-admonition-body px-4 py-1"><p>做空平仓可通过设置 <code>exit_short</code>（对应多头的 <code>exit_long</code>）实现。</p><p><code>exit_tag</code> 列用法相同。</p><p>做空需交易所和市场支持！如需做空，务必设置 <a target="_blank" rel="noreferrer" href="#can-short" class=""><code>can_short</code></a> 为 True。</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">    # 支持多空
    can_short = True

    def populate_exit_trend(self, dataframe: DataFrame, metadata: dict) -&gt; DataFrame:
        dataframe.loc[
            (
                (qtpylib.crossed_above(dataframe[&#x27;rsi&#x27;], 70)) &amp;
                (dataframe[&#x27;tema&#x27;] &gt; dataframe[&#x27;bb_middleband&#x27;]) &amp;
                (dataframe[&#x27;tema&#x27;] &lt; dataframe[&#x27;tema&#x27;].shift(1)) &amp;
                (dataframe[&#x27;volume&#x27;] &gt; 0)
            ),
            [&#x27;exit_long&#x27;, &#x27;exit_tag&#x27;]] = (1, &#x27;rsi_too_high&#x27;)
        dataframe.loc[
            (
                (qtpylib.crossed_below(dataframe[&#x27;rsi&#x27;], 30)) &amp;
                (dataframe[&#x27;tema&#x27;] &lt; dataframe[&#x27;bb_middleband&#x27;]) &amp;
                (dataframe[&#x27;tema&#x27;] &gt; dataframe[&#x27;tema&#x27;].shift(1)) &amp;
                (dataframe[&#x27;volume&#x27;] &gt; 0)
            ),
            [&#x27;exit_short&#x27;, &#x27;exit_tag&#x27;]] = (1, &#x27;rsi_too_low&#x27;)
        return dataframe</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div></div></aside><h4 id="id-roi" class="relative group"><span class="heading-text">最小收益率（ROI）</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-roi" title="Link to this Section" aria-label="Link to this Section">¶</a></h4><p><code>minimal_roi</code> 策略变量定义了交易在退出前应达到的最小收益率，与出场信号无关。</p><p>格式如下，是一个 python 字典，键为开仓后经过的分钟数，值为百分比：</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">minimal_roi = {
    &quot;40&quot;: 0.0,
    &quot;30&quot;: 0.01,
    &quot;20&quot;: 0.02,
    &quot;0&quot;: 0.04
}</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p>上述配置含义：</p><ul><li>达到 4% 盈利时退出</li><li>20 分钟后达到 2% 盈利时退出</li><li>30 分钟后达到 1% 盈利时退出</li><li>40 分钟后只要不亏损就退出</li></ul><p>计算时包含手续费。</p><h5 id="id-roi-1" class="relative group"><span class="heading-text">禁用最小 ROI</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-roi-1" title="Link to this Section" aria-label="Link to this Section">¶</a></h5><p>如需完全禁用 ROI，将其设为空字典：</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">minimal_roi = {}</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><h5 id="roi" class="relative group"><span class="heading-text">ROI 中用计算表达式</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#roi" title="Link to this Section" aria-label="Link to this Section">¶</a></h5><p>如需按K线周期（timeframe）设置时间，可用如下写法：</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from freqtrade.exchange import timeframe_to_minutes

class AwesomeStrategy(IStrategy):

    timeframe = &quot;1d&quot;
    timeframe_mins = timeframe_to_minutes(timeframe)
    minimal_roi = {
        &quot;0&quot;: 0.05,                      # 前 3 根 K 线 5%
        str(timeframe_mins * 3): 0.02,  # 3 根 K 线后 2%
        str(timeframe_mins * 6): 0.01,  # 6 根 K 线后 1%
    }</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><aside class="myst-admonition myst-admonition-note my-5 shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-gray-50/10 dark:bg-stone-800 overflow-hidden myst-admonition-default rounded border-l-4 border-blue-500"><div class="myst-admonition-header m-0 font-medium py-1 flex min-w-0 text-lg text-blue-600 bg-blue-50 dark:bg-slate-900"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="myst-admonition-header-icon inline-block pl-2 mr-2 self-center flex-none text-blue-600"><path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"></path></svg><div class="myst-admonition-header-text text-neutral-900 dark:text-white grow self-center overflow-hidden break-words">未立即成交的订单</div></div><div class="myst-admonition-body px-4 py-1"><p><code>minimal_roi</code> 以 <code>trade.open_date</code> 为基准，即首次下单时间。</p><p>对于未立即成交的限价单（如用 <code>custom_entry_price()</code>），或用 <code>adjust_entry_price()</code> 调整价格的情况，时间仍以首次下单为准。</p></div></aside><h4 id="id-11" class="relative group"><span class="heading-text">止损</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-11" title="Link to this Section" aria-label="Link to this Section">¶</a></h4><p>强烈建议设置止损，以保护资金免受极端行情影响。</p><p>如设置 10% 止损：</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">stoploss = -0.10</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p>更多止损功能详见<a class="" data-state="closed" href="/stoploss">止损专页</a>。</p><h4 id="id-timeframe" class="relative group"><span class="heading-text">时间周期（Timeframe）</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-timeframe" title="Link to this Section" aria-label="Link to this Section">¶</a></h4><p>即策略用的K线周期。</p><p>常见值有 “1m”、“5m”、“15m”、“1h”，也可用交易所支持的其他周期。</p><p>同一入场/出场信号在不同周期下效果可能完全不同。</p><p>在策略方法中可通过 <code>self.timeframe</code> 访问。</p><h4 id="id-12" class="relative group"><span class="heading-text">是否支持做空</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-12" title="Link to this Section" aria-label="Link to this Section">¶</a></h4><p>如需在合约市场做空，需设置 <code>can_short = True</code>。</p><p>启用后，策略在现货市场会加载失败。</p><p>如 <code>enter_short</code> 列有 1，但 <code>can_short = False</code>（默认），则即使配置了合约市场也不会做空。</p><h4 id="metadata" class="relative group"><span class="heading-text">Metadata 字典</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#metadata" title="Link to this Section" aria-label="Link to this Section">¶</a></h4><p><code>metadata</code> 字典（<code>populate_entry_trend</code>、<code>populate_exit_trend</code>、<code>populate_indicators</code> 可用）包含额外信息。
目前有 <code>pair</code>，可通过 <code>metadata[&#x27;pair&#x27;]</code> 获取，如 <code>XRP/BTC</code>（合约市场为 <code>XRP/BTC:BTC</code>）。</p><p>metadata 不应被修改，也不会在策略函数间持久化。</p><p>如需持久化信息，请查阅<span data-state="closed"><a class="hover-link" href="/strategy-advanced">信息存储</a></span>。</p><h3 id="id-13" class="relative group"><span class="heading-text">策略所需的导入</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-13" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>在创建策略时，你需要导入必要的模块和类。以下是一个策略所需的导入：</p><p>默认情况下，我们建议使用以下导入作为策略的基础：
这将涵盖 freqtrade 功能所需的所有导入。
当然，你可以根据需要添加更多导入。</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># flake8: noqa: F401
# isort: skip_file
# --- Do not remove these imports ---
import numpy as np
import pandas as pd
from datetime import datetime, timedelta, timezone
from pandas import DataFrame
from typing import Dict, Optional, Union, Tuple

from freqtrade.strategy import (
    IStrategy,
    Trade, 
    Order,
    PairLocks,
    informative,  # @informative decorator
    # Hyperopt Parameters
    BooleanParameter,
    CategoricalParameter,
    DecimalParameter,
    IntParameter,
    RealParameter,
    # timeframe helpers
    timeframe_to_minutes,
    timeframe_to_next_date,
    timeframe_to_prev_date,
    # Strategy helper functions
    merge_informative_pair,
    stoploss_from_absolute,
    stoploss_from_open,
)

# --------------------------------
# Add your lib to import here
import talib.abstract as ta
from technical import qtpylib</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><h3 id="id-14" class="relative group"><span class="heading-text">策略文件加载</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-14" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>默认情况下，freqtrade 会尝试从 <code>userdir</code>（默认 <code>user_data/strategies</code>）下所有 <code>.py</code> 文件加载策略。</p><p>假设你的策略叫 <code>AwesomeStrategy</code>，文件为 <code>user_data/strategies/AwesomeStrategy.py</code>，可用如下命令 dry（或 live，视配置而定）运行：</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-bash" style="white-space:pre">freqtrade trade --strategy AwesomeStrategy</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p>注意这里用的是类名，不是文件名。</p><p>用 <code>freqtrade list-strategies</code> 可查看所有可加载的策略（正确目录下的所有策略）。会有&quot;状态&quot;字段，提示潜在问题。</p><aside class="myst-admonition myst-admonition-tip my-5 shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-gray-50/10 dark:bg-stone-800 overflow-hidden myst-admonition-default rounded border-l-4 border-green-600"><div class="myst-admonition-header m-0 font-medium py-1 flex min-w-0 text-lg text-green-600 bg-green-50 dark:bg-slate-900"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="myst-admonition-header-icon inline-block pl-2 mr-2 self-center flex-none text-green-600"><path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"></path></svg><div class="myst-admonition-header-text text-neutral-900 dark:text-white grow self-center overflow-hidden break-words">自定义策略目录</div></div><div class="myst-admonition-body px-4 py-1"><p>可用 <code>--strategy-path user_data/otherPath</code> 指定其他目录。所有需用策略的命令均支持此参数。</p></div></aside><h3 id="informative-pairs" class="relative group"><span class="heading-text">辅助交易对（Informative Pairs）</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#informative-pairs" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><h4 id="get-data-for-non-tradeable-pairs" class="relative group"><span class="heading-text">获取非交易对的数据</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#get-data-for-non-tradeable-pairs" title="Link to this Section" aria-label="Link to this Section">¶</a></h4><p>有些策略需要参考更大周期的其他交易对数据。</p><p>这些辅助对的 OHLCV 数据会在常规白名单刷新时一并下载，可通过 <code>DataProvider</code> 获取。</p><p>这些对<strong>不会</strong>被交易，除非也在白名单或被动态白名单（如 <code>VolumePairlist</code>）选中。</p><p>需用元组指定，格式为 <code>(&quot;pair&quot;, &quot;timeframe&quot;)</code>，第一个为交易对，第二个为周期。</p><p>示例：</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">def informative_pairs(self):
    return [(&quot;ETH/USDT&quot;, &quot;5m&quot;),
            (&quot;BTC/TUSD&quot;, &quot;15m&quot;),
            ]</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p>完整示例见<span data-state="closed"><a href="#complete-dataprovider-sample" class="hover-link">DataProvider 部分</a></span>。</p><aside class="myst-admonition myst-admonition-warning my-5 shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-gray-50/10 dark:bg-stone-800 overflow-hidden myst-admonition-default rounded border-l-4 border-amber-600"><div class="myst-admonition-header m-0 font-medium py-1 flex min-w-0 text-lg text-amber-600 bg-amber-50 dark:bg-slate-900"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="myst-admonition-header-icon inline-block pl-2 mr-2 self-center flex-none text-amber-600"><path fill-rule="evenodd" d="M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z" clip-rule="evenodd"></path></svg><div class="myst-admonition-header-text text-neutral-900 dark:text-white grow self-center overflow-hidden break-words">Warning</div></div><div class="myst-admonition-body px-4 py-1"><p>这些对会随白名单刷新，建议列表不要太长。</p><p>只要交易所支持，所有周期和对都可用。</p><p>但建议尽量用重采样方式获取大周期，避免请求过多被封。</p></div></aside><aside class="myst-admonition myst-admonition-attention my-5 shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-gray-50/10 dark:bg-stone-800 overflow-hidden myst-admonition-default rounded border-l-4 border-amber-600"><div class="myst-admonition-header m-0 font-medium py-1 flex min-w-0 text-lg text-amber-600 bg-amber-50 dark:bg-slate-900"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="myst-admonition-header-icon inline-block pl-2 mr-2 self-center flex-none text-amber-600"><path stroke-linecap="round" stroke-linejoin="round" d="M10.34 15.84c-.688-.06-1.386-.09-2.09-.09H7.5a4.5 4.5 0 1 1 0-9h.75c.704 0 1.402-.03 2.09-.09m0 9.18c.253.962.584 1.892.985 2.783.247.55.06 1.21-.463 1.511l-.657.38c-.551.318-1.26.117-1.527-.461a20.845 20.845 0 0 1-1.44-4.282m3.102.069a18.03 18.03 0 0 1-.59-4.59c0-1.586.205-3.124.59-4.59m0 9.18a23.848 23.848 0 0 1 8.835 2.535M10.34 6.66a23.847 23.847 0 0 0 8.835-2.535m0 0A23.74 23.74 0 0 0 18.795 3m.38 1.125a23.91 23.91 0 0 1 1.014 5.395m-1.014 8.855c-.118.38-.245.754-.38 1.125m.38-1.125a23.91 23.91 0 0 0 1.014-5.395m0-3.46c.495.413.811 1.035.811 1.73 0 .695-.316 1.317-.811 1.73m0-3.46a24.347 24.347 0 0 1 0 3.46"></path></svg><div class="myst-admonition-header-text text-neutral-900 dark:text-white grow self-center overflow-hidden break-words">其他K线类型</div></div><div class="myst-admonition-body px-4 py-1"><p>informative_pairs 还可加第三个元素，显式指定K线类型。</p><p>可用性取决于交易模式和交易所。一般现货对不能用于合约市场，反之亦然。</p><p>详情见交易所文档。</p></div></aside><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">    def informative_pairs(self):
        return [
            (&quot;ETH/USDT&quot;, &quot;5m&quot;, &quot;&quot;),   # 默认 K 线类型，随 trading_mode 变化（推荐）
            (&quot;ETH/USDT&quot;, &quot;5m&quot;, &quot;spot&quot;),   # 强制用现货 K 线（仅现货机器人）
            (&quot;BTC/TUSD&quot;, &quot;15m&quot;, &quot;futures&quot;),  # 用合约 K 线（仅合约机器人）
            (&quot;BTC/TUSD&quot;, &quot;15m&quot;, &quot;mark&quot;),  # 用标记 K 线（仅合约机器人）
        ]</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><h4 id="informative-pairs-informative" class="relative group"><span class="heading-text">Informative pairs 装饰器（<code>@informative()</code>）</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#informative-pairs-informative" title="Link to this Section" aria-label="Link to this Section">¶</a></h4><p>可用 <code>@informative</code> 装饰器快速定义 informative pair。所有被装饰的 <code>populate_indicators_*</code> 方法独立运行，不能访问其他 informative pair 的数据。但所有 informative dataframe 会合并传递给主 <code>populate_indicators()</code>。</p><aside class="myst-admonition myst-admonition-caution my-5 shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-gray-50/10 dark:bg-stone-800 overflow-hidden myst-admonition-default rounded border-l-4 border-amber-600"><div class="myst-admonition-header m-0 font-medium py-1 flex min-w-0 text-lg text-amber-600 bg-amber-50 dark:bg-slate-900"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="myst-admonition-header-icon inline-block pl-2 mr-2 self-center flex-none text-amber-600"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"></path></svg><div class="myst-admonition-header-text text-neutral-900 dark:text-white grow self-center overflow-hidden break-words">Caution</div></div><div class="myst-admonition-body px-4 py-1"><p>若需用一个 informative pair 的数据生成另一个 informative pair，请勿用 <code>@informative</code> 装饰器，而应手动定义 informative pair，见<span data-state="closed"><a href="#complete-dataprovider-sample" class="hover-link">DataProvider 部分</a></span>。</p></div></aside><p>超参优化时，hyperoptable 参数不支持 <code>.value</code>，请用 <code>.range</code>。见<span data-state="closed"><a class="hover-link" href="/hyperopt">优化指标参数</a></span>。</p><aside class="myst-admonition myst-admonition-note my-5 shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-gray-50/10 dark:bg-stone-800 overflow-hidden myst-admonition-default rounded border-l-4 border-blue-500"><div class="myst-admonition-header m-0 font-medium py-1 flex min-w-0 text-lg text-blue-600 bg-blue-50 dark:bg-slate-900"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="myst-admonition-header-icon inline-block pl-2 mr-2 self-center flex-none text-blue-600"><path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"></path></svg><div class="myst-admonition-header-text text-neutral-900 dark:text-white grow self-center overflow-hidden break-words">完整文档</div></div><div class="myst-admonition-body px-4 py-1"><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">    def informative(
        timeframe: str,
        asset: str = &quot;&quot;,
        fmt: str | Callable[[Any], str] | None = None,
        *,
        candle_type: CandleType | str | None = None,
        ffill: bool = True,
    ) -&gt; Callable[[PopulateIndicators], PopulateIndicators]:
        &quot;&quot;&quot;
        用于 populate_indicators_Nn(self, dataframe, metadata) 的装饰器，定义 informative 指标。
        
        用法示例：

            @informative(&#x27;1h&#x27;)
            def populate_indicators_1h(self, dataframe: DataFrame, metadata: dict) -&gt; DataFrame:
                dataframe[&#x27;rsi&#x27;] = ta.RSI(dataframe, timeperiod=14)
                return dataframe

        :param timeframe: 辅助K线周期，必须大于等于主策略周期。
        :param asset: 辅助资产，如 BTC、BTC/USDT、ETH/BTC。不指定则用当前对。支持格式化字符串。
        :param fmt: 列名格式（str）或格式化函数。默认：
        * {base}_{quote}_{column}_{timeframe}（指定 asset 时）
        * {column}_{timeframe}（未指定 asset 时）
        支持变量：{base}、{BASE}、{quote}、{QUOTE}、{asset}、{column}、{timeframe}
        :param ffill: informative pair 合并后是否前向填充。
        :param candle_type: &#x27;&#x27;, mark, index, premiumIndex, funding_rate
        &quot;&quot;&quot;</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div></div></aside><aside class="myst-admonition myst-admonition-hint my-5 shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-gray-50/10 dark:bg-stone-800 overflow-hidden myst-admonition-default rounded border-l-4 border-green-600"><div class="myst-admonition-header m-0 font-medium py-1 flex min-w-0 text-lg text-green-600 bg-green-50 dark:bg-slate-900"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="myst-admonition-header-icon inline-block pl-2 mr-2 self-center flex-none text-green-600"><path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"></path></svg><div class="myst-admonition-header-text text-neutral-900 dark:text-white grow self-center overflow-hidden break-words">快速定义 informative pair</div></div><div class="myst-admonition-body px-4 py-1"><p>大多数情况下无需用 <code>merge_informative_pair()</code>，可直接用装饰器：</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">
    from datetime import datetime
    from freqtrade.persistence import Trade
    from freqtrade.strategy import IStrategy, informative

    class AwesomeStrategy(IStrategy):
        
        # 可省略 informative_pairs 方法

        # 为每个对定义高阶周期 informative pair。可叠加装饰器。
        @informative(&#x27;30m&#x27;)
        @informative(&#x27;1h&#x27;)
        def populate_indicators_1h(self, dataframe: DataFrame, metadata: dict) -&gt; DataFrame:
            dataframe[&#x27;rsi&#x27;] = ta.RSI(dataframe, timeperiod=14)
            return dataframe

        # 定义 BTC/STAKE informative pair。可用 {stake} 占位符。最终列名如 &#x27;btc_usdt_rsi_1h&#x27;。
        @informative(&#x27;1h&#x27;, &#x27;BTC/{stake}&#x27;)
        def populate_indicators_btc_1h(self, dataframe: DataFrame, metadata: dict) -&gt; DataFrame:
            dataframe[&#x27;rsi&#x27;] = ta.RSI(dataframe, timeperiod=14)
            return dataframe

        # 定义 BTC/ETH informative pair。需指定 quote。最终列名如 &#x27;eth_btc_rsi_1h&#x27;。
        @informative(&#x27;1h&#x27;, &#x27;ETH/BTC&#x27;)
        def populate_indicators_eth_btc_1h(self, dataframe: DataFrame, metadata: dict) -&gt; DataFrame:
            dataframe[&#x27;rsi&#x27;] = ta.RSI(dataframe, timeperiod=14)
            return dataframe
    
        # 可自定义列名格式
        @informative(&#x27;1h&#x27;, &#x27;BTC/{stake}&#x27;, &#x27;{column}_{timeframe}&#x27;)
        def populate_indicators_btc_1h_2(self, dataframe: DataFrame, metadata: dict) -&gt; DataFrame:
            dataframe[&#x27;rsi_upper&#x27;] = ta.RSI(dataframe, timeperiod=14)
            return dataframe
    
        def populate_indicators(self, dataframe: DataFrame, metadata: dict) -&gt; DataFrame:
            dataframe[&#x27;rsi&#x27;] = ta.RSI(dataframe, timeperiod=14)
            dataframe[&#x27;rsi_less&#x27;] = dataframe[&#x27;rsi&#x27;] &lt; dataframe[&#x27;rsi_1h&#x27;]
            return dataframe</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div></div></aside><aside class="myst-admonition myst-admonition-attention my-5 shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-gray-50/10 dark:bg-stone-800 overflow-hidden myst-admonition-default rounded border-l-4 border-amber-600"><div class="myst-admonition-header m-0 font-medium py-1 flex min-w-0 text-lg text-amber-600 bg-amber-50 dark:bg-slate-900"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="myst-admonition-header-icon inline-block pl-2 mr-2 self-center flex-none text-amber-600"><path stroke-linecap="round" stroke-linejoin="round" d="M10.34 15.84c-.688-.06-1.386-.09-2.09-.09H7.5a4.5 4.5 0 1 1 0-9h.75c.704 0 1.402-.03 2.09-.09m0 9.18c.253.962.584 1.892.985 2.783.247.55.06 1.21-.463 1.511l-.657.38c-.551.318-1.26.117-1.527-.461a20.845 20.845 0 0 1-1.44-4.282m3.102.069a18.03 18.03 0 0 1-.59-4.59c0-1.586.205-3.124.59-4.59m0 9.18a23.848 23.848 0 0 1 8.835 2.535M10.34 6.66a23.847 23.847 0 0 0 8.835-2.535m0 0A23.74 23.74 0 0 0 18.795 3m.38 1.125a23.91 23.91 0 0 1 1.014 5.395m-1.014 8.855c-.118.38-.245.754-.38 1.125m.38-1.125a23.91 23.91 0 0 0 1.014-5.395m0-3.46c.495.413.811 1.035.811 1.73 0 .695-.316 1.317-.811 1.73m0-3.46a24.347 24.347 0 0 1 0 3.46"></path></svg><div class="myst-admonition-header-text text-neutral-900 dark:text-white grow self-center overflow-hidden break-words">Attention</div></div><div class="myst-admonition-body px-4 py-1"><p>访问其他对的 informative dataframe 时建议用字符串格式化，便于后续更换 stake 货币。</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">    def populate_entry_trend(self, dataframe: DataFrame, metadata: dict) -&gt; DataFrame:
        stake = self.config[&#x27;stake_currency&#x27;]
        dataframe.loc[
            (
                (dataframe[f&#x27;btc_{stake}_rsi_1h&#x27;] &lt; 35)
                &amp;
                (dataframe[&#x27;volume&#x27;] &gt; 0)
            ),
            [&#x27;enter_long&#x27;, &#x27;enter_tag&#x27;]] = (1, &#x27;buy_signal_rsi&#x27;)
    
        return dataframe</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p>或用列重命名去除 stake 货币：<code>@informative(&#x27;1h&#x27;, &#x27;BTC/{stake}&#x27;, fmt=&#x27;{base}_{column}_{timeframe}&#x27;)</code>。</p></div></aside><aside class="myst-admonition myst-admonition-warning my-5 shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-gray-50/10 dark:bg-stone-800 overflow-hidden myst-admonition-default rounded border-l-4 border-amber-600"><div class="myst-admonition-header m-0 font-medium py-1 flex min-w-0 text-lg text-amber-600 bg-amber-50 dark:bg-slate-900"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="myst-admonition-header-icon inline-block pl-2 mr-2 self-center flex-none text-amber-600"><path fill-rule="evenodd" d="M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z" clip-rule="evenodd"></path></svg><div class="myst-admonition-header-text text-neutral-900 dark:text-white grow self-center overflow-hidden break-words">方法名重复</div></div><div class="myst-admonition-body px-4 py-1"><p>被 <code>@informative()</code> 装饰的方法名必须唯一！重复会覆盖前面的定义且无报错，导致部分指标不可用。请仔细检查方法名。</p></div></aside><h4 id="merge-informative-pair" class="relative group"><span class="heading-text"><em>merge_informative_pair()</em></span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#merge-informative-pair" title="Link to this Section" aria-label="Link to this Section">¶</a></h4><p>该方法可安全、无前视偏差地将 informative pair 合并到主 dataframe。</p><p>功能：</p><ul><li>列重命名，避免冲突</li><li>无前视偏差合并</li><li>可选前向填充</li></ul><p>完整示例见<span data-state="closed"><a href="#complete-dataprovider-sample" class="hover-link">完整数据提供者示例</a></span>。</p><p>所有 informative dataframe 列会以新名字出现在主 dataframe：</p><aside class="myst-admonition myst-admonition-important my-5 shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-gray-50/10 dark:bg-stone-800 overflow-hidden myst-admonition-default rounded border-l-4 border-blue-500"><div class="myst-admonition-header m-0 font-medium py-1 flex min-w-0 text-lg text-blue-600 bg-blue-50 dark:bg-slate-900"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="myst-admonition-header-icon inline-block pl-2 mr-2 self-center flex-none text-blue-600"><path fill-rule="evenodd" d="M14.615 1.595a.75.75 0 0 1 .359.852L12.982 9.75h7.268a.75.75 0 0 1 .548 1.262l-10.5 11.25a.75.75 0 0 1-1.272-.71l1.992-7.302H3.75a.75.75 0 0 1-.548-1.262l10.5-11.25a.75.75 0 0 1 .913-.143Z" clip-rule="evenodd"></path></svg><div class="myst-admonition-header-text text-neutral-900 dark:text-white grow self-center overflow-hidden break-words">列重命名</div></div><div class="myst-admonition-body px-4 py-1"><p>假设 <code>inf_tf = &#x27;1d&#x27;</code>，合并后列名如下：</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">    &#x27;date&#x27;, &#x27;open&#x27;, &#x27;high&#x27;, &#x27;low&#x27;, &#x27;close&#x27;, &#x27;rsi&#x27;                     # 原 dataframe
    &#x27;date_1d&#x27;, &#x27;open_1d&#x27;, &#x27;high_1d&#x27;, &#x27;low_1d&#x27;, &#x27;close_1d&#x27;, &#x27;rsi_1d&#x27;   # informative dataframe</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div></div></aside><aside class="myst-admonition myst-admonition-important my-5 shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-gray-50/10 dark:bg-stone-800 overflow-hidden myst-admonition-default rounded border-l-4 border-blue-500"><div class="myst-admonition-header m-0 font-medium py-1 flex min-w-0 text-lg text-blue-600 bg-blue-50 dark:bg-slate-900"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="myst-admonition-header-icon inline-block pl-2 mr-2 self-center flex-none text-blue-600"><path fill-rule="evenodd" d="M14.615 1.595a.75.75 0 0 1 .359.852L12.982 9.75h7.268a.75.75 0 0 1 .548 1.262l-10.5 11.25a.75.75 0 0 1-1.272-.71l1.992-7.302H3.75a.75.75 0 0 1-.548-1.262l10.5-11.25a.75.75 0 0 1 .913-.143Z" clip-rule="evenodd"></path></svg><div class="myst-admonition-header-text text-neutral-900 dark:text-white grow self-center overflow-hidden break-words">1h 列重命名</div></div><div class="myst-admonition-body px-4 py-1"><p>假设 <code>inf_tf = &#x27;1h&#x27;</code>，合并后列名如下：</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">    &#x27;date&#x27;, &#x27;open&#x27;, &#x27;high&#x27;, &#x27;low&#x27;, &#x27;close&#x27;, &#x27;rsi&#x27;                     # 原 dataframe
    &#x27;date_1h&#x27;, &#x27;open_1h&#x27;, &#x27;high_1h&#x27;, &#x27;low_1h&#x27;, &#x27;close_1h&#x27;, &#x27;rsi_1h&#x27;   # informative dataframe</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div></div></aside><aside class="myst-admonition myst-admonition-important my-5 shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-gray-50/10 dark:bg-stone-800 overflow-hidden myst-admonition-default rounded border-l-4 border-blue-500"><div class="myst-admonition-header m-0 font-medium py-1 flex min-w-0 text-lg text-blue-600 bg-blue-50 dark:bg-slate-900"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="myst-admonition-header-icon inline-block pl-2 mr-2 self-center flex-none text-blue-600"><path fill-rule="evenodd" d="M14.615 1.595a.75.75 0 0 1 .359.852L12.982 9.75h7.268a.75.75 0 0 1 .548 1.262l-10.5 11.25a.75.75 0 0 1-1.272-.71l1.992-7.302H3.75a.75.75 0 0 1-.548-1.262l10.5-11.25a.75.75 0 0 1 .913-.143Z" clip-rule="evenodd"></path></svg><div class="myst-admonition-header-text text-neutral-900 dark:text-white grow self-center overflow-hidden break-words">自定义实现</div></div><div class="myst-admonition-body px-4 py-1"><p>可自定义实现如下：</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">    # 日期右移 1 根K线
    # This is necessary since the data is always the &quot;open date&quot;
    # and a 15m candle starting at 12:15 should not know the close of the 1h candle from 12:00 to 13:00
    minutes = timeframe_to_minutes(inf_tf)
    # Only do this if the timeframes are different:
    informative[&#x27;date_merge&#x27;] = informative[&quot;date&quot;] + pd.to_timedelta(minutes, &#x27;m&#x27;)

    # Rename columns to be unique
    informative.columns = [f&quot;{col}_{inf_tf}&quot; for col in informative.columns]
    # Assuming inf_tf = &#x27;1d&#x27; - then the columns will now be:
    # date_1d, open_1d, high_1d, low_1d, close_1d, rsi_1d

    # Combine the 2 dataframes
    # all indicators on the informative sample MUST be calculated before this point
    dataframe = pd.merge(dataframe, informative, left_on=&#x27;date&#x27;, right_on=f&#x27;date_merge_{inf_tf}&#x27;, how=&#x27;left&#x27;)
    # FFill to have the 1d value available in every row throughout the day.
    # Without this, comparisons would only work once per day.
    dataframe = dataframe.ffill()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div></div></aside><aside class="myst-admonition myst-admonition-warning my-5 shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-gray-50/10 dark:bg-stone-800 overflow-hidden myst-admonition-default rounded border-l-4 border-amber-600"><div class="myst-admonition-header m-0 font-medium py-1 flex min-w-0 text-lg text-amber-600 bg-amber-50 dark:bg-slate-900"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="myst-admonition-header-icon inline-block pl-2 mr-2 self-center flex-none text-amber-600"><path fill-rule="evenodd" d="M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z" clip-rule="evenodd"></path></svg><div class="myst-admonition-header-text text-neutral-900 dark:text-white grow self-center overflow-hidden break-words">informative 周期 &lt; 主周期</div></div><div class="myst-admonition-body px-4 py-1"><p>用本方法时，不建议 informative 周期小于主 dataframe 周期，否则无法利用更多细节。若需用更细粒度信息，需用更高级方法（超出本文档范围）。</p></div></aside><h3 id="id-dataprovider" class="relative group"><span class="heading-text">额外数据（DataProvider）</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-dataprovider" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>策略可通过 <code>DataProvider</code> 获取更多数据。</p><p>所有方法失败时返回 None，不抛异常。</p><p>请根据运行模式选择合适方法（见下文示例）。</p><aside class="myst-admonition myst-admonition-warning my-5 shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-gray-50/10 dark:bg-stone-800 overflow-hidden myst-admonition-default rounded border-l-4 border-amber-600"><div class="myst-admonition-header m-0 font-medium py-1 flex min-w-0 text-lg text-amber-600 bg-amber-50 dark:bg-slate-900"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="myst-admonition-header-icon inline-block pl-2 mr-2 self-center flex-none text-amber-600"><path fill-rule="evenodd" d="M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z" clip-rule="evenodd"></path></svg><div class="myst-admonition-header-text text-neutral-900 dark:text-white grow self-center overflow-hidden break-words">超参优化限制</div></div><div class="myst-admonition-body px-4 py-1"><p>DataProvider 在超参优化时可用，但仅限于策略内的 <code>populate_indicators()</code>，不可用于超参优化类文件。</p><p>也不可用于 <code>populate_entry_trend()</code> 和 <code>populate_exit_trend()</code>。</p></div></aside><h4 id="dataprovider" class="relative group"><span class="heading-text">DataProvider 可用方法</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#dataprovider" title="Link to this Section" aria-label="Link to this Section">¶</a></h4><ul><li><a target="_blank" rel="noreferrer" href="#available_pairs" class=""><code>available_pairs</code></a> - 返回缓存的所有对及其周期（pair, timeframe）元组</li><li><a target="_blank" rel="noreferrer" href="#current_whitelist" class=""><code>current_whitelist()</code></a> - 返回当前白名单对列表，适合动态白名单（如 VolumePairlist）</li><li><a target="_blank" rel="noreferrer" href="#get_pair_dataframepair-timeframe" class=""><code>get_pair_dataframe(pair, timeframe)</code></a> - 通用方法，回测时返回历史数据，dry/live 时返回缓存数据</li><li><a target="_blank" rel="noreferrer" href="#get_analyzed_dataframepair-timeframe" class=""><code>get_analyzed_dataframe(pair, timeframe)</code></a> - 返回分析后的 dataframe 及最新分析时间</li><li><code>historic_ohlcv(pair, timeframe)</code> - 返回磁盘上的历史数据</li><li><code>market(pair)</code> - 返回交易对市场数据（手续费、限额、精度、活跃标志等）</li><li><code>ohlcv(pair, timeframe)</code> - 返回当前缓存的K线数据</li><li><a target="_blank" rel="noreferrer" href="#orderbookpair-maximum" class=""><code>orderbook(pair, maximum)</code></a> - 返回最新 orderbook 数据（bids/asks）</li><li><a target="_blank" rel="noreferrer" href="#tickerpair" class=""><code>ticker(pair)</code></a> - 返回当前 ticker 数据</li><li><code>runmode</code> - 当前运行模式</li></ul><h4 id="id-15" class="relative group"><span class="heading-text">示例用法</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-15" title="Link to this Section" aria-label="Link to this Section">¶</a></h4><h4 id="available-pairs" class="relative group"><span class="heading-text"><em>available_pairs</em></span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#available-pairs" title="Link to this Section" aria-label="Link to this Section">¶</a></h4><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">for pair, timeframe in self.dp.available_pairs:
    print(f&quot;available {pair}, {timeframe}&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><h4 id="current-whitelist" class="relative group"><span class="heading-text"><em>current_whitelist()</em></span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#current-whitelist" title="Link to this Section" aria-label="Link to this Section">¶</a></h4><p>假设你开发了一个用 <code>5m</code> 周期、用 <code>1d</code> 周期信号的策略，且用 VolumePairList 动态选前 10 个交易对。</p><p>策略逻辑如下：</p><p><em>每 5 分钟扫描前 10 个交易对，用 14 日 RSI 生成信号。</em></p><p>因数据有限，无法用 5m K 线重采样成日线。大多数交易所只给 500-1000 根K线，约等于 1.74 天。我们需要至少 14 天！</p><p>因此需用 informative pair，且因白名单动态变化，不知用哪些对！</p><p>此时可用 <code>self.dp.current_whitelist()</code> 获取当前白名单对。</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">    def informative_pairs(self):

        # 获取白名单所有对
        pairs = self.dp.current_whitelist()
        # 为每个对分配周期
        informative_pairs = [(pair, &#x27;1d&#x27;) for pair in pairs]
        return informative_pairs</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><aside class="myst-admonition myst-admonition-caution my-5 shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-gray-50/10 dark:bg-stone-800 overflow-hidden myst-admonition-default rounded border-l-4 border-amber-600"><div class="myst-admonition-header m-0 font-medium py-1 flex min-w-0 text-lg text-amber-600 bg-amber-50 dark:bg-slate-900"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="myst-admonition-header-icon inline-block pl-2 mr-2 self-center flex-none text-amber-600"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"></path></svg><div class="myst-admonition-header-text text-neutral-900 dark:text-white grow self-center overflow-hidden break-words">current_whitelist 用于绘图</div></div><div class="myst-admonition-body px-4 py-1"><p>current_whitelist 不支持 <code>plot-dataframe</code>，也不支持 FreqUI 可视化（webserver 模式），因 webserver 配置无需白名单。</p></div></aside><h4 id="get-pair-dataframe-pair-timeframe" class="relative group"><span class="heading-text"><em>get_pair_dataframe(pair, timeframe)</em></span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#get-pair-dataframe-pair-timeframe" title="Link to this Section" aria-label="Link to this Section">¶</a></h4><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># 获取第一个 informative pair 的K线数据
inf_pair, inf_timeframe = self.informative_pairs()[0]
informative = self.dp.get_pair_dataframe(pair=inf_pair,
                                         timeframe=inf_timeframe)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><aside class="myst-admonition myst-admonition-warning my-5 shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-gray-50/10 dark:bg-stone-800 overflow-hidden myst-admonition-default rounded border-l-4 border-amber-600"><div class="myst-admonition-header m-0 font-medium py-1 flex min-w-0 text-lg text-amber-600 bg-amber-50 dark:bg-slate-900"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="myst-admonition-header-icon inline-block pl-2 mr-2 self-center flex-none text-amber-600"><path fill-rule="evenodd" d="M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z" clip-rule="evenodd"></path></svg><div class="myst-admonition-header-text text-neutral-900 dark:text-white grow self-center overflow-hidden break-words">回测注意</div></div><div class="myst-admonition-body px-4 py-1"><p>回测时，<code>dp.get_pair_dataframe()</code> 在 <code>populate_*()</code> 方法中返回完整时间区间。请勿&quot;看未来&quot;，否则 dry/live 时会有意外。</p><p>在 <a class="" data-state="closed" href="/strategy-callbacks">回调函数</a> 中，则只返回当前（模拟）K线前的数据。</p></div></aside><h4 id="get-analyzed-dataframe-pair-timeframe" class="relative group"><span class="heading-text"><em>get_analyzed_dataframe(pair, timeframe)</em></span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#get-analyzed-dataframe-pair-timeframe" title="Link to this Section" aria-label="Link to this Section">¶</a></h4><p>该方法供 freqtrade 内部用来判断最后信号，也可在特定回调中用来获取触发操作的信号（见<a class="" data-state="closed" href="/strategy-advanced">高级策略文档</a>）。</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># 获取当前 dataframe
dataframe, last_updated = self.dp.get_analyzed_dataframe(pair=metadata[&#x27;pair&#x27;],
                                                         timeframe=self.timeframe)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><aside class="myst-admonition myst-admonition-caution my-5 shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-gray-50/10 dark:bg-stone-800 overflow-hidden myst-admonition-default rounded border-l-4 border-amber-600"><div class="myst-admonition-header m-0 font-medium py-1 flex min-w-0 text-lg text-amber-600 bg-amber-50 dark:bg-slate-900"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="myst-admonition-header-icon inline-block pl-2 mr-2 self-center flex-none text-amber-600"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"></path></svg><div class="myst-admonition-header-text text-neutral-900 dark:text-white grow self-center overflow-hidden break-words">无数据</div></div><div class="myst-admonition-body px-4 py-1"><p>若请求的对未缓存，返回空 dataframe。可用 <code>if dataframe.empty:</code> 检查。</p></div></aside><h4 id="orderbook-pair-maximum" class="relative group"><span class="heading-text"><em>orderbook(pair, maximum)</em></span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#orderbook-pair-maximum" title="Link to this Section" aria-label="Link to this Section">¶</a></h4><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">if self.dp.runmode.value in (&#x27;live&#x27;, &#x27;dry_run&#x27;):
    ob = self.dp.orderbook(metadata[&#x27;pair&#x27;], 1)
    dataframe[&#x27;best_bid&#x27;] = ob[&#x27;bids&#x27;][0][0]
    dataframe[&#x27;best_ask&#x27;] = ob[&#x27;asks&#x27;][0][0]</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p>orderbook 结构与 <a target="_blank" rel="noreferrer" href="https://github.com/ccxt/ccxt/wiki/Manual#order-book-structure" class="">ccxt</a> 一致：</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-text" style="white-space:pre">{
    &#x27;bids&#x27;: [
        [ price, amount ],
        ...
    ],
    &#x27;asks&#x27;: [
        [ price, amount ],
        ...
    ],
}</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p>用 <code>ob[&#x27;bids&#x27;][0][0]</code> 可取最优买价，<code>ob[&#x27;bids&#x27;][0][1]</code> 为该价位数量。</p><aside class="myst-admonition myst-admonition-warning my-5 shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-gray-50/10 dark:bg-stone-800 overflow-hidden myst-admonition-default rounded border-l-4 border-amber-600"><div class="myst-admonition-header m-0 font-medium py-1 flex min-w-0 text-lg text-amber-600 bg-amber-50 dark:bg-slate-900"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="myst-admonition-header-icon inline-block pl-2 mr-2 self-center flex-none text-amber-600"><path fill-rule="evenodd" d="M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z" clip-rule="evenodd"></path></svg><div class="myst-admonition-header-text text-neutral-900 dark:text-white grow self-center overflow-hidden break-words">回测注意</div></div><div class="myst-admonition-body px-4 py-1"><p>订单簿不是历史数据的一部分，这意味着如果使用此方法，回测和超参数优化将无法正常工作，因为该方法将返回最新值。</p></div></aside><h4 id="ticker-pair" class="relative group"><span class="heading-text"><em>ticker(pair)</em></span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#ticker-pair" title="Link to this Section" aria-label="Link to this Section">¶</a></h4><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">if self.dp.runmode.value in (&#x27;live&#x27;, &#x27;dry_run&#x27;):
    ticker = self.dp.ticker(metadata[&#x27;pair&#x27;])
    dataframe[&#x27;last_price&#x27;] = ticker[&#x27;last&#x27;]
    dataframe[&#x27;volume24h&#x27;] = ticker[&#x27;quoteVolume&#x27;]
    dataframe[&#x27;vwap&#x27;] = ticker[&#x27;vwap&#x27;]</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><aside class="myst-admonition myst-admonition-warning my-5 shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-gray-50/10 dark:bg-stone-800 overflow-hidden myst-admonition-default rounded border-l-4 border-amber-600"><div class="myst-admonition-header m-0 font-medium py-1 flex min-w-0 text-lg text-amber-600 bg-amber-50 dark:bg-slate-900"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="myst-admonition-header-icon inline-block pl-2 mr-2 self-center flex-none text-amber-600"><path fill-rule="evenodd" d="M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z" clip-rule="evenodd"></path></svg><div class="myst-admonition-header-text text-neutral-900 dark:text-white grow self-center overflow-hidden break-words">Warning</div></div><div class="myst-admonition-body px-4 py-1"><p>虽然 ticker 数据结构是 ccxt 统一接口的一部分，但不同交易所返回的值可能会有所不同。例如，许多交易所不返回 <code>vwap</code> 值，一些交易所并不总是填充 <code>last</code> 字段（所以它可能为 None）等。因此，您需要仔细验证从交易所返回的 ticker 数据，并添加适当的错误处理/默认值。</p></div></aside><aside class="myst-admonition myst-admonition-warning my-5 shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-gray-50/10 dark:bg-stone-800 overflow-hidden myst-admonition-default rounded border-l-4 border-amber-600"><div class="myst-admonition-header m-0 font-medium py-1 flex min-w-0 text-lg text-amber-600 bg-amber-50 dark:bg-slate-900"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="myst-admonition-header-icon inline-block pl-2 mr-2 self-center flex-none text-amber-600"><path fill-rule="evenodd" d="M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z" clip-rule="evenodd"></path></svg><div class="myst-admonition-header-text text-neutral-900 dark:text-white grow self-center overflow-hidden break-words">回测警告</div></div><div class="myst-admonition-body px-4 py-1"><p>此方法将始终返回最新/实时值。因此，在回测/超参数优化期间使用而不检查运行模式将导致错误的结果，例如，您的整个 dataframe 将在所有行中包含相同的单个值。</p></div></aside><h4 id="id-16" class="relative group"><span class="heading-text">发送通知</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-16" title="Link to this Section" aria-label="Link to this Section">¶</a></h4><p>dataprovider 的 <code>.send_msg()</code> 可在策略中发送自定义通知。
相同的通知在每个蜡烛图期间只会发送一次，除非第二个参数（<code>always_send</code>）设置为 True。</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">    self.dp.send_msg(f&quot;{metadata[&#x27;pair&#x27;]} just got hot!&quot;)

    # 强制发送此通知，避免缓存（请阅读下面的警告！）
    self.dp.send_msg(f&quot;{metadata[&#x27;pair&#x27;]} just got hot!&quot;, always_send=True)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p>通知只会在交易模式（实盘/模拟盘）中发送 - 因此可以在回测中无条件调用此方法。</p><aside class="myst-admonition myst-admonition-warning my-5 shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-gray-50/10 dark:bg-stone-800 overflow-hidden myst-admonition-default rounded border-l-4 border-amber-600"><div class="myst-admonition-header m-0 font-medium py-1 flex min-w-0 text-lg text-amber-600 bg-amber-50 dark:bg-slate-900"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="myst-admonition-header-icon inline-block pl-2 mr-2 self-center flex-none text-amber-600"><path fill-rule="evenodd" d="M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z" clip-rule="evenodd"></path></svg><div class="myst-admonition-header-text text-neutral-900 dark:text-white grow self-center overflow-hidden break-words">消息轰炸</div></div><div class="myst-admonition-body px-4 py-1"><p>通过在此方法中设置 <code>always_send=True</code>，您可能会给自己发送大量消息。请谨慎使用此功能，并且只在您知道不会在整个蜡烛图期间频繁触发的情况下使用，以避免每5秒就收到一条消息。</p></div></aside><h4 id="complete-dataprovider-sample" class="relative group"><span class="heading-text">完整 DataProvider 示例</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#complete-dataprovider-sample" title="Link to this Section" aria-label="Link to this Section">¶</a></h4><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from freqtrade.strategy import IStrategy, merge_informative_pair
from pandas import DataFrame

class SampleStrategy(IStrategy):
    # 策略初始化...

    timeframe = &#x27;5m&#x27;

    # ...

    def informative_pairs(self):

        # 获取白名单所有对
        pairs = self.dp.current_whitelist()
        # 为每个对分配周期
        informative_pairs = [(pair, &#x27;1d&#x27;) for pair in pairs]
        # 可选：添加静态对
        informative_pairs += [(&quot;ETH/USDT&quot;, &quot;5m&quot;),
                              (&quot;BTC/TUSD&quot;, &quot;15m&quot;),
                            ]
        return informative_pairs

    def populate_indicators(self, dataframe: DataFrame, metadata: dict) -&gt; DataFrame:
        if not self.dp:
            # DataProvider 不可用时不做任何操作
            return dataframe

        inf_tf = &#x27;1d&#x27;
        # 获取信息对
        informative = self.dp.get_pair_dataframe(pair=metadata[&#x27;pair&#x27;], timeframe=inf_tf)
        # 获取14天RSI
        informative[&#x27;rsi&#x27;] = ta.RSI(informative, timeperiod=14)

        # 使用辅助函数 merge_informative_pair 安全地合并交易对
        # 自动重命名列并合并较短时间周期的 dataframe 和较长时间周期的信息对
        # 使用 ffill 使1天的值在一天中的每一行都可用
        # 如果没有这个，原始数据框和信息对的列之间的比较每天只能进行一次
        # 此方法的完整文档，见下文
        dataframe = merge_informative_pair(dataframe, informative, self.timeframe, inf_tf, ffill=True)

        # 计算原始数据框的RSI（5分钟时间周期）
        dataframe[&#x27;rsi&#x27;] = ta.RSI(dataframe, timeperiod=14)

        # 其他操作
        # ...

        return dataframe

    def populate_entry_trend(self, dataframe: DataFrame, metadata: dict) -&gt; DataFrame:

        dataframe.loc[
            (
                (qtpylib.crossed_above(dataframe[&#x27;rsi&#x27;], 30)) &amp;  # RSI 上穿 30
                (dataframe[&#x27;rsi_1d&#x27;] &lt; 30) &amp;                     # 日线 RSI &lt; 30
                (dataframe[&#x27;volume&#x27;] &gt; 0)                        # 有成交量
            ),
            [&#x27;enter_long&#x27;, &#x27;enter_tag&#x27;]] = (1, &#x27;rsi_cross&#x27;)
</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><hr class="py-2 my-5 translate-y-2"/><h3 id="id-wallets" class="relative group"><span class="heading-text">额外数据（钱包 Wallets）</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-wallets" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>策略可通过 <code>wallets</code> 对象获取当前钱包/账户余额。</p><aside class="myst-admonition myst-admonition-note my-5 shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-gray-50/10 dark:bg-stone-800 overflow-hidden myst-admonition-default rounded border-l-4 border-blue-500"><div class="myst-admonition-header m-0 font-medium py-1 flex min-w-0 text-lg text-blue-600 bg-blue-50 dark:bg-slate-900"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="myst-admonition-header-icon inline-block pl-2 mr-2 self-center flex-none text-blue-600"><path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"></path></svg><div class="myst-admonition-header-text text-neutral-900 dark:text-white grow self-center overflow-hidden break-words">回测/超参优化</div></div><div class="myst-admonition-body px-4 py-1"><p>Wallets 在不同函数中表现不同。</p><p>在 <code>populate_*()</code> 方法中，返回完整钱包。</p><p>在 <a class="" data-state="closed" href="/strategy-callbacks">回调函数</a> 中，返回当前模拟钱包状态。</p></div></aside><p>调用前请检查 <code>wallets</code> 是否可用，避免回测时报错。</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">if self.wallets:
    free_eth = self.wallets.get_free(&#x27;ETH&#x27;)
    used_eth = self.wallets.get_used(&#x27;ETH&#x27;)
    total_eth = self.wallets.get_total(&#x27;ETH&#x27;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><h4 id="wallets" class="relative group"><span class="heading-text">Wallets 可用方法</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#wallets" title="Link to this Section" aria-label="Link to this Section">¶</a></h4><ul><li><code>get_free(asset)</code> - 当前可用余额</li><li><code>get_used(asset)</code> - 当前被占用余额（挂单）</li><li><code>get_total(asset)</code> - 总余额（前两者之和）</li></ul><hr class="py-2 my-5 translate-y-2"/><h3 id="id-trades" class="relative group"><span class="heading-text">额外数据（交易记录 Trades）</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-trades" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>可在策略中通过数据库查询历史交易。</p><p>在文件顶部，导入所需对象：</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from freqtrade.persistence import Trade</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p>以下示例查询当天当前对的已平仓交易（可加其他过滤条件）：</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">trades = Trade.get_trades_proxy(pair=metadata[&#x27;pair&#x27;],
                                open_date=datetime.now(timezone.utc) - timedelta(days=1),
                                is_open=False,
            ]).order_by(Trade.close_date).all()
# 汇总该交易对的利润
curdayprofit = sum(trade.close_profit for trade in trades)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p>更多方法请查阅 <a class="" data-state="closed" href="/trade-object">Trade 对象</a> 文档。</p><aside class="myst-admonition myst-admonition-warning my-5 shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-gray-50/10 dark:bg-stone-800 overflow-hidden myst-admonition-default rounded border-l-4 border-amber-600"><div class="myst-admonition-header m-0 font-medium py-1 flex min-w-0 text-lg text-amber-600 bg-amber-50 dark:bg-slate-900"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="myst-admonition-header-icon inline-block pl-2 mr-2 self-center flex-none text-amber-600"><path fill-rule="evenodd" d="M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z" clip-rule="evenodd"></path></svg><div class="myst-admonition-header-text text-neutral-900 dark:text-white grow self-center overflow-hidden break-words">Warning</div></div><div class="myst-admonition-body px-4 py-1"><p>回测/超参优化时，<code>populate_*</code> 方法中无法获取交易历史，结果为空。</p></div></aside><h3 id="id-17" class="relative group"><span class="heading-text">阻止特定对交易</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-17" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Freqtrade 会在某对平仓后自动锁定该对至当前K线结束，防止同一K线内频繁交易。</p><p>锁定对时会提示 <code>Pair &lt;pair&gt; is currently locked.</code>。</p><h4 id="id-18" class="relative group"><span class="heading-text">在策略中锁定对</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-18" title="Link to this Section" aria-label="Link to this Section">¶</a></h4><p>有时希望在特定事件后锁定某对（如连续亏损）。</p><p>可用 <code>self.lock_pair(pair, until, [reason])</code> 实现，<code>until</code> 为未来时间点，<code>reason</code> 为可选说明。</p><p>可用 <code>self.unlock_pair(pair)</code> 或 <code>self.unlock_reason(&lt;reason&gt;)</code> 手动解锁，后者会解锁所有因该原因锁定的对。</p><p>用 <code>self.is_pair_locked(pair)</code> 检查对是否被锁定。</p><aside class="myst-admonition myst-admonition-note my-5 shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-gray-50/10 dark:bg-stone-800 overflow-hidden myst-admonition-default rounded border-l-4 border-blue-500"><div class="myst-admonition-header m-0 font-medium py-1 flex min-w-0 text-lg text-blue-600 bg-blue-50 dark:bg-slate-900"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="myst-admonition-header-icon inline-block pl-2 mr-2 self-center flex-none text-blue-600"><path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"></path></svg><div class="myst-admonition-header-text text-neutral-900 dark:text-white grow self-center overflow-hidden break-words">Note</div></div><div class="myst-admonition-body px-4 py-1"><p>锁定会自动延长到下一个K线结束。如 5m 周期，锁到 10:18 会延长到 10:20。</p></div></aside><aside class="myst-admonition myst-admonition-warning my-5 shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-gray-50/10 dark:bg-stone-800 overflow-hidden myst-admonition-default rounded border-l-4 border-amber-600"><div class="myst-admonition-header m-0 font-medium py-1 flex min-w-0 text-lg text-amber-600 bg-amber-50 dark:bg-slate-900"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="myst-admonition-header-icon inline-block pl-2 mr-2 self-center flex-none text-amber-600"><path fill-rule="evenodd" d="M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z" clip-rule="evenodd"></path></svg><div class="myst-admonition-header-text text-neutral-900 dark:text-white grow self-center overflow-hidden break-words">Warning</div></div><div class="myst-admonition-body px-4 py-1"><p>手动锁定仅在实盘/模拟盘可用，回测时仅保护机制可锁定。</p></div></aside><h5 id="id-19" class="relative group"><span class="heading-text">锁定对示例</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-19" title="Link to this Section" aria-label="Link to this Section">¶</a></h5><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from freqtrade.persistence import Trade
from datetime import timedelta, datetime, timezone
# 放在策略文件顶部
# --------

# 在 populate_indicators 或 populate_entry_trend 中：
if self.config[&#x27;runmode&#x27;].value in (&#x27;live&#x27;, &#x27;dry_run&#x27;):
    # 查询近两天已平仓交易
    trades = Trade.get_trades_proxy(
        pair=metadata[&#x27;pair&#x27;], is_open=False, 
        open_date=datetime.now(timezone.utc) - timedelta(days=2))
    # 分析是否需要锁定
    sumprofit = sum(trade.close_profit for trade in trades)
    if sumprofit &lt; 0:
        # 锁定 12 小时
        self.lock_pair(metadata[&#x27;pair&#x27;], until=datetime.now(timezone.utc) + timedelta(hours=12))</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><h3 id="id-dataframe" class="relative group"><span class="heading-text">打印主 dataframe</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-dataframe" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>可在 <code>populate_entry_trend()</code> 或 <code>populate_exit_trend()</code> 中打印当前主 dataframe，便于调试。</p><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-stone-200/10"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">def populate_entry_trend(self, dataframe: DataFrame, metadata: dict) -&gt; DataFrame:
    dataframe.loc[
        (
            #&gt;&gt; 你的条件 &lt;&lt;&lt;
        ),
        [&#x27;enter_long&#x27;, &#x27;enter_tag&#x27;]] = (1, &#x27;somestring&#x27;)

    # 打印分析的对
    print(f&quot;result for {metadata[&#x27;pair&#x27;]}&quot;)

    # 打印最后 5 行
    print(dataframe.tail())

    return dataframe</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><p>如需打印更多行可用 <code>print(dataframe)</code>，但不建议，否则每对每 5 秒会输出约 500 行。</p><h3 id="id-20" class="relative group"><span class="heading-text">开发策略时的常见错误</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-20" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><h4 id="common-mistakes-when-developing-strategies" class="relative group"><span class="heading-text">回测时&quot;看未来&quot;</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#common-mistakes-when-developing-strategies" title="Link to this Section" aria-label="Link to this Section">¶</a></h4><p>回测为提升性能会一次性分析整个 dataframe。策略作者需确保不&quot;看未来&quot;，即不使用 dry/live 时不可用的数据。</p><p>这是常见痛点，易导致回测与 dry/live 巨大差异。看未来的策略回测时表现极佳，实盘却很差。</p><p>常见错误包括：</p><ul><li>不要用 <code>shift(-1)</code> 或负数，这会用到未来数据</li><li>不要在 <code>populate_</code> 函数中用 <code>.iloc[-1]</code> 或其他绝对位置，dry-run 和回测时表现不同。回调函数中可安全用 iloc</li><li>不要用 <code>dataframe[&#x27;mean_volume&#x27;] = dataframe[&#x27;volume&#x27;].mean()</code> 这类全列函数，回测时会用到未来数据。应用 rolling() 计算，如 <code>dataframe[&#x27;volume&#x27;].rolling(&lt;window&gt;).mean()</code></li><li>不要用 <code>.resample(&#x27;1h&#x27;)</code>，这会用左边界，应用 <code>.resample(&#x27;1h&#x27;, label=&#x27;right&#x27;)</code></li><li>不要用 <code>.merge()</code> 合并大周期到小周期，应用 <span data-state="closed"><a href="#informative-pairs" class="hover-link">informative pair</a></span> 工具。普通 merge 会有前视偏差</li></ul><aside class="myst-admonition myst-admonition-tip my-5 shadow-md dark:shadow-2xl dark:shadow-neutral-900 bg-gray-50/10 dark:bg-stone-800 overflow-hidden myst-admonition-default rounded border-l-4 border-green-600"><div class="myst-admonition-header m-0 font-medium py-1 flex min-w-0 text-lg text-green-600 bg-green-50 dark:bg-slate-900"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="myst-admonition-header-icon inline-block pl-2 mr-2 self-center flex-none text-green-600"><path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"></path></svg><div class="myst-admonition-header-text text-neutral-900 dark:text-white grow self-center overflow-hidden break-words">如何发现问题</div></div><div class="myst-admonition-body px-4 py-1"><p>建议用 <a class="" data-state="closed" href="/lookahead-analysis">lookahead-analysis</a> 和 <a class="" data-state="closed" href="/recursive-analysis">recursive-analysis</a> 两个工具辅助排查。</p><p>但两者都不能保证完全无误。</p></div></aside><h4 id="colliding-signals" class="relative group"><span class="heading-text">信号冲突</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#colliding-signals" title="Link to this Section" aria-label="Link to this Section">¶</a></h4><p>当信号冲突（如 <code>enter_long</code> 和 <code>exit_long</code> 同时为 1）时，freqtrade 会忽略入场信号，避免刚进场就立刻出场。</p><p>规则如下，若 3 个信号中有多个为 1，则忽略入场：</p><ul><li><code>enter_long</code> -&gt; <code>exit_long</code>, <code>enter_short</code></li><li><code>enter_short</code> -&gt; <code>exit_short</code>, <code>enter_long</code></li></ul><h3 id="id-21" class="relative group"><span class="heading-text">更多策略思路</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-21" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>如需更多策略思路，请访问 <a target="_blank" rel="noreferrer" href="https://github.com/freqtrade/freqtrade-strategies" class="">策略仓库</a>。可作为学习参考，实际效果取决于市场、交易对等。请务必先回测，再 dry-run，谨慎实盘。</p><p>欢迎参考、改编，也欢迎向仓库提交新策略 PR。</p><h3 id="id-22" class="relative group"><span class="heading-text">下一步,回测</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-22" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>现在你已经有了完美的策略，下一步请学习<a class="" data-state="closed" href="/backtesting">如何回测</a>。</p><div></div><div class="flex pt-10 mb-10 space-x-4"><a class="flex-1 block p-4 font-normal text-gray-600 no-underline border border-gray-200 rounded shadow-sm group hover:border-blue-600 dark:hover:border-blue-400 hover:text-blue-600 dark:hover:text-blue-400 dark:text-gray-100 dark:border-gray-500 hover:shadow-lg dark:shadow-neutral-700" href="/strategy-101"><div class="flex h-full align-middle"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.5rem" height="1.5rem" class="self-center transition-transform group-hover:-translate-x-1 shrink-0"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"></path></svg><div class="flex-grow text-right"><div class="text-xs text-gray-500 dark:text-gray-400">安装</div>策略开发指南</div></div></a><a class="flex-1 block p-4 font-normal text-gray-600 no-underline border border-gray-200 rounded shadow-sm group hover:border-blue-600 dark:hover:border-blue-400 hover:text-blue-600 dark:hover:text-blue-400 dark:text-gray-100 dark:border-gray-500 hover:shadow-lg dark:shadow-neutral-700" href="/strategy-callbacks"><div class="flex h-full align-middle"><div class="flex-grow"><div class="text-xs text-gray-500 dark:text-gray-400">安装</div>策略回调</div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.5rem" height="1.5rem" class="self-center transition-transform group-hover:translate-x-1 shrink-0"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"></path></svg></div></a></div></article></main><footer class="article footer article-grid bg-white dark:bg-slate-950 mt-10 shadow-2xl shadow py-10"><div class="" style="text-align:center;padding:20px 0;border-top:1px solid #e5e5e5;color:#666;margin-top:2rem"><p>© 2024 <a target="_blank" rel="noreferrer" href="https://github.com/freqtrade-cn/docs_zh-CN" class="">Freqtrade 中文社区</a> | 基于 <a target="_blank" rel="noreferrer" href="https://www.freqtrade.io" class="">Freqtrade</a> 项目 | 文档由 <a target="_blank" rel="noreferrer" href="https://mystmd.org" class="">MyST</a> 驱动</p><p><a target="_blank" rel="noreferrer" href="https://github.com/freqtrade-cn/docs_zh-CN/issues" class="">报告问题</a> | <a href="https://github.com/freqtrade-cn/docs_zh-CN/blob/main/CONTRIBUTING.md" class="italic" target="_blank" rel="noreferrer" data-state="closed">贡献文档</a> | <a target="_blank" rel="noreferrer" href="https://github.com/freqtrade/freqtrade" class="">Freqtrade GitHub</a></p></div></footer><script>((a,d)=>{if(!window.history.state||!window.history.state.key){let h=Math.random().toString(32).slice(2);window.history.replaceState({key:h},"")}try{let f=JSON.parse(sessionStorage.getItem(a)||"{}")[d||window.history.state.key];typeof f=="number"&&window.scrollTo(0,f)}catch(h){console.error(h),sessionStorage.removeItem(a)}})("positions", null)</script><link rel="modulepreload" href="/build/entry.client-UNPC4GT3.js"/><link rel="modulepreload" href="/build/_shared/chunk-OCTKKCIL.js"/><link rel="modulepreload" href="/build/_shared/chunk-UAI5KRM7.js"/><link rel="modulepreload" href="/build/_shared/chunk-2NH4LW52.js"/><link rel="modulepreload" href="/build/_shared/chunk-LOSAUO4U.js"/><link rel="modulepreload" href="/build/_shared/chunk-HBJK6BW3.js"/><link rel="modulepreload" href="/build/_shared/chunk-HYMQ7M2K.js"/><link rel="modulepreload" href="/build/_shared/chunk-OHOXABTA.js"/><link rel="modulepreload" href="/build/_shared/chunk-OCWQY3HK.js"/><link rel="modulepreload" href="/build/_shared/chunk-C7FW3E47.js"/><link rel="modulepreload" href="/build/_shared/chunk-3CVK3PYF.js"/><link rel="modulepreload" href="/build/_shared/chunk-J6FHCSRC.js"/><link rel="modulepreload" href="/build/_shared/chunk-ND43KHSX.js"/><link rel="modulepreload" href="/build/_shared/chunk-GUCIBHGO.js"/><link rel="modulepreload" href="/build/root-PZGRQ5GW.js"/><link rel="modulepreload" href="/build/_shared/chunk-ESGEJFJ3.js"/><link rel="modulepreload" href="/build/routes/$-IZLSCQFJ.js"/><script>window.__remixContext = {"url":"/strategy-customization","state":{"loaderData":{"root":{"config":{"version":2,"myst":"1.6.0","options":{"logo_text":"Freqtrade 中文文档","custom_footer":"Made with love by Freqtrade-CN🏅🏅","footer_url":"https://github.com/freqtrade-cn/docs_zh-CN"},"parts":{"footer":{"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"div","style":{"textAlign":"center","padding":"20px 0","borderTop":"1px solid #e5e5e5","color":"#666","marginTop":"2rem"},"children":[{"type":"paragraph","children":[{"type":"text","value":"© 2024 ","key":"cGtmRysPNh"},{"type":"link","url":"https://github.com/freqtrade-cn/docs_zh-CN","children":[{"type":"text","value":"Freqtrade 中文社区","key":"FEHQbSt95z"}],"urlSource":"https://github.com/freqtrade-cn/docs_zh-CN","error":true,"key":"Mu559Q8bHC"},{"type":"text","value":" | 基于 ","key":"WcXQDEnACz"},{"type":"link","url":"https://www.freqtrade.io","children":[{"type":"text","value":"Freqtrade","key":"sqFcvh9yEe"}],"urlSource":"https://www.freqtrade.io","key":"Xmee9PXBEz"},{"type":"text","value":" 项目 | 文档由 ","key":"kIAAu87W2K"},{"type":"link","url":"https://mystmd.org","children":[{"type":"text","value":"MyST","key":"MAZLeqjFlY"}],"urlSource":"https://mystmd.org","key":"g1dKF84uvo"},{"type":"text","value":" 驱动","key":"VuNRK39kmU"}],"key":"QcTTmE8ltH"},{"type":"paragraph","children":[{"type":"link","url":"https://github.com/freqtrade-cn/docs_zh-CN/issues","children":[{"type":"text","value":"报告问题","key":"tdfEazLi55"}],"urlSource":"https://github.com/freqtrade-cn/docs_zh-CN/issues","error":true,"key":"N4iHXDWHA2"},{"type":"text","value":" | ","key":"eh5cdcuOnA"},{"type":"link","url":"https://github.com/freqtrade-cn/docs_zh-CN/blob/main/CONTRIBUTING.md","children":[{"type":"text","value":"贡献文档","key":"gRgK4nylt8"}],"urlSource":"https://github.com/freqtrade-cn/docs_zh-CN/blob/main/CONTRIBUTING.md","data":{"kind":"file","org":"freqtrade-cn","repo":"docs_zh-CN","reference":"main","file":"CONTRIBUTING.md","raw":"https://raw.githubusercontent.com/freqtrade-cn/docs_zh-CN/main/CONTRIBUTING.md"},"internal":false,"protocol":"github","key":"Cu5eI0jDZl"},{"type":"text","value":" | ","key":"SvVvoyKnTf"},{"type":"link","url":"https://github.com/freqtrade/freqtrade","children":[{"type":"text","value":"Freqtrade GitHub","key":"L6ysTCuWwL"}],"urlSource":"https://github.com/freqtrade/freqtrade","error":true,"key":"Q0AAPa7lEj"}],"key":"vle1XRChLv"}],"key":"yb0M1A2TFr"}],"key":"dyaIpDapKO"}],"key":"RxrxzRUinN"},"frontmatter":{"title":"页脚","parts":{},"authors":[{"id":"Freqtrade","name":"Freqtrade"}],"github":"https://github.com/freqtrade-cn/docs_zh-CN","keywords":["Freqtrade","中文文档","交易机器人","量化交易","加密货币","数字货币","区块链","人工智能","机器学习"],"edit_url":"https://github.com/freqtrade-cn/docs_zh-CN/blob/main/footer.md"}}},"nav":[{"title":"Freqtrade 官方","children":[{"title":"Freqtrade 官方文档","url":"https://www.freqtrade.io/en/stable/"},{"title":"Freqtrade GitHub","url":"https://github.com/freqtrade/freqtrade"}]},{"title":"Freqtrade-CN GitHub","url":"https://github.com/freqtrade-cn/freqtrade"}],"actions":[],"projects":[{"title":"Freqtrade 中文文档","description":"Freqtrade 中文文档","authors":[{"id":"Freqtrade","name":"Freqtrade"}],"github":"https://github.com/freqtrade-cn/docs_zh-CN","keywords":["Freqtrade","中文文档","交易机器人","量化交易","加密货币","数字货币","区块链","人工智能","机器学习"],"id":"111d4f50-18b2-4ed2-9189-3954f232e613","toc":[{"file":"index.md"},{"file":"terms.md"},{"file":"docker_quickstart.md"},{"children":[{"file":"installation.md"},{"file":"windows_installation.md"}],"title":"安装"},{"file":"bot-basics.md"},{"file":"configuration.md"},{"file":"strategy-101.md"},{"file":"strategy-customization.md"},{"file":"strategy-callbacks.md"},{"file":"stoploss.md"},{"file":"plugins.md"},{"file":"bot-usage.md"},{"children":[{"file":"telegram-usage.md"},{"file":"freq-ui.md"},{"file":"rest-api.md"},{"file":"webhook-config.md"}],"title":"机器人控制和管理"},{"file":"data-download.md"},{"file":"backtesting.md"},{"file":"hyperopt.md"},{"children":[{"file":"freqai.md"},{"file":"freqai-configuration.md"},{"file":"freqai-parameter-table.md"},{"file":"freqai-feature-engineering.md"},{"file":"freqai-running.md"},{"file":"freqai-reinforcement-learning.md"},{"file":"freqai-developers.md"}],"title":"FreqAI"},{"file":"leverage.md"},{"file":"utils.md"},{"file":"plotting.md"},{"file":"exchanges.md"},{"children":[{"file":"data-analysis.md"},{"file":"strategy_analysis_example.md"},{"file":"advanced-backtesting.md"}],"title":"数据分析"},{"children":[{"file":"advanced-setup.md"},{"file":"trade-object.md"},{"file":"lookahead-analysis.md"},{"file":"recursive-analysis.md"},{"file":"strategy-advanced.md"},{"file":"advanced-hyperopt.md"},{"file":"advanced-orderflow.md"},{"file":"producer-consumer.md"},{"file":"sql_cheatsheet.md"},{"file":"edge.md"}],"title":"高级话题"},{"file":"faq.md"},{"file":"strategy_migration.md"},{"file":"updating.md"},{"file":"commands.md"},{"file":"deprecated.md"},{"file":"developer.md"},{"children":[{"file":"commands/main.md"},{"file":"commands/backtesting-analysis.md"},{"file":"commands/backtesting.md"},{"file":"commands/backtesting-show.md"},{"file":"commands/convert-data.md"},{"file":"commands/convert-db.md"},{"file":"commands/convert-trade-data.md"},{"file":"commands/create-userdir.md"},{"file":"commands/download-data.md"},{"file":"commands/edge.md"},{"file":"commands/hyperopt-list.md"},{"file":"commands/hyperopt.md"},{"file":"commands/hyperopt-show.md"},{"file":"commands/install-ui.md"},{"file":"commands/list-data.md"},{"file":"commands/list-exchanges.md"},{"file":"commands/list-freqaimodels.md"},{"file":"commands/list-hyperoptloss.md"},{"file":"commands/list-markets.md"},{"file":"commands/list-pairs.md"},{"file":"commands/list-strategies.md"},{"file":"commands/list-timeframes.md"},{"file":"commands/lookahead-analysis.md"},{"file":"commands/new-config.md"},{"file":"commands/new-strategy.md"},{"file":"commands/plot-dataframe.md"},{"file":"commands/plot-profit.md"},{"file":"commands/recursive-analysis.md"},{"file":"commands/show-config.md"},{"file":"commands/show-trades.md"},{"file":"commands/strategy-updater.md"},{"file":"commands/test-pairlist.md"},{"file":"commands/trade.md"},{"file":"commands/trades-to-ohlcv.md"},{"file":"commands/webserver.md"}],"title":"Commands"}],"thumbnail":"/build/freqtrade_poweredby-54c1a23e325977ebc310429538f96a71.svg","exports":[],"bibliography":[],"index":"index","pages":[{"slug":"terms","title":"Freqtrade 术语词典","short_title":"术语词典","description":"本文档详细解释了 Freqtrade 和量化交易中的核心术语，为用户提供全面的概念参考。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["术语","概念","词典","参考","量化交易","Freqtrade"],"level":1},{"slug":"docker-quickstart","title":"使用 Docker 运行 Freqtrade","short_title":"Docker 快速入门","description":"了解如何使用 Docker 容器运行和管理 Freqtrade 交易机器人,包括安装、配置和常见问题解决","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["Docker","容器","快速入门","部署"],"level":1},{"level":1,"title":"安装"},{"slug":"installation","title":"安装 Freqtrade","short_title":"安装","description":"了解如何安装和配置 Freqtrade 交易机器人,包括脚本安装、手动安装和 Conda 安装等多种方式","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["安装","配置","指南","入门"],"level":2},{"slug":"windows-installation","title":"Windows 安装指南","short_title":"Windows 安装","description":"本文档详细介绍了如何在 Windows 系统上安装 Freqtrade 交易机器人,包括自动安装和手动安装两种方式。","date":"","thumbnail":"/build/windows_install-36fd100b8143b6955258a9fa59765217.png","thumbnailOptimized":"/build/windows_install-36fd100b8143b6955258a9fa59765217.webp","banner":"","bannerOptimized":"","tags":["Windows","安装","配置","指南"],"level":2},{"slug":"bot-basics","title":"Freqtrade 基础","short_title":"基础指南","description":"本文档介绍了 Freqtrade 的基本术语、概念和执行逻辑,帮助你理解 Freqtrade 的工作原理。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"configuration","title":"配置 Freqtrade","short_title":"配置","description":"了解如何配置 Freqtrade 交易机器人,包括配置文件、环境变量等多种配置方式","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["配置","参数","环境变量","设置"],"level":1},{"slug":"strategy-101","title":"Freqtrade 策略开发指南","short_title":"策略开发指南","description":"本文档介绍了 Freqtrade 策略开发的基础知识,包括必备概念、策略结构以及如何开发自己的交易策略。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"strategy-customization","title":"策略自定义指南","short_title":"策略自定义","description":"本文档介绍如何在 Freqtrade 中自定义交易策略,包括添加新指标、设置交易规则等内容。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["策略开发","自定义","指标","交易规则","编程"],"level":1},{"slug":"strategy-callbacks","title":"策略回调指南","short_title":"策略回调","description":"本文档详细介绍了 Freqtrade 交易机器人中可用的各种策略回调函数,包括它们的用途、调用时机以及使用方法。","date":"","thumbnail":"/build/freqUI-chart-annotat-6ca425e986932e863842497203176546.png","thumbnailOptimized":"/build/freqUI-chart-annotat-6ca425e986932e863842497203176546.webp","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"stoploss","title":"止损配置指南","short_title":"止损","description":"详细介绍 Freqtrade 中的止损功能,包括静态止损、追踪止损等多种止损模式的配置方法。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"plugins","title":"插件体系","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"bot-usage","title":"机器人使用指南","short_title":"机器人使用","description":"本文档介绍了如何启动和运行 FreqTrade 机器人,包括命令行参数、配置文件使用等基本操作说明。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"level":1,"title":"机器人控制和管理"},{"slug":"telegram-usage","title":"Telegram 使用指南","short_title":"Telegram 指南","description":"本文档详细介绍了如何为 Freqtrade 创建和配置 Telegram 机器人，以及如何获取必要的用户 ID 和群组 ID。","date":"","thumbnail":"/build/telegram_forcebuy-73d7978f775ad92a8fe74de0313966a6.png","thumbnailOptimized":"/build/telegram_forcebuy-73d7978f775ad92a8fe74de0313966a6.webp","banner":"","bannerOptimized":"","tags":["Telegram","通知","机器人","配置","消息推送"],"level":2},{"slug":"freq-ui","title":"FreqUI 用户界面","short_title":"FreqUI","description":"FreqUI 是 Freqtrade 的内置 Web 界面,提供了一个现代化的响应式界面来监控和控制您的交易机器人。本文档介绍了如何安装、配置和使用 FreqUI。","date":"","thumbnail":"/build/frequi-login-CORS-li-92549992a8d3a76bc770a0f5b151e366.png","thumbnailOptimized":"/build/frequi-login-CORS-li-92549992a8d3a76bc770a0f5b151e366.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"rest-api","title":"REST API 指南","short_title":"REST API","description":"本文档介绍了 Freqtrade 的 REST API 功能,包括如何配置 API 服务器、安全设置、身份验证以及各种 API 端点的使用方法。","date":"","thumbnail":"/build/frequi_url-75e93be0830e56c293348021fb304d08.png","thumbnailOptimized":"/build/frequi_url-75e93be0830e56c293348021fb304d08.webp","banner":"","bannerOptimized":"","tags":["REST API","接口","配置","安全","自动化"],"level":2},{"slug":"webhook-config","title":"Webhook 配置指南","short_title":"Webhook 指南","description":"Freqtrade 的 Webhook 功能允许您在交易事件发生时发送通知到外部服务。本文档详细介绍了如何配置和使用 Webhook。","date":"","thumbnail":"/build/discord_notification-0536645313306293db781a3e0e0489d8.png","thumbnailOptimized":"/build/discord_notification-0536645313306293db781a3e0e0489d8.webp","banner":"","bannerOptimized":"","tags":["Webhook","通知","外部服务","事件","配置"],"level":2},{"slug":"data-download","title":"数据下载","description":"了解如何使用 Freqtrade 下载历史交易数据，包括 K 线数据、回测数据和超参优化所需数据的下载方法和命令参数说明","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"backtesting","title":"回测","short_title":"回测","description":"了解如何使用 Freqtrade 的回测功能验证和优化你的交易策略,包括回测命令、参数配置和结果分析","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["回测","策略验证","性能分析","历史数据"],"level":1},{"slug":"hyperopt","title":"Hyperopt 超参数优化指南","short_title":"Hyperopt 指南","description":"Hyperopt 是 Freqtrade 中用于自动化策略参数优化的工具,通过搜索最佳参数组合来提升策略性能。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["超参数优化","Hyperopt","策略优化","机器学习","参数调优"],"level":1},{"level":1,"title":"FreqAI"},{"slug":"freqai","title":"Freqai","description":"","date":"","thumbnail":"/build/freqai_doc_logo-3f2859a5a8ebe9e577941dd454c6c5ee.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"freqai-configuration","title":"FreqAI 配置指南","short_title":"FreqAI 配置","description":"本文档详细介绍了如何配置 FreqAI,包括配置文件设置和策略构建。FreqAI 是 Freqtrade 的机器学习框架,可用于构建和训练预测模型。","date":"","thumbnail":"/build/freqai_pytorch-diagr-d0712f166402f727b4f65efd22bf6315.png","thumbnailOptimized":"/build/freqai_pytorch-diagr-d0712f166402f727b4f65efd22bf6315.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"freqai-parameter-table","title":"FreqAI 参数表","short_title":"参数表","description":"本文档详细列出了 FreqAI 的所有配置参数,包括通用配置参数和特征参数,并对每个参数的功能、数据类型和默认值进行了说明。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"freqai-feature-engineering","title":"FreqAI 特征工程指南","short_title":"特征工程","description":"本文档详细介绍了 FreqAI 的特征工程功能,包括如何定义和扩展特征、数据处理管道、异常值检测等内容。这些功能可以帮助用户构建更强大的预测模型。","date":"","thumbnail":"/build/freqai_weight-factor-70f8aa4395fdd17979cf8f96e17171d0.jpg","thumbnailOptimized":"/build/freqai_weight-factor-70f8aa4395fdd17979cf8f96e17171d0.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"freqai-running","title":"FreqAI 运行指南","short_title":"FreqAI 运行","description":"FreqAI 是一个自适应机器学习框架，本文档介绍了如何在实时和回测模式下运行 FreqAI，包括模型训练、部署和管理等内容。","date":"","thumbnail":"/build/freqai_moving-window-05da86a83d6712baee031086385a7735.jpg","thumbnailOptimized":"/build/freqai_moving-window-05da86a83d6712baee031086385a7735.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"freqai-reinforcement-learning","title":"FreqAI 强化学习指南","short_title":"强化学习","description":"本文档详细介绍了 FreqAI 的强化学习功能,包括基本概念、运行方法、环境配置等内容。这些功能可以帮助用户构建和训练强化学习模型进行自动交易。","date":"","thumbnail":"/build/tensorboard-27f8850881840b007f5a56a202abb949.jpg","thumbnailOptimized":"/build/tensorboard-27f8850881840b007f5a56a202abb949.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"freqai-developers","title":"FreqAI 开发者指南","short_title":"FreqAI 开发","description":"本文档详细介绍了 FreqAI 的项目架构、数据处理流程和文件结构,为开发者提供了深入了解 FreqAI 内部工作原理的指南。","date":"","thumbnail":"/build/freqai_algorithm-dia-6d1ac15cf50f9103773ecaea4b8fd261.jpg","thumbnailOptimized":"/build/freqai_algorithm-dia-6d1ac15cf50f9103773ecaea4b8fd261.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"leverage","title":"使用杠杆交易","description":"了解如何在 Freqtrade 中使用杠杆交易,包括做空、保证金和期货交易等高级功能","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"utils","title":"实用工具命令指南","short_title":"实用工具指南","description":"本文档详细介绍了 Freqtrade 中的各种实用工具子命令,包括创建用户目录、配置文件、列出交易所和交易对等功能。","date":"","thumbnail":"/build/show-config-output-2a74674e687e07d8afa7ace1b96df8bb.png","thumbnailOptimized":"/build/show-config-output-2a74674e687e07d8afa7ace1b96df8bb.webp","banner":"","bannerOptimized":"","tags":["工具","命令","配置","策略","交易所"],"level":1},{"slug":"plotting","title":"绘图","short_title":"绘图","description":"了解如何使用 Freqtrade 的绘图功能可视化价格、指标和利润数据,包括安装配置、命令参数和示例","date":"","thumbnail":"/build/plot-dataframe-40c25f36af7de6fc6f078d42ae5f90f5.png","thumbnailOptimized":"/build/plot-dataframe-40c25f36af7de6fc6f078d42ae5f90f5.webp","banner":"","bannerOptimized":"","tags":["绘图","可视化","指标","回测","利润"],"level":1},{"slug":"exchanges","title":"交易所特定说明","short_title":"交易所说明","description":"了解各个交易所的特殊配置和常见问题","date":"","thumbnail":"/build/binance_futures_sett-b4a8da10c6eb01bf904d6fc3533999b6.png","thumbnailOptimized":"/build/binance_futures_sett-b4a8da10c6eb01bf904d6fc3533999b6.webp","banner":"","bannerOptimized":"","tags":["交易所","配置","API","连接","问题解决"],"level":1},{"level":1,"title":"数据分析"},{"slug":"data-analysis","title":"使用 Jupyter 笔记本分析机器人数据","description":"使用 Jupyter 笔记本分析 Freqtrade 机器人的回测结果和交易历史数据","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"strategy-analysis-example","title":"Freqtrade 策略分析示例","short_title":"策略分析示例","description":"本文档介绍如何使用 Freqtrade 提供的工具来分析和调试交易策略,包括数据可视化、回测分析等功能。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"advanced-backtesting","title":"高级回测分析","short_title":"高级回测","description":"本文档介绍了 FreqTrade 的高级回测分析功能,包括买入/卖出标签分析、信号导出等高级特性。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"高级话题"},{"slug":"advanced-setup","title":"高级安装后配置","short_title":"高级安装","description":"本文档介绍了 FreqTrade 安装后可以执行的高级任务和配置选项,包括多实例运行、日志配置等高级特性。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"trade-object","title":"交易对象文档","short_title":"交易对象指南","description":"本文档详细介绍了 Freqtrade 中的交易对象(Trade)，包括其属性、方法以及在策略中的使用方式。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"lookahead-analysis","title":"前瞻性分析指南","short_title":"前瞻性分析","description":"前瞻性分析是一个用于检测和验证交易策略中是否存在前瞻性偏差的工具。本文档详细介绍了如何使用该工具来确保策略的有效性。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"recursive-analysis","title":"递归分析指南","short_title":"递归分析","description":"递归分析是一个用于检测和验证交易策略中是否存在因递归公式导致的不准确性的工具。本文档详细介绍了如何使用该工具来确保策略的有效性。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"strategy-advanced","title":"Freqtrade 高级策略指南","short_title":"高级策略","description":"本文档详细介绍了 Freqtrade 交易机器人的高级策略开发概念,包括持久化存储、回调方法等进阶功能。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"advanced-hyperopt","title":"高级超参数优化","short_title":"高级超参数优化","description":"本文档介绍了 FreqTrade 的高级超参数优化功能,包括自定义损失函数等高级特性。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"advanced-orderflow","title":"高级委托流分析","short_title":"委托流分析","description":"本文档介绍了 FreqTrade 的委托流分析功能,包括如何配置和使用公共成交数据进行高级委托流分析。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"producer-consumer","title":"生产者/消费者模式","short_title":"生产者/消费者","description":"本文档介绍了 Freqtrade 的生产者/消费者模式,包括如何配置多个机器人实例共享计算指标和信号,以及相关的 websocket 设置。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["生产者","消费者","分布式","多实例","WebSocket"],"level":2},{"slug":"sql-cheatsheet","title":"SQL 助手","short_title":"SQL 助手","description":"本文档提供了使用 SQLite 数据库进行查询的详细指南和常用命令参考。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"edge","title":"Edge Positioning - 边缘定位","short_title":"Edge","description":"Edge Positioning 模块使用概率统计来计算交易胜率和风险回报比,从而优化策略的入场点、头寸大小和止损设置。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["Edge","概率","统计","策略优化","风险管理"],"level":2},{"slug":"faq","title":"Freqtrade 常见问题","short_title":"FAQ","description":"本文档回答了关于 Freqtrade 交易机器人的常见问题,包括支持的市场、初学者指南以及常见问题的故障排除。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"strategy-migration","title":"策略迁移指南","short_title":"策略迁移","description":"本文档详细介绍了如何将 Freqtrade V2 策略迁移到 V3，包括接口变更、方法重命名以及新增功能的完整说明。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"updating","title":"更新指南","short_title":"更新指南","description":"本文档详细介绍了如何更新 Freqtrade 的不同安装方式,包括 Docker、安装脚本和原生安装等方法。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"commands","title":"Commands","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"deprecated","title":"已弃用功能","short_title":"已弃用功能","description":"本文档介绍了 FreqTrade 中已弃用和移除的命令行参数、配置参数和机器人功能,帮助用户避免使用不再受支持的特性。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"developer","title":"开发者指南","short_title":"开发者指南","description":"本文档面向 FreqTrade 的开发者,介绍如何为项目做出贡献、配置开发环境、编写测试以及其他开发相关的重要信息。","date":"","thumbnail":"/build/pycharm_debug-7a8a6d1f4a91d643a2d41ff932bf9a82.png","thumbnailOptimized":"/build/pycharm_debug-7a8a6d1f4a91d643a2d41ff932bf9a82.webp","banner":"","bannerOptimized":"","tags":[],"level":1},{"level":1,"title":"Commands"},{"slug":"main","title":"Main","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"backtesting-analysis","title":"Backtesting Analysis","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"backtesting-1","title":"Backtesting","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"backtesting-show","title":"Backtesting Show","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"convert-data","title":"Convert Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"convert-db","title":"Convert Db","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"convert-trade-data","title":"Convert Trade Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"create-userdir","title":"Create Userdir","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"download-data","title":"Download Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"edge-1","title":"Edge","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"hyperopt-list","title":"Hyperopt List","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"hyperopt-1","title":"Hyperopt","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"hyperopt-show","title":"Hyperopt Show","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"install-ui","title":"Install Ui","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"list-data","title":"List Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"list-exchanges","title":"List Exchanges","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"list-freqaimodels","title":"List Freqaimodels","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"list-hyperoptloss","title":"List Hyperoptloss","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"list-markets","title":"List Markets","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"list-pairs","title":"List Pairs","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"list-strategies","title":"List Strategies","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"list-timeframes","title":"List Timeframes","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"lookahead-analysis-1","title":"Lookahead Analysis","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"new-config","title":"New Config","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"new-strategy","title":"New Strategy","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"plot-dataframe","title":"Plot Dataframe","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"plot-profit","title":"Plot Profit","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"recursive-analysis-1","title":"Recursive Analysis","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"show-config","title":"Show Config","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"show-trades","title":"Show Trades","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"strategy-updater","title":"Strategy Updater","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"test-pairlist","title":"Test Pairlist","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"trade","title":"Trade","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"trades-to-ohlcv","title":"Trades To Ohlcv","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"webserver","title":"Webserver","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2}]}]},"CONTENT_CDN_PORT":"3102","MODE":"static"},"routes/$":{"config":{"version":2,"myst":"1.6.0","options":{"logo_text":"Freqtrade 中文文档","custom_footer":"Made with love by Freqtrade-CN🏅🏅","footer_url":"https://github.com/freqtrade-cn/docs_zh-CN"},"parts":{"footer":{"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"div","style":{"textAlign":"center","padding":"20px 0","borderTop":"1px solid #e5e5e5","color":"#666","marginTop":"2rem"},"children":[{"type":"paragraph","children":[{"type":"text","value":"© 2024 ","key":"cGtmRysPNh"},{"type":"link","url":"https://github.com/freqtrade-cn/docs_zh-CN","children":[{"type":"text","value":"Freqtrade 中文社区","key":"FEHQbSt95z"}],"urlSource":"https://github.com/freqtrade-cn/docs_zh-CN","error":true,"key":"Mu559Q8bHC"},{"type":"text","value":" | 基于 ","key":"WcXQDEnACz"},{"type":"link","url":"https://www.freqtrade.io","children":[{"type":"text","value":"Freqtrade","key":"sqFcvh9yEe"}],"urlSource":"https://www.freqtrade.io","key":"Xmee9PXBEz"},{"type":"text","value":" 项目 | 文档由 ","key":"kIAAu87W2K"},{"type":"link","url":"https://mystmd.org","children":[{"type":"text","value":"MyST","key":"MAZLeqjFlY"}],"urlSource":"https://mystmd.org","key":"g1dKF84uvo"},{"type":"text","value":" 驱动","key":"VuNRK39kmU"}],"key":"QcTTmE8ltH"},{"type":"paragraph","children":[{"type":"link","url":"https://github.com/freqtrade-cn/docs_zh-CN/issues","children":[{"type":"text","value":"报告问题","key":"tdfEazLi55"}],"urlSource":"https://github.com/freqtrade-cn/docs_zh-CN/issues","error":true,"key":"N4iHXDWHA2"},{"type":"text","value":" | ","key":"eh5cdcuOnA"},{"type":"link","url":"https://github.com/freqtrade-cn/docs_zh-CN/blob/main/CONTRIBUTING.md","children":[{"type":"text","value":"贡献文档","key":"gRgK4nylt8"}],"urlSource":"https://github.com/freqtrade-cn/docs_zh-CN/blob/main/CONTRIBUTING.md","data":{"kind":"file","org":"freqtrade-cn","repo":"docs_zh-CN","reference":"main","file":"CONTRIBUTING.md","raw":"https://raw.githubusercontent.com/freqtrade-cn/docs_zh-CN/main/CONTRIBUTING.md"},"internal":false,"protocol":"github","key":"Cu5eI0jDZl"},{"type":"text","value":" | ","key":"SvVvoyKnTf"},{"type":"link","url":"https://github.com/freqtrade/freqtrade","children":[{"type":"text","value":"Freqtrade GitHub","key":"L6ysTCuWwL"}],"urlSource":"https://github.com/freqtrade/freqtrade","error":true,"key":"Q0AAPa7lEj"}],"key":"vle1XRChLv"}],"key":"yb0M1A2TFr"}],"key":"dyaIpDapKO"}],"key":"RxrxzRUinN"},"frontmatter":{"title":"页脚","parts":{},"authors":[{"id":"Freqtrade","name":"Freqtrade"}],"github":"https://github.com/freqtrade-cn/docs_zh-CN","keywords":["Freqtrade","中文文档","交易机器人","量化交易","加密货币","数字货币","区块链","人工智能","机器学习"],"edit_url":"https://github.com/freqtrade-cn/docs_zh-CN/blob/main/footer.md"}}},"nav":[{"title":"Freqtrade 官方","children":[{"title":"Freqtrade 官方文档","url":"https://www.freqtrade.io/en/stable/"},{"title":"Freqtrade GitHub","url":"https://github.com/freqtrade/freqtrade"}]},{"title":"Freqtrade-CN GitHub","url":"https://github.com/freqtrade-cn/freqtrade"}],"actions":[],"projects":[{"title":"Freqtrade 中文文档","description":"Freqtrade 中文文档","authors":[{"id":"Freqtrade","name":"Freqtrade"}],"github":"https://github.com/freqtrade-cn/docs_zh-CN","keywords":["Freqtrade","中文文档","交易机器人","量化交易","加密货币","数字货币","区块链","人工智能","机器学习"],"id":"111d4f50-18b2-4ed2-9189-3954f232e613","toc":[{"file":"index.md"},{"file":"terms.md"},{"file":"docker_quickstart.md"},{"children":[{"file":"installation.md"},{"file":"windows_installation.md"}],"title":"安装"},{"file":"bot-basics.md"},{"file":"configuration.md"},{"file":"strategy-101.md"},{"file":"strategy-customization.md"},{"file":"strategy-callbacks.md"},{"file":"stoploss.md"},{"file":"plugins.md"},{"file":"bot-usage.md"},{"children":[{"file":"telegram-usage.md"},{"file":"freq-ui.md"},{"file":"rest-api.md"},{"file":"webhook-config.md"}],"title":"机器人控制和管理"},{"file":"data-download.md"},{"file":"backtesting.md"},{"file":"hyperopt.md"},{"children":[{"file":"freqai.md"},{"file":"freqai-configuration.md"},{"file":"freqai-parameter-table.md"},{"file":"freqai-feature-engineering.md"},{"file":"freqai-running.md"},{"file":"freqai-reinforcement-learning.md"},{"file":"freqai-developers.md"}],"title":"FreqAI"},{"file":"leverage.md"},{"file":"utils.md"},{"file":"plotting.md"},{"file":"exchanges.md"},{"children":[{"file":"data-analysis.md"},{"file":"strategy_analysis_example.md"},{"file":"advanced-backtesting.md"}],"title":"数据分析"},{"children":[{"file":"advanced-setup.md"},{"file":"trade-object.md"},{"file":"lookahead-analysis.md"},{"file":"recursive-analysis.md"},{"file":"strategy-advanced.md"},{"file":"advanced-hyperopt.md"},{"file":"advanced-orderflow.md"},{"file":"producer-consumer.md"},{"file":"sql_cheatsheet.md"},{"file":"edge.md"}],"title":"高级话题"},{"file":"faq.md"},{"file":"strategy_migration.md"},{"file":"updating.md"},{"file":"commands.md"},{"file":"deprecated.md"},{"file":"developer.md"},{"children":[{"file":"commands/main.md"},{"file":"commands/backtesting-analysis.md"},{"file":"commands/backtesting.md"},{"file":"commands/backtesting-show.md"},{"file":"commands/convert-data.md"},{"file":"commands/convert-db.md"},{"file":"commands/convert-trade-data.md"},{"file":"commands/create-userdir.md"},{"file":"commands/download-data.md"},{"file":"commands/edge.md"},{"file":"commands/hyperopt-list.md"},{"file":"commands/hyperopt.md"},{"file":"commands/hyperopt-show.md"},{"file":"commands/install-ui.md"},{"file":"commands/list-data.md"},{"file":"commands/list-exchanges.md"},{"file":"commands/list-freqaimodels.md"},{"file":"commands/list-hyperoptloss.md"},{"file":"commands/list-markets.md"},{"file":"commands/list-pairs.md"},{"file":"commands/list-strategies.md"},{"file":"commands/list-timeframes.md"},{"file":"commands/lookahead-analysis.md"},{"file":"commands/new-config.md"},{"file":"commands/new-strategy.md"},{"file":"commands/plot-dataframe.md"},{"file":"commands/plot-profit.md"},{"file":"commands/recursive-analysis.md"},{"file":"commands/show-config.md"},{"file":"commands/show-trades.md"},{"file":"commands/strategy-updater.md"},{"file":"commands/test-pairlist.md"},{"file":"commands/trade.md"},{"file":"commands/trades-to-ohlcv.md"},{"file":"commands/webserver.md"}],"title":"Commands"}],"thumbnail":"/build/freqtrade_poweredby-54c1a23e325977ebc310429538f96a71.svg","exports":[],"bibliography":[],"index":"index","pages":[{"slug":"terms","title":"Freqtrade 术语词典","short_title":"术语词典","description":"本文档详细解释了 Freqtrade 和量化交易中的核心术语，为用户提供全面的概念参考。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["术语","概念","词典","参考","量化交易","Freqtrade"],"level":1},{"slug":"docker-quickstart","title":"使用 Docker 运行 Freqtrade","short_title":"Docker 快速入门","description":"了解如何使用 Docker 容器运行和管理 Freqtrade 交易机器人,包括安装、配置和常见问题解决","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["Docker","容器","快速入门","部署"],"level":1},{"level":1,"title":"安装"},{"slug":"installation","title":"安装 Freqtrade","short_title":"安装","description":"了解如何安装和配置 Freqtrade 交易机器人,包括脚本安装、手动安装和 Conda 安装等多种方式","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["安装","配置","指南","入门"],"level":2},{"slug":"windows-installation","title":"Windows 安装指南","short_title":"Windows 安装","description":"本文档详细介绍了如何在 Windows 系统上安装 Freqtrade 交易机器人,包括自动安装和手动安装两种方式。","date":"","thumbnail":"/build/windows_install-36fd100b8143b6955258a9fa59765217.png","thumbnailOptimized":"/build/windows_install-36fd100b8143b6955258a9fa59765217.webp","banner":"","bannerOptimized":"","tags":["Windows","安装","配置","指南"],"level":2},{"slug":"bot-basics","title":"Freqtrade 基础","short_title":"基础指南","description":"本文档介绍了 Freqtrade 的基本术语、概念和执行逻辑,帮助你理解 Freqtrade 的工作原理。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"configuration","title":"配置 Freqtrade","short_title":"配置","description":"了解如何配置 Freqtrade 交易机器人,包括配置文件、环境变量等多种配置方式","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["配置","参数","环境变量","设置"],"level":1},{"slug":"strategy-101","title":"Freqtrade 策略开发指南","short_title":"策略开发指南","description":"本文档介绍了 Freqtrade 策略开发的基础知识,包括必备概念、策略结构以及如何开发自己的交易策略。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"strategy-customization","title":"策略自定义指南","short_title":"策略自定义","description":"本文档介绍如何在 Freqtrade 中自定义交易策略,包括添加新指标、设置交易规则等内容。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["策略开发","自定义","指标","交易规则","编程"],"level":1},{"slug":"strategy-callbacks","title":"策略回调指南","short_title":"策略回调","description":"本文档详细介绍了 Freqtrade 交易机器人中可用的各种策略回调函数,包括它们的用途、调用时机以及使用方法。","date":"","thumbnail":"/build/freqUI-chart-annotat-6ca425e986932e863842497203176546.png","thumbnailOptimized":"/build/freqUI-chart-annotat-6ca425e986932e863842497203176546.webp","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"stoploss","title":"止损配置指南","short_title":"止损","description":"详细介绍 Freqtrade 中的止损功能,包括静态止损、追踪止损等多种止损模式的配置方法。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"plugins","title":"插件体系","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"bot-usage","title":"机器人使用指南","short_title":"机器人使用","description":"本文档介绍了如何启动和运行 FreqTrade 机器人,包括命令行参数、配置文件使用等基本操作说明。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"level":1,"title":"机器人控制和管理"},{"slug":"telegram-usage","title":"Telegram 使用指南","short_title":"Telegram 指南","description":"本文档详细介绍了如何为 Freqtrade 创建和配置 Telegram 机器人，以及如何获取必要的用户 ID 和群组 ID。","date":"","thumbnail":"/build/telegram_forcebuy-73d7978f775ad92a8fe74de0313966a6.png","thumbnailOptimized":"/build/telegram_forcebuy-73d7978f775ad92a8fe74de0313966a6.webp","banner":"","bannerOptimized":"","tags":["Telegram","通知","机器人","配置","消息推送"],"level":2},{"slug":"freq-ui","title":"FreqUI 用户界面","short_title":"FreqUI","description":"FreqUI 是 Freqtrade 的内置 Web 界面,提供了一个现代化的响应式界面来监控和控制您的交易机器人。本文档介绍了如何安装、配置和使用 FreqUI。","date":"","thumbnail":"/build/frequi-login-CORS-li-92549992a8d3a76bc770a0f5b151e366.png","thumbnailOptimized":"/build/frequi-login-CORS-li-92549992a8d3a76bc770a0f5b151e366.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"rest-api","title":"REST API 指南","short_title":"REST API","description":"本文档介绍了 Freqtrade 的 REST API 功能,包括如何配置 API 服务器、安全设置、身份验证以及各种 API 端点的使用方法。","date":"","thumbnail":"/build/frequi_url-75e93be0830e56c293348021fb304d08.png","thumbnailOptimized":"/build/frequi_url-75e93be0830e56c293348021fb304d08.webp","banner":"","bannerOptimized":"","tags":["REST API","接口","配置","安全","自动化"],"level":2},{"slug":"webhook-config","title":"Webhook 配置指南","short_title":"Webhook 指南","description":"Freqtrade 的 Webhook 功能允许您在交易事件发生时发送通知到外部服务。本文档详细介绍了如何配置和使用 Webhook。","date":"","thumbnail":"/build/discord_notification-0536645313306293db781a3e0e0489d8.png","thumbnailOptimized":"/build/discord_notification-0536645313306293db781a3e0e0489d8.webp","banner":"","bannerOptimized":"","tags":["Webhook","通知","外部服务","事件","配置"],"level":2},{"slug":"data-download","title":"数据下载","description":"了解如何使用 Freqtrade 下载历史交易数据，包括 K 线数据、回测数据和超参优化所需数据的下载方法和命令参数说明","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"backtesting","title":"回测","short_title":"回测","description":"了解如何使用 Freqtrade 的回测功能验证和优化你的交易策略,包括回测命令、参数配置和结果分析","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["回测","策略验证","性能分析","历史数据"],"level":1},{"slug":"hyperopt","title":"Hyperopt 超参数优化指南","short_title":"Hyperopt 指南","description":"Hyperopt 是 Freqtrade 中用于自动化策略参数优化的工具,通过搜索最佳参数组合来提升策略性能。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["超参数优化","Hyperopt","策略优化","机器学习","参数调优"],"level":1},{"level":1,"title":"FreqAI"},{"slug":"freqai","title":"Freqai","description":"","date":"","thumbnail":"/build/freqai_doc_logo-3f2859a5a8ebe9e577941dd454c6c5ee.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"freqai-configuration","title":"FreqAI 配置指南","short_title":"FreqAI 配置","description":"本文档详细介绍了如何配置 FreqAI,包括配置文件设置和策略构建。FreqAI 是 Freqtrade 的机器学习框架,可用于构建和训练预测模型。","date":"","thumbnail":"/build/freqai_pytorch-diagr-d0712f166402f727b4f65efd22bf6315.png","thumbnailOptimized":"/build/freqai_pytorch-diagr-d0712f166402f727b4f65efd22bf6315.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"freqai-parameter-table","title":"FreqAI 参数表","short_title":"参数表","description":"本文档详细列出了 FreqAI 的所有配置参数,包括通用配置参数和特征参数,并对每个参数的功能、数据类型和默认值进行了说明。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"freqai-feature-engineering","title":"FreqAI 特征工程指南","short_title":"特征工程","description":"本文档详细介绍了 FreqAI 的特征工程功能,包括如何定义和扩展特征、数据处理管道、异常值检测等内容。这些功能可以帮助用户构建更强大的预测模型。","date":"","thumbnail":"/build/freqai_weight-factor-70f8aa4395fdd17979cf8f96e17171d0.jpg","thumbnailOptimized":"/build/freqai_weight-factor-70f8aa4395fdd17979cf8f96e17171d0.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"freqai-running","title":"FreqAI 运行指南","short_title":"FreqAI 运行","description":"FreqAI 是一个自适应机器学习框架，本文档介绍了如何在实时和回测模式下运行 FreqAI，包括模型训练、部署和管理等内容。","date":"","thumbnail":"/build/freqai_moving-window-05da86a83d6712baee031086385a7735.jpg","thumbnailOptimized":"/build/freqai_moving-window-05da86a83d6712baee031086385a7735.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"freqai-reinforcement-learning","title":"FreqAI 强化学习指南","short_title":"强化学习","description":"本文档详细介绍了 FreqAI 的强化学习功能,包括基本概念、运行方法、环境配置等内容。这些功能可以帮助用户构建和训练强化学习模型进行自动交易。","date":"","thumbnail":"/build/tensorboard-27f8850881840b007f5a56a202abb949.jpg","thumbnailOptimized":"/build/tensorboard-27f8850881840b007f5a56a202abb949.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"freqai-developers","title":"FreqAI 开发者指南","short_title":"FreqAI 开发","description":"本文档详细介绍了 FreqAI 的项目架构、数据处理流程和文件结构,为开发者提供了深入了解 FreqAI 内部工作原理的指南。","date":"","thumbnail":"/build/freqai_algorithm-dia-6d1ac15cf50f9103773ecaea4b8fd261.jpg","thumbnailOptimized":"/build/freqai_algorithm-dia-6d1ac15cf50f9103773ecaea4b8fd261.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"leverage","title":"使用杠杆交易","description":"了解如何在 Freqtrade 中使用杠杆交易,包括做空、保证金和期货交易等高级功能","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"utils","title":"实用工具命令指南","short_title":"实用工具指南","description":"本文档详细介绍了 Freqtrade 中的各种实用工具子命令,包括创建用户目录、配置文件、列出交易所和交易对等功能。","date":"","thumbnail":"/build/show-config-output-2a74674e687e07d8afa7ace1b96df8bb.png","thumbnailOptimized":"/build/show-config-output-2a74674e687e07d8afa7ace1b96df8bb.webp","banner":"","bannerOptimized":"","tags":["工具","命令","配置","策略","交易所"],"level":1},{"slug":"plotting","title":"绘图","short_title":"绘图","description":"了解如何使用 Freqtrade 的绘图功能可视化价格、指标和利润数据,包括安装配置、命令参数和示例","date":"","thumbnail":"/build/plot-dataframe-40c25f36af7de6fc6f078d42ae5f90f5.png","thumbnailOptimized":"/build/plot-dataframe-40c25f36af7de6fc6f078d42ae5f90f5.webp","banner":"","bannerOptimized":"","tags":["绘图","可视化","指标","回测","利润"],"level":1},{"slug":"exchanges","title":"交易所特定说明","short_title":"交易所说明","description":"了解各个交易所的特殊配置和常见问题","date":"","thumbnail":"/build/binance_futures_sett-b4a8da10c6eb01bf904d6fc3533999b6.png","thumbnailOptimized":"/build/binance_futures_sett-b4a8da10c6eb01bf904d6fc3533999b6.webp","banner":"","bannerOptimized":"","tags":["交易所","配置","API","连接","问题解决"],"level":1},{"level":1,"title":"数据分析"},{"slug":"data-analysis","title":"使用 Jupyter 笔记本分析机器人数据","description":"使用 Jupyter 笔记本分析 Freqtrade 机器人的回测结果和交易历史数据","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"strategy-analysis-example","title":"Freqtrade 策略分析示例","short_title":"策略分析示例","description":"本文档介绍如何使用 Freqtrade 提供的工具来分析和调试交易策略,包括数据可视化、回测分析等功能。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"advanced-backtesting","title":"高级回测分析","short_title":"高级回测","description":"本文档介绍了 FreqTrade 的高级回测分析功能,包括买入/卖出标签分析、信号导出等高级特性。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"高级话题"},{"slug":"advanced-setup","title":"高级安装后配置","short_title":"高级安装","description":"本文档介绍了 FreqTrade 安装后可以执行的高级任务和配置选项,包括多实例运行、日志配置等高级特性。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"trade-object","title":"交易对象文档","short_title":"交易对象指南","description":"本文档详细介绍了 Freqtrade 中的交易对象(Trade)，包括其属性、方法以及在策略中的使用方式。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"lookahead-analysis","title":"前瞻性分析指南","short_title":"前瞻性分析","description":"前瞻性分析是一个用于检测和验证交易策略中是否存在前瞻性偏差的工具。本文档详细介绍了如何使用该工具来确保策略的有效性。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"recursive-analysis","title":"递归分析指南","short_title":"递归分析","description":"递归分析是一个用于检测和验证交易策略中是否存在因递归公式导致的不准确性的工具。本文档详细介绍了如何使用该工具来确保策略的有效性。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"strategy-advanced","title":"Freqtrade 高级策略指南","short_title":"高级策略","description":"本文档详细介绍了 Freqtrade 交易机器人的高级策略开发概念,包括持久化存储、回调方法等进阶功能。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"advanced-hyperopt","title":"高级超参数优化","short_title":"高级超参数优化","description":"本文档介绍了 FreqTrade 的高级超参数优化功能,包括自定义损失函数等高级特性。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"advanced-orderflow","title":"高级委托流分析","short_title":"委托流分析","description":"本文档介绍了 FreqTrade 的委托流分析功能,包括如何配置和使用公共成交数据进行高级委托流分析。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"producer-consumer","title":"生产者/消费者模式","short_title":"生产者/消费者","description":"本文档介绍了 Freqtrade 的生产者/消费者模式,包括如何配置多个机器人实例共享计算指标和信号,以及相关的 websocket 设置。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["生产者","消费者","分布式","多实例","WebSocket"],"level":2},{"slug":"sql-cheatsheet","title":"SQL 助手","short_title":"SQL 助手","description":"本文档提供了使用 SQLite 数据库进行查询的详细指南和常用命令参考。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"edge","title":"Edge Positioning - 边缘定位","short_title":"Edge","description":"Edge Positioning 模块使用概率统计来计算交易胜率和风险回报比,从而优化策略的入场点、头寸大小和止损设置。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["Edge","概率","统计","策略优化","风险管理"],"level":2},{"slug":"faq","title":"Freqtrade 常见问题","short_title":"FAQ","description":"本文档回答了关于 Freqtrade 交易机器人的常见问题,包括支持的市场、初学者指南以及常见问题的故障排除。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"strategy-migration","title":"策略迁移指南","short_title":"策略迁移","description":"本文档详细介绍了如何将 Freqtrade V2 策略迁移到 V3，包括接口变更、方法重命名以及新增功能的完整说明。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"updating","title":"更新指南","short_title":"更新指南","description":"本文档详细介绍了如何更新 Freqtrade 的不同安装方式,包括 Docker、安装脚本和原生安装等方法。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"commands","title":"Commands","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"deprecated","title":"已弃用功能","short_title":"已弃用功能","description":"本文档介绍了 FreqTrade 中已弃用和移除的命令行参数、配置参数和机器人功能,帮助用户避免使用不再受支持的特性。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"developer","title":"开发者指南","short_title":"开发者指南","description":"本文档面向 FreqTrade 的开发者,介绍如何为项目做出贡献、配置开发环境、编写测试以及其他开发相关的重要信息。","date":"","thumbnail":"/build/pycharm_debug-7a8a6d1f4a91d643a2d41ff932bf9a82.png","thumbnailOptimized":"/build/pycharm_debug-7a8a6d1f4a91d643a2d41ff932bf9a82.webp","banner":"","bannerOptimized":"","tags":[],"level":1},{"level":1,"title":"Commands"},{"slug":"main","title":"Main","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"backtesting-analysis","title":"Backtesting Analysis","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"backtesting-1","title":"Backtesting","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"backtesting-show","title":"Backtesting Show","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"convert-data","title":"Convert Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"convert-db","title":"Convert Db","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"convert-trade-data","title":"Convert Trade Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"create-userdir","title":"Create Userdir","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"download-data","title":"Download Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"edge-1","title":"Edge","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"hyperopt-list","title":"Hyperopt List","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"hyperopt-1","title":"Hyperopt","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"hyperopt-show","title":"Hyperopt Show","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"install-ui","title":"Install Ui","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"list-data","title":"List Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"list-exchanges","title":"List Exchanges","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"list-freqaimodels","title":"List Freqaimodels","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"list-hyperoptloss","title":"List Hyperoptloss","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"list-markets","title":"List Markets","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"list-pairs","title":"List Pairs","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"list-strategies","title":"List Strategies","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"list-timeframes","title":"List Timeframes","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"lookahead-analysis-1","title":"Lookahead Analysis","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"new-config","title":"New Config","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"new-strategy","title":"New Strategy","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"plot-dataframe","title":"Plot Dataframe","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"plot-profit","title":"Plot Profit","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"recursive-analysis-1","title":"Recursive Analysis","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"show-config","title":"Show Config","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"show-trades","title":"Show Trades","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"strategy-updater","title":"Strategy Updater","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"test-pairlist","title":"Test Pairlist","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"trade","title":"Trade","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"trades-to-ohlcv","title":"Trades To Ohlcv","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"webserver","title":"Webserver","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2}]}]},"page":{"version":2,"kind":"Article","sha256":"24b1a0fb6cfda330b5d66717675e86f534b0d9715510089a4f992feda16b8af4","slug":"strategy-customization","location":"/strategy-customization.md","dependencies":[],"frontmatter":{"title":"策略自定义指南","description":"本文档介绍如何在 Freqtrade 中自定义交易策略,包括添加新指标、设置交易规则等内容。","short_title":"策略自定义","subtitle":"如何开发自己的交易策略","tags":["策略开发","自定义","指标","交易规则","编程"],"subject":"Freqtrade 策略开发","authors":[{"id":"Freqtrade","name":"Freqtrade"}],"github":"https://github.com/freqtrade-cn/docs_zh-CN","keywords":["Freqtrade","中文文档","交易机器人","量化交易","加密货币","数字货币","区块链","人工智能","机器学习"],"edit_url":"https://github.com/freqtrade-cn/docs_zh-CN/blob/main/strategy-customization.md","exports":[{"format":"md","filename":"strategy-customization.md","url":"/build/strategy-customizati-3765b0778011f76034060803b1ac7ecc.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"策略自定义","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"SyyrZi14jG"}],"identifier":"id","label":"策略自定义","html_id":"id","implicit":true,"key":"a7kxm9VybI"},{"type":"paragraph","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"本页将介绍如何自定义你的策略、添加新指标以及设置交易规则。","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"j6sQgyyOgc"}],"key":"H6jbROBlI1"},{"type":"paragraph","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"如果你还没有了解过，建议先阅读：","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"yZhLOnO0hB"}],"key":"Vn8xi4nzcO"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":24,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"link","url":"/strategy-101","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"Freqtrade 策略 101","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"gaqVhp5xiT"}],"urlSource":"strategy-101.md","dataUrl":"/strategy-101.json","internal":true,"protocol":"file","key":"wUOPGa2qtO"},{"type":"text","value":"，快速入门策略开发","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"UCLBu0D33X"}],"key":"w9kKukCwQT"},{"type":"listItem","spread":true,"position":{"start":{"line":25,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"link","url":"/bot-basics","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"Freqtrade 机器人基础","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"zck3R9C7Nt"}],"urlSource":"bot-basics.md","dataUrl":"/bot-basics.json","internal":true,"protocol":"file","key":"FPiZkiFj79"},{"type":"text","value":"，了解机器人整体运行机制","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"luU4WxzGxg"}],"key":"Jdpz5UJ1dV"}],"key":"aCnTJXgEWD"},{"type":"heading","depth":3,"position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"开发你自己的策略","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"d9ha6x4WjG"}],"identifier":"id","label":"开发你自己的策略","html_id":"id-1","implicit":true,"key":"BYKM2uKy9K"},{"type":"paragraph","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"机器人自带了一个默认策略文件。","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"aIpxrGUIoB"}],"key":"f0OGEuIBlA"},{"type":"paragraph","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"此外，","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"S6ylu01nKy"},{"type":"link","url":"https://github.com/freqtrade/freqtrade-strategies","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"策略仓库","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"FYue0MTPmR"}],"urlSource":"https://github.com/freqtrade/freqtrade-strategies","error":true,"key":"Uq5x9Hro3Y"},{"type":"text","value":"中还提供了其他策略。","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"TVb4IRelmj"}],"key":"o1ySU2JpUf"},{"type":"paragraph","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"text","value":"不过你很可能有自己的策略想法。本文档旨在帮助你将想法转化为可运行的策略。","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"duPUATEDJW"}],"key":"Rp6vv6hK4K"},{"type":"heading","depth":4,"position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"text","value":"生成策略模板","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"pVDbKLoTss"}],"identifier":"id","label":"生成策略模板","html_id":"id-2","implicit":true,"key":"gEnvkkazI2"},{"type":"paragraph","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"text","value":"你可以通过以下命令快速开始：","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"r6VGpXWEhF"}],"key":"L2wPNocWJt"},{"type":"code","lang":"bash","value":"freqtrade new-strategy --strategy AwesomeStrategy","position":{"start":{"line":39,"column":1},"end":{"line":41,"column":1}},"key":"pAwgKat4DB"},{"type":"paragraph","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"children":[{"type":"text","value":"这会基于模板创建一个名为 ","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"ML4Ve07HAf"},{"type":"inlineCode","value":"AwesomeStrategy","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"PjfY1nIX4m"},{"type":"text","value":" 的新策略，文件路径为 ","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"BAu418gIyY"},{"type":"inlineCode","value":"user_data/strategies/AwesomeStrategy.py","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"zrFijASBI6"},{"type":"text","value":"。","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"fCChC9G32O"}],"key":"SFQ09qBFeC"},{"type":"admonition","kind":"warning","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"名称区别","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"hNyHTyt6Xq"}],"key":"sFEUgYss0o"},{"type":"paragraph","position":{"start":{"line":46,"column":1},"end":{"line":46,"column":1}},"children":[{"type":"text","value":"策略的","position":{"start":{"line":46,"column":1},"end":{"line":46,"column":1}},"key":"Az1T1KAwjN"},{"type":"emphasis","position":{"start":{"line":46,"column":1},"end":{"line":46,"column":1}},"children":[{"type":"text","value":"名称","position":{"start":{"line":46,"column":1},"end":{"line":46,"column":1}},"key":"KeSnSNe7OG"}],"key":"WrAePCAMTm"},{"type":"text","value":"和文件名是有区别的。大多数命令中，Freqtrade 使用的是","position":{"start":{"line":46,"column":1},"end":{"line":46,"column":1}},"key":"zrWgMyJ9uD"},{"type":"emphasis","position":{"start":{"line":46,"column":1},"end":{"line":46,"column":1}},"children":[{"type":"text","value":"策略类名","position":{"start":{"line":46,"column":1},"end":{"line":46,"column":1}},"key":"v0mCYDpmyU"}],"key":"R0Xb29rhmh"},{"type":"text","value":"，而不是文件名。","position":{"start":{"line":46,"column":1},"end":{"line":46,"column":1}},"key":"No0XKejBK5"}],"key":"EpseNZBVmy"},{"type":"paragraph","position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"children":[{"type":"inlineCode","value":"new-strategy","position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"key":"Omz8YT07dO"},{"type":"text","value":" 命令生成的示例策略并不会直接盈利。","position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"key":"Gk6xWk4LFB"}],"key":"CzHlBsVBLF"}],"key":"scJ8qzbkH0"},{"type":"admonition","kind":"tip","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"不同模板级别","position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"key":"EhoeO2SUSq"}],"key":"wlHKPnMDVi"},{"type":"paragraph","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"children":[{"type":"inlineCode","value":"freqtrade new-strategy","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"COuqdES1tD"},{"type":"text","value":" 有一个额外参数 ","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"wAjuysJtpc"},{"type":"inlineCode","value":"--template","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"RTtVWKN5hn"},{"type":"text","value":"，可控制生成策略的复杂程度。用 ","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"vDZ6yoZvCH"},{"type":"inlineCode","value":"--template minimal","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"bIzgfhkX8l"},{"type":"text","value":" 可获得一个空白策略，无任何指标示例；用 ","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"dE12ymhfCv"},{"type":"inlineCode","value":"--template advanced","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"TTTW9nzu3A"},{"type":"text","value":" 可获得包含更多复杂特性的模板。","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"ausYIQqXDz"}],"key":"s2ZVKG2Dw8"}],"key":"U1GXGByGpM"},{"type":"heading","depth":4,"position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"children":[{"type":"text","value":"策略结构剖析","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"EnNAVdZLY6"}],"identifier":"id","label":"策略结构剖析","html_id":"id-3","implicit":true,"key":"A6773rr74z"},{"type":"paragraph","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"children":[{"type":"text","value":"一个策略文件包含构建策略逻辑所需的全部信息：","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"HxtZbjX0Ta"}],"key":"OPn3GgiOfB"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":59,"column":1},"end":{"line":73,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"children":[{"type":"text","value":"K线数据（OHLCV 格式）","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"iyCcJLMHRR"}],"key":"v4PhM7l84J"},{"type":"listItem","spread":true,"position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"text","value":"各类指标","position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"key":"wMYa1CBCmj"}],"key":"UWSOUFiTwW"},{"type":"listItem","spread":true,"position":{"start":{"line":61,"column":1},"end":{"line":62,"column":1}},"children":[{"type":"text","value":"入场逻辑","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"key":"b8YdWGoZ79"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":62,"column":1},"end":{"line":62,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":62,"column":1},"end":{"line":62,"column":1}},"children":[{"type":"text","value":"信号","position":{"start":{"line":62,"column":1},"end":{"line":62,"column":1}},"key":"xhqjX8QdDu"}],"key":"ZS5jcprLX5"}],"key":"jsNiAvrBRw"}],"key":"CHJICnL8v8"},{"type":"listItem","spread":true,"position":{"start":{"line":63,"column":1},"end":{"line":66,"column":1}},"children":[{"type":"text","value":"出场逻辑","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"g7iuseS3oX"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":64,"column":1},"end":{"line":66,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"children":[{"type":"text","value":"信号","position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"key":"jSELcqd3Lf"}],"key":"BYtbmsRjpJ"},{"type":"listItem","spread":true,"position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"children":[{"type":"text","value":"最小收益率（ROI）","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"N20olRAfaV"}],"key":"p7X44NTImm"},{"type":"listItem","spread":true,"position":{"start":{"line":66,"column":1},"end":{"line":66,"column":1}},"children":[{"type":"text","value":"回调函数（自定义函数）","position":{"start":{"line":66,"column":1},"end":{"line":66,"column":1}},"key":"PrrHOelTM0"}],"key":"OoGz097yI9"}],"key":"KSIlt8xaKz"}],"key":"TpH1AIjCX9"},{"type":"listItem","spread":true,"position":{"start":{"line":67,"column":1},"end":{"line":70,"column":1}},"children":[{"type":"text","value":"止损","position":{"start":{"line":67,"column":1},"end":{"line":67,"column":1}},"key":"uMMVKX1kvg"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":68,"column":1},"end":{"line":70,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":68,"column":1},"end":{"line":68,"column":1}},"children":[{"type":"text","value":"固定/绝对止损","position":{"start":{"line":68,"column":1},"end":{"line":68,"column":1}},"key":"SPuJMPLQwO"}],"key":"ZiF3u3knHE"},{"type":"listItem","spread":true,"position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"children":[{"type":"text","value":"跟踪止损","position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"key":"qV7o8DLvO2"}],"key":"GmMiYCm5fE"},{"type":"listItem","spread":true,"position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"children":[{"type":"text","value":"回调函数（自定义函数）","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"key":"Opip6EnEQx"}],"key":"VVfeigSnox"}],"key":"ZWKGxATUad"}],"key":"b6jxzorzFD"},{"type":"listItem","spread":true,"position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"children":[{"type":"text","value":"定价（可选）","position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"key":"YQemageJ0K"}],"key":"fV5thDK8W4"},{"type":"listItem","spread":true,"position":{"start":{"line":72,"column":1},"end":{"line":73,"column":1}},"children":[{"type":"text","value":"持仓调整（可选）","position":{"start":{"line":72,"column":1},"end":{"line":72,"column":1}},"key":"Jck740Z6fV"}],"key":"GLHjZaIPK2"}],"key":"rGsr7apDpY"},{"type":"paragraph","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"children":[{"type":"text","value":"机器人自带一个名为 ","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"key":"sN2HdJPjBQ"},{"type":"inlineCode","value":"SampleStrategy","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"key":"V3DMNqosmL"},{"type":"text","value":" 的示例策略，可作为参考：","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"key":"LdVlldfubG"},{"type":"inlineCode","value":"user_data/strategies/sample_strategy.py","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"key":"i5bRiDigzp"},{"type":"text","value":"。","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"key":"XB3yOAmzGI"}],"key":"x6j6diBtPo"},{"type":"paragraph","position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"children":[{"type":"text","value":"你可以用参数 ","position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"key":"wDqCE643vh"},{"type":"inlineCode","value":"--strategy SampleStrategy","position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"key":"vO6QhhEhDb"},{"type":"text","value":" 进行测试。注意这里用的是策略类名，而不是文件名。","position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"key":"AWx7LfFYjk"}],"key":"scN2ckCayd"},{"type":"paragraph","position":{"start":{"line":78,"column":1},"end":{"line":78,"column":1}},"children":[{"type":"text","value":"此外，还有一个名为 ","position":{"start":{"line":78,"column":1},"end":{"line":78,"column":1}},"key":"xa4bwwMq4P"},{"type":"inlineCode","value":"INTERFACE_VERSION","position":{"start":{"line":78,"column":1},"end":{"line":78,"column":1}},"key":"urDsEMiyly"},{"type":"text","value":" 的属性，用于定义策略接口的版本。当前版本为 ","position":{"start":{"line":78,"column":1},"end":{"line":78,"column":1}},"key":"d10dhWSLQe"},{"type":"inlineCode","value":"3","position":{"start":{"line":78,"column":1},"end":{"line":78,"column":1}},"key":"vgsOKJnAqN"},{"type":"text","value":"，如果未在策略中显式设置，则默认为 ","position":{"start":{"line":78,"column":1},"end":{"line":78,"column":1}},"key":"O4CrwcQn9K"},{"type":"inlineCode","value":"3","position":{"start":{"line":78,"column":1},"end":{"line":78,"column":1}},"key":"LsN56bljs0"},{"type":"text","value":"。","position":{"start":{"line":78,"column":1},"end":{"line":78,"column":1}},"key":"IPE2PTWxjw"}],"key":"tTWlBnM2MM"},{"type":"paragraph","position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"children":[{"type":"text","value":"你可能会看到旧策略设置为接口版本 ","position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"key":"t8Speh0xve"},{"type":"inlineCode","value":"2","position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"key":"Y0MeiUqahc"},{"type":"text","value":"，未来版本会要求升级到 ","position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"key":"Xtepx83D0C"},{"type":"inlineCode","value":"v3","position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"key":"P2kC4hqPrW"},{"type":"text","value":"。","position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"key":"sOLu1yUqn2"}],"key":"aHIPnBPfQ7"},{"type":"paragraph","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"children":[{"type":"text","value":"用 ","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"key":"IdAFKFD0fX"},{"type":"inlineCode","value":"trade","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"key":"HU48vpw3MP"},{"type":"text","value":" 命令即可启动机器人进入 ","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"key":"ZfYRHK6WS3"},{"type":"inlineCode","value":"dry","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"key":"kUZJGXZSEZ"},{"type":"text","value":" 或 ","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"key":"S9BWuBzPBA"},{"type":"inlineCode","value":"live","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"key":"Ojjs8iFf2M"},{"type":"text","value":" 模式：","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"key":"D8I4qRgdFm"}],"key":"fN7IiWoN5D"},{"type":"code","lang":"bash","value":"freqtrade trade --strategy AwesomeStrategy","position":{"start":{"line":84,"column":1},"end":{"line":86,"column":1}},"key":"fvoTwulYhn"},{"type":"heading","depth":4,"position":{"start":{"line":88,"column":1},"end":{"line":88,"column":1}},"children":[{"type":"text","value":"机器人运行模式","position":{"start":{"line":88,"column":1},"end":{"line":88,"column":1}},"key":"iqzBmUnolB"}],"identifier":"id","label":"机器人运行模式","html_id":"id-4","implicit":true,"key":"G6CHq3EuJO"},{"type":"paragraph","position":{"start":{"line":90,"column":1},"end":{"line":90,"column":1}},"children":[{"type":"text","value":"Freqtrade 策略可在 ","position":{"start":{"line":90,"column":1},"end":{"line":90,"column":1}},"key":"olObxDq3SW"},{"type":"inlineCode","value":"5","position":{"start":{"line":90,"column":1},"end":{"line":90,"column":1}},"key":"u4wbi2IPtw"},{"type":"text","value":" 种主要模式下被机器人处理：","position":{"start":{"line":90,"column":1},"end":{"line":90,"column":1}},"key":"SBLec5f7zg"}],"key":"EugpAO6ViT"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":92,"column":1},"end":{"line":97,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":92,"column":1},"end":{"line":92,"column":1}},"children":[{"type":"text","value":"回测（backtesting）","position":{"start":{"line":92,"column":1},"end":{"line":92,"column":1}},"key":"EibrqHdemO"}],"key":"kXBYwQcOIM"},{"type":"listItem","spread":true,"position":{"start":{"line":93,"column":1},"end":{"line":93,"column":1}},"children":[{"type":"text","value":"超参优化（hyperopting）","position":{"start":{"line":93,"column":1},"end":{"line":93,"column":1}},"key":"cB1rvBEHdO"}],"key":"HKF8TIBpjG"},{"type":"listItem","spread":true,"position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"children":[{"type":"text","value":"模拟盘（dry/forward testing）","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"key":"EQf9eQBK7Z"}],"key":"Du3PNAYEZO"},{"type":"listItem","spread":true,"position":{"start":{"line":95,"column":1},"end":{"line":95,"column":1}},"children":[{"type":"text","value":"实盘（live）","position":{"start":{"line":95,"column":1},"end":{"line":95,"column":1}},"key":"ymb5q8qj4V"}],"key":"ILYeRl3pbJ"},{"type":"listItem","spread":true,"position":{"start":{"line":96,"column":1},"end":{"line":97,"column":1}},"children":[{"type":"text","value":"FreqAI（本页不涉及）","position":{"start":{"line":96,"column":1},"end":{"line":96,"column":1}},"key":"Frwz9HiY1v"}],"key":"VfVKNQq71f"}],"key":"tLQh41Xpxm"},{"type":"paragraph","position":{"start":{"line":98,"column":1},"end":{"line":98,"column":1}},"children":[{"type":"text","value":"关于如何设置 ","position":{"start":{"line":98,"column":1},"end":{"line":98,"column":1}},"key":"lcuYOHrbna"},{"type":"inlineCode","value":"dry","position":{"start":{"line":98,"column":1},"end":{"line":98,"column":1}},"key":"zHHvywZrup"},{"type":"text","value":" 或 ","position":{"start":{"line":98,"column":1},"end":{"line":98,"column":1}},"key":"MDD4o1Qiol"},{"type":"inlineCode","value":"live","position":{"start":{"line":98,"column":1},"end":{"line":98,"column":1}},"key":"VSDmEZGIOI"},{"type":"text","value":" 模式，请查阅","position":{"start":{"line":98,"column":1},"end":{"line":98,"column":1}},"key":"tlmHSB79UH"},{"type":"crossReference","url":"/configuration","position":{"start":{"line":98,"column":1},"end":{"line":98,"column":1}},"children":[{"type":"text","value":"配置文档","position":{"start":{"line":98,"column":1},"end":{"line":98,"column":1}},"key":"HwL6EsELUw"}],"urlSource":"configuration.md#dry-run-live-mode","dataUrl":"/configuration.json","identifier":"dry-run-live-mode","label":"dry-run-live-mode","remote":true,"protocol":"file","kind":"heading","template":"{name}","resolved":true,"html_id":"dry-run-live-mode","key":"Jp86SUelwB"},{"type":"text","value":"。","position":{"start":{"line":98,"column":1},"end":{"line":98,"column":1}},"key":"T7O3POnsOB"}],"key":"hZOLx2Mes0"},{"type":"paragraph","position":{"start":{"line":100,"column":1},"end":{"line":100,"column":1}},"children":[{"type":"strong","position":{"start":{"line":100,"column":1},"end":{"line":100,"column":1}},"children":[{"type":"text","value":"测试时请始终使用 dry 模式，这样可以在不冒资金风险的情况下了解策略实际表现。","position":{"start":{"line":100,"column":1},"end":{"line":100,"column":1}},"key":"mkFgKTAHQp"}],"key":"SPheOHKDBP"}],"key":"nftaBNYhjw"},{"type":"heading","depth":3,"position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"children":[{"type":"text","value":"深入剖析","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"HgKFJijihs"}],"identifier":"id","label":"深入剖析","html_id":"id-5","implicit":true,"key":"FVNpZlshZ8"},{"type":"paragraph","position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"children":[{"type":"strong","position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"children":[{"type":"text","value":"以下内容将以 ","position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"key":"GGm4u2X0Bb"},{"type":"link","url":"https://github.com/freqtrade/freqtrade/blob/develop/freqtrade/templates/sample_strategy.py","position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"children":[{"type":"text","value":"user​_data​/strategies​/sample​_strategy​.py","position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"key":"YssB7OjTGF"}],"urlSource":"https://github.com/freqtrade/freqtrade/blob/develop/freqtrade/templates/sample_strategy.py","data":{"kind":"file","org":"freqtrade","repo":"freqtrade","reference":"develop","file":"freqtrade/templates/sample_strategy.py","raw":"https://raw.githubusercontent.com/freqtrade/freqtrade/develop/freqtrade/templates/sample_strategy.py"},"internal":false,"protocol":"github","key":"fs7efpluVI"},{"type":"text","value":" 为参考。","position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"key":"e5nR0xXI40"}],"key":"QPfHMC3lsU"}],"key":"aq0R2AyPuU"},{"type":"admonition","kind":"caution","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"策略与回测","position":{"start":{"line":106,"column":1},"end":{"line":106,"column":1}},"key":"otiuBi0ftC"}],"key":"MzjzXVODsa"},{"type":"paragraph","position":{"start":{"line":107,"column":1},"end":{"line":107,"column":1}},"children":[{"type":"text","value":"为避免回测与 dry/live 模式下出现问题和意外差异，请注意回测时 ","position":{"start":{"line":107,"column":1},"end":{"line":107,"column":1}},"key":"hE6dq2xt2n"},{"type":"inlineCode","value":"populate_*()","position":{"start":{"line":107,"column":1},"end":{"line":107,"column":1}},"key":"BPHb9ulpJS"},{"type":"text","value":" 方法会一次性传入完整时间区间。","position":{"start":{"line":107,"column":1},"end":{"line":107,"column":1}},"key":"u8D5Spl5eo"}],"key":"z5vMmBpFXU"},{"type":"paragraph","position":{"start":{"line":109,"column":1},"end":{"line":109,"column":1}},"children":[{"type":"text","value":"因此建议使用向量化操作（针对整个 dataframe，而非循环），避免用 ","position":{"start":{"line":109,"column":1},"end":{"line":109,"column":1}},"key":"XEbPKJqUcR"},{"type":"inlineCode","value":"df.iloc[-1]","position":{"start":{"line":109,"column":1},"end":{"line":109,"column":1}},"key":"OJliD7okCy"},{"type":"text","value":"，而应用 ","position":{"start":{"line":109,"column":1},"end":{"line":109,"column":1}},"key":"D90YTs3r1H"},{"type":"inlineCode","value":"df.shift()","position":{"start":{"line":109,"column":1},"end":{"line":109,"column":1}},"key":"zYReX8zEdV"},{"type":"text","value":" 获取前一根K线。","position":{"start":{"line":109,"column":1},"end":{"line":109,"column":1}},"key":"jxUgZSFmp5"}],"key":"gxOIYUY7lh"}],"key":"pmVWfH9tLf"},{"type":"admonition","kind":"warning","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"警惕未来数据","position":{"start":{"line":112,"column":1},"end":{"line":112,"column":1}},"key":"RFu3zk9JVS"}],"key":"bfqTxLI1Ls"},{"type":"paragraph","position":{"start":{"line":113,"column":1},"end":{"line":113,"column":1}},"children":[{"type":"text","value":"回测时 ","position":{"start":{"line":113,"column":1},"end":{"line":113,"column":1}},"key":"WMaTDOTS9n"},{"type":"inlineCode","value":"populate_*()","position":{"start":{"line":113,"column":1},"end":{"line":113,"column":1}},"key":"Q05Qdwonya"},{"type":"text","value":" 方法会传入完整时间区间，策略作者需确保不使用未来数据。","position":{"start":{"line":113,"column":1},"end":{"line":113,"column":1}},"key":"QjzMXJOCYo"}],"key":"etN8lOz2BD"},{"type":"paragraph","position":{"start":{"line":115,"column":1},"end":{"line":115,"column":1}},"children":[{"type":"text","value":"常见错误模式见文档后面的","position":{"start":{"line":115,"column":1},"end":{"line":115,"column":1}},"key":"oJWEoWROSJ"},{"type":"crossReference","position":{"start":{"line":115,"column":1},"end":{"line":115,"column":1}},"children":[{"type":"text","value":"常见错误","position":{"start":{"line":115,"column":1},"end":{"line":115,"column":1}},"key":"Q5UjvbwvK9"}],"identifier":"common-mistakes-when-developing-strategies","label":"common-mistakes-when-developing-strategies","kind":"heading","template":"{name}","resolved":true,"html_id":"common-mistakes-when-developing-strategies","key":"FS1gcutVX9"},{"type":"text","value":"章节。","position":{"start":{"line":115,"column":1},"end":{"line":115,"column":1}},"key":"tHM9DoFm1U"}],"key":"PpTFsbyu0t"}],"key":"bcNGCQD6fY"},{"type":"admonition","kind":"tip","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"前视与递归分析","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"key":"LpTpjxiQsP"}],"key":"YBIWfaq8RG"},{"type":"paragraph","position":{"start":{"line":119,"column":1},"end":{"line":119,"column":1}},"children":[{"type":"text","value":"Freqtrade 提供了两条命令帮助检测常见的前视（未来数据）和递归偏差（指标值方差）问题。在 dry/live 前，建议先用 ","position":{"start":{"line":119,"column":1},"end":{"line":119,"column":1}},"key":"sVhUZ571o3"},{"type":"link","url":"/lookahead-analysis","position":{"start":{"line":119,"column":1},"end":{"line":119,"column":1}},"children":[{"type":"text","value":"lookahead","position":{"start":{"line":119,"column":1},"end":{"line":119,"column":1}},"key":"aGOrCshDtd"}],"urlSource":"lookahead-analysis.md","dataUrl":"/lookahead-analysis.json","internal":true,"protocol":"file","key":"oXrVPmKcAq"},{"type":"text","value":" 和 ","position":{"start":{"line":119,"column":1},"end":{"line":119,"column":1}},"key":"nI6KfJ8ier"},{"type":"link","url":"/recursive-analysis","position":{"start":{"line":119,"column":1},"end":{"line":119,"column":1}},"children":[{"type":"text","value":"recursive","position":{"start":{"line":119,"column":1},"end":{"line":119,"column":1}},"key":"Th6MeiJ9nG"}],"urlSource":"recursive-analysis.md","dataUrl":"/recursive-analysis.json","internal":true,"protocol":"file","key":"HLPtetSwSZ"},{"type":"text","value":" 工具分析。","position":{"start":{"line":119,"column":1},"end":{"line":119,"column":1}},"key":"UtIJzhwVmK"}],"key":"G8S5XXs57P"}],"key":"QUgN02tYfG"},{"type":"heading","depth":4,"position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"children":[{"type":"text","value":"DataFrame","position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"key":"tDCRUtFV3n"}],"identifier":"dataframe","label":"DataFrame","html_id":"dataframe","implicit":true,"key":"Q4Za22xgfh"},{"type":"paragraph","position":{"start":{"line":124,"column":1},"end":{"line":125,"column":1}},"children":[{"type":"text","value":"Freqtrade 使用 ","position":{"start":{"line":124,"column":1},"end":{"line":124,"column":1}},"key":"PiBxgArrEf"},{"type":"link","url":"https://pandas.pydata.org/","position":{"start":{"line":124,"column":1},"end":{"line":124,"column":1}},"children":[{"type":"text","value":"pandas","position":{"start":{"line":124,"column":1},"end":{"line":124,"column":1}},"key":"Tvyt65k8G6"}],"urlSource":"https://pandas.pydata.org/","key":"s92Jw1qFo8"},{"type":"text","value":" 存储/提供 K 线（OHLCV）数据。\nPandas 是处理表格数据的强大库。","position":{"start":{"line":124,"column":1},"end":{"line":124,"column":1}},"key":"fjfxJ5eDxw"}],"key":"msu07QL3PM"},{"type":"paragraph","position":{"start":{"line":127,"column":1},"end":{"line":127,"column":1}},"children":[{"type":"text","value":"DataFrame 的每一行对应一根K线，最新的完整K线总是排在最后（按日期排序）。","position":{"start":{"line":127,"column":1},"end":{"line":127,"column":1}},"key":"tbcHXxpayA"}],"key":"XenZBs0p9P"},{"type":"paragraph","position":{"start":{"line":129,"column":1},"end":{"line":129,"column":1}},"children":[{"type":"text","value":"用 pandas 的 ","position":{"start":{"line":129,"column":1},"end":{"line":129,"column":1}},"key":"DrficP54PW"},{"type":"inlineCode","value":"head()","position":{"start":{"line":129,"column":1},"end":{"line":129,"column":1}},"key":"okFBHCMe73"},{"type":"text","value":" 查看前几行：","position":{"start":{"line":129,"column":1},"end":{"line":129,"column":1}},"key":"C8NcQE3SZy"}],"key":"iVIMYaOrB5"},{"type":"code","lang":"output","value":"\u003e dataframe.head()\n                       date      open      high       low     close     volume\n0 2021-11-09 23:25:00+00:00  67279.67  67321.84  67255.01  67300.97   44.62253\n1 2021-11-09 23:30:00+00:00  67300.97  67301.34  67183.03  67187.01   61.38076\n2 2021-11-09 23:35:00+00:00  67187.02  67187.02  67031.93  67123.81  113.42728\n3 2021-11-09 23:40:00+00:00  67123.80  67222.40  67080.33  67160.48   78.96008\n4 2021-11-09 23:45:00+00:00  67160.48  67160.48  66901.26  66943.37  111.39292","position":{"start":{"line":131,"column":1},"end":{"line":139,"column":1}},"key":"aFsletTxuQ"},{"type":"paragraph","position":{"start":{"line":141,"column":1},"end":{"line":141,"column":1}},"children":[{"type":"text","value":"DataFrame 是一个表格，列不是单一值，而是一组数据。因此，像下面这样直接用 Python 比较会报错：","position":{"start":{"line":141,"column":1},"end":{"line":141,"column":1}},"key":"aUKpyUZWvp"}],"key":"HDdUgt6u5d"},{"type":"code","lang":"python","value":"    if dataframe['rsi'] \u003e 30:\n        dataframe['enter_long'] = 1","position":{"start":{"line":143,"column":1},"end":{"line":146,"column":1}},"key":"aG7mIQZb74"},{"type":"paragraph","position":{"start":{"line":148,"column":1},"end":{"line":148,"column":1}},"children":[{"type":"text","value":"上述写法会报错：","position":{"start":{"line":148,"column":1},"end":{"line":148,"column":1}},"key":"yOHKyAyuli"},{"type":"inlineCode","value":"The truth value of a Series is ambiguous [...]","position":{"start":{"line":148,"column":1},"end":{"line":148,"column":1}},"key":"JnYWwuAiYU"},{"type":"text","value":"。","position":{"start":{"line":148,"column":1},"end":{"line":148,"column":1}},"key":"qzaWD9aEuv"}],"key":"tFNgoyhAHK"},{"type":"paragraph","position":{"start":{"line":150,"column":1},"end":{"line":150,"column":1}},"children":[{"type":"text","value":"应改为 pandas 向量化写法，对整个 dataframe 执行操作：","position":{"start":{"line":150,"column":1},"end":{"line":150,"column":1}},"key":"VXQofOhk5X"}],"key":"ouaFMZXVBA"},{"type":"code","lang":"python","value":"    dataframe.loc[\n        (dataframe['rsi'] \u003e 30)\n    , 'enter_long'] = 1","position":{"start":{"line":152,"column":1},"end":{"line":156,"column":1}},"key":"i6J43qAKkO"},{"type":"paragraph","position":{"start":{"line":158,"column":1},"end":{"line":158,"column":1}},"children":[{"type":"text","value":"这样会在 RSI 大于 30 时，为新列 ","position":{"start":{"line":158,"column":1},"end":{"line":158,"column":1}},"key":"MG0H13mxYf"},{"type":"inlineCode","value":"enter_long","position":{"start":{"line":158,"column":1},"end":{"line":158,"column":1}},"key":"EqAvfFXtHm"},{"type":"text","value":" 赋值 1。","position":{"start":{"line":158,"column":1},"end":{"line":158,"column":1}},"key":"sVo9iZyMFI"}],"key":"CVQssDa9cB"},{"type":"paragraph","position":{"start":{"line":160,"column":1},"end":{"line":160,"column":1}},"children":[{"type":"text","value":"Freqtrade 会用这个新列作为入场信号，假定下一根K线开盘时开仓。","position":{"start":{"line":160,"column":1},"end":{"line":160,"column":1}},"key":"ZKCQaE41ju"}],"key":"Bktj6wbDmx"},{"type":"paragraph","position":{"start":{"line":162,"column":1},"end":{"line":162,"column":1}},"children":[{"type":"text","value":"Pandas 支持高效的向量化计算，建议尽量避免循环，直接用向量化方法。","position":{"start":{"line":162,"column":1},"end":{"line":162,"column":1}},"key":"qashpH2Iuu"}],"key":"figGJedJQw"},{"type":"paragraph","position":{"start":{"line":164,"column":1},"end":{"line":164,"column":1}},"children":[{"type":"text","value":"向量化操作会对整列数据进行计算，比逐行循环快得多。","position":{"start":{"line":164,"column":1},"end":{"line":164,"column":1}},"key":"TLMDTQT82V"}],"key":"WuYLwc4kfV"},{"type":"admonition","kind":"tip","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"信号 vs 交易","position":{"start":{"line":166,"column":1},"end":{"line":166,"column":1}},"key":"mmrPzsoVwu"}],"key":"EHePH4wyE0"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":168,"column":1},"end":{"line":169,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":168,"column":1},"end":{"line":168,"column":1}},"children":[{"type":"text","value":"信号由指标在K线收盘时生成，表示有意愿开仓。","position":{"start":{"line":168,"column":1},"end":{"line":168,"column":1}},"key":"luoUSqhxIk"}],"key":"ulXe1SoyrG"},{"type":"listItem","spread":true,"position":{"start":{"line":169,"column":1},"end":{"line":169,"column":1}},"children":[{"type":"text","value":"交易是在实际下单（实盘时在交易所），会尽量在下一根K线开盘时成交。","position":{"start":{"line":169,"column":1},"end":{"line":169,"column":1}},"key":"Sp4xJq4oYt"}],"key":"sWKXBgVJbW"}],"key":"jIIB9qrkng"}],"key":"kdpY3TyPm4"},{"type":"admonition","kind":"warning","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"交易下单假设","position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"key":"tqNCk3etXk"}],"key":"WvwvxjNRZv"},{"type":"paragraph","position":{"start":{"line":175,"column":1},"end":{"line":175,"column":1}},"children":[{"type":"text","value":"回测时，信号在K线收盘时生成，交易在下一根K线开盘时执行。","position":{"start":{"line":175,"column":1},"end":{"line":175,"column":1}},"key":"tk3uB8RHIe"}],"key":"rcSsIbQY59"},{"type":"paragraph","position":{"start":{"line":177,"column":1},"end":{"line":177,"column":1}},"children":[{"type":"text","value":"dry/live 模式下，因需先分析所有交易对 dataframe，再处理下单，可能有延迟。建议减少交易对数量，并用高主频 CPU。","position":{"start":{"line":177,"column":1},"end":{"line":177,"column":1}},"key":"XD7aDuCikV"}],"key":"dpJZoCvoTT"}],"key":"stlNY6z8Q0"},{"type":"heading","depth":5,"position":{"start":{"line":181,"column":1},"end":{"line":181,"column":1}},"children":[{"type":"text","value":"为什么看不到\"实时\"K线数据？","position":{"start":{"line":181,"column":1},"end":{"line":181,"column":1}},"key":"WO43hABt5a"}],"identifier":"id-k","label":"为什么看不到\"实时\"K线数据？","html_id":"id-k","implicit":true,"key":"BEcWUuEQac"},{"type":"paragraph","position":{"start":{"line":183,"column":1},"end":{"line":183,"column":1}},"children":[{"type":"text","value":"Freqtrade 不会在 dataframe 中存储未完成/未收盘的K线。","position":{"start":{"line":183,"column":1},"end":{"line":183,"column":1}},"key":"w5neRuMRwj"}],"key":"Rt0SmdQdQj"},{"type":"paragraph","position":{"start":{"line":185,"column":1},"end":{"line":185,"column":1}},"children":[{"type":"text","value":"用未完成数据做决策叫\"重绘\"，有些平台允许，但 Freqtrade 不支持。只有完整K线数据可用。","position":{"start":{"line":185,"column":1},"end":{"line":185,"column":1}},"key":"tzeVPnxruH"}],"key":"Uu2DZ5Icf8"},{"type":"heading","depth":4,"position":{"start":{"line":187,"column":1},"end":{"line":187,"column":1}},"children":[{"type":"text","value":"自定义指标","position":{"start":{"line":187,"column":1},"end":{"line":187,"column":1}},"key":"OULt39YInT"}],"identifier":"id","label":"自定义指标","html_id":"id-6","implicit":true,"key":"gJpMN7A93V"},{"type":"paragraph","position":{"start":{"line":189,"column":1},"end":{"line":189,"column":1}},"children":[{"type":"text","value":"入场和出场信号需要用到指标。你可以在策略文件的 ","position":{"start":{"line":189,"column":1},"end":{"line":189,"column":1}},"key":"PAaeTnPavC"},{"type":"inlineCode","value":"populate_indicators()","position":{"start":{"line":189,"column":1},"end":{"line":189,"column":1}},"key":"yExI96Sugb"},{"type":"text","value":" 方法中添加更多指标。","position":{"start":{"line":189,"column":1},"end":{"line":189,"column":1}},"key":"GwhcxGZ5JC"}],"key":"t2qA9C3cNT"},{"type":"paragraph","position":{"start":{"line":191,"column":1},"end":{"line":191,"column":1}},"children":[{"type":"text","value":"只应添加在 ","position":{"start":{"line":191,"column":1},"end":{"line":191,"column":1}},"key":"rMaPnSYfHx"},{"type":"inlineCode","value":"populate_entry_trend()","position":{"start":{"line":191,"column":1},"end":{"line":191,"column":1}},"key":"aM0fkqAjuS"},{"type":"text","value":"、","position":{"start":{"line":191,"column":1},"end":{"line":191,"column":1}},"key":"eZEIF9GYrd"},{"type":"inlineCode","value":"populate_exit_trend()","position":{"start":{"line":191,"column":1},"end":{"line":191,"column":1}},"key":"Hqd881oYLN"},{"type":"text","value":" 或用于生成其他指标的指标，否则会影响性能。","position":{"start":{"line":191,"column":1},"end":{"line":191,"column":1}},"key":"s1cCLNhQ6q"}],"key":"GbYwJ9myYd"},{"type":"paragraph","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"children":[{"type":"text","value":"务必返回 dataframe，且不要删除/修改 “open”, “high”, “low”, “close”, “volume” 这几列，否则会导致异常。","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"tMOIGZk8FX"}],"key":"agBAMgtdMJ"},{"type":"paragraph","position":{"start":{"line":195,"column":1},"end":{"line":195,"column":1}},"children":[{"type":"text","value":"示例：","position":{"start":{"line":195,"column":1},"end":{"line":195,"column":1}},"key":"zpOf0Cmaro"}],"key":"c0mc0oUcob"},{"type":"code","lang":"python","value":"def populate_indicators(self, dataframe: DataFrame, metadata: dict) -\u003e DataFrame:\n    \"\"\"\n    为给定 DataFrame 添加多种技术指标\n\n    性能提示：为获得最佳性能，请只用你策略或超参优化用到的指标，否则会浪费内存和 CPU。\n    :param dataframe: 交易所数据 DataFrame\n    :param metadata: 额外信息，如当前交易对\n    :return: 包含所有策略所需指标的 DataFrame\n    \"\"\"\n    dataframe['sar'] = ta.SAR(dataframe)\n    dataframe['adx'] = ta.ADX(dataframe)\n    stoch = ta.STOCHF(dataframe)\n    dataframe['fastd'] = stoch['fastd']\n    dataframe['fastk'] = stoch['fastk']\n    dataframe['bb_lower'] = ta.BBANDS(dataframe, nbdevup=2, nbdevdn=2)['lowerband']\n    dataframe['sma'] = ta.SMA(dataframe, timeperiod=40)\n    dataframe['tema'] = ta.TEMA(dataframe, timeperiod=9)\n    dataframe['mfi'] = ta.MFI(dataframe)\n    dataframe['rsi'] = ta.RSI(dataframe)\n    dataframe['ema5'] = ta.EMA(dataframe, timeperiod=5)\n    dataframe['ema10'] = ta.EMA(dataframe, timeperiod=10)\n    dataframe['ema50'] = ta.EMA(dataframe, timeperiod=50)\n    dataframe['ema100'] = ta.EMA(dataframe, timeperiod=100)\n    dataframe['ao'] = awesome_oscillator(dataframe)\n    macd = ta.MACD(dataframe)\n    dataframe['macd'] = macd['macd']\n    dataframe['macdsignal'] = macd['macdsignal']\n    dataframe['macdhist'] = macd['macdhist']\n    hilbert = ta.HT_SINE(dataframe)\n    dataframe['htsine'] = hilbert['sine']\n    dataframe['htleadsine'] = hilbert['leadsine']\n    dataframe['plus_dm'] = ta.PLUS_DM(dataframe)\n    dataframe['plus_di'] = ta.PLUS_DI(dataframe)\n    dataframe['minus_dm'] = ta.MINUS_DM(dataframe)\n    dataframe['minus_di'] = ta.MINUS_DI(dataframe)\n\n    # 记得始终返回 dataframe\n    return dataframe","position":{"start":{"line":197,"column":1},"end":{"line":236,"column":1}},"key":"VmOEnDCRlx"},{"type":"admonition","kind":"warning","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"想要更多指标示例？","position":{"start":{"line":238,"column":1},"end":{"line":238,"column":1}},"key":"WNyiXvle4w"}],"key":"hV63FZLEvM"},{"type":"paragraph","position":{"start":{"line":239,"column":1},"end":{"line":239,"column":1}},"children":[{"type":"text","value":"请参考 ","position":{"start":{"line":239,"column":1},"end":{"line":239,"column":1}},"key":"lhLT0SGjDx"},{"type":"link","url":"https://github.com/freqtrade/freqtrade/blob/develop/freqtrade/templates/sample_strategy.py","position":{"start":{"line":239,"column":1},"end":{"line":239,"column":1}},"children":[{"type":"text","value":"user​_data​/strategies​/sample​_strategy​.py","position":{"start":{"line":239,"column":1},"end":{"line":239,"column":1}},"key":"om99mygw9E"}],"urlSource":"https://github.com/freqtrade/freqtrade/blob/develop/freqtrade/templates/sample_strategy.py","data":{"kind":"file","org":"freqtrade","repo":"freqtrade","reference":"develop","file":"freqtrade/templates/sample_strategy.py","raw":"https://raw.githubusercontent.com/freqtrade/freqtrade/develop/freqtrade/templates/sample_strategy.py"},"internal":false,"protocol":"github","key":"NXJ1n8J7mX"},{"type":"text","value":"，取消注释你需要的指标。","position":{"start":{"line":239,"column":1},"end":{"line":239,"column":1}},"key":"xNJd4s0wGi"}],"key":"yXSNHG1CqH"}],"key":"ksFZGbrm5s"},{"type":"heading","depth":5,"position":{"start":{"line":242,"column":1},"end":{"line":242,"column":1}},"children":[{"type":"text","value":"指标库","position":{"start":{"line":242,"column":1},"end":{"line":242,"column":1}},"key":"JYED7gcJxN"}],"identifier":"id","label":"指标库","html_id":"id-7","implicit":true,"key":"NGUopZyKKp"},{"type":"paragraph","position":{"start":{"line":244,"column":1},"end":{"line":244,"column":1}},"children":[{"type":"text","value":"Freqtrade 默认安装了以下技术指标库：","position":{"start":{"line":244,"column":1},"end":{"line":244,"column":1}},"key":"f4Hol1gvsQ"}],"key":"pZmozfnLFe"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":246,"column":1},"end":{"line":249,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":246,"column":1},"end":{"line":246,"column":1}},"children":[{"type":"link","url":"https://ta-lib.github.io/ta-lib-python/","position":{"start":{"line":246,"column":1},"end":{"line":246,"column":1}},"children":[{"type":"text","value":"ta-lib","position":{"start":{"line":246,"column":1},"end":{"line":246,"column":1}},"key":"Iy236jAJSF"}],"urlSource":"https://ta-lib.github.io/ta-lib-python/","key":"v3FG4VKQVj"}],"key":"I75sy7LGL7"},{"type":"listItem","spread":true,"position":{"start":{"line":247,"column":1},"end":{"line":247,"column":1}},"children":[{"type":"link","url":"https://twopirllc.github.io/pandas-ta/","position":{"start":{"line":247,"column":1},"end":{"line":247,"column":1}},"children":[{"type":"text","value":"pandas-ta","position":{"start":{"line":247,"column":1},"end":{"line":247,"column":1}},"key":"KQHTyD1Fmh"}],"urlSource":"https://twopirllc.github.io/pandas-ta/","key":"eFTmTrvRUt"}],"key":"kQQPnIeQUm"},{"type":"listItem","spread":true,"position":{"start":{"line":248,"column":1},"end":{"line":249,"column":1}},"children":[{"type":"link","url":"https://technical.freqtrade.io","position":{"start":{"line":248,"column":1},"end":{"line":248,"column":1}},"children":[{"type":"text","value":"technical","position":{"start":{"line":248,"column":1},"end":{"line":248,"column":1}},"key":"StfF27VFvw"}],"urlSource":"https://technical.freqtrade.io","key":"oRtb1uBNuk"}],"key":"b9XqxuWMSP"}],"key":"E3reuVsR1I"},{"type":"paragraph","position":{"start":{"line":250,"column":1},"end":{"line":250,"column":1}},"children":[{"type":"text","value":"如有需要可安装其他技术指标库，或自行编写自定义指标。","position":{"start":{"line":250,"column":1},"end":{"line":250,"column":1}},"key":"es8TIix2zI"}],"key":"JYqP7oR3n9"},{"type":"heading","depth":4,"position":{"start":{"line":254,"column":1},"end":{"line":254,"column":1}},"children":[{"type":"text","value":"策略启动期","position":{"start":{"line":254,"column":1},"end":{"line":254,"column":1}},"key":"BsHMD38fNj"}],"label":"strategy-startup-period","identifier":"strategy-startup-period","html_id":"strategy-startup-period","key":"LS40q96xvH"},{"type":"paragraph","position":{"start":{"line":256,"column":1},"end":{"line":256,"column":1}},"children":[{"type":"text","value":"部分指标在启动初期因数据不足会出现 NaN 或计算不准确。Freqtrade 无法自动判断不稳定期长度，会直接用 dataframe 中的指标值。","position":{"start":{"line":256,"column":1},"end":{"line":256,"column":1}},"key":"YZBHO7A3mR"}],"key":"gle8cxnwNq"},{"type":"paragraph","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"children":[{"type":"text","value":"为此，策略可设置 ","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"g88DGkAYLh"},{"type":"inlineCode","value":"startup_candle_count","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"fPBCOIgRPI"},{"type":"text","value":" 属性。","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"RxEinXaJcM"}],"key":"FAhs4cYjyd"},{"type":"paragraph","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"children":[{"type":"text","value":"该值应设为策略中所有指标所需的最大历史K线数。若用到高阶时间周期 informative pair，","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"kHvuhygzoT"},{"type":"inlineCode","value":"startup_candle_count","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"lLyWHc8Xa1"},{"type":"text","value":" 也无需改变，只需用最大周期。","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"BLX0i2LJev"}],"key":"xE4EwedtZf"},{"type":"paragraph","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"children":[{"type":"text","value":"可用 ","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"Iz1KCLT2uh"},{"type":"link","url":"/recursive-analysis","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"children":[{"type":"text","value":"recursive-analysis","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"cMQnUnqXLq"}],"urlSource":"recursive-analysis.md","dataUrl":"/recursive-analysis.json","internal":true,"protocol":"file","key":"cbdTwTCllo"},{"type":"text","value":" 检查合适的 ","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"JSkhjoYeZB"},{"type":"inlineCode","value":"startup_candle_count","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"Kf3oCvb0U6"},{"type":"text","value":"。当递归分析显示方差为 0% 时，说明历史数据已足够。","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"SRVA2e46DV"}],"key":"pQQJrAxZOZ"},{"type":"paragraph","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"children":[{"type":"text","value":"如本例策略用到 ema100，则应设为 400（","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"RQ2rE1h2Hz"},{"type":"inlineCode","value":"startup_candle_count = 400","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"LPbt9ZkK5k"},{"type":"text","value":"），以保证 ema100 计算准确。","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"o4Jndzj7BU"}],"key":"o7BotTFSRV"},{"type":"code","lang":"python","value":"    dataframe['ema100'] = ta.EMA(dataframe, timeperiod=100)","position":{"start":{"line":266,"column":1},"end":{"line":268,"column":1}},"key":"dL5mmfoQWG"},{"type":"paragraph","position":{"start":{"line":270,"column":1},"end":{"line":270,"column":1}},"children":[{"type":"text","value":"告知机器人所需历史长度后，回测和超参优化可从指定时间点开始。","position":{"start":{"line":270,"column":1},"end":{"line":270,"column":1}},"key":"TH5CtPskme"}],"key":"ZZLM2D8eGb"},{"type":"admonition","kind":"warning","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"多次获取 OHLCV 的警告","position":{"start":{"line":272,"column":1},"end":{"line":272,"column":1}},"key":"oxVsCM8drT"}],"key":"HVyJiMyGNs"},{"type":"paragraph","position":{"start":{"line":273,"column":1},"end":{"line":273,"column":1}},"children":[{"type":"text","value":"若收到 ","position":{"start":{"line":273,"column":1},"end":{"line":273,"column":1}},"key":"uxhvEPhwFu"},{"type":"inlineCode","value":"WARNING - Using 3 calls to get OHLCV...","position":{"start":{"line":273,"column":1},"end":{"line":273,"column":1}},"key":"FGWKWFElk8"},{"type":"text","value":"，请考虑是否真的需要这么多历史数据。过多会导致多次网络请求，拖慢机器人刷新速度。","position":{"start":{"line":273,"column":1},"end":{"line":273,"column":1}},"key":"kz1uLEP7SC"}],"key":"LG16zVspBd"},{"type":"paragraph","position":{"start":{"line":275,"column":1},"end":{"line":275,"column":1}},"children":[{"type":"text","value":"最多允许 5 次请求，避免过载。","position":{"start":{"line":275,"column":1},"end":{"line":275,"column":1}},"key":"LssC5Dpai1"}],"key":"zTur6yRGgH"}],"key":"HaY3Ni2UVo"},{"type":"admonition","kind":"warning","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Warning","key":"BZGDClj14J"}],"key":"QfMBzQwaxO"},{"type":"paragraph","position":{"start":{"line":279,"column":1},"end":{"line":279,"column":1}},"children":[{"type":"inlineCode","value":"startup_candle_count","position":{"start":{"line":279,"column":1},"end":{"line":279,"column":1}},"key":"r2ePcCa3bV"},{"type":"text","value":" 应小于 ","position":{"start":{"line":279,"column":1},"end":{"line":279,"column":1}},"key":"Wglx98Moms"},{"type":"inlineCode","value":"ohlcv_candle_limit * 5","position":{"start":{"line":279,"column":1},"end":{"line":279,"column":1}},"key":"GEqrsEvqHh"},{"type":"text","value":"（大多数交易所为 500 * 5），Dry-Run/Live 模式下只会有这么多K线。","position":{"start":{"line":279,"column":1},"end":{"line":279,"column":1}},"key":"itg9cEj0Op"}],"key":"miH3zRZ1F5"}],"key":"L80QYSq4A0"},{"type":"heading","depth":5,"position":{"start":{"line":282,"column":1},"end":{"line":282,"column":1}},"children":[{"type":"text","value":"示例","position":{"start":{"line":282,"column":1},"end":{"line":282,"column":1}},"key":"bjQIgnYL5N"}],"identifier":"id","label":"示例","html_id":"id-8","implicit":true,"key":"bvJh1MQEAX"},{"type":"paragraph","position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"children":[{"type":"text","value":"假设用 EMA100 策略回测 2019 年 1 月的 5m K 线：","position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"key":"WlAM4H91Oo"}],"key":"e8jv7SGdjT"},{"type":"code","lang":"bash","value":"freqtrade backtesting --timerange 20190101-20190201 --timeframe 5m","position":{"start":{"line":286,"column":1},"end":{"line":288,"column":1}},"key":"PfSfFkKxqe"},{"type":"paragraph","position":{"start":{"line":290,"column":1},"end":{"line":290,"column":1}},"children":[{"type":"text","value":"若 ","position":{"start":{"line":290,"column":1},"end":{"line":290,"column":1}},"key":"Xm0P2FEbPn"},{"type":"inlineCode","value":"startup_candle_count","position":{"start":{"line":290,"column":1},"end":{"line":290,"column":1}},"key":"XtE2dEly3w"},{"type":"text","value":" 设为 400，回测会自动加载 400 根K线的历史数据，即从 ","position":{"start":{"line":290,"column":1},"end":{"line":290,"column":1}},"key":"Mh4BTJUvbk"},{"type":"inlineCode","value":"20190101 - (400 * 5m)","position":{"start":{"line":290,"column":1},"end":{"line":290,"column":1}},"key":"o9d41v6O3H"},{"type":"text","value":"，约等于 2018-12-30 11:40:00。","position":{"start":{"line":290,"column":1},"end":{"line":290,"column":1}},"key":"AfsqM6kRm2"}],"key":"xHBJWYtocq"},{"type":"paragraph","position":{"start":{"line":292,"column":1},"end":{"line":292,"column":1}},"children":[{"type":"text","value":"若有该数据，指标会用扩展时间段计算，启动期（到 2019-01-01 00:00:00）会被剔除。","position":{"start":{"line":292,"column":1},"end":{"line":292,"column":1}},"key":"jhhv7flVFV"}],"key":"Xr864sR1an"},{"type":"admonition","kind":"warning","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"启动期数据不可用","position":{"start":{"line":294,"column":1},"end":{"line":294,"column":1}},"key":"YWPKxwADdJ"}],"key":"pTH9dmu2pe"},{"type":"paragraph","position":{"start":{"line":295,"column":1},"end":{"line":295,"column":1}},"children":[{"type":"text","value":"若历史数据不足，回测会自动调整起始时间。例如本例会从 2019-01-02 09:20:00 开始。","position":{"start":{"line":295,"column":1},"end":{"line":295,"column":1}},"key":"MKW4DD7XCD"}],"key":"XV4zP7UWmj"}],"key":"HdYVOTKOLa"},{"type":"heading","depth":4,"position":{"start":{"line":298,"column":1},"end":{"line":298,"column":1}},"children":[{"type":"text","value":"入场信号规则","position":{"start":{"line":298,"column":1},"end":{"line":298,"column":1}},"key":"fvntCGLqU6"}],"identifier":"id","label":"入场信号规则","html_id":"id-9","implicit":true,"key":"NuuaYRanNO"},{"type":"paragraph","position":{"start":{"line":300,"column":1},"end":{"line":300,"column":1}},"children":[{"type":"text","value":"编辑策略文件中的 ","position":{"start":{"line":300,"column":1},"end":{"line":300,"column":1}},"key":"xwWAxIU1Yj"},{"type":"inlineCode","value":"populate_entry_trend()","position":{"start":{"line":300,"column":1},"end":{"line":300,"column":1}},"key":"XXvcyvasrE"},{"type":"text","value":" 方法，更新入场逻辑。","position":{"start":{"line":300,"column":1},"end":{"line":300,"column":1}},"key":"iZTNOHKWpy"}],"key":"fcO9scX1ue"},{"type":"paragraph","position":{"start":{"line":302,"column":1},"end":{"line":302,"column":1}},"children":[{"type":"text","value":"务必返回 dataframe，且不要删除/修改 “open”, “high”, “low”, “close”, “volume” 这几列，否则会导致异常。","position":{"start":{"line":302,"column":1},"end":{"line":302,"column":1}},"key":"NY5vpaDTkb"}],"key":"nm64sTcKGg"},{"type":"paragraph","position":{"start":{"line":304,"column":1},"end":{"line":304,"column":1}},"children":[{"type":"text","value":"该方法还需定义新列 ","position":{"start":{"line":304,"column":1},"end":{"line":304,"column":1}},"key":"d5phdJrFjl"},{"type":"inlineCode","value":"enter_long","position":{"start":{"line":304,"column":1},"end":{"line":304,"column":1}},"key":"sF7IzVdqHk"},{"type":"text","value":"（做空为 ","position":{"start":{"line":304,"column":1},"end":{"line":304,"column":1}},"key":"crjx5bnM2O"},{"type":"inlineCode","value":"enter_short","position":{"start":{"line":304,"column":1},"end":{"line":304,"column":1}},"key":"RE5FuFCZf9"},{"type":"text","value":"），入场时为 1，无操作为 0。即使只做空也必须设置 ","position":{"start":{"line":304,"column":1},"end":{"line":304,"column":1}},"key":"SSMRo78BWq"},{"type":"inlineCode","value":"enter_long","position":{"start":{"line":304,"column":1},"end":{"line":304,"column":1}},"key":"HNZ1o5Z4BI"},{"type":"text","value":"。","position":{"start":{"line":304,"column":1},"end":{"line":304,"column":1}},"key":"vHGsQPGpUj"}],"key":"EfF4y9EXOy"},{"type":"paragraph","position":{"start":{"line":306,"column":1},"end":{"line":306,"column":1}},"children":[{"type":"text","value":"可用 ","position":{"start":{"line":306,"column":1},"end":{"line":306,"column":1}},"key":"l97FRjSSex"},{"type":"inlineCode","value":"enter_tag","position":{"start":{"line":306,"column":1},"end":{"line":306,"column":1}},"key":"dlAGyrsZRG"},{"type":"text","value":" 列为信号命名，便于后续调试和分析。","position":{"start":{"line":306,"column":1},"end":{"line":306,"column":1}},"key":"VQNjsruGbY"}],"key":"U16KTsJOSg"},{"type":"paragraph","position":{"start":{"line":308,"column":1},"end":{"line":308,"column":1}},"children":[{"type":"text","value":"示例（来自 sample_strategy.py）：","position":{"start":{"line":308,"column":1},"end":{"line":308,"column":1}},"key":"pJebM3YVzV"}],"key":"FTEPxN00Yn"},{"type":"code","lang":"python","value":"def populate_entry_trend(self, dataframe: DataFrame, metadata: dict) -\u003e DataFrame:\n    \"\"\"\n    基于技术指标，为给定 dataframe 生成买入信号\n    :param dataframe: 已填充指标的 DataFrame\n    :param metadata: 额外信息，如当前交易对\n    :return: 包含买入信号的 DataFrame\n    \"\"\"\n    dataframe.loc[\n        (\n            (qtpylib.crossed_above(dataframe['rsi'], 30)) \u0026  # RSI 上穿 30\n            (dataframe['tema'] \u003c= dataframe['bb_middleband']) \u0026  # 条件\n            (dataframe['tema'] \u003e dataframe['tema'].shift(1)) \u0026  # 条件\n            (dataframe['volume'] \u003e 0)  # 确保有成交量\n        ),\n        ['enter_long', 'enter_tag']] = (1, 'rsi_cross')\n\n    return dataframe","position":{"start":{"line":310,"column":1},"end":{"line":328,"column":1}},"key":"Z9BcPpu0nH"},{"type":"admonition","kind":"warning","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"做空信号","position":{"start":{"line":330,"column":1},"end":{"line":330,"column":1}},"key":"nNVQLs8MW1"}],"key":"IPeKYS8Udb"},{"type":"paragraph","position":{"start":{"line":331,"column":1},"end":{"line":333,"column":1}},"children":[{"type":"text","value":"做空可通过设置 ","position":{"start":{"line":331,"column":1},"end":{"line":331,"column":1}},"key":"N9EQBcHW9N"},{"type":"inlineCode","value":"enter_short","position":{"start":{"line":331,"column":1},"end":{"line":331,"column":1}},"key":"hHK7TkKC0S"},{"type":"text","value":"（对应多头的 ","position":{"start":{"line":331,"column":1},"end":{"line":331,"column":1}},"key":"wajHLYzl0k"},{"type":"inlineCode","value":"enter_long","position":{"start":{"line":331,"column":1},"end":{"line":331,"column":1}},"key":"K6OrTo7hds"},{"type":"text","value":"）实现。\n","position":{"start":{"line":331,"column":1},"end":{"line":331,"column":1}},"key":"u5kG0DR8QW"},{"type":"inlineCode","value":"enter_tag","position":{"start":{"line":331,"column":1},"end":{"line":331,"column":1}},"key":"wATJLsEUX4"},{"type":"text","value":" 列用法相同。\n做空需交易所和市场支持！如需做空，务必设置 ","position":{"start":{"line":331,"column":1},"end":{"line":331,"column":1}},"key":"ZNTjvUJm7u"},{"type":"link","url":"#can-short","position":{"start":{"line":331,"column":1},"end":{"line":331,"column":1}},"children":[{"type":"inlineCode","value":"can_short","position":{"start":{"line":331,"column":1},"end":{"line":331,"column":1}},"key":"LYrBNn8yBf"}],"urlSource":"#can-short","key":"XbS2ySXReN"},{"type":"text","value":" 为 True。","position":{"start":{"line":331,"column":1},"end":{"line":331,"column":1}},"key":"ILdUVJNsxi"}],"key":"kdkHPrZRzd"},{"type":"code","lang":"python","value":"# 支持多空\ncan_short = True\n\ndef populate_entry_trend(self, dataframe: DataFrame, metadata: dict) -\u003e DataFrame:\n    dataframe.loc[\n        (\n            (qtpylib.crossed_above(dataframe['rsi'], 30)) \u0026\n            (dataframe['tema'] \u003c= dataframe['bb_middleband']) \u0026\n            (dataframe['tema'] \u003e dataframe['tema'].shift(1)) \u0026\n            (dataframe['volume'] \u003e 0)\n        ),\n        ['enter_long', 'enter_tag']] = (1, 'rsi_cross')\n\n    dataframe.loc[\n        (\n            (qtpylib.crossed_below(dataframe['rsi'], 70)) \u0026\n            (dataframe['tema'] \u003e dataframe['bb_middleband']) \u0026\n            (dataframe['tema'] \u003c dataframe['tema'].shift(1)) \u0026\n            (dataframe['volume'] \u003e 0)\n        ),\n        ['enter_short', 'enter_tag']] = (1, 'rsi_cross')\n\n    return dataframe","position":{"start":{"line":335,"column":1},"end":{"line":359,"column":1}},"key":"xyi7THlty4"}],"key":"T4xx26CELf"},{"type":"admonition","kind":"tip","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Tip","key":"NGtTX792kM"}],"key":"LvEN1pYBLP"},{"type":"paragraph","position":{"start":{"line":364,"column":1},"end":{"line":364,"column":1}},"children":[{"type":"text","value":"买入需要有卖方，因此需 ","position":{"start":{"line":364,"column":1},"end":{"line":364,"column":1}},"key":"wgMlDXumpA"},{"type":"inlineCode","value":"dataframe['volume'] \u003e 0","position":{"start":{"line":364,"column":1},"end":{"line":364,"column":1}},"key":"MtvvWdLYWy"},{"type":"text","value":"，避免在无成交量时买入/卖出。","position":{"start":{"line":364,"column":1},"end":{"line":364,"column":1}},"key":"sCuw9v2O8t"}],"key":"mOW768D7eK"}],"key":"SbwSGtuzvW"},{"type":"heading","depth":4,"position":{"start":{"line":367,"column":1},"end":{"line":367,"column":1}},"children":[{"type":"text","value":"出场信号规则","position":{"start":{"line":367,"column":1},"end":{"line":367,"column":1}},"key":"pp15Y9a0pr"}],"identifier":"id","label":"出场信号规则","html_id":"id-10","implicit":true,"key":"QzougARihS"},{"type":"paragraph","position":{"start":{"line":369,"column":1},"end":{"line":369,"column":1}},"children":[{"type":"text","value":"编辑策略文件中的 ","position":{"start":{"line":369,"column":1},"end":{"line":369,"column":1}},"key":"BLebPxLzF3"},{"type":"inlineCode","value":"populate_exit_trend()","position":{"start":{"line":369,"column":1},"end":{"line":369,"column":1}},"key":"f2hT5FeDv7"},{"type":"text","value":" 方法，更新出场逻辑。","position":{"start":{"line":369,"column":1},"end":{"line":369,"column":1}},"key":"udjyund9Oz"}],"key":"gG1H3cc4Wp"},{"type":"paragraph","position":{"start":{"line":371,"column":1},"end":{"line":371,"column":1}},"children":[{"type":"text","value":"可通过在配置或策略中设置 ","position":{"start":{"line":371,"column":1},"end":{"line":371,"column":1}},"key":"G7XoN64MPD"},{"type":"inlineCode","value":"use_exit_signal","position":{"start":{"line":371,"column":1},"end":{"line":371,"column":1}},"key":"MSKeIKdSjK"},{"type":"text","value":" 为 false 禁用出场信号。","position":{"start":{"line":371,"column":1},"end":{"line":371,"column":1}},"key":"eCsi4LCn5v"}],"key":"tYj76CmKlu"},{"type":"paragraph","position":{"start":{"line":373,"column":1},"end":{"line":373,"column":1}},"children":[{"type":"inlineCode","value":"use_exit_signal","position":{"start":{"line":373,"column":1},"end":{"line":373,"column":1}},"key":"pS3KiFfdHp"},{"type":"text","value":" 不影响","position":{"start":{"line":373,"column":1},"end":{"line":373,"column":1}},"key":"JhWJz8DUGs"},{"type":"crossReference","position":{"start":{"line":373,"column":1},"end":{"line":373,"column":1}},"children":[{"type":"text","value":"信号冲突规则","position":{"start":{"line":373,"column":1},"end":{"line":373,"column":1}},"key":"Z2r54vigEZ"}],"identifier":"colliding-signals","label":"colliding-signals","kind":"heading","template":"{name}","resolved":true,"html_id":"colliding-signals","key":"wHeEP16C2L"},{"type":"text","value":"，后者仍然生效，可能阻止入场。","position":{"start":{"line":373,"column":1},"end":{"line":373,"column":1}},"key":"lJYqpoXqgG"}],"key":"K4Kh073fmI"},{"type":"paragraph","position":{"start":{"line":375,"column":1},"end":{"line":375,"column":1}},"children":[{"type":"text","value":"务必返回 dataframe，且不要删除/修改 “open”, “high”, “low”, “close”, “volume” 这几列，否则会导致异常。","position":{"start":{"line":375,"column":1},"end":{"line":375,"column":1}},"key":"ez1Y8HXhkp"}],"key":"ZvhCHcHCZb"},{"type":"paragraph","position":{"start":{"line":377,"column":1},"end":{"line":377,"column":1}},"children":[{"type":"text","value":"该方法还需定义新列 ","position":{"start":{"line":377,"column":1},"end":{"line":377,"column":1}},"key":"lhrDMCxe1D"},{"type":"inlineCode","value":"exit_long","position":{"start":{"line":377,"column":1},"end":{"line":377,"column":1}},"key":"aBK7P44xT4"},{"type":"text","value":"（做空为 ","position":{"start":{"line":377,"column":1},"end":{"line":377,"column":1}},"key":"XOxFBTU7c1"},{"type":"inlineCode","value":"exit_short","position":{"start":{"line":377,"column":1},"end":{"line":377,"column":1}},"key":"iIjoswI4gk"},{"type":"text","value":"），出场时为 1，无操作为 0。","position":{"start":{"line":377,"column":1},"end":{"line":377,"column":1}},"key":"ADq7kqS2xx"}],"key":"jKOpKnYYvs"},{"type":"paragraph","position":{"start":{"line":379,"column":1},"end":{"line":379,"column":1}},"children":[{"type":"text","value":"可用 ","position":{"start":{"line":379,"column":1},"end":{"line":379,"column":1}},"key":"ya5DEjWN1m"},{"type":"inlineCode","value":"exit_tag","position":{"start":{"line":379,"column":1},"end":{"line":379,"column":1}},"key":"VecCyjZXXl"},{"type":"text","value":" 列为信号命名，便于后续调试和分析。","position":{"start":{"line":379,"column":1},"end":{"line":379,"column":1}},"key":"lUKQQQF5UY"}],"key":"NCwYhR6vsb"},{"type":"paragraph","position":{"start":{"line":381,"column":1},"end":{"line":381,"column":1}},"children":[{"type":"text","value":"示例（来自 sample_strategy.py）：","position":{"start":{"line":381,"column":1},"end":{"line":381,"column":1}},"key":"PSGPmeCbgN"}],"key":"RIWI5qWizC"},{"type":"code","lang":"python","value":"def populate_exit_trend(self, dataframe: DataFrame, metadata: dict) -\u003e DataFrame:\n    \"\"\"\n    基于技术指标，为给定 dataframe 生成卖出信号\n    :param dataframe: 已填充指标的 DataFrame\n    :param metadata: 额外信息，如当前交易对\n    :return: 包含卖出信号的 DataFrame\n    \"\"\"\n    dataframe.loc[\n        (\n            (qtpylib.crossed_above(dataframe['rsi'], 70)) \u0026  # RSI 上穿 70\n            (dataframe['tema'] \u003e dataframe['bb_middleband']) \u0026  # 条件\n            (dataframe['tema'] \u003c dataframe['tema'].shift(1)) \u0026  # 条件\n            (dataframe['volume'] \u003e 0)  # 确保有成交量\n        ),\n        ['exit_long', 'exit_tag']] = (1, 'rsi_too_high')\n    return dataframe","position":{"start":{"line":383,"column":1},"end":{"line":400,"column":1}},"key":"veiC74odPB"},{"type":"admonition","kind":"warning","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"做空平仓","position":{"start":{"line":402,"column":1},"end":{"line":402,"column":1}},"key":"X1Hcv6XTzR"}],"key":"ep4ALgQn66"},{"type":"paragraph","position":{"start":{"line":403,"column":1},"end":{"line":403,"column":1}},"children":[{"type":"text","value":"做空平仓可通过设置 ","position":{"start":{"line":403,"column":1},"end":{"line":403,"column":1}},"key":"JRo4IxFw4g"},{"type":"inlineCode","value":"exit_short","position":{"start":{"line":403,"column":1},"end":{"line":403,"column":1}},"key":"b2ONpDmv8b"},{"type":"text","value":"（对应多头的 ","position":{"start":{"line":403,"column":1},"end":{"line":403,"column":1}},"key":"kfPEL0sy3w"},{"type":"inlineCode","value":"exit_long","position":{"start":{"line":403,"column":1},"end":{"line":403,"column":1}},"key":"VSAOXGfwlp"},{"type":"text","value":"）实现。","position":{"start":{"line":403,"column":1},"end":{"line":403,"column":1}},"key":"gOIAE3eWYR"}],"key":"bYDkqMfaDV"},{"type":"paragraph","position":{"start":{"line":405,"column":1},"end":{"line":405,"column":1}},"children":[{"type":"inlineCode","value":"exit_tag","position":{"start":{"line":405,"column":1},"end":{"line":405,"column":1}},"key":"vD4MV7pPuV"},{"type":"text","value":" 列用法相同。","position":{"start":{"line":405,"column":1},"end":{"line":405,"column":1}},"key":"AqhcswLyqZ"}],"key":"grmF2IKvAh"},{"type":"paragraph","position":{"start":{"line":407,"column":1},"end":{"line":407,"column":1}},"children":[{"type":"text","value":"做空需交易所和市场支持！如需做空，务必设置 ","position":{"start":{"line":407,"column":1},"end":{"line":407,"column":1}},"key":"f2GgNp3LCa"},{"type":"link","url":"#can-short","position":{"start":{"line":407,"column":1},"end":{"line":407,"column":1}},"children":[{"type":"inlineCode","value":"can_short","position":{"start":{"line":407,"column":1},"end":{"line":407,"column":1}},"key":"ZVN6Ikwi0S"}],"urlSource":"#can-short","key":"FfeeSestRs"},{"type":"text","value":" 为 True。","position":{"start":{"line":407,"column":1},"end":{"line":407,"column":1}},"key":"ozp9HFiodm"}],"key":"Fcrl4yB2c8"},{"type":"code","lang":"python","value":"    # 支持多空\n    can_short = True\n\n    def populate_exit_trend(self, dataframe: DataFrame, metadata: dict) -\u003e DataFrame:\n        dataframe.loc[\n            (\n                (qtpylib.crossed_above(dataframe['rsi'], 70)) \u0026\n                (dataframe['tema'] \u003e dataframe['bb_middleband']) \u0026\n                (dataframe['tema'] \u003c dataframe['tema'].shift(1)) \u0026\n                (dataframe['volume'] \u003e 0)\n            ),\n            ['exit_long', 'exit_tag']] = (1, 'rsi_too_high')\n        dataframe.loc[\n            (\n                (qtpylib.crossed_below(dataframe['rsi'], 30)) \u0026\n                (dataframe['tema'] \u003c dataframe['bb_middleband']) \u0026\n                (dataframe['tema'] \u003e dataframe['tema'].shift(1)) \u0026\n                (dataframe['volume'] \u003e 0)\n            ),\n            ['exit_short', 'exit_tag']] = (1, 'rsi_too_low')\n        return dataframe","position":{"start":{"line":409,"column":1},"end":{"line":431,"column":1}},"key":"MID9K8SDzG"}],"key":"Th3DPXHnJO"},{"type":"heading","depth":4,"position":{"start":{"line":435,"column":1},"end":{"line":435,"column":1}},"children":[{"type":"text","value":"最小收益率（ROI）","position":{"start":{"line":435,"column":1},"end":{"line":435,"column":1}},"key":"VgA9tci3eU"}],"identifier":"id-roi","label":"最小收益率（ROI）","html_id":"id-roi","implicit":true,"key":"MoiW5UJvUl"},{"type":"paragraph","position":{"start":{"line":437,"column":1},"end":{"line":437,"column":1}},"children":[{"type":"inlineCode","value":"minimal_roi","position":{"start":{"line":437,"column":1},"end":{"line":437,"column":1}},"key":"UhcgddpQOd"},{"type":"text","value":" 策略变量定义了交易在退出前应达到的最小收益率，与出场信号无关。","position":{"start":{"line":437,"column":1},"end":{"line":437,"column":1}},"key":"cY9ue5rKgY"}],"key":"S3jBnBy7MD"},{"type":"paragraph","position":{"start":{"line":439,"column":1},"end":{"line":439,"column":1}},"children":[{"type":"text","value":"格式如下，是一个 python 字典，键为开仓后经过的分钟数，值为百分比：","position":{"start":{"line":439,"column":1},"end":{"line":439,"column":1}},"key":"gShPYYBQVQ"}],"key":"udoJ42estB"},{"type":"code","lang":"python","value":"minimal_roi = {\n    \"40\": 0.0,\n    \"30\": 0.01,\n    \"20\": 0.02,\n    \"0\": 0.04\n}","position":{"start":{"line":441,"column":1},"end":{"line":448,"column":1}},"key":"en6VBbeTbj"},{"type":"paragraph","position":{"start":{"line":450,"column":1},"end":{"line":450,"column":1}},"children":[{"type":"text","value":"上述配置含义：","position":{"start":{"line":450,"column":1},"end":{"line":450,"column":1}},"key":"myZlLs3jQp"}],"key":"Sn0YnSUM25"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":452,"column":1},"end":{"line":456,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":452,"column":1},"end":{"line":452,"column":1}},"children":[{"type":"text","value":"达到 4% 盈利时退出","position":{"start":{"line":452,"column":1},"end":{"line":452,"column":1}},"key":"mqJBHfd1Di"}],"key":"QPUunHWOfJ"},{"type":"listItem","spread":true,"position":{"start":{"line":453,"column":1},"end":{"line":453,"column":1}},"children":[{"type":"text","value":"20 分钟后达到 2% 盈利时退出","position":{"start":{"line":453,"column":1},"end":{"line":453,"column":1}},"key":"HdQqzposW4"}],"key":"ynnOxhCxMn"},{"type":"listItem","spread":true,"position":{"start":{"line":454,"column":1},"end":{"line":454,"column":1}},"children":[{"type":"text","value":"30 分钟后达到 1% 盈利时退出","position":{"start":{"line":454,"column":1},"end":{"line":454,"column":1}},"key":"aO9TnkYLOb"}],"key":"ZEvHsBBDvJ"},{"type":"listItem","spread":true,"position":{"start":{"line":455,"column":1},"end":{"line":456,"column":1}},"children":[{"type":"text","value":"40 分钟后只要不亏损就退出","position":{"start":{"line":455,"column":1},"end":{"line":455,"column":1}},"key":"XHpxbtJReM"}],"key":"ivAiidxovR"}],"key":"OJqXWZoPBC"},{"type":"paragraph","position":{"start":{"line":457,"column":1},"end":{"line":457,"column":1}},"children":[{"type":"text","value":"计算时包含手续费。","position":{"start":{"line":457,"column":1},"end":{"line":457,"column":1}},"key":"C3eJ7H5Lrj"}],"key":"gQ6Nb6kcL0"},{"type":"heading","depth":5,"position":{"start":{"line":459,"column":1},"end":{"line":459,"column":1}},"children":[{"type":"text","value":"禁用最小 ROI","position":{"start":{"line":459,"column":1},"end":{"line":459,"column":1}},"key":"bCpR35Sjvg"}],"identifier":"id-roi","label":"禁用最小 ROI","html_id":"id-roi-1","implicit":true,"key":"NLFe5jXWGi"},{"type":"paragraph","position":{"start":{"line":461,"column":1},"end":{"line":461,"column":1}},"children":[{"type":"text","value":"如需完全禁用 ROI，将其设为空字典：","position":{"start":{"line":461,"column":1},"end":{"line":461,"column":1}},"key":"mCozccWjwy"}],"key":"EqBHh7sCZO"},{"type":"code","lang":"python","value":"minimal_roi = {}","position":{"start":{"line":463,"column":1},"end":{"line":465,"column":1}},"key":"MRn9QjqIpM"},{"type":"heading","depth":5,"position":{"start":{"line":467,"column":1},"end":{"line":467,"column":1}},"children":[{"type":"text","value":"ROI 中用计算表达式","position":{"start":{"line":467,"column":1},"end":{"line":467,"column":1}},"key":"A3j77jZ12d"}],"identifier":"roi","label":"ROI 中用计算表达式","html_id":"roi","implicit":true,"key":"OfE47ZbNfG"},{"type":"paragraph","position":{"start":{"line":469,"column":1},"end":{"line":469,"column":1}},"children":[{"type":"text","value":"如需按K线周期（timeframe）设置时间，可用如下写法：","position":{"start":{"line":469,"column":1},"end":{"line":469,"column":1}},"key":"DoJFqMNkbG"}],"key":"CjlYuVy1T5"},{"type":"code","lang":"python","value":"from freqtrade.exchange import timeframe_to_minutes\n\nclass AwesomeStrategy(IStrategy):\n\n    timeframe = \"1d\"\n    timeframe_mins = timeframe_to_minutes(timeframe)\n    minimal_roi = {\n        \"0\": 0.05,                      # 前 3 根 K 线 5%\n        str(timeframe_mins * 3): 0.02,  # 3 根 K 线后 2%\n        str(timeframe_mins * 6): 0.01,  # 6 根 K 线后 1%\n    }","position":{"start":{"line":471,"column":1},"end":{"line":483,"column":1}},"key":"wg5TVHTD5r"},{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"未立即成交的订单","position":{"start":{"line":485,"column":1},"end":{"line":485,"column":1}},"key":"tr5QAeOfkC"}],"key":"l7CrQBGPpx"},{"type":"paragraph","position":{"start":{"line":486,"column":1},"end":{"line":486,"column":1}},"children":[{"type":"inlineCode","value":"minimal_roi","position":{"start":{"line":486,"column":1},"end":{"line":486,"column":1}},"key":"LARAay1bir"},{"type":"text","value":" 以 ","position":{"start":{"line":486,"column":1},"end":{"line":486,"column":1}},"key":"JjcR5kEitN"},{"type":"inlineCode","value":"trade.open_date","position":{"start":{"line":486,"column":1},"end":{"line":486,"column":1}},"key":"Pa6LIq5Sts"},{"type":"text","value":" 为基准，即首次下单时间。","position":{"start":{"line":486,"column":1},"end":{"line":486,"column":1}},"key":"Wx7sIEsLpW"}],"key":"lwiFNoXF4A"},{"type":"paragraph","position":{"start":{"line":488,"column":1},"end":{"line":488,"column":1}},"children":[{"type":"text","value":"对于未立即成交的限价单（如用 ","position":{"start":{"line":488,"column":1},"end":{"line":488,"column":1}},"key":"sdiAXaxuAO"},{"type":"inlineCode","value":"custom_entry_price()","position":{"start":{"line":488,"column":1},"end":{"line":488,"column":1}},"key":"RYPiWucSQJ"},{"type":"text","value":"），或用 ","position":{"start":{"line":488,"column":1},"end":{"line":488,"column":1}},"key":"r82IgCQZKL"},{"type":"inlineCode","value":"adjust_entry_price()","position":{"start":{"line":488,"column":1},"end":{"line":488,"column":1}},"key":"ZH1MnITSAZ"},{"type":"text","value":" 调整价格的情况，时间仍以首次下单为准。","position":{"start":{"line":488,"column":1},"end":{"line":488,"column":1}},"key":"BH8spa6IBm"}],"key":"d7OxNjZC9o"}],"key":"dpwNZNTJ8z"},{"type":"heading","depth":4,"position":{"start":{"line":491,"column":1},"end":{"line":491,"column":1}},"children":[{"type":"text","value":"止损","position":{"start":{"line":491,"column":1},"end":{"line":491,"column":1}},"key":"xpRoojZBaS"}],"identifier":"id","label":"止损","html_id":"id-11","implicit":true,"key":"xdHN72k5c1"},{"type":"paragraph","position":{"start":{"line":493,"column":1},"end":{"line":493,"column":1}},"children":[{"type":"text","value":"强烈建议设置止损，以保护资金免受极端行情影响。","position":{"start":{"line":493,"column":1},"end":{"line":493,"column":1}},"key":"mtRmkm9IaJ"}],"key":"Wdy7n4R5zl"},{"type":"paragraph","position":{"start":{"line":495,"column":1},"end":{"line":495,"column":1}},"children":[{"type":"text","value":"如设置 10% 止损：","position":{"start":{"line":495,"column":1},"end":{"line":495,"column":1}},"key":"DbDTgMNq1m"}],"key":"BE159dQDIp"},{"type":"code","lang":"python","value":"stoploss = -0.10","position":{"start":{"line":497,"column":1},"end":{"line":499,"column":1}},"key":"bGBUyqbkmE"},{"type":"paragraph","position":{"start":{"line":501,"column":1},"end":{"line":501,"column":1}},"children":[{"type":"text","value":"更多止损功能详见","position":{"start":{"line":501,"column":1},"end":{"line":501,"column":1}},"key":"k7blVtrxWf"},{"type":"link","url":"/stoploss","position":{"start":{"line":501,"column":1},"end":{"line":501,"column":1}},"children":[{"type":"text","value":"止损专页","position":{"start":{"line":501,"column":1},"end":{"line":501,"column":1}},"key":"qCBXlMsZL7"}],"urlSource":"stoploss.md","dataUrl":"/stoploss.json","internal":true,"protocol":"file","key":"dENVFQMgLq"},{"type":"text","value":"。","position":{"start":{"line":501,"column":1},"end":{"line":501,"column":1}},"key":"MyJF2NxaeR"}],"key":"THFf7grC21"},{"type":"heading","depth":4,"position":{"start":{"line":503,"column":1},"end":{"line":503,"column":1}},"children":[{"type":"text","value":"时间周期（Timeframe）","position":{"start":{"line":503,"column":1},"end":{"line":503,"column":1}},"key":"hzahJLBI0n"}],"identifier":"id-timeframe","label":"时间周期（Timeframe）","html_id":"id-timeframe","implicit":true,"key":"E3e8VbsYcv"},{"type":"paragraph","position":{"start":{"line":505,"column":1},"end":{"line":505,"column":1}},"children":[{"type":"text","value":"即策略用的K线周期。","position":{"start":{"line":505,"column":1},"end":{"line":505,"column":1}},"key":"tKL90z1zQ5"}],"key":"cn1eNOAYb5"},{"type":"paragraph","position":{"start":{"line":507,"column":1},"end":{"line":507,"column":1}},"children":[{"type":"text","value":"常见值有 “1m”、“5m”、“15m”、“1h”，也可用交易所支持的其他周期。","position":{"start":{"line":507,"column":1},"end":{"line":507,"column":1}},"key":"Yzjuf5fQjJ"}],"key":"j3ZSM6LMcr"},{"type":"paragraph","position":{"start":{"line":509,"column":1},"end":{"line":509,"column":1}},"children":[{"type":"text","value":"同一入场/出场信号在不同周期下效果可能完全不同。","position":{"start":{"line":509,"column":1},"end":{"line":509,"column":1}},"key":"qJn3xG54E3"}],"key":"iTDmgAcNef"},{"type":"paragraph","position":{"start":{"line":511,"column":1},"end":{"line":511,"column":1}},"children":[{"type":"text","value":"在策略方法中可通过 ","position":{"start":{"line":511,"column":1},"end":{"line":511,"column":1}},"key":"kpLHtj730x"},{"type":"inlineCode","value":"self.timeframe","position":{"start":{"line":511,"column":1},"end":{"line":511,"column":1}},"key":"bWcoCk6qrX"},{"type":"text","value":" 访问。","position":{"start":{"line":511,"column":1},"end":{"line":511,"column":1}},"key":"KPiOtxKttO"}],"key":"lPVKolBK9E"},{"type":"heading","depth":4,"position":{"start":{"line":513,"column":1},"end":{"line":513,"column":1}},"children":[{"type":"text","value":"是否支持做空","position":{"start":{"line":513,"column":1},"end":{"line":513,"column":1}},"key":"x3qnBljxqs"}],"identifier":"id","label":"是否支持做空","html_id":"id-12","implicit":true,"key":"WEKPztI5p9"},{"type":"paragraph","position":{"start":{"line":515,"column":1},"end":{"line":515,"column":1}},"children":[{"type":"text","value":"如需在合约市场做空，需设置 ","position":{"start":{"line":515,"column":1},"end":{"line":515,"column":1}},"key":"bnilNOWjaW"},{"type":"inlineCode","value":"can_short = True","position":{"start":{"line":515,"column":1},"end":{"line":515,"column":1}},"key":"dfwoAgpgU1"},{"type":"text","value":"。","position":{"start":{"line":515,"column":1},"end":{"line":515,"column":1}},"key":"iXp3Jxpcre"}],"key":"wCOpKousoA"},{"type":"paragraph","position":{"start":{"line":517,"column":1},"end":{"line":517,"column":1}},"children":[{"type":"text","value":"启用后，策略在现货市场会加载失败。","position":{"start":{"line":517,"column":1},"end":{"line":517,"column":1}},"key":"SykhcAgl44"}],"key":"RGyiPtI9LC"},{"type":"paragraph","position":{"start":{"line":519,"column":1},"end":{"line":519,"column":1}},"children":[{"type":"text","value":"如 ","position":{"start":{"line":519,"column":1},"end":{"line":519,"column":1}},"key":"UBZNpe61gA"},{"type":"inlineCode","value":"enter_short","position":{"start":{"line":519,"column":1},"end":{"line":519,"column":1}},"key":"IAqi4vTY1s"},{"type":"text","value":" 列有 1，但 ","position":{"start":{"line":519,"column":1},"end":{"line":519,"column":1}},"key":"O142QeLJ3F"},{"type":"inlineCode","value":"can_short = False","position":{"start":{"line":519,"column":1},"end":{"line":519,"column":1}},"key":"S166S2QODC"},{"type":"text","value":"（默认），则即使配置了合约市场也不会做空。","position":{"start":{"line":519,"column":1},"end":{"line":519,"column":1}},"key":"c3FSf0HYij"}],"key":"PCqX0FSMwc"},{"type":"heading","depth":4,"position":{"start":{"line":521,"column":1},"end":{"line":521,"column":1}},"children":[{"type":"text","value":"Metadata 字典","position":{"start":{"line":521,"column":1},"end":{"line":521,"column":1}},"key":"m3ZUHLyU5u"}],"identifier":"metadata","label":"Metadata 字典","html_id":"metadata","implicit":true,"key":"QqujfQt0Xt"},{"type":"paragraph","position":{"start":{"line":523,"column":1},"end":{"line":524,"column":1}},"children":[{"type":"inlineCode","value":"metadata","position":{"start":{"line":523,"column":1},"end":{"line":523,"column":1}},"key":"epNqhAk0Lg"},{"type":"text","value":" 字典（","position":{"start":{"line":523,"column":1},"end":{"line":523,"column":1}},"key":"xDcYAkRzkN"},{"type":"inlineCode","value":"populate_entry_trend","position":{"start":{"line":523,"column":1},"end":{"line":523,"column":1}},"key":"qzmxhfaKmy"},{"type":"text","value":"、","position":{"start":{"line":523,"column":1},"end":{"line":523,"column":1}},"key":"HbiBGOeZCd"},{"type":"inlineCode","value":"populate_exit_trend","position":{"start":{"line":523,"column":1},"end":{"line":523,"column":1}},"key":"u7vkSesFNz"},{"type":"text","value":"、","position":{"start":{"line":523,"column":1},"end":{"line":523,"column":1}},"key":"sRQ9Ncixaf"},{"type":"inlineCode","value":"populate_indicators","position":{"start":{"line":523,"column":1},"end":{"line":523,"column":1}},"key":"ACOxk8ZP9I"},{"type":"text","value":" 可用）包含额外信息。\n目前有 ","position":{"start":{"line":523,"column":1},"end":{"line":523,"column":1}},"key":"boJXLP3Nwf"},{"type":"inlineCode","value":"pair","position":{"start":{"line":523,"column":1},"end":{"line":523,"column":1}},"key":"axpQwrtZZF"},{"type":"text","value":"，可通过 ","position":{"start":{"line":523,"column":1},"end":{"line":523,"column":1}},"key":"wXpVGb4sUD"},{"type":"inlineCode","value":"metadata['pair']","position":{"start":{"line":523,"column":1},"end":{"line":523,"column":1}},"key":"U3gZVgOx3x"},{"type":"text","value":" 获取，如 ","position":{"start":{"line":523,"column":1},"end":{"line":523,"column":1}},"key":"DRgkL3owj6"},{"type":"inlineCode","value":"XRP/BTC","position":{"start":{"line":523,"column":1},"end":{"line":523,"column":1}},"key":"m2Mh34YbN2"},{"type":"text","value":"（合约市场为 ","position":{"start":{"line":523,"column":1},"end":{"line":523,"column":1}},"key":"yhbijA0oxJ"},{"type":"inlineCode","value":"XRP/BTC:BTC","position":{"start":{"line":523,"column":1},"end":{"line":523,"column":1}},"key":"iN9tGeoBgm"},{"type":"text","value":"）。","position":{"start":{"line":523,"column":1},"end":{"line":523,"column":1}},"key":"DGV2313Nq0"}],"key":"oN5dWUIUyi"},{"type":"paragraph","position":{"start":{"line":526,"column":1},"end":{"line":526,"column":1}},"children":[{"type":"text","value":"metadata 不应被修改，也不会在策略函数间持久化。","position":{"start":{"line":526,"column":1},"end":{"line":526,"column":1}},"key":"QHHhHWeAYv"}],"key":"JwDaqmJvO3"},{"type":"paragraph","position":{"start":{"line":528,"column":1},"end":{"line":528,"column":1}},"children":[{"type":"text","value":"如需持久化信息，请查阅","position":{"start":{"line":528,"column":1},"end":{"line":528,"column":1}},"key":"QgSbRVXkkw"},{"type":"crossReference","url":"/strategy-advanced","position":{"start":{"line":528,"column":1},"end":{"line":528,"column":1}},"children":[{"type":"text","value":"信息存储","position":{"start":{"line":528,"column":1},"end":{"line":528,"column":1}},"key":"joKZPrdYRf"}],"urlSource":"strategy-advanced.md#storing-information-persistent","dataUrl":"/strategy-advanced.json","identifier":"storing-information-persistent","label":"storing-information-persistent","remote":true,"protocol":"file","key":"k4RpDv4YRn"},{"type":"text","value":"。","position":{"start":{"line":528,"column":1},"end":{"line":528,"column":1}},"key":"YGNT5QYn5p"}],"key":"UrPzA7Uiib"},{"type":"include","file":"includes/strategy-imports.md","literal":false,"lang":"markdown","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"策略所需的导入","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"kQjwyQH5gg"}],"identifier":"id","label":"策略所需的导入","html_id":"id-13","implicit":true,"key":"gWHKj4zdQq"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"在创建策略时，你需要导入必要的模块和类。以下是一个策略所需的导入：","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Xp2MI3QAGw"}],"key":"I1CF7U4evM"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"默认情况下，我们建议使用以下导入作为策略的基础：\n这将涵盖 freqtrade 功能所需的所有导入。\n当然，你可以根据需要添加更多导入。","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"saoTlV3gW3"}],"key":"XOJZZjCER7"},{"type":"code","lang":"python","value":"# flake8: noqa: F401\n# isort: skip_file\n# --- Do not remove these imports ---\nimport numpy as np\nimport pandas as pd\nfrom datetime import datetime, timedelta, timezone\nfrom pandas import DataFrame\nfrom typing import Dict, Optional, Union, Tuple\n\nfrom freqtrade.strategy import (\n    IStrategy,\n    Trade, \n    Order,\n    PairLocks,\n    informative,  # @informative decorator\n    # Hyperopt Parameters\n    BooleanParameter,\n    CategoricalParameter,\n    DecimalParameter,\n    IntParameter,\n    RealParameter,\n    # timeframe helpers\n    timeframe_to_minutes,\n    timeframe_to_next_date,\n    timeframe_to_prev_date,\n    # Strategy helper functions\n    merge_informative_pair,\n    stoploss_from_absolute,\n    stoploss_from_open,\n)\n\n# --------------------------------\n# Add your lib to import here\nimport talib.abstract as ta\nfrom technical import qtpylib","position":{"start":{"line":9,"column":1},"end":{"line":45,"column":1}},"key":"IEmcH8OAnp"}],"key":"cVKRsdrNjD"},{"type":"heading","depth":3,"position":{"start":{"line":533,"column":1},"end":{"line":533,"column":1}},"children":[{"type":"text","value":"策略文件加载","position":{"start":{"line":533,"column":1},"end":{"line":533,"column":1}},"key":"FKlj18sc7s"}],"identifier":"id","label":"策略文件加载","html_id":"id-14","implicit":true,"key":"qGAEteko5o"},{"type":"paragraph","position":{"start":{"line":535,"column":1},"end":{"line":535,"column":1}},"children":[{"type":"text","value":"默认情况下，freqtrade 会尝试从 ","position":{"start":{"line":535,"column":1},"end":{"line":535,"column":1}},"key":"qATgbXzMLt"},{"type":"inlineCode","value":"userdir","position":{"start":{"line":535,"column":1},"end":{"line":535,"column":1}},"key":"iQU6U8hZeN"},{"type":"text","value":"（默认 ","position":{"start":{"line":535,"column":1},"end":{"line":535,"column":1}},"key":"tbi7FAEwO1"},{"type":"inlineCode","value":"user_data/strategies","position":{"start":{"line":535,"column":1},"end":{"line":535,"column":1}},"key":"bNV0G2wC0n"},{"type":"text","value":"）下所有 ","position":{"start":{"line":535,"column":1},"end":{"line":535,"column":1}},"key":"zeGIiQATYx"},{"type":"inlineCode","value":".py","position":{"start":{"line":535,"column":1},"end":{"line":535,"column":1}},"key":"BQPzDLEAns"},{"type":"text","value":" 文件加载策略。","position":{"start":{"line":535,"column":1},"end":{"line":535,"column":1}},"key":"m1ih5UZdgo"}],"key":"NyPxSWxUCx"},{"type":"paragraph","position":{"start":{"line":537,"column":1},"end":{"line":537,"column":1}},"children":[{"type":"text","value":"假设你的策略叫 ","position":{"start":{"line":537,"column":1},"end":{"line":537,"column":1}},"key":"aNXVWaoBzs"},{"type":"inlineCode","value":"AwesomeStrategy","position":{"start":{"line":537,"column":1},"end":{"line":537,"column":1}},"key":"dSWxbBz3Ti"},{"type":"text","value":"，文件为 ","position":{"start":{"line":537,"column":1},"end":{"line":537,"column":1}},"key":"m7qjtGYq3f"},{"type":"inlineCode","value":"user_data/strategies/AwesomeStrategy.py","position":{"start":{"line":537,"column":1},"end":{"line":537,"column":1}},"key":"RodOd46E1a"},{"type":"text","value":"，可用如下命令 dry（或 live，视配置而定）运行：","position":{"start":{"line":537,"column":1},"end":{"line":537,"column":1}},"key":"aXlBTsmdh1"}],"key":"asZmDiusPT"},{"type":"code","lang":"bash","value":"freqtrade trade --strategy AwesomeStrategy","position":{"start":{"line":539,"column":1},"end":{"line":541,"column":1}},"key":"sTogwontPZ"},{"type":"paragraph","position":{"start":{"line":543,"column":1},"end":{"line":543,"column":1}},"children":[{"type":"text","value":"注意这里用的是类名，不是文件名。","position":{"start":{"line":543,"column":1},"end":{"line":543,"column":1}},"key":"XP876RgUwI"}],"key":"FbhrJXbKhX"},{"type":"paragraph","position":{"start":{"line":545,"column":1},"end":{"line":545,"column":1}},"children":[{"type":"text","value":"用 ","position":{"start":{"line":545,"column":1},"end":{"line":545,"column":1}},"key":"v0Cv9JkhK5"},{"type":"inlineCode","value":"freqtrade list-strategies","position":{"start":{"line":545,"column":1},"end":{"line":545,"column":1}},"key":"lP0GWoYFPW"},{"type":"text","value":" 可查看所有可加载的策略（正确目录下的所有策略）。会有\"状态\"字段，提示潜在问题。","position":{"start":{"line":545,"column":1},"end":{"line":545,"column":1}},"key":"vQJNxi6KSw"}],"key":"qGcAewwjin"},{"type":"admonition","kind":"tip","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"自定义策略目录","position":{"start":{"line":547,"column":1},"end":{"line":547,"column":1}},"key":"lOiYIjVr5D"}],"key":"BjBcsnXyjG"},{"type":"paragraph","position":{"start":{"line":548,"column":1},"end":{"line":548,"column":1}},"children":[{"type":"text","value":"可用 ","position":{"start":{"line":548,"column":1},"end":{"line":548,"column":1}},"key":"ODPs9YOcA5"},{"type":"inlineCode","value":"--strategy-path user_data/otherPath","position":{"start":{"line":548,"column":1},"end":{"line":548,"column":1}},"key":"rm2zD8ctN5"},{"type":"text","value":" 指定其他目录。所有需用策略的命令均支持此参数。","position":{"start":{"line":548,"column":1},"end":{"line":548,"column":1}},"key":"zaklhHTw5D"}],"key":"tyUYgaEH8y"}],"key":"UauTvghNS8"},{"type":"heading","depth":3,"position":{"start":{"line":553,"column":1},"end":{"line":553,"column":1}},"children":[{"type":"text","value":"辅助交易对（Informative Pairs）","position":{"start":{"line":553,"column":1},"end":{"line":553,"column":1}},"key":"ZuXDzDmWyT"}],"label":"informative-pairs","identifier":"informative-pairs","html_id":"informative-pairs","key":"CUZeOGeOD5"},{"type":"heading","depth":4,"position":{"start":{"line":557,"column":1},"end":{"line":557,"column":1}},"children":[{"type":"text","value":"获取非交易对的数据","position":{"start":{"line":557,"column":1},"end":{"line":557,"column":1}},"key":"LTZ3rWHRnE"}],"label":"get-data-for-non-tradeable-pairs","identifier":"get-data-for-non-tradeable-pairs","html_id":"get-data-for-non-tradeable-pairs","key":"wmxr5ym2cc"},{"type":"paragraph","position":{"start":{"line":559,"column":1},"end":{"line":559,"column":1}},"children":[{"type":"text","value":"有些策略需要参考更大周期的其他交易对数据。","position":{"start":{"line":559,"column":1},"end":{"line":559,"column":1}},"key":"zLeoCy2PX0"}],"key":"HBOC1boSh3"},{"type":"paragraph","position":{"start":{"line":561,"column":1},"end":{"line":561,"column":1}},"children":[{"type":"text","value":"这些辅助对的 OHLCV 数据会在常规白名单刷新时一并下载，可通过 ","position":{"start":{"line":561,"column":1},"end":{"line":561,"column":1}},"key":"lDiDnyAmjM"},{"type":"inlineCode","value":"DataProvider","position":{"start":{"line":561,"column":1},"end":{"line":561,"column":1}},"key":"E6PlRLMFIK"},{"type":"text","value":" 获取。","position":{"start":{"line":561,"column":1},"end":{"line":561,"column":1}},"key":"l0hwhrNoP7"}],"key":"f7M9qWK8uz"},{"type":"paragraph","position":{"start":{"line":563,"column":1},"end":{"line":563,"column":1}},"children":[{"type":"text","value":"这些对","position":{"start":{"line":563,"column":1},"end":{"line":563,"column":1}},"key":"nFhyMnico7"},{"type":"strong","position":{"start":{"line":563,"column":1},"end":{"line":563,"column":1}},"children":[{"type":"text","value":"不会","position":{"start":{"line":563,"column":1},"end":{"line":563,"column":1}},"key":"JlIVo1HBPj"}],"key":"j9o8dVAy54"},{"type":"text","value":"被交易，除非也在白名单或被动态白名单（如 ","position":{"start":{"line":563,"column":1},"end":{"line":563,"column":1}},"key":"C267x5PBAa"},{"type":"inlineCode","value":"VolumePairlist","position":{"start":{"line":563,"column":1},"end":{"line":563,"column":1}},"key":"EmXN9gIoWr"},{"type":"text","value":"）选中。","position":{"start":{"line":563,"column":1},"end":{"line":563,"column":1}},"key":"DbKPYM1Sgp"}],"key":"MOKBwO7MRO"},{"type":"paragraph","position":{"start":{"line":565,"column":1},"end":{"line":565,"column":1}},"children":[{"type":"text","value":"需用元组指定，格式为 ","position":{"start":{"line":565,"column":1},"end":{"line":565,"column":1}},"key":"lkTjrjzO8e"},{"type":"inlineCode","value":"(\"pair\", \"timeframe\")","position":{"start":{"line":565,"column":1},"end":{"line":565,"column":1}},"key":"zt2NMBeqlL"},{"type":"text","value":"，第一个为交易对，第二个为周期。","position":{"start":{"line":565,"column":1},"end":{"line":565,"column":1}},"key":"vFaWxwrjYQ"}],"key":"zFhZflMSf1"},{"type":"paragraph","position":{"start":{"line":567,"column":1},"end":{"line":567,"column":1}},"children":[{"type":"text","value":"示例：","position":{"start":{"line":567,"column":1},"end":{"line":567,"column":1}},"key":"oQyV4U4vU9"}],"key":"hOniUbIdVf"},{"type":"code","lang":"python","value":"def informative_pairs(self):\n    return [(\"ETH/USDT\", \"5m\"),\n            (\"BTC/TUSD\", \"15m\"),\n            ]","position":{"start":{"line":569,"column":1},"end":{"line":574,"column":1}},"key":"na7vhLzCgt"},{"type":"paragraph","position":{"start":{"line":576,"column":1},"end":{"line":576,"column":1}},"children":[{"type":"text","value":"完整示例见","position":{"start":{"line":576,"column":1},"end":{"line":576,"column":1}},"key":"SKw26Laigf"},{"type":"crossReference","position":{"start":{"line":576,"column":1},"end":{"line":576,"column":1}},"children":[{"type":"text","value":"DataProvider 部分","position":{"start":{"line":576,"column":1},"end":{"line":576,"column":1}},"key":"EUUR2vjICZ"}],"identifier":"complete-dataprovider-sample","label":"complete-dataprovider-sample","kind":"heading","template":"{name}","resolved":true,"html_id":"complete-dataprovider-sample","key":"pd03rBWPta"},{"type":"text","value":"。","position":{"start":{"line":576,"column":1},"end":{"line":576,"column":1}},"key":"vJXZ702xXv"}],"key":"eHHyTkTMxv"},{"type":"admonition","kind":"warning","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Warning","key":"L5Jl1nXwaT"}],"key":"KpKRPcjR0m"},{"type":"paragraph","position":{"start":{"line":579,"column":1},"end":{"line":579,"column":1}},"children":[{"type":"text","value":"这些对会随白名单刷新，建议列表不要太长。","position":{"start":{"line":579,"column":1},"end":{"line":579,"column":1}},"key":"DDve2FN8ef"}],"key":"WYJabewAYa"},{"type":"paragraph","position":{"start":{"line":581,"column":1},"end":{"line":581,"column":1}},"children":[{"type":"text","value":"只要交易所支持，所有周期和对都可用。","position":{"start":{"line":581,"column":1},"end":{"line":581,"column":1}},"key":"quZeM0ECRU"}],"key":"nTD5xjhXn2"},{"type":"paragraph","position":{"start":{"line":583,"column":1},"end":{"line":583,"column":1}},"children":[{"type":"text","value":"但建议尽量用重采样方式获取大周期，避免请求过多被封。","position":{"start":{"line":583,"column":1},"end":{"line":583,"column":1}},"key":"xd4UWcVq1x"}],"key":"edLXd59Hte"}],"key":"KNhXFQZFfP"},{"type":"admonition","kind":"attention","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"其他K线类型","position":{"start":{"line":586,"column":1},"end":{"line":586,"column":1}},"key":"g4SeKRN5NN"}],"key":"F99J2SDRMO"},{"type":"paragraph","position":{"start":{"line":587,"column":1},"end":{"line":587,"column":1}},"children":[{"type":"text","value":"informative_pairs 还可加第三个元素，显式指定K线类型。","position":{"start":{"line":587,"column":1},"end":{"line":587,"column":1}},"key":"IVrHwdp2Xt"}],"key":"FdTKflCMv9"},{"type":"paragraph","position":{"start":{"line":589,"column":1},"end":{"line":589,"column":1}},"children":[{"type":"text","value":"可用性取决于交易模式和交易所。一般现货对不能用于合约市场，反之亦然。","position":{"start":{"line":589,"column":1},"end":{"line":589,"column":1}},"key":"dYOPxg4QoG"}],"key":"bpxBpyWEHS"},{"type":"paragraph","position":{"start":{"line":591,"column":1},"end":{"line":591,"column":1}},"children":[{"type":"text","value":"详情见交易所文档。","position":{"start":{"line":591,"column":1},"end":{"line":591,"column":1}},"key":"Wrvd32ExHU"}],"key":"KR9UTRbWoY"}],"key":"cIYshLXTyy"},{"type":"code","lang":"python","value":"    def informative_pairs(self):\n        return [\n            (\"ETH/USDT\", \"5m\", \"\"),   # 默认 K 线类型，随 trading_mode 变化（推荐）\n            (\"ETH/USDT\", \"5m\", \"spot\"),   # 强制用现货 K 线（仅现货机器人）\n            (\"BTC/TUSD\", \"15m\", \"futures\"),  # 用合约 K 线（仅合约机器人）\n            (\"BTC/TUSD\", \"15m\", \"mark\"),  # 用标记 K 线（仅合约机器人）\n        ]","position":{"start":{"line":594,"column":1},"end":{"line":602,"column":1}},"key":"E2NYmnItkv"},{"type":"heading","depth":4,"position":{"start":{"line":604,"column":1},"end":{"line":604,"column":1}},"children":[{"type":"text","value":"Informative pairs 装饰器（","position":{"start":{"line":604,"column":1},"end":{"line":604,"column":1}},"key":"ObOG8rulv5"},{"type":"inlineCode","value":"@informative()","position":{"start":{"line":604,"column":1},"end":{"line":604,"column":1}},"key":"atNGQGtWtz"},{"type":"text","value":"）","position":{"start":{"line":604,"column":1},"end":{"line":604,"column":1}},"key":"F0WTeCBhXf"}],"identifier":"informative-pairs-informative","label":"Informative pairs 装饰器（@informative()）","html_id":"informative-pairs-informative","implicit":true,"key":"M5cSeRbca4"},{"type":"paragraph","position":{"start":{"line":606,"column":1},"end":{"line":606,"column":1}},"children":[{"type":"text","value":"可用 ","position":{"start":{"line":606,"column":1},"end":{"line":606,"column":1}},"key":"C2dnqmDnlJ"},{"type":"inlineCode","value":"@informative","position":{"start":{"line":606,"column":1},"end":{"line":606,"column":1}},"key":"PlaALaOdGa"},{"type":"text","value":" 装饰器快速定义 informative pair。所有被装饰的 ","position":{"start":{"line":606,"column":1},"end":{"line":606,"column":1}},"key":"WayxIsVmmZ"},{"type":"inlineCode","value":"populate_indicators_*","position":{"start":{"line":606,"column":1},"end":{"line":606,"column":1}},"key":"QIgJq0LkRC"},{"type":"text","value":" 方法独立运行，不能访问其他 informative pair 的数据。但所有 informative dataframe 会合并传递给主 ","position":{"start":{"line":606,"column":1},"end":{"line":606,"column":1}},"key":"IWsFQiXSz5"},{"type":"inlineCode","value":"populate_indicators()","position":{"start":{"line":606,"column":1},"end":{"line":606,"column":1}},"key":"B4LIVGVbeD"},{"type":"text","value":"。","position":{"start":{"line":606,"column":1},"end":{"line":606,"column":1}},"key":"hmh9Qnz1Uv"}],"key":"lmSFCwxzCo"},{"type":"admonition","kind":"caution","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Caution","key":"zEIEp993ie"}],"key":"vHEUHXbUMH"},{"type":"paragraph","position":{"start":{"line":609,"column":1},"end":{"line":609,"column":1}},"children":[{"type":"text","value":"若需用一个 informative pair 的数据生成另一个 informative pair，请勿用 ","position":{"start":{"line":609,"column":1},"end":{"line":609,"column":1}},"key":"e5U4UMqqga"},{"type":"inlineCode","value":"@informative","position":{"start":{"line":609,"column":1},"end":{"line":609,"column":1}},"key":"LQcghCnCiB"},{"type":"text","value":" 装饰器，而应手动定义 informative pair，见","position":{"start":{"line":609,"column":1},"end":{"line":609,"column":1}},"key":"VnXiR1BFW4"},{"type":"crossReference","position":{"start":{"line":609,"column":1},"end":{"line":609,"column":1}},"children":[{"type":"text","value":"DataProvider 部分","position":{"start":{"line":609,"column":1},"end":{"line":609,"column":1}},"key":"TQeXkobbhI"}],"identifier":"complete-dataprovider-sample","label":"complete-dataprovider-sample","kind":"heading","template":"{name}","resolved":true,"html_id":"complete-dataprovider-sample","key":"IbMNsGNsyl"},{"type":"text","value":"。","position":{"start":{"line":609,"column":1},"end":{"line":609,"column":1}},"key":"ASimuDVi9B"}],"key":"CTiiRI3YZ7"}],"key":"AbUgOmtZPg"},{"type":"paragraph","position":{"start":{"line":612,"column":1},"end":{"line":612,"column":1}},"children":[{"type":"text","value":"超参优化时，hyperoptable 参数不支持 ","position":{"start":{"line":612,"column":1},"end":{"line":612,"column":1}},"key":"z24dJStezE"},{"type":"inlineCode","value":".value","position":{"start":{"line":612,"column":1},"end":{"line":612,"column":1}},"key":"uYC8iY50zF"},{"type":"text","value":"，请用 ","position":{"start":{"line":612,"column":1},"end":{"line":612,"column":1}},"key":"VSbIryio01"},{"type":"inlineCode","value":".range","position":{"start":{"line":612,"column":1},"end":{"line":612,"column":1}},"key":"DSHo0H2vVy"},{"type":"text","value":"。见","position":{"start":{"line":612,"column":1},"end":{"line":612,"column":1}},"key":"Hh4hFbziqU"},{"type":"crossReference","url":"/hyperopt","position":{"start":{"line":612,"column":1},"end":{"line":612,"column":1}},"children":[{"type":"text","value":"优化指标参数","position":{"start":{"line":612,"column":1},"end":{"line":612,"column":1}},"key":"dfPeV1t76L"}],"urlSource":"hyperopt.md#optimizing-an-indicator-parameter","dataUrl":"/hyperopt.json","identifier":"optimizing-an-indicator-parameter","label":"optimizing-an-indicator-parameter","remote":true,"protocol":"file","key":"TLclqBCjR4"},{"type":"text","value":"。","position":{"start":{"line":612,"column":1},"end":{"line":612,"column":1}},"key":"KI9445YazP"}],"key":"hHZCxnvPlO"},{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"完整文档","position":{"start":{"line":614,"column":1},"end":{"line":614,"column":1}},"key":"jknSqckbFu"}],"key":"QOmdJubuIk"},{"type":"code","lang":"python","value":"    def informative(\n        timeframe: str,\n        asset: str = \"\",\n        fmt: str | Callable[[Any], str] | None = None,\n        *,\n        candle_type: CandleType | str | None = None,\n        ffill: bool = True,\n    ) -\u003e Callable[[PopulateIndicators], PopulateIndicators]:\n        \"\"\"\n        用于 populate_indicators_Nn(self, dataframe, metadata) 的装饰器，定义 informative 指标。\n        \n        用法示例：\n\n            @informative('1h')\n            def populate_indicators_1h(self, dataframe: DataFrame, metadata: dict) -\u003e DataFrame:\n                dataframe['rsi'] = ta.RSI(dataframe, timeperiod=14)\n                return dataframe\n\n        :param timeframe: 辅助K线周期，必须大于等于主策略周期。\n        :param asset: 辅助资产，如 BTC、BTC/USDT、ETH/BTC。不指定则用当前对。支持格式化字符串。\n        :param fmt: 列名格式（str）或格式化函数。默认：\n        * {base}_{quote}_{column}_{timeframe}（指定 asset 时）\n        * {column}_{timeframe}（未指定 asset 时）\n        支持变量：{base}、{BASE}、{quote}、{QUOTE}、{asset}、{column}、{timeframe}\n        :param ffill: informative pair 合并后是否前向填充。\n        :param candle_type: '', mark, index, premiumIndex, funding_rate\n        \"\"\"","position":{"start":{"line":616,"column":1},"end":{"line":644,"column":1}},"key":"e1T0U0lTXh"}],"key":"LwTaOMbFVX"},{"type":"admonition","kind":"hint","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"快速定义 informative pair","position":{"start":{"line":648,"column":1},"end":{"line":648,"column":1}},"key":"TSAOPSYU3L"}],"key":"Kq9rKo8EXt"},{"type":"paragraph","position":{"start":{"line":650,"column":1},"end":{"line":650,"column":1}},"children":[{"type":"text","value":"大多数情况下无需用 ","position":{"start":{"line":650,"column":1},"end":{"line":650,"column":1}},"key":"Ojd8h5d804"},{"type":"inlineCode","value":"merge_informative_pair()","position":{"start":{"line":650,"column":1},"end":{"line":650,"column":1}},"key":"fuhhhLF4Aq"},{"type":"text","value":"，可直接用装饰器：","position":{"start":{"line":650,"column":1},"end":{"line":650,"column":1}},"key":"XVffLC1mgp"}],"key":"xrOV6EyxX2"},{"type":"code","lang":"python","value":"\n    from datetime import datetime\n    from freqtrade.persistence import Trade\n    from freqtrade.strategy import IStrategy, informative\n\n    class AwesomeStrategy(IStrategy):\n        \n        # 可省略 informative_pairs 方法\n\n        # 为每个对定义高阶周期 informative pair。可叠加装饰器。\n        @informative('30m')\n        @informative('1h')\n        def populate_indicators_1h(self, dataframe: DataFrame, metadata: dict) -\u003e DataFrame:\n            dataframe['rsi'] = ta.RSI(dataframe, timeperiod=14)\n            return dataframe\n\n        # 定义 BTC/STAKE informative pair。可用 {stake} 占位符。最终列名如 'btc_usdt_rsi_1h'。\n        @informative('1h', 'BTC/{stake}')\n        def populate_indicators_btc_1h(self, dataframe: DataFrame, metadata: dict) -\u003e DataFrame:\n            dataframe['rsi'] = ta.RSI(dataframe, timeperiod=14)\n            return dataframe\n\n        # 定义 BTC/ETH informative pair。需指定 quote。最终列名如 'eth_btc_rsi_1h'。\n        @informative('1h', 'ETH/BTC')\n        def populate_indicators_eth_btc_1h(self, dataframe: DataFrame, metadata: dict) -\u003e DataFrame:\n            dataframe['rsi'] = ta.RSI(dataframe, timeperiod=14)\n            return dataframe\n    \n        # 可自定义列名格式\n        @informative('1h', 'BTC/{stake}', '{column}_{timeframe}')\n        def populate_indicators_btc_1h_2(self, dataframe: DataFrame, metadata: dict) -\u003e DataFrame:\n            dataframe['rsi_upper'] = ta.RSI(dataframe, timeperiod=14)\n            return dataframe\n    \n        def populate_indicators(self, dataframe: DataFrame, metadata: dict) -\u003e DataFrame:\n            dataframe['rsi'] = ta.RSI(dataframe, timeperiod=14)\n            dataframe['rsi_less'] = dataframe['rsi'] \u003c dataframe['rsi_1h']\n            return dataframe","position":{"start":{"line":652,"column":1},"end":{"line":691,"column":1}},"key":"tbrw3TWWra"}],"key":"x1KIsv9lqD"},{"type":"admonition","kind":"attention","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Attention","key":"e6YQjamX20"}],"key":"MQZoKlo1Qd"},{"type":"paragraph","position":{"start":{"line":696,"column":1},"end":{"line":696,"column":1}},"children":[{"type":"text","value":"访问其他对的 informative dataframe 时建议用字符串格式化，便于后续更换 stake 货币。","position":{"start":{"line":696,"column":1},"end":{"line":696,"column":1}},"key":"lHROsskLxB"}],"key":"XNfwplIpFQ"},{"type":"code","lang":"python","value":"    def populate_entry_trend(self, dataframe: DataFrame, metadata: dict) -\u003e DataFrame:\n        stake = self.config['stake_currency']\n        dataframe.loc[\n            (\n                (dataframe[f'btc_{stake}_rsi_1h'] \u003c 35)\n                \u0026\n                (dataframe['volume'] \u003e 0)\n            ),\n            ['enter_long', 'enter_tag']] = (1, 'buy_signal_rsi')\n    \n        return dataframe","position":{"start":{"line":698,"column":1},"end":{"line":710,"column":1}},"key":"Sy2O7Gp1Fo"},{"type":"paragraph","position":{"start":{"line":712,"column":1},"end":{"line":712,"column":1}},"children":[{"type":"text","value":"或用列重命名去除 stake 货币：","position":{"start":{"line":712,"column":1},"end":{"line":712,"column":1}},"key":"IBRMVRtiNY"},{"type":"inlineCode","value":"@informative('1h', 'BTC/{stake}', fmt='{base}_{column}_{timeframe}')","position":{"start":{"line":712,"column":1},"end":{"line":712,"column":1}},"key":"HYY462x1Jg"},{"type":"text","value":"。","position":{"start":{"line":712,"column":1},"end":{"line":712,"column":1}},"key":"RKWbSTDysL"}],"key":"OIBI5fiW5w"}],"key":"XuAPLViTwP"},{"type":"admonition","kind":"warning","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"方法名重复","position":{"start":{"line":715,"column":1},"end":{"line":715,"column":1}},"key":"EFKT5hfOd2"}],"key":"bcoQFCCX4e"},{"type":"paragraph","position":{"start":{"line":717,"column":1},"end":{"line":717,"column":1}},"children":[{"type":"text","value":"被 ","position":{"start":{"line":717,"column":1},"end":{"line":717,"column":1}},"key":"drxbUW1bWt"},{"type":"inlineCode","value":"@informative()","position":{"start":{"line":717,"column":1},"end":{"line":717,"column":1}},"key":"LxoQs7HABQ"},{"type":"text","value":" 装饰的方法名必须唯一！重复会覆盖前面的定义且无报错，导致部分指标不可用。请仔细检查方法名。","position":{"start":{"line":717,"column":1},"end":{"line":717,"column":1}},"key":"tL2gXz5O8m"}],"key":"UmipqWcUm7"}],"key":"Cnkc7AcSHM"},{"type":"heading","depth":4,"position":{"start":{"line":720,"column":1},"end":{"line":720,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":720,"column":1},"end":{"line":720,"column":1}},"children":[{"type":"text","value":"merge_informative_pair()","position":{"start":{"line":720,"column":1},"end":{"line":720,"column":1}},"key":"webJvwla9G"}],"key":"Vz71DDWfSY"}],"identifier":"merge-informative-pair","label":"merge_informative_pair()","html_id":"merge-informative-pair","implicit":true,"key":"S2RrYnPTq3"},{"type":"paragraph","position":{"start":{"line":722,"column":1},"end":{"line":722,"column":1}},"children":[{"type":"text","value":"该方法可安全、无前视偏差地将 informative pair 合并到主 dataframe。","position":{"start":{"line":722,"column":1},"end":{"line":722,"column":1}},"key":"ee7QDYhUKQ"}],"key":"ND4SFpoCBE"},{"type":"paragraph","position":{"start":{"line":724,"column":1},"end":{"line":724,"column":1}},"children":[{"type":"text","value":"功能：","position":{"start":{"line":724,"column":1},"end":{"line":724,"column":1}},"key":"Ay9Eu5mx4s"}],"key":"SaAKEy6O1z"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":726,"column":1},"end":{"line":729,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":726,"column":1},"end":{"line":726,"column":1}},"children":[{"type":"text","value":"列重命名，避免冲突","position":{"start":{"line":726,"column":1},"end":{"line":726,"column":1}},"key":"UILlWGEReW"}],"key":"f2Q8kkHrZb"},{"type":"listItem","spread":true,"position":{"start":{"line":727,"column":1},"end":{"line":727,"column":1}},"children":[{"type":"text","value":"无前视偏差合并","position":{"start":{"line":727,"column":1},"end":{"line":727,"column":1}},"key":"kLdE7juakz"}],"key":"rvjDXyjnPu"},{"type":"listItem","spread":true,"position":{"start":{"line":728,"column":1},"end":{"line":729,"column":1}},"children":[{"type":"text","value":"可选前向填充","position":{"start":{"line":728,"column":1},"end":{"line":728,"column":1}},"key":"VvKJOVuMd6"}],"key":"fYhMrSepIL"}],"key":"Ai1pm2HVSS"},{"type":"paragraph","position":{"start":{"line":730,"column":1},"end":{"line":730,"column":1}},"children":[{"type":"text","value":"完整示例见","position":{"start":{"line":730,"column":1},"end":{"line":730,"column":1}},"key":"B9ZRQ34uoh"},{"type":"crossReference","position":{"start":{"line":730,"column":1},"end":{"line":730,"column":1}},"children":[{"type":"text","value":"完整数据提供者示例","position":{"start":{"line":730,"column":1},"end":{"line":730,"column":1}},"key":"rzJWDFiRkx"}],"identifier":"complete-dataprovider-sample","label":"complete-dataprovider-sample","kind":"heading","template":"{name}","resolved":true,"html_id":"complete-dataprovider-sample","key":"tROsAScHdS"},{"type":"text","value":"。","position":{"start":{"line":730,"column":1},"end":{"line":730,"column":1}},"key":"DQjDRV0JCa"}],"key":"t7G0wKm2ru"},{"type":"paragraph","position":{"start":{"line":732,"column":1},"end":{"line":732,"column":1}},"children":[{"type":"text","value":"所有 informative dataframe 列会以新名字出现在主 dataframe：","position":{"start":{"line":732,"column":1},"end":{"line":732,"column":1}},"key":"HD5FIF1MJO"}],"key":"TE0F1pYUW7"},{"type":"admonition","kind":"important","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"列重命名","position":{"start":{"line":734,"column":1},"end":{"line":734,"column":1}},"key":"eGGAkYgPmb"}],"key":"IVwZTXlPVX"},{"type":"paragraph","position":{"start":{"line":736,"column":1},"end":{"line":736,"column":1}},"children":[{"type":"text","value":"假设 ","position":{"start":{"line":736,"column":1},"end":{"line":736,"column":1}},"key":"sPZQ57LEFt"},{"type":"inlineCode","value":"inf_tf = '1d'","position":{"start":{"line":736,"column":1},"end":{"line":736,"column":1}},"key":"D81oQ18MYD"},{"type":"text","value":"，合并后列名如下：","position":{"start":{"line":736,"column":1},"end":{"line":736,"column":1}},"key":"kNWd7sniCb"}],"key":"RUISpkfjZ7"},{"type":"code","lang":"python","value":"    'date', 'open', 'high', 'low', 'close', 'rsi'                     # 原 dataframe\n    'date_1d', 'open_1d', 'high_1d', 'low_1d', 'close_1d', 'rsi_1d'   # informative dataframe","position":{"start":{"line":738,"column":1},"end":{"line":741,"column":1}},"key":"pJ0mNOxa29"}],"key":"dIelH7juHG"},{"type":"admonition","kind":"important","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"1h 列重命名","position":{"start":{"line":745,"column":1},"end":{"line":745,"column":1}},"key":"RS09Utv6TG"}],"key":"qH7PhF0KKq"},{"type":"paragraph","position":{"start":{"line":747,"column":1},"end":{"line":747,"column":1}},"children":[{"type":"text","value":"假设 ","position":{"start":{"line":747,"column":1},"end":{"line":747,"column":1}},"key":"RWCZ5zVh63"},{"type":"inlineCode","value":"inf_tf = '1h'","position":{"start":{"line":747,"column":1},"end":{"line":747,"column":1}},"key":"NZ0j3mxxjd"},{"type":"text","value":"，合并后列名如下：","position":{"start":{"line":747,"column":1},"end":{"line":747,"column":1}},"key":"B8b8uM1rSf"}],"key":"aCwYo3o7Hw"},{"type":"code","lang":"python","value":"    'date', 'open', 'high', 'low', 'close', 'rsi'                     # 原 dataframe\n    'date_1h', 'open_1h', 'high_1h', 'low_1h', 'close_1h', 'rsi_1h'   # informative dataframe","position":{"start":{"line":749,"column":1},"end":{"line":752,"column":1}},"key":"XhVxEfKnfQ"}],"key":"bDMhb4jaJY"},{"type":"admonition","kind":"important","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"自定义实现","position":{"start":{"line":756,"column":1},"end":{"line":756,"column":1}},"key":"p4z13G9JV7"}],"key":"OUxloK6na7"},{"type":"paragraph","position":{"start":{"line":757,"column":1},"end":{"line":757,"column":1}},"children":[{"type":"text","value":"可自定义实现如下：","position":{"start":{"line":757,"column":1},"end":{"line":757,"column":1}},"key":"cPPCHVrSFH"}],"key":"EzXwKGOwhd"},{"type":"code","lang":"python","value":"    # 日期右移 1 根K线\n    # This is necessary since the data is always the \"open date\"\n    # and a 15m candle starting at 12:15 should not know the close of the 1h candle from 12:00 to 13:00\n    minutes = timeframe_to_minutes(inf_tf)\n    # Only do this if the timeframes are different:\n    informative['date_merge'] = informative[\"date\"] + pd.to_timedelta(minutes, 'm')\n\n    # Rename columns to be unique\n    informative.columns = [f\"{col}_{inf_tf}\" for col in informative.columns]\n    # Assuming inf_tf = '1d' - then the columns will now be:\n    # date_1d, open_1d, high_1d, low_1d, close_1d, rsi_1d\n\n    # Combine the 2 dataframes\n    # all indicators on the informative sample MUST be calculated before this point\n    dataframe = pd.merge(dataframe, informative, left_on='date', right_on=f'date_merge_{inf_tf}', how='left')\n    # FFill to have the 1d value available in every row throughout the day.\n    # Without this, comparisons would only work once per day.\n    dataframe = dataframe.ffill()","position":{"start":{"line":759,"column":1},"end":{"line":778,"column":1}},"key":"HHw8JkMwpL"}],"key":"Se2X2gKncl"},{"type":"admonition","kind":"warning","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"informative 周期 \u003c 主周期","position":{"start":{"line":781,"column":1},"end":{"line":781,"column":1}},"key":"vV7HSdzXSG"}],"key":"Jtpj91mWjq"},{"type":"paragraph","position":{"start":{"line":782,"column":1},"end":{"line":782,"column":1}},"children":[{"type":"text","value":"用本方法时，不建议 informative 周期小于主 dataframe 周期，否则无法利用更多细节。若需用更细粒度信息，需用更高级方法（超出本文档范围）。","position":{"start":{"line":782,"column":1},"end":{"line":782,"column":1}},"key":"OcS2FttCas"}],"key":"y1U0jvZF7j"}],"key":"oBwPS7ak1B"},{"type":"heading","depth":3,"position":{"start":{"line":785,"column":1},"end":{"line":785,"column":1}},"children":[{"type":"text","value":"额外数据（DataProvider）","position":{"start":{"line":785,"column":1},"end":{"line":785,"column":1}},"key":"BuQGRjs4xE"}],"identifier":"id-dataprovider","label":"额外数据（DataProvider）","html_id":"id-dataprovider","implicit":true,"key":"pq51v2Gfbz"},{"type":"paragraph","position":{"start":{"line":787,"column":1},"end":{"line":787,"column":1}},"children":[{"type":"text","value":"策略可通过 ","position":{"start":{"line":787,"column":1},"end":{"line":787,"column":1}},"key":"vGLcAHPDqY"},{"type":"inlineCode","value":"DataProvider","position":{"start":{"line":787,"column":1},"end":{"line":787,"column":1}},"key":"ulVHh5FPFR"},{"type":"text","value":" 获取更多数据。","position":{"start":{"line":787,"column":1},"end":{"line":787,"column":1}},"key":"XaQV9co5pV"}],"key":"xvAXNv1qTk"},{"type":"paragraph","position":{"start":{"line":789,"column":1},"end":{"line":789,"column":1}},"children":[{"type":"text","value":"所有方法失败时返回 None，不抛异常。","position":{"start":{"line":789,"column":1},"end":{"line":789,"column":1}},"key":"BpvNxON18a"}],"key":"GUUo2LSse9"},{"type":"paragraph","position":{"start":{"line":791,"column":1},"end":{"line":791,"column":1}},"children":[{"type":"text","value":"请根据运行模式选择合适方法（见下文示例）。","position":{"start":{"line":791,"column":1},"end":{"line":791,"column":1}},"key":"qZLtoI3YVk"}],"key":"ePXcSOXKlR"},{"type":"admonition","kind":"warning","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"超参优化限制","position":{"start":{"line":793,"column":1},"end":{"line":793,"column":1}},"key":"YdyXIJ0Sn0"}],"key":"KGXWRVYMzp"},{"type":"paragraph","position":{"start":{"line":794,"column":1},"end":{"line":794,"column":1}},"children":[{"type":"text","value":"DataProvider 在超参优化时可用，但仅限于策略内的 ","position":{"start":{"line":794,"column":1},"end":{"line":794,"column":1}},"key":"RP3YEcPRiX"},{"type":"inlineCode","value":"populate_indicators()","position":{"start":{"line":794,"column":1},"end":{"line":794,"column":1}},"key":"u7uKqsjLIV"},{"type":"text","value":"，不可用于超参优化类文件。","position":{"start":{"line":794,"column":1},"end":{"line":794,"column":1}},"key":"QGQqzP6vpo"}],"key":"G6bwf0Qa01"},{"type":"paragraph","position":{"start":{"line":796,"column":1},"end":{"line":796,"column":1}},"children":[{"type":"text","value":"也不可用于 ","position":{"start":{"line":796,"column":1},"end":{"line":796,"column":1}},"key":"kARRxLSXe4"},{"type":"inlineCode","value":"populate_entry_trend()","position":{"start":{"line":796,"column":1},"end":{"line":796,"column":1}},"key":"BnB2x6a4wz"},{"type":"text","value":" 和 ","position":{"start":{"line":796,"column":1},"end":{"line":796,"column":1}},"key":"WETdmXpf4i"},{"type":"inlineCode","value":"populate_exit_trend()","position":{"start":{"line":796,"column":1},"end":{"line":796,"column":1}},"key":"NrW5Q3svjH"},{"type":"text","value":"。","position":{"start":{"line":796,"column":1},"end":{"line":796,"column":1}},"key":"ugcJxJkJ94"}],"key":"vQgmbIuJxs"}],"key":"pu8OmKvDNy"},{"type":"heading","depth":4,"position":{"start":{"line":799,"column":1},"end":{"line":799,"column":1}},"children":[{"type":"text","value":"DataProvider 可用方法","position":{"start":{"line":799,"column":1},"end":{"line":799,"column":1}},"key":"UYivjrOgBL"}],"identifier":"dataprovider","label":"DataProvider 可用方法","html_id":"dataprovider","implicit":true,"key":"Mvb4V9Ra67"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":801,"column":1},"end":{"line":811,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":801,"column":1},"end":{"line":801,"column":1}},"children":[{"type":"link","url":"#available_pairs","position":{"start":{"line":801,"column":1},"end":{"line":801,"column":1}},"children":[{"type":"inlineCode","value":"available_pairs","position":{"start":{"line":801,"column":1},"end":{"line":801,"column":1}},"key":"v6H2WoG5FU"}],"urlSource":"#available_pairs","key":"yCLJorm6Kk"},{"type":"text","value":" - 返回缓存的所有对及其周期（pair, timeframe）元组","position":{"start":{"line":801,"column":1},"end":{"line":801,"column":1}},"key":"XYzBLvrBUq"}],"key":"hzcuXb8Op2"},{"type":"listItem","spread":true,"position":{"start":{"line":802,"column":1},"end":{"line":802,"column":1}},"children":[{"type":"link","url":"#current_whitelist","position":{"start":{"line":802,"column":1},"end":{"line":802,"column":1}},"children":[{"type":"inlineCode","value":"current_whitelist()","position":{"start":{"line":802,"column":1},"end":{"line":802,"column":1}},"key":"VAiaSQSUGi"}],"urlSource":"#current_whitelist","key":"GRMbEquB4M"},{"type":"text","value":" - 返回当前白名单对列表，适合动态白名单（如 VolumePairlist）","position":{"start":{"line":802,"column":1},"end":{"line":802,"column":1}},"key":"h0VLfocqNV"}],"key":"XKic7aAy8J"},{"type":"listItem","spread":true,"position":{"start":{"line":803,"column":1},"end":{"line":803,"column":1}},"children":[{"type":"link","url":"#get_pair_dataframepair-timeframe","position":{"start":{"line":803,"column":1},"end":{"line":803,"column":1}},"children":[{"type":"inlineCode","value":"get_pair_dataframe(pair, timeframe)","position":{"start":{"line":803,"column":1},"end":{"line":803,"column":1}},"key":"p554ugZjL7"}],"urlSource":"#get_pair_dataframepair-timeframe","key":"CmAiznfKcx"},{"type":"text","value":" - 通用方法，回测时返回历史数据，dry/live 时返回缓存数据","position":{"start":{"line":803,"column":1},"end":{"line":803,"column":1}},"key":"r2VUIxh40G"}],"key":"PMbvAPr3Bg"},{"type":"listItem","spread":true,"position":{"start":{"line":804,"column":1},"end":{"line":804,"column":1}},"children":[{"type":"link","url":"#get_analyzed_dataframepair-timeframe","position":{"start":{"line":804,"column":1},"end":{"line":804,"column":1}},"children":[{"type":"inlineCode","value":"get_analyzed_dataframe(pair, timeframe)","position":{"start":{"line":804,"column":1},"end":{"line":804,"column":1}},"key":"ur8JcPynor"}],"urlSource":"#get_analyzed_dataframepair-timeframe","key":"XSnyS4Tpgm"},{"type":"text","value":" - 返回分析后的 dataframe 及最新分析时间","position":{"start":{"line":804,"column":1},"end":{"line":804,"column":1}},"key":"ZpMWWcYRs6"}],"key":"hlrkEEDw7F"},{"type":"listItem","spread":true,"position":{"start":{"line":805,"column":1},"end":{"line":805,"column":1}},"children":[{"type":"inlineCode","value":"historic_ohlcv(pair, timeframe)","position":{"start":{"line":805,"column":1},"end":{"line":805,"column":1}},"key":"SOcswUqR45"},{"type":"text","value":" - 返回磁盘上的历史数据","position":{"start":{"line":805,"column":1},"end":{"line":805,"column":1}},"key":"a2EUfoBdsn"}],"key":"lgK2haqnZN"},{"type":"listItem","spread":true,"position":{"start":{"line":806,"column":1},"end":{"line":806,"column":1}},"children":[{"type":"inlineCode","value":"market(pair)","position":{"start":{"line":806,"column":1},"end":{"line":806,"column":1}},"key":"IXbtgDAZzy"},{"type":"text","value":" - 返回交易对市场数据（手续费、限额、精度、活跃标志等）","position":{"start":{"line":806,"column":1},"end":{"line":806,"column":1}},"key":"jqFjirOEyv"}],"key":"RflKFpNMVk"},{"type":"listItem","spread":true,"position":{"start":{"line":807,"column":1},"end":{"line":807,"column":1}},"children":[{"type":"inlineCode","value":"ohlcv(pair, timeframe)","position":{"start":{"line":807,"column":1},"end":{"line":807,"column":1}},"key":"xfpbceiRLl"},{"type":"text","value":" - 返回当前缓存的K线数据","position":{"start":{"line":807,"column":1},"end":{"line":807,"column":1}},"key":"MZs5XOWVB0"}],"key":"WnnH3qBAcS"},{"type":"listItem","spread":true,"position":{"start":{"line":808,"column":1},"end":{"line":808,"column":1}},"children":[{"type":"link","url":"#orderbookpair-maximum","position":{"start":{"line":808,"column":1},"end":{"line":808,"column":1}},"children":[{"type":"inlineCode","value":"orderbook(pair, maximum)","position":{"start":{"line":808,"column":1},"end":{"line":808,"column":1}},"key":"ukvgrdOksV"}],"urlSource":"#orderbookpair-maximum","key":"AbWh6UZvhv"},{"type":"text","value":" - 返回最新 orderbook 数据（bids/asks）","position":{"start":{"line":808,"column":1},"end":{"line":808,"column":1}},"key":"PZaz0ebFkZ"}],"key":"sAl4Iig1fB"},{"type":"listItem","spread":true,"position":{"start":{"line":809,"column":1},"end":{"line":809,"column":1}},"children":[{"type":"link","url":"#tickerpair","position":{"start":{"line":809,"column":1},"end":{"line":809,"column":1}},"children":[{"type":"inlineCode","value":"ticker(pair)","position":{"start":{"line":809,"column":1},"end":{"line":809,"column":1}},"key":"zdTXQ3J3kL"}],"urlSource":"#tickerpair","key":"cDgkej7Orb"},{"type":"text","value":" - 返回当前 ticker 数据","position":{"start":{"line":809,"column":1},"end":{"line":809,"column":1}},"key":"cHsNkp4OMB"}],"key":"YWloBV3e1A"},{"type":"listItem","spread":true,"position":{"start":{"line":810,"column":1},"end":{"line":811,"column":1}},"children":[{"type":"inlineCode","value":"runmode","position":{"start":{"line":810,"column":1},"end":{"line":810,"column":1}},"key":"G3HoKHW2XW"},{"type":"text","value":" - 当前运行模式","position":{"start":{"line":810,"column":1},"end":{"line":810,"column":1}},"key":"ei6NvdX1tm"}],"key":"Y7HmI8usE7"}],"key":"H33RfSn2nZ"},{"type":"heading","depth":4,"position":{"start":{"line":812,"column":1},"end":{"line":812,"column":1}},"children":[{"type":"text","value":"示例用法","position":{"start":{"line":812,"column":1},"end":{"line":812,"column":1}},"key":"TKSscOyPwh"}],"identifier":"id","label":"示例用法","html_id":"id-15","implicit":true,"key":"dXYSjZ7B0k"},{"type":"heading","depth":4,"position":{"start":{"line":814,"column":1},"end":{"line":814,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":814,"column":1},"end":{"line":814,"column":1}},"children":[{"type":"text","value":"available_pairs","position":{"start":{"line":814,"column":1},"end":{"line":814,"column":1}},"key":"KuS7o1qqDu"}],"key":"GQ37QmPT4I"}],"identifier":"available-pairs","label":"available_pairs","html_id":"available-pairs","implicit":true,"key":"LjU01xdCFB"},{"type":"code","lang":"python","value":"for pair, timeframe in self.dp.available_pairs:\n    print(f\"available {pair}, {timeframe}\")","position":{"start":{"line":816,"column":1},"end":{"line":819,"column":1}},"key":"yKezlTacZs"},{"type":"heading","depth":4,"position":{"start":{"line":821,"column":1},"end":{"line":821,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":821,"column":1},"end":{"line":821,"column":1}},"children":[{"type":"text","value":"current_whitelist()","position":{"start":{"line":821,"column":1},"end":{"line":821,"column":1}},"key":"RuQbCOkaCw"}],"key":"VGnbEpcSKG"}],"identifier":"current-whitelist","label":"current_whitelist()","html_id":"current-whitelist","implicit":true,"key":"FlnclzZS2l"},{"type":"paragraph","position":{"start":{"line":823,"column":1},"end":{"line":823,"column":1}},"children":[{"type":"text","value":"假设你开发了一个用 ","position":{"start":{"line":823,"column":1},"end":{"line":823,"column":1}},"key":"CpYOd6K9gu"},{"type":"inlineCode","value":"5m","position":{"start":{"line":823,"column":1},"end":{"line":823,"column":1}},"key":"QoKEOqqpH0"},{"type":"text","value":" 周期、用 ","position":{"start":{"line":823,"column":1},"end":{"line":823,"column":1}},"key":"S4JH0qPnQE"},{"type":"inlineCode","value":"1d","position":{"start":{"line":823,"column":1},"end":{"line":823,"column":1}},"key":"MenbBJr6fD"},{"type":"text","value":" 周期信号的策略，且用 VolumePairList 动态选前 10 个交易对。","position":{"start":{"line":823,"column":1},"end":{"line":823,"column":1}},"key":"SJ46zUtbki"}],"key":"FwwHGSPBri"},{"type":"paragraph","position":{"start":{"line":825,"column":1},"end":{"line":825,"column":1}},"children":[{"type":"text","value":"策略逻辑如下：","position":{"start":{"line":825,"column":1},"end":{"line":825,"column":1}},"key":"IL13N6TgdL"}],"key":"EaxGB3c7te"},{"type":"paragraph","position":{"start":{"line":827,"column":1},"end":{"line":827,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":827,"column":1},"end":{"line":827,"column":1}},"children":[{"type":"text","value":"每 5 分钟扫描前 10 个交易对，用 14 日 RSI 生成信号。","position":{"start":{"line":827,"column":1},"end":{"line":827,"column":1}},"key":"rEaVtc893F"}],"key":"OtAbRJk7C6"}],"key":"daQgqE1uFG"},{"type":"paragraph","position":{"start":{"line":829,"column":1},"end":{"line":829,"column":1}},"children":[{"type":"text","value":"因数据有限，无法用 5m K 线重采样成日线。大多数交易所只给 500-1000 根K线，约等于 1.74 天。我们需要至少 14 天！","position":{"start":{"line":829,"column":1},"end":{"line":829,"column":1}},"key":"ZYCBausATI"}],"key":"zbLGW5MzSg"},{"type":"paragraph","position":{"start":{"line":831,"column":1},"end":{"line":831,"column":1}},"children":[{"type":"text","value":"因此需用 informative pair，且因白名单动态变化，不知用哪些对！","position":{"start":{"line":831,"column":1},"end":{"line":831,"column":1}},"key":"mP43YWaUS9"}],"key":"Q3gX5FhoQN"},{"type":"paragraph","position":{"start":{"line":833,"column":1},"end":{"line":833,"column":1}},"children":[{"type":"text","value":"此时可用 ","position":{"start":{"line":833,"column":1},"end":{"line":833,"column":1}},"key":"dsFIrW4Fz5"},{"type":"inlineCode","value":"self.dp.current_whitelist()","position":{"start":{"line":833,"column":1},"end":{"line":833,"column":1}},"key":"hLnoDv7XuE"},{"type":"text","value":" 获取当前白名单对。","position":{"start":{"line":833,"column":1},"end":{"line":833,"column":1}},"key":"oaTwCSmcWZ"}],"key":"VYTEaMtu1p"},{"type":"code","lang":"python","value":"    def informative_pairs(self):\n\n        # 获取白名单所有对\n        pairs = self.dp.current_whitelist()\n        # 为每个对分配周期\n        informative_pairs = [(pair, '1d') for pair in pairs]\n        return informative_pairs","position":{"start":{"line":835,"column":1},"end":{"line":843,"column":1}},"key":"SsCGRp5E18"},{"type":"admonition","kind":"caution","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"current_whitelist 用于绘图","position":{"start":{"line":845,"column":1},"end":{"line":845,"column":1}},"key":"XY4pgwLiqm"}],"key":"H3ah11HAoH"},{"type":"paragraph","position":{"start":{"line":846,"column":1},"end":{"line":846,"column":1}},"children":[{"type":"text","value":"current_whitelist 不支持 ","position":{"start":{"line":846,"column":1},"end":{"line":846,"column":1}},"key":"hUMRV2oO62"},{"type":"inlineCode","value":"plot-dataframe","position":{"start":{"line":846,"column":1},"end":{"line":846,"column":1}},"key":"bqBfL7Paae"},{"type":"text","value":"，也不支持 FreqUI 可视化（webserver 模式），因 webserver 配置无需白名单。","position":{"start":{"line":846,"column":1},"end":{"line":846,"column":1}},"key":"kcoEBmGlTt"}],"key":"IywTPNYEDU"}],"key":"q0g4eu0nUo"},{"type":"heading","depth":4,"position":{"start":{"line":849,"column":1},"end":{"line":849,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":849,"column":1},"end":{"line":849,"column":1}},"children":[{"type":"text","value":"get_pair_dataframe(pair, timeframe)","position":{"start":{"line":849,"column":1},"end":{"line":849,"column":1}},"key":"CkFFinoyzy"}],"key":"pQ97yeX9Gz"}],"identifier":"get-pair-dataframe-pair-timeframe","label":"get_pair_dataframe(pair, timeframe)","html_id":"get-pair-dataframe-pair-timeframe","implicit":true,"key":"JjZMqFj03N"},{"type":"code","lang":"python","value":"# 获取第一个 informative pair 的K线数据\ninf_pair, inf_timeframe = self.informative_pairs()[0]\ninformative = self.dp.get_pair_dataframe(pair=inf_pair,\n                                         timeframe=inf_timeframe)","position":{"start":{"line":851,"column":1},"end":{"line":856,"column":1}},"key":"vfOUWJLdhd"},{"type":"admonition","kind":"warning","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"回测注意","position":{"start":{"line":858,"column":1},"end":{"line":858,"column":1}},"key":"pXSMWyABgi"}],"key":"hMGaJdYmZ9"},{"type":"paragraph","position":{"start":{"line":859,"column":1},"end":{"line":859,"column":1}},"children":[{"type":"text","value":"回测时，","position":{"start":{"line":859,"column":1},"end":{"line":859,"column":1}},"key":"aT4RX4irju"},{"type":"inlineCode","value":"dp.get_pair_dataframe()","position":{"start":{"line":859,"column":1},"end":{"line":859,"column":1}},"key":"XA1kZwXIRt"},{"type":"text","value":" 在 ","position":{"start":{"line":859,"column":1},"end":{"line":859,"column":1}},"key":"aUXJoMkn8W"},{"type":"inlineCode","value":"populate_*()","position":{"start":{"line":859,"column":1},"end":{"line":859,"column":1}},"key":"NRVRQW7v2x"},{"type":"text","value":" 方法中返回完整时间区间。请勿\"看未来\"，否则 dry/live 时会有意外。","position":{"start":{"line":859,"column":1},"end":{"line":859,"column":1}},"key":"X0H1GmJEeW"}],"key":"TEtlidiSUA"},{"type":"paragraph","position":{"start":{"line":861,"column":1},"end":{"line":861,"column":1}},"children":[{"type":"text","value":"在 ","position":{"start":{"line":861,"column":1},"end":{"line":861,"column":1}},"key":"nqffNVZuTh"},{"type":"link","url":"/strategy-callbacks","position":{"start":{"line":861,"column":1},"end":{"line":861,"column":1}},"children":[{"type":"text","value":"回调函数","position":{"start":{"line":861,"column":1},"end":{"line":861,"column":1}},"key":"ySceD7taUZ"}],"urlSource":"strategy-callbacks.md","dataUrl":"/strategy-callbacks.json","internal":true,"protocol":"file","key":"HP9CpMLlj4"},{"type":"text","value":" 中，则只返回当前（模拟）K线前的数据。","position":{"start":{"line":861,"column":1},"end":{"line":861,"column":1}},"key":"Wvw5g5OHZA"}],"key":"uexV6SPWor"}],"key":"uwZ2Trgy4P"},{"type":"heading","depth":4,"position":{"start":{"line":864,"column":1},"end":{"line":864,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":864,"column":1},"end":{"line":864,"column":1}},"children":[{"type":"text","value":"get_analyzed_dataframe(pair, timeframe)","position":{"start":{"line":864,"column":1},"end":{"line":864,"column":1}},"key":"WhVmeZASPs"}],"key":"UvzO1I148G"}],"identifier":"get-analyzed-dataframe-pair-timeframe","label":"get_analyzed_dataframe(pair, timeframe)","html_id":"get-analyzed-dataframe-pair-timeframe","implicit":true,"key":"lPhnOmIb4R"},{"type":"paragraph","position":{"start":{"line":866,"column":1},"end":{"line":866,"column":1}},"children":[{"type":"text","value":"该方法供 freqtrade 内部用来判断最后信号，也可在特定回调中用来获取触发操作的信号（见","position":{"start":{"line":866,"column":1},"end":{"line":866,"column":1}},"key":"tWQ1zxzHoV"},{"type":"link","url":"/strategy-advanced","position":{"start":{"line":866,"column":1},"end":{"line":866,"column":1}},"children":[{"type":"text","value":"高级策略文档","position":{"start":{"line":866,"column":1},"end":{"line":866,"column":1}},"key":"JCRsRCNtCs"}],"urlSource":"strategy-advanced.md","dataUrl":"/strategy-advanced.json","internal":true,"protocol":"file","key":"jCcY1wqPwl"},{"type":"text","value":"）。","position":{"start":{"line":866,"column":1},"end":{"line":866,"column":1}},"key":"ubR7vWuPqq"}],"key":"PpK8JeL8R4"},{"type":"code","lang":"python","value":"# 获取当前 dataframe\ndataframe, last_updated = self.dp.get_analyzed_dataframe(pair=metadata['pair'],\n                                                         timeframe=self.timeframe)","position":{"start":{"line":868,"column":1},"end":{"line":872,"column":1}},"key":"quLXi3i2S7"},{"type":"admonition","kind":"caution","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"无数据","position":{"start":{"line":874,"column":1},"end":{"line":874,"column":1}},"key":"Vi1Fr6Y15R"}],"key":"GmAzm0NC6v"},{"type":"paragraph","position":{"start":{"line":875,"column":1},"end":{"line":875,"column":1}},"children":[{"type":"text","value":"若请求的对未缓存，返回空 dataframe。可用 ","position":{"start":{"line":875,"column":1},"end":{"line":875,"column":1}},"key":"HRFZCg40lW"},{"type":"inlineCode","value":"if dataframe.empty:","position":{"start":{"line":875,"column":1},"end":{"line":875,"column":1}},"key":"Bj2io4x6AP"},{"type":"text","value":" 检查。","position":{"start":{"line":875,"column":1},"end":{"line":875,"column":1}},"key":"ASDJQzY9Sa"}],"key":"yFJfMXlgJy"}],"key":"P0KY9C0tkV"},{"type":"heading","depth":4,"position":{"start":{"line":878,"column":1},"end":{"line":878,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":878,"column":1},"end":{"line":878,"column":1}},"children":[{"type":"text","value":"orderbook(pair, maximum)","position":{"start":{"line":878,"column":1},"end":{"line":878,"column":1}},"key":"U4JlGEdRVM"}],"key":"YJ2cdnowea"}],"identifier":"orderbook-pair-maximum","label":"orderbook(pair, maximum)","html_id":"orderbook-pair-maximum","implicit":true,"key":"NFIEnOUtaC"},{"type":"code","lang":"python","value":"if self.dp.runmode.value in ('live', 'dry_run'):\n    ob = self.dp.orderbook(metadata['pair'], 1)\n    dataframe['best_bid'] = ob['bids'][0][0]\n    dataframe['best_ask'] = ob['asks'][0][0]","position":{"start":{"line":880,"column":1},"end":{"line":885,"column":1}},"key":"xh0aagk1AL"},{"type":"paragraph","position":{"start":{"line":887,"column":1},"end":{"line":887,"column":1}},"children":[{"type":"text","value":"orderbook 结构与 ","position":{"start":{"line":887,"column":1},"end":{"line":887,"column":1}},"key":"aqZ4gpmiji"},{"type":"link","url":"https://github.com/ccxt/ccxt/wiki/Manual#order-book-structure","position":{"start":{"line":887,"column":1},"end":{"line":887,"column":1}},"children":[{"type":"text","value":"ccxt","position":{"start":{"line":887,"column":1},"end":{"line":887,"column":1}},"key":"JptIFDcPiF"}],"urlSource":"https://github.com/ccxt/ccxt/wiki/Manual#order-book-structure","error":true,"key":"XBJWXk2ud2"},{"type":"text","value":" 一致：","position":{"start":{"line":887,"column":1},"end":{"line":887,"column":1}},"key":"eRkMd2zm0R"}],"key":"Y62l3KaECQ"},{"type":"code","lang":"js","value":"{\n    'bids': [\n        [ price, amount ],\n        ...\n    ],\n    'asks': [\n        [ price, amount ],\n        ...\n    ],\n}","position":{"start":{"line":889,"column":1},"end":{"line":900,"column":1}},"key":"np0PaLREXD"},{"type":"paragraph","position":{"start":{"line":902,"column":1},"end":{"line":902,"column":1}},"children":[{"type":"text","value":"用 ","position":{"start":{"line":902,"column":1},"end":{"line":902,"column":1}},"key":"dQ8M3ayY9D"},{"type":"inlineCode","value":"ob['bids'][0][0]","position":{"start":{"line":902,"column":1},"end":{"line":902,"column":1}},"key":"JWR2ZiaVGg"},{"type":"text","value":" 可取最优买价，","position":{"start":{"line":902,"column":1},"end":{"line":902,"column":1}},"key":"zxvgQoPhxr"},{"type":"inlineCode","value":"ob['bids'][0][1]","position":{"start":{"line":902,"column":1},"end":{"line":902,"column":1}},"key":"glVZoYCCea"},{"type":"text","value":" 为该价位数量。","position":{"start":{"line":902,"column":1},"end":{"line":902,"column":1}},"key":"YuROxyzH4n"}],"key":"vdzFH4WI7B"},{"type":"admonition","kind":"warning","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"回测注意","position":{"start":{"line":904,"column":1},"end":{"line":904,"column":1}},"key":"YrULHbNzAj"}],"key":"xgUCIt1eid"},{"type":"paragraph","position":{"start":{"line":905,"column":1},"end":{"line":905,"column":1}},"children":[{"type":"text","value":"订单簿不是历史数据的一部分，这意味着如果使用此方法，回测和超参数优化将无法正常工作，因为该方法将返回最新值。","position":{"start":{"line":905,"column":1},"end":{"line":905,"column":1}},"key":"hyUVLi9fRO"}],"key":"j40AHC3suS"}],"key":"wlK8gBDKnB"},{"type":"heading","depth":4,"position":{"start":{"line":908,"column":1},"end":{"line":908,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":908,"column":1},"end":{"line":908,"column":1}},"children":[{"type":"text","value":"ticker(pair)","position":{"start":{"line":908,"column":1},"end":{"line":908,"column":1}},"key":"RliOV5TVSL"}],"key":"Dbq7wEzsY7"}],"identifier":"ticker-pair","label":"ticker(pair)","html_id":"ticker-pair","implicit":true,"key":"jLER8fPwN5"},{"type":"code","lang":"python","value":"if self.dp.runmode.value in ('live', 'dry_run'):\n    ticker = self.dp.ticker(metadata['pair'])\n    dataframe['last_price'] = ticker['last']\n    dataframe['volume24h'] = ticker['quoteVolume']\n    dataframe['vwap'] = ticker['vwap']","position":{"start":{"line":910,"column":1},"end":{"line":916,"column":1}},"key":"toaUW4FVkc"},{"type":"admonition","kind":"warning","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Warning","key":"y8VXTqD62G"}],"key":"NsEyNpkliJ"},{"type":"paragraph","position":{"start":{"line":919,"column":1},"end":{"line":919,"column":1}},"children":[{"type":"text","value":"虽然 ticker 数据结构是 ccxt 统一接口的一部分，但不同交易所返回的值可能会有所不同。例如，许多交易所不返回 ","position":{"start":{"line":919,"column":1},"end":{"line":919,"column":1}},"key":"DIZJpQRROX"},{"type":"inlineCode","value":"vwap","position":{"start":{"line":919,"column":1},"end":{"line":919,"column":1}},"key":"HAxjHWqysL"},{"type":"text","value":" 值，一些交易所并不总是填充 ","position":{"start":{"line":919,"column":1},"end":{"line":919,"column":1}},"key":"nSQokPLss2"},{"type":"inlineCode","value":"last","position":{"start":{"line":919,"column":1},"end":{"line":919,"column":1}},"key":"dmVdDR50Yv"},{"type":"text","value":" 字段（所以它可能为 None）等。因此，您需要仔细验证从交易所返回的 ticker 数据，并添加适当的错误处理/默认值。","position":{"start":{"line":919,"column":1},"end":{"line":919,"column":1}},"key":"ol8veHjI8g"}],"key":"ZPxzopBwGc"}],"key":"LXFEDO6tDa"},{"type":"admonition","kind":"warning","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"回测警告","position":{"start":{"line":922,"column":1},"end":{"line":922,"column":1}},"key":"PaD7jeZbZG"}],"key":"C5F5CrsTai"},{"type":"paragraph","position":{"start":{"line":923,"column":1},"end":{"line":923,"column":1}},"children":[{"type":"text","value":"此方法将始终返回最新/实时值。因此，在回测/超参数优化期间使用而不检查运行模式将导致错误的结果，例如，您的整个 dataframe 将在所有行中包含相同的单个值。","position":{"start":{"line":923,"column":1},"end":{"line":923,"column":1}},"key":"YW5T6d3ov7"}],"key":"WTf7JDPkJZ"}],"key":"xBgmQ0hEV4"},{"type":"heading","depth":4,"position":{"start":{"line":926,"column":1},"end":{"line":926,"column":1}},"children":[{"type":"text","value":"发送通知","position":{"start":{"line":926,"column":1},"end":{"line":926,"column":1}},"key":"Ei3KeTOBNh"}],"identifier":"id","label":"发送通知","html_id":"id-16","implicit":true,"key":"GNAfg6AMql"},{"type":"paragraph","position":{"start":{"line":928,"column":1},"end":{"line":929,"column":1}},"children":[{"type":"text","value":"dataprovider 的 ","position":{"start":{"line":928,"column":1},"end":{"line":928,"column":1}},"key":"Ztp5O7sSFC"},{"type":"inlineCode","value":".send_msg()","position":{"start":{"line":928,"column":1},"end":{"line":928,"column":1}},"key":"UwwI9tKVrK"},{"type":"text","value":" 可在策略中发送自定义通知。\n相同的通知在每个蜡烛图期间只会发送一次，除非第二个参数（","position":{"start":{"line":928,"column":1},"end":{"line":928,"column":1}},"key":"Whq1Etd93w"},{"type":"inlineCode","value":"always_send","position":{"start":{"line":928,"column":1},"end":{"line":928,"column":1}},"key":"ydBirVORAR"},{"type":"text","value":"）设置为 True。","position":{"start":{"line":928,"column":1},"end":{"line":928,"column":1}},"key":"w0IwCgonli"}],"key":"dO6YHpBnnO"},{"type":"code","lang":"python","value":"    self.dp.send_msg(f\"{metadata['pair']} just got hot!\")\n\n    # 强制发送此通知，避免缓存（请阅读下面的警告！）\n    self.dp.send_msg(f\"{metadata['pair']} just got hot!\", always_send=True)","position":{"start":{"line":931,"column":1},"end":{"line":936,"column":1}},"key":"HnqflddZ2c"},{"type":"paragraph","position":{"start":{"line":938,"column":1},"end":{"line":938,"column":1}},"children":[{"type":"text","value":"通知只会在交易模式（实盘/模拟盘）中发送 - 因此可以在回测中无条件调用此方法。","position":{"start":{"line":938,"column":1},"end":{"line":938,"column":1}},"key":"rs57ZACBaD"}],"key":"afR6ZFTzNZ"},{"type":"admonition","kind":"warning","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"消息轰炸","position":{"start":{"line":940,"column":1},"end":{"line":940,"column":1}},"key":"rgvLM8H5IM"}],"key":"tgGXwiOXzL"},{"type":"paragraph","position":{"start":{"line":941,"column":1},"end":{"line":941,"column":1}},"children":[{"type":"text","value":"通过在此方法中设置 ","position":{"start":{"line":941,"column":1},"end":{"line":941,"column":1}},"key":"C6WifOeUjF"},{"type":"inlineCode","value":"always_send=True","position":{"start":{"line":941,"column":1},"end":{"line":941,"column":1}},"key":"WZmJ4mRTTM"},{"type":"text","value":"，您可能会给自己发送大量消息。请谨慎使用此功能，并且只在您知道不会在整个蜡烛图期间频繁触发的情况下使用，以避免每5秒就收到一条消息。","position":{"start":{"line":941,"column":1},"end":{"line":941,"column":1}},"key":"TB4TTpweoS"}],"key":"p2x1TA3NWb"}],"key":"IRybmxvszn"},{"type":"heading","depth":4,"position":{"start":{"line":946,"column":1},"end":{"line":946,"column":1}},"children":[{"type":"text","value":"完整 DataProvider 示例","position":{"start":{"line":946,"column":1},"end":{"line":946,"column":1}},"key":"Lf6gXO1nHd"}],"label":"complete-dataprovider-sample","identifier":"complete-dataprovider-sample","html_id":"complete-dataprovider-sample","key":"Njh4RSzehk"},{"type":"code","lang":"python","value":"from freqtrade.strategy import IStrategy, merge_informative_pair\nfrom pandas import DataFrame\n\nclass SampleStrategy(IStrategy):\n    # 策略初始化...\n\n    timeframe = '5m'\n\n    # ...\n\n    def informative_pairs(self):\n\n        # 获取白名单所有对\n        pairs = self.dp.current_whitelist()\n        # 为每个对分配周期\n        informative_pairs = [(pair, '1d') for pair in pairs]\n        # 可选：添加静态对\n        informative_pairs += [(\"ETH/USDT\", \"5m\"),\n                              (\"BTC/TUSD\", \"15m\"),\n                            ]\n        return informative_pairs\n\n    def populate_indicators(self, dataframe: DataFrame, metadata: dict) -\u003e DataFrame:\n        if not self.dp:\n            # DataProvider 不可用时不做任何操作\n            return dataframe\n\n        inf_tf = '1d'\n        # 获取信息对\n        informative = self.dp.get_pair_dataframe(pair=metadata['pair'], timeframe=inf_tf)\n        # 获取14天RSI\n        informative['rsi'] = ta.RSI(informative, timeperiod=14)\n\n        # 使用辅助函数 merge_informative_pair 安全地合并交易对\n        # 自动重命名列并合并较短时间周期的 dataframe 和较长时间周期的信息对\n        # 使用 ffill 使1天的值在一天中的每一行都可用\n        # 如果没有这个，原始数据框和信息对的列之间的比较每天只能进行一次\n        # 此方法的完整文档，见下文\n        dataframe = merge_informative_pair(dataframe, informative, self.timeframe, inf_tf, ffill=True)\n\n        # 计算原始数据框的RSI（5分钟时间周期）\n        dataframe['rsi'] = ta.RSI(dataframe, timeperiod=14)\n\n        # 其他操作\n        # ...\n\n        return dataframe\n\n    def populate_entry_trend(self, dataframe: DataFrame, metadata: dict) -\u003e DataFrame:\n\n        dataframe.loc[\n            (\n                (qtpylib.crossed_above(dataframe['rsi'], 30)) \u0026  # RSI 上穿 30\n                (dataframe['rsi_1d'] \u003c 30) \u0026                     # 日线 RSI \u003c 30\n                (dataframe['volume'] \u003e 0)                        # 有成交量\n            ),\n            ['enter_long', 'enter_tag']] = (1, 'rsi_cross')\n","position":{"start":{"line":948,"column":1},"end":{"line":1007,"column":1}},"key":"NbU1jKaBca"},{"type":"thematicBreak","position":{"start":{"line":1009,"column":1},"end":{"line":1009,"column":1}},"key":"h9gwez9Chy"},{"type":"heading","depth":3,"position":{"start":{"line":1011,"column":1},"end":{"line":1011,"column":1}},"children":[{"type":"text","value":"额外数据（钱包 Wallets）","position":{"start":{"line":1011,"column":1},"end":{"line":1011,"column":1}},"key":"ebZL4n69jX"}],"identifier":"id-wallets","label":"额外数据（钱包 Wallets）","html_id":"id-wallets","implicit":true,"key":"DRSM1ZvvqW"},{"type":"paragraph","position":{"start":{"line":1013,"column":1},"end":{"line":1013,"column":1}},"children":[{"type":"text","value":"策略可通过 ","position":{"start":{"line":1013,"column":1},"end":{"line":1013,"column":1}},"key":"HdZl9a0EmK"},{"type":"inlineCode","value":"wallets","position":{"start":{"line":1013,"column":1},"end":{"line":1013,"column":1}},"key":"zpI397nfQK"},{"type":"text","value":" 对象获取当前钱包/账户余额。","position":{"start":{"line":1013,"column":1},"end":{"line":1013,"column":1}},"key":"sgaO3lQsOO"}],"key":"xDcn3mrFnL"},{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"回测/超参优化","position":{"start":{"line":1015,"column":1},"end":{"line":1015,"column":1}},"key":"CCOYsCZJV9"}],"key":"ccskg6aRgH"},{"type":"paragraph","position":{"start":{"line":1016,"column":1},"end":{"line":1016,"column":1}},"children":[{"type":"text","value":"Wallets 在不同函数中表现不同。","position":{"start":{"line":1016,"column":1},"end":{"line":1016,"column":1}},"key":"jxJtYesRqh"}],"key":"LZKJUCJVn5"},{"type":"paragraph","position":{"start":{"line":1018,"column":1},"end":{"line":1018,"column":1}},"children":[{"type":"text","value":"在 ","position":{"start":{"line":1018,"column":1},"end":{"line":1018,"column":1}},"key":"ESQpWmjeEN"},{"type":"inlineCode","value":"populate_*()","position":{"start":{"line":1018,"column":1},"end":{"line":1018,"column":1}},"key":"mlNM0szwug"},{"type":"text","value":" 方法中，返回完整钱包。","position":{"start":{"line":1018,"column":1},"end":{"line":1018,"column":1}},"key":"ipQUrsGamC"}],"key":"NuGLMBpKOc"},{"type":"paragraph","position":{"start":{"line":1020,"column":1},"end":{"line":1020,"column":1}},"children":[{"type":"text","value":"在 ","position":{"start":{"line":1020,"column":1},"end":{"line":1020,"column":1}},"key":"HYvHadj4SH"},{"type":"link","url":"/strategy-callbacks","position":{"start":{"line":1020,"column":1},"end":{"line":1020,"column":1}},"children":[{"type":"text","value":"回调函数","position":{"start":{"line":1020,"column":1},"end":{"line":1020,"column":1}},"key":"OgKCxTi88T"}],"urlSource":"strategy-callbacks.md","dataUrl":"/strategy-callbacks.json","internal":true,"protocol":"file","key":"eOx31Fs7na"},{"type":"text","value":" 中，返回当前模拟钱包状态。","position":{"start":{"line":1020,"column":1},"end":{"line":1020,"column":1}},"key":"rRlmyVOy2X"}],"key":"EBvgtY11R9"}],"key":"utBvcUaG8L"},{"type":"paragraph","position":{"start":{"line":1023,"column":1},"end":{"line":1023,"column":1}},"children":[{"type":"text","value":"调用前请检查 ","position":{"start":{"line":1023,"column":1},"end":{"line":1023,"column":1}},"key":"sEVG79UGZP"},{"type":"inlineCode","value":"wallets","position":{"start":{"line":1023,"column":1},"end":{"line":1023,"column":1}},"key":"nV5HfYGat5"},{"type":"text","value":" 是否可用，避免回测时报错。","position":{"start":{"line":1023,"column":1},"end":{"line":1023,"column":1}},"key":"vgQLVdMzVt"}],"key":"EyZENcQG0c"},{"type":"code","lang":"python","value":"if self.wallets:\n    free_eth = self.wallets.get_free('ETH')\n    used_eth = self.wallets.get_used('ETH')\n    total_eth = self.wallets.get_total('ETH')","position":{"start":{"line":1025,"column":1},"end":{"line":1030,"column":1}},"key":"dSskoMPDzW"},{"type":"heading","depth":4,"position":{"start":{"line":1032,"column":1},"end":{"line":1032,"column":1}},"children":[{"type":"text","value":"Wallets 可用方法","position":{"start":{"line":1032,"column":1},"end":{"line":1032,"column":1}},"key":"ts77S5SgPq"}],"identifier":"wallets","label":"Wallets 可用方法","html_id":"wallets","implicit":true,"key":"nIfI7beoLi"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":1034,"column":1},"end":{"line":1037,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":1034,"column":1},"end":{"line":1034,"column":1}},"children":[{"type":"inlineCode","value":"get_free(asset)","position":{"start":{"line":1034,"column":1},"end":{"line":1034,"column":1}},"key":"y4GGDVHC0I"},{"type":"text","value":" - 当前可用余额","position":{"start":{"line":1034,"column":1},"end":{"line":1034,"column":1}},"key":"h86eDNkjM9"}],"key":"rKZGUhwsfy"},{"type":"listItem","spread":true,"position":{"start":{"line":1035,"column":1},"end":{"line":1035,"column":1}},"children":[{"type":"inlineCode","value":"get_used(asset)","position":{"start":{"line":1035,"column":1},"end":{"line":1035,"column":1}},"key":"dN75abpsHE"},{"type":"text","value":" - 当前被占用余额（挂单）","position":{"start":{"line":1035,"column":1},"end":{"line":1035,"column":1}},"key":"saggyKOdDa"}],"key":"PkEy2nGeox"},{"type":"listItem","spread":true,"position":{"start":{"line":1036,"column":1},"end":{"line":1037,"column":1}},"children":[{"type":"inlineCode","value":"get_total(asset)","position":{"start":{"line":1036,"column":1},"end":{"line":1036,"column":1}},"key":"wePGz6lMco"},{"type":"text","value":" - 总余额（前两者之和）","position":{"start":{"line":1036,"column":1},"end":{"line":1036,"column":1}},"key":"pvqof83C3o"}],"key":"N2g9sVrnXU"}],"key":"TyxfBfdpAD"},{"type":"thematicBreak","position":{"start":{"line":1038,"column":1},"end":{"line":1038,"column":1}},"key":"cRbakarnNS"},{"type":"heading","depth":3,"position":{"start":{"line":1040,"column":1},"end":{"line":1040,"column":1}},"children":[{"type":"text","value":"额外数据（交易记录 Trades）","position":{"start":{"line":1040,"column":1},"end":{"line":1040,"column":1}},"key":"fb5c2h5tPG"}],"identifier":"id-trades","label":"额外数据（交易记录 Trades）","html_id":"id-trades","implicit":true,"key":"FnG8atgYGM"},{"type":"paragraph","position":{"start":{"line":1042,"column":1},"end":{"line":1042,"column":1}},"children":[{"type":"text","value":"可在策略中通过数据库查询历史交易。","position":{"start":{"line":1042,"column":1},"end":{"line":1042,"column":1}},"key":"U9KqFUdvrr"}],"key":"Sc65e2ueea"},{"type":"paragraph","position":{"start":{"line":1044,"column":1},"end":{"line":1044,"column":1}},"children":[{"type":"text","value":"在文件顶部，导入所需对象：","position":{"start":{"line":1044,"column":1},"end":{"line":1044,"column":1}},"key":"Ub5g8wpuyS"}],"key":"jC8fWvCtT9"},{"type":"code","lang":"python","value":"from freqtrade.persistence import Trade","position":{"start":{"line":1046,"column":1},"end":{"line":1048,"column":1}},"key":"ERhhXvlvaN"},{"type":"paragraph","position":{"start":{"line":1050,"column":1},"end":{"line":1050,"column":1}},"children":[{"type":"text","value":"以下示例查询当天当前对的已平仓交易（可加其他过滤条件）：","position":{"start":{"line":1050,"column":1},"end":{"line":1050,"column":1}},"key":"OtKzuwSqU3"}],"key":"hbXzzxfF9g"},{"type":"code","lang":"python","value":"trades = Trade.get_trades_proxy(pair=metadata['pair'],\n                                open_date=datetime.now(timezone.utc) - timedelta(days=1),\n                                is_open=False,\n            ]).order_by(Trade.close_date).all()\n# 汇总该交易对的利润\ncurdayprofit = sum(trade.close_profit for trade in trades)","position":{"start":{"line":1052,"column":1},"end":{"line":1059,"column":1}},"key":"P0jsCEcv8u"},{"type":"paragraph","position":{"start":{"line":1061,"column":1},"end":{"line":1061,"column":1}},"children":[{"type":"text","value":"更多方法请查阅 ","position":{"start":{"line":1061,"column":1},"end":{"line":1061,"column":1}},"key":"qfnqbldGMJ"},{"type":"link","url":"/trade-object","position":{"start":{"line":1061,"column":1},"end":{"line":1061,"column":1}},"children":[{"type":"text","value":"Trade 对象","position":{"start":{"line":1061,"column":1},"end":{"line":1061,"column":1}},"key":"XvMgYv4deS"}],"urlSource":"trade-object.md","dataUrl":"/trade-object.json","internal":true,"protocol":"file","key":"ZZp0hkGKrL"},{"type":"text","value":" 文档。","position":{"start":{"line":1061,"column":1},"end":{"line":1061,"column":1}},"key":"Qf6pQRBDTf"}],"key":"nCXJRnqeJ4"},{"type":"admonition","kind":"warning","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Warning","key":"M26Jq8R0xO"}],"key":"wMouRdkaJC"},{"type":"paragraph","position":{"start":{"line":1064,"column":1},"end":{"line":1064,"column":1}},"children":[{"type":"text","value":"回测/超参优化时，","position":{"start":{"line":1064,"column":1},"end":{"line":1064,"column":1}},"key":"KlMzyLMWIp"},{"type":"inlineCode","value":"populate_*","position":{"start":{"line":1064,"column":1},"end":{"line":1064,"column":1}},"key":"zDR5sQn8FL"},{"type":"text","value":" 方法中无法获取交易历史，结果为空。","position":{"start":{"line":1064,"column":1},"end":{"line":1064,"column":1}},"key":"KTHSXxbzij"}],"key":"LBNfBwBqm3"}],"key":"WjBLjckC1W"},{"type":"heading","depth":3,"position":{"start":{"line":1067,"column":1},"end":{"line":1067,"column":1}},"children":[{"type":"text","value":"阻止特定对交易","position":{"start":{"line":1067,"column":1},"end":{"line":1067,"column":1}},"key":"HFX7mQGDJe"}],"identifier":"id","label":"阻止特定对交易","html_id":"id-17","implicit":true,"key":"z6h3EOtx1Q"},{"type":"paragraph","position":{"start":{"line":1069,"column":1},"end":{"line":1069,"column":1}},"children":[{"type":"text","value":"Freqtrade 会在某对平仓后自动锁定该对至当前K线结束，防止同一K线内频繁交易。","position":{"start":{"line":1069,"column":1},"end":{"line":1069,"column":1}},"key":"vQ6K56v2UF"}],"key":"m3NMRsUuCM"},{"type":"paragraph","position":{"start":{"line":1071,"column":1},"end":{"line":1071,"column":1}},"children":[{"type":"text","value":"锁定对时会提示 ","position":{"start":{"line":1071,"column":1},"end":{"line":1071,"column":1}},"key":"ThbcwPV9NU"},{"type":"inlineCode","value":"Pair \u003cpair\u003e is currently locked.","position":{"start":{"line":1071,"column":1},"end":{"line":1071,"column":1}},"key":"v5Sr289fl2"},{"type":"text","value":"。","position":{"start":{"line":1071,"column":1},"end":{"line":1071,"column":1}},"key":"MnzT3mu5iA"}],"key":"IDv7l1yi9Z"},{"type":"heading","depth":4,"position":{"start":{"line":1073,"column":1},"end":{"line":1073,"column":1}},"children":[{"type":"text","value":"在策略中锁定对","position":{"start":{"line":1073,"column":1},"end":{"line":1073,"column":1}},"key":"UDX15yNC8H"}],"identifier":"id","label":"在策略中锁定对","html_id":"id-18","implicit":true,"key":"B2tVj0deHZ"},{"type":"paragraph","position":{"start":{"line":1075,"column":1},"end":{"line":1075,"column":1}},"children":[{"type":"text","value":"有时希望在特定事件后锁定某对（如连续亏损）。","position":{"start":{"line":1075,"column":1},"end":{"line":1075,"column":1}},"key":"b2Hmm4gkGe"}],"key":"NHs2uzjxWZ"},{"type":"paragraph","position":{"start":{"line":1077,"column":1},"end":{"line":1077,"column":1}},"children":[{"type":"text","value":"可用 ","position":{"start":{"line":1077,"column":1},"end":{"line":1077,"column":1}},"key":"meZ0WWa6xK"},{"type":"inlineCode","value":"self.lock_pair(pair, until, [reason])","position":{"start":{"line":1077,"column":1},"end":{"line":1077,"column":1}},"key":"WzGaLib1qY"},{"type":"text","value":" 实现，","position":{"start":{"line":1077,"column":1},"end":{"line":1077,"column":1}},"key":"w6T5wjT4zP"},{"type":"inlineCode","value":"until","position":{"start":{"line":1077,"column":1},"end":{"line":1077,"column":1}},"key":"tMs4lxTAVP"},{"type":"text","value":" 为未来时间点，","position":{"start":{"line":1077,"column":1},"end":{"line":1077,"column":1}},"key":"d40tpZJXOY"},{"type":"inlineCode","value":"reason","position":{"start":{"line":1077,"column":1},"end":{"line":1077,"column":1}},"key":"vROSRGJH7N"},{"type":"text","value":" 为可选说明。","position":{"start":{"line":1077,"column":1},"end":{"line":1077,"column":1}},"key":"mDvM3Eww1L"}],"key":"ZPgiR3b4oI"},{"type":"paragraph","position":{"start":{"line":1079,"column":1},"end":{"line":1079,"column":1}},"children":[{"type":"text","value":"可用 ","position":{"start":{"line":1079,"column":1},"end":{"line":1079,"column":1}},"key":"HU6dC5op9P"},{"type":"inlineCode","value":"self.unlock_pair(pair)","position":{"start":{"line":1079,"column":1},"end":{"line":1079,"column":1}},"key":"KSKSnnEjFU"},{"type":"text","value":" 或 ","position":{"start":{"line":1079,"column":1},"end":{"line":1079,"column":1}},"key":"J6qfVnYJU5"},{"type":"inlineCode","value":"self.unlock_reason(\u003creason\u003e)","position":{"start":{"line":1079,"column":1},"end":{"line":1079,"column":1}},"key":"V6sCFKHsJN"},{"type":"text","value":" 手动解锁，后者会解锁所有因该原因锁定的对。","position":{"start":{"line":1079,"column":1},"end":{"line":1079,"column":1}},"key":"LwtATHiy1o"}],"key":"B4084DG81q"},{"type":"paragraph","position":{"start":{"line":1081,"column":1},"end":{"line":1081,"column":1}},"children":[{"type":"text","value":"用 ","position":{"start":{"line":1081,"column":1},"end":{"line":1081,"column":1}},"key":"G7Si8hyM0d"},{"type":"inlineCode","value":"self.is_pair_locked(pair)","position":{"start":{"line":1081,"column":1},"end":{"line":1081,"column":1}},"key":"LJa7zefvp5"},{"type":"text","value":" 检查对是否被锁定。","position":{"start":{"line":1081,"column":1},"end":{"line":1081,"column":1}},"key":"izKyDLXTu6"}],"key":"Ebtgjp4Lb8"},{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Note","key":"bCnKWPoQVY"}],"key":"iFkJW6U1Gw"},{"type":"paragraph","position":{"start":{"line":1084,"column":1},"end":{"line":1084,"column":1}},"children":[{"type":"text","value":"锁定会自动延长到下一个K线结束。如 5m 周期，锁到 10:18 会延长到 10:20。","position":{"start":{"line":1084,"column":1},"end":{"line":1084,"column":1}},"key":"SjbyqSzHsZ"}],"key":"KJlSdfq9se"}],"key":"wvre4UiEHC"},{"type":"admonition","kind":"warning","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Warning","key":"fDwHEtdxhY"}],"key":"U4u6yLVO49"},{"type":"paragraph","position":{"start":{"line":1088,"column":1},"end":{"line":1088,"column":1}},"children":[{"type":"text","value":"手动锁定仅在实盘/模拟盘可用，回测时仅保护机制可锁定。","position":{"start":{"line":1088,"column":1},"end":{"line":1088,"column":1}},"key":"NbtPxI5Kkj"}],"key":"cya3jC6ug1"}],"key":"XqoLQrDGV1"},{"type":"heading","depth":5,"position":{"start":{"line":1091,"column":1},"end":{"line":1091,"column":1}},"children":[{"type":"text","value":"锁定对示例","position":{"start":{"line":1091,"column":1},"end":{"line":1091,"column":1}},"key":"oiMWdlluNk"}],"identifier":"id","label":"锁定对示例","html_id":"id-19","implicit":true,"key":"PgVEsn0MhH"},{"type":"code","lang":"python","value":"from freqtrade.persistence import Trade\nfrom datetime import timedelta, datetime, timezone\n# 放在策略文件顶部\n# --------\n\n# 在 populate_indicators 或 populate_entry_trend 中：\nif self.config['runmode'].value in ('live', 'dry_run'):\n    # 查询近两天已平仓交易\n    trades = Trade.get_trades_proxy(\n        pair=metadata['pair'], is_open=False, \n        open_date=datetime.now(timezone.utc) - timedelta(days=2))\n    # 分析是否需要锁定\n    sumprofit = sum(trade.close_profit for trade in trades)\n    if sumprofit \u003c 0:\n        # 锁定 12 小时\n        self.lock_pair(metadata['pair'], until=datetime.now(timezone.utc) + timedelta(hours=12))","position":{"start":{"line":1093,"column":1},"end":{"line":1110,"column":1}},"key":"dXym7XjeRL"},{"type":"heading","depth":3,"position":{"start":{"line":1112,"column":1},"end":{"line":1112,"column":1}},"children":[{"type":"text","value":"打印主 dataframe","position":{"start":{"line":1112,"column":1},"end":{"line":1112,"column":1}},"key":"f5nv6hJZY3"}],"identifier":"id-dataframe","label":"打印主 dataframe","html_id":"id-dataframe","implicit":true,"key":"HTs70gNqXp"},{"type":"paragraph","position":{"start":{"line":1114,"column":1},"end":{"line":1114,"column":1}},"children":[{"type":"text","value":"可在 ","position":{"start":{"line":1114,"column":1},"end":{"line":1114,"column":1}},"key":"psCn2jw1y6"},{"type":"inlineCode","value":"populate_entry_trend()","position":{"start":{"line":1114,"column":1},"end":{"line":1114,"column":1}},"key":"UhVWPeY8X4"},{"type":"text","value":" 或 ","position":{"start":{"line":1114,"column":1},"end":{"line":1114,"column":1}},"key":"oBynvkoXiA"},{"type":"inlineCode","value":"populate_exit_trend()","position":{"start":{"line":1114,"column":1},"end":{"line":1114,"column":1}},"key":"fwU8Lz1SxZ"},{"type":"text","value":" 中打印当前主 dataframe，便于调试。","position":{"start":{"line":1114,"column":1},"end":{"line":1114,"column":1}},"key":"JrVJn7PSjf"}],"key":"Tx1N8bkyhl"},{"type":"code","lang":"python","value":"def populate_entry_trend(self, dataframe: DataFrame, metadata: dict) -\u003e DataFrame:\n    dataframe.loc[\n        (\n            #\u003e\u003e 你的条件 \u003c\u003c\u003c\n        ),\n        ['enter_long', 'enter_tag']] = (1, 'somestring')\n\n    # 打印分析的对\n    print(f\"result for {metadata['pair']}\")\n\n    # 打印最后 5 行\n    print(dataframe.tail())\n\n    return dataframe","position":{"start":{"line":1116,"column":1},"end":{"line":1131,"column":1}},"key":"xfo6meo6cu"},{"type":"paragraph","position":{"start":{"line":1133,"column":1},"end":{"line":1133,"column":1}},"children":[{"type":"text","value":"如需打印更多行可用 ","position":{"start":{"line":1133,"column":1},"end":{"line":1133,"column":1}},"key":"ULT77FxMe0"},{"type":"inlineCode","value":"print(dataframe)","position":{"start":{"line":1133,"column":1},"end":{"line":1133,"column":1}},"key":"jK0dWRJbMd"},{"type":"text","value":"，但不建议，否则每对每 5 秒会输出约 500 行。","position":{"start":{"line":1133,"column":1},"end":{"line":1133,"column":1}},"key":"IDbHhexpyR"}],"key":"BECZy3TRVl"},{"type":"heading","depth":3,"position":{"start":{"line":1135,"column":1},"end":{"line":1135,"column":1}},"children":[{"type":"text","value":"开发策略时的常见错误","position":{"start":{"line":1135,"column":1},"end":{"line":1135,"column":1}},"key":"H4Ndsn9olM"}],"identifier":"id","label":"开发策略时的常见错误","html_id":"id-20","implicit":true,"key":"kXm5qfmOWY"},{"type":"heading","depth":4,"position":{"start":{"line":1139,"column":1},"end":{"line":1139,"column":1}},"children":[{"type":"text","value":"回测时\"看未来\"","position":{"start":{"line":1139,"column":1},"end":{"line":1139,"column":1}},"key":"SBzT6zy9cY"}],"label":"common-mistakes-when-developing-strategies","identifier":"common-mistakes-when-developing-strategies","html_id":"common-mistakes-when-developing-strategies","key":"hIS8Jjuc6u"},{"type":"paragraph","position":{"start":{"line":1141,"column":1},"end":{"line":1141,"column":1}},"children":[{"type":"text","value":"回测为提升性能会一次性分析整个 dataframe。策略作者需确保不\"看未来\"，即不使用 dry/live 时不可用的数据。","position":{"start":{"line":1141,"column":1},"end":{"line":1141,"column":1}},"key":"OCNtPTlLmP"}],"key":"sbvdPbJsDB"},{"type":"paragraph","position":{"start":{"line":1143,"column":1},"end":{"line":1143,"column":1}},"children":[{"type":"text","value":"这是常见痛点，易导致回测与 dry/live 巨大差异。看未来的策略回测时表现极佳，实盘却很差。","position":{"start":{"line":1143,"column":1},"end":{"line":1143,"column":1}},"key":"HhZYfM9I07"}],"key":"JZiRVKgexU"},{"type":"paragraph","position":{"start":{"line":1145,"column":1},"end":{"line":1145,"column":1}},"children":[{"type":"text","value":"常见错误包括：","position":{"start":{"line":1145,"column":1},"end":{"line":1145,"column":1}},"key":"xAFxJ7n2cC"}],"key":"yj7AkYppjY"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":1147,"column":1},"end":{"line":1152,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":1147,"column":1},"end":{"line":1147,"column":1}},"children":[{"type":"text","value":"不要用 ","position":{"start":{"line":1147,"column":1},"end":{"line":1147,"column":1}},"key":"p1OPTW8inq"},{"type":"inlineCode","value":"shift(-1)","position":{"start":{"line":1147,"column":1},"end":{"line":1147,"column":1}},"key":"q2tWAu6xli"},{"type":"text","value":" 或负数，这会用到未来数据","position":{"start":{"line":1147,"column":1},"end":{"line":1147,"column":1}},"key":"kyo6Zq4eZT"}],"key":"j30r4BnMTE"},{"type":"listItem","spread":true,"position":{"start":{"line":1148,"column":1},"end":{"line":1148,"column":1}},"children":[{"type":"text","value":"不要在 ","position":{"start":{"line":1148,"column":1},"end":{"line":1148,"column":1}},"key":"x1H1aHmdWV"},{"type":"inlineCode","value":"populate_","position":{"start":{"line":1148,"column":1},"end":{"line":1148,"column":1}},"key":"RXGRSxMq9h"},{"type":"text","value":" 函数中用 ","position":{"start":{"line":1148,"column":1},"end":{"line":1148,"column":1}},"key":"oVQpO39tsm"},{"type":"inlineCode","value":".iloc[-1]","position":{"start":{"line":1148,"column":1},"end":{"line":1148,"column":1}},"key":"EmjCJDPltz"},{"type":"text","value":" 或其他绝对位置，dry-run 和回测时表现不同。回调函数中可安全用 iloc","position":{"start":{"line":1148,"column":1},"end":{"line":1148,"column":1}},"key":"TaPTL636C9"}],"key":"fFMAv3erco"},{"type":"listItem","spread":true,"position":{"start":{"line":1149,"column":1},"end":{"line":1149,"column":1}},"children":[{"type":"text","value":"不要用 ","position":{"start":{"line":1149,"column":1},"end":{"line":1149,"column":1}},"key":"LwUOqm5crM"},{"type":"inlineCode","value":"dataframe['mean_volume'] = dataframe['volume'].mean()","position":{"start":{"line":1149,"column":1},"end":{"line":1149,"column":1}},"key":"HlyoumrRpQ"},{"type":"text","value":" 这类全列函数，回测时会用到未来数据。应用 rolling() 计算，如 ","position":{"start":{"line":1149,"column":1},"end":{"line":1149,"column":1}},"key":"LdPtH1LeBO"},{"type":"inlineCode","value":"dataframe['volume'].rolling(\u003cwindow\u003e).mean()","position":{"start":{"line":1149,"column":1},"end":{"line":1149,"column":1}},"key":"nsSj7Mnvzo"}],"key":"nJB4PCejkL"},{"type":"listItem","spread":true,"position":{"start":{"line":1150,"column":1},"end":{"line":1150,"column":1}},"children":[{"type":"text","value":"不要用 ","position":{"start":{"line":1150,"column":1},"end":{"line":1150,"column":1}},"key":"u4R6GkCo2K"},{"type":"inlineCode","value":".resample('1h')","position":{"start":{"line":1150,"column":1},"end":{"line":1150,"column":1}},"key":"yRvnNKPXHu"},{"type":"text","value":"，这会用左边界，应用 ","position":{"start":{"line":1150,"column":1},"end":{"line":1150,"column":1}},"key":"YzRSilUfQx"},{"type":"inlineCode","value":".resample('1h', label='right')","position":{"start":{"line":1150,"column":1},"end":{"line":1150,"column":1}},"key":"oROIM50lDs"}],"key":"BfpRZ8Xnlu"},{"type":"listItem","spread":true,"position":{"start":{"line":1151,"column":1},"end":{"line":1152,"column":1}},"children":[{"type":"text","value":"不要用 ","position":{"start":{"line":1151,"column":1},"end":{"line":1151,"column":1}},"key":"ET4NYvYrcI"},{"type":"inlineCode","value":".merge()","position":{"start":{"line":1151,"column":1},"end":{"line":1151,"column":1}},"key":"ad5vIP84y0"},{"type":"text","value":" 合并大周期到小周期，应用 ","position":{"start":{"line":1151,"column":1},"end":{"line":1151,"column":1}},"key":"Cgv2iPe01c"},{"type":"crossReference","position":{"start":{"line":1151,"column":1},"end":{"line":1151,"column":1}},"children":[{"type":"text","value":"informative pair","position":{"start":{"line":1151,"column":1},"end":{"line":1151,"column":1}},"key":"Vnp4CIfstp"}],"identifier":"informative-pairs","label":"informative-pairs","kind":"heading","template":"{name}","resolved":true,"html_id":"informative-pairs","key":"GhkE4WNbgf"},{"type":"text","value":" 工具。普通 merge 会有前视偏差","position":{"start":{"line":1151,"column":1},"end":{"line":1151,"column":1}},"key":"oOETAEUGV4"}],"key":"r9a5s0ntxJ"}],"key":"Lh42lB8pzB"},{"type":"admonition","kind":"tip","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"如何发现问题","position":{"start":{"line":1153,"column":1},"end":{"line":1153,"column":1}},"key":"wvyoxCvz3J"}],"key":"HeLiC8ewuA"},{"type":"paragraph","position":{"start":{"line":1154,"column":1},"end":{"line":1154,"column":1}},"children":[{"type":"text","value":"建议用 ","position":{"start":{"line":1154,"column":1},"end":{"line":1154,"column":1}},"key":"YL3znayY5N"},{"type":"link","url":"/lookahead-analysis","position":{"start":{"line":1154,"column":1},"end":{"line":1154,"column":1}},"children":[{"type":"text","value":"lookahead-analysis","position":{"start":{"line":1154,"column":1},"end":{"line":1154,"column":1}},"key":"QWz8tklS0D"}],"urlSource":"lookahead-analysis.md","dataUrl":"/lookahead-analysis.json","internal":true,"protocol":"file","key":"zIGyKLuOrM"},{"type":"text","value":" 和 ","position":{"start":{"line":1154,"column":1},"end":{"line":1154,"column":1}},"key":"qqGCvYElBw"},{"type":"link","url":"/recursive-analysis","position":{"start":{"line":1154,"column":1},"end":{"line":1154,"column":1}},"children":[{"type":"text","value":"recursive-analysis","position":{"start":{"line":1154,"column":1},"end":{"line":1154,"column":1}},"key":"xQGen0ACid"}],"urlSource":"recursive-analysis.md","dataUrl":"/recursive-analysis.json","internal":true,"protocol":"file","key":"VUyLTcaUvl"},{"type":"text","value":" 两个工具辅助排查。","position":{"start":{"line":1154,"column":1},"end":{"line":1154,"column":1}},"key":"TAyq2lhL8m"}],"key":"UcnFRxuQNd"},{"type":"paragraph","position":{"start":{"line":1156,"column":1},"end":{"line":1156,"column":1}},"children":[{"type":"text","value":"但两者都不能保证完全无误。","position":{"start":{"line":1156,"column":1},"end":{"line":1156,"column":1}},"key":"SEKiMkQYIu"}],"key":"P2zZ0IOqT2"}],"key":"kpWyhvMjtY"},{"type":"heading","depth":4,"position":{"start":{"line":1161,"column":1},"end":{"line":1161,"column":1}},"children":[{"type":"text","value":"信号冲突","position":{"start":{"line":1161,"column":1},"end":{"line":1161,"column":1}},"key":"GmGKifC4r8"}],"label":"colliding-signals","identifier":"colliding-signals","html_id":"colliding-signals","key":"Il7xsZIpko"},{"type":"paragraph","position":{"start":{"line":1163,"column":1},"end":{"line":1163,"column":1}},"children":[{"type":"text","value":"当信号冲突（如 ","position":{"start":{"line":1163,"column":1},"end":{"line":1163,"column":1}},"key":"X7sfJevB0D"},{"type":"inlineCode","value":"enter_long","position":{"start":{"line":1163,"column":1},"end":{"line":1163,"column":1}},"key":"IHl9FsEHm8"},{"type":"text","value":" 和 ","position":{"start":{"line":1163,"column":1},"end":{"line":1163,"column":1}},"key":"MyfJUmGRDF"},{"type":"inlineCode","value":"exit_long","position":{"start":{"line":1163,"column":1},"end":{"line":1163,"column":1}},"key":"GfjjseVJBE"},{"type":"text","value":" 同时为 1）时，freqtrade 会忽略入场信号，避免刚进场就立刻出场。","position":{"start":{"line":1163,"column":1},"end":{"line":1163,"column":1}},"key":"Qm4mkCsBzx"}],"key":"Qcvq6WkT8y"},{"type":"paragraph","position":{"start":{"line":1165,"column":1},"end":{"line":1165,"column":1}},"children":[{"type":"text","value":"规则如下，若 3 个信号中有多个为 1，则忽略入场：","position":{"start":{"line":1165,"column":1},"end":{"line":1165,"column":1}},"key":"TDru1Jwgpv"}],"key":"QMUHxb6ZWM"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":1167,"column":1},"end":{"line":1169,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":1167,"column":1},"end":{"line":1167,"column":1}},"children":[{"type":"inlineCode","value":"enter_long","position":{"start":{"line":1167,"column":1},"end":{"line":1167,"column":1}},"key":"xrb3lCZymc"},{"type":"text","value":" -\u003e ","position":{"start":{"line":1167,"column":1},"end":{"line":1167,"column":1}},"key":"cctTCVw3Dz"},{"type":"inlineCode","value":"exit_long","position":{"start":{"line":1167,"column":1},"end":{"line":1167,"column":1}},"key":"TjYauM7Dv0"},{"type":"text","value":", ","position":{"start":{"line":1167,"column":1},"end":{"line":1167,"column":1}},"key":"SpJybfNXWn"},{"type":"inlineCode","value":"enter_short","position":{"start":{"line":1167,"column":1},"end":{"line":1167,"column":1}},"key":"asv3qeISzc"}],"key":"yDlwrXuSm4"},{"type":"listItem","spread":true,"position":{"start":{"line":1168,"column":1},"end":{"line":1169,"column":1}},"children":[{"type":"inlineCode","value":"enter_short","position":{"start":{"line":1168,"column":1},"end":{"line":1168,"column":1}},"key":"gM1t8K6AUY"},{"type":"text","value":" -\u003e ","position":{"start":{"line":1168,"column":1},"end":{"line":1168,"column":1}},"key":"YLRpLEONTL"},{"type":"inlineCode","value":"exit_short","position":{"start":{"line":1168,"column":1},"end":{"line":1168,"column":1}},"key":"WbKuUpVwfx"},{"type":"text","value":", ","position":{"start":{"line":1168,"column":1},"end":{"line":1168,"column":1}},"key":"atWBRPbAsp"},{"type":"inlineCode","value":"enter_long","position":{"start":{"line":1168,"column":1},"end":{"line":1168,"column":1}},"key":"PXYYQVStf5"}],"key":"BLcPIQ8IsP"}],"key":"lOKFzWNmcc"},{"type":"heading","depth":3,"position":{"start":{"line":1170,"column":1},"end":{"line":1170,"column":1}},"children":[{"type":"text","value":"更多策略思路","position":{"start":{"line":1170,"column":1},"end":{"line":1170,"column":1}},"key":"bvIxOlw2pa"}],"identifier":"id","label":"更多策略思路","html_id":"id-21","implicit":true,"key":"dyNHi2YlKs"},{"type":"paragraph","position":{"start":{"line":1172,"column":1},"end":{"line":1172,"column":1}},"children":[{"type":"text","value":"如需更多策略思路，请访问 ","position":{"start":{"line":1172,"column":1},"end":{"line":1172,"column":1}},"key":"bfVXUAliYD"},{"type":"link","url":"https://github.com/freqtrade/freqtrade-strategies","position":{"start":{"line":1172,"column":1},"end":{"line":1172,"column":1}},"children":[{"type":"text","value":"策略仓库","position":{"start":{"line":1172,"column":1},"end":{"line":1172,"column":1}},"key":"H4ryMsK8Uy"}],"urlSource":"https://github.com/freqtrade/freqtrade-strategies","error":true,"key":"bzIXHLzn7W"},{"type":"text","value":"。可作为学习参考，实际效果取决于市场、交易对等。请务必先回测，再 dry-run，谨慎实盘。","position":{"start":{"line":1172,"column":1},"end":{"line":1172,"column":1}},"key":"b5elqXO8lz"}],"key":"zcie9qp27E"},{"type":"paragraph","position":{"start":{"line":1174,"column":1},"end":{"line":1174,"column":1}},"children":[{"type":"text","value":"欢迎参考、改编，也欢迎向仓库提交新策略 PR。","position":{"start":{"line":1174,"column":1},"end":{"line":1174,"column":1}},"key":"YVcjUe7bf5"}],"key":"Q35npBAMU0"},{"type":"heading","depth":3,"position":{"start":{"line":1176,"column":1},"end":{"line":1176,"column":1}},"children":[{"type":"text","value":"下一步,回测","position":{"start":{"line":1176,"column":1},"end":{"line":1176,"column":1}},"key":"mNQudPyo81"}],"identifier":"id","label":"下一步,回测","html_id":"id-22","implicit":true,"key":"DikPyY8cQu"},{"type":"paragraph","position":{"start":{"line":1178,"column":1},"end":{"line":1178,"column":1}},"children":[{"type":"text","value":"现在你已经有了完美的策略，下一步请学习","position":{"start":{"line":1178,"column":1},"end":{"line":1178,"column":1}},"key":"yHmTngLOP3"},{"type":"link","url":"/backtesting","position":{"start":{"line":1178,"column":1},"end":{"line":1178,"column":1}},"children":[{"type":"text","value":"如何回测","position":{"start":{"line":1178,"column":1},"end":{"line":1178,"column":1}},"key":"ufuormshVW"}],"urlSource":"backtesting.md","dataUrl":"/backtesting.json","internal":true,"protocol":"file","key":"sKQnm3E77z"},{"type":"text","value":"。","position":{"start":{"line":1178,"column":1},"end":{"line":1178,"column":1}},"key":"Owo9yEkqFx"}],"key":"TXkx713hPV"}],"key":"tX1KPRhbn5"}],"key":"DgKpGQ8l7P"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Freqtrade 策略开发指南","short_title":"策略开发指南","url":"/strategy-101","group":"安装"},"next":{"title":"策略回调指南","short_title":"策略回调","url":"/strategy-callbacks","group":"安装"}}},"domain":"http://localhost:3002"},"project":{"title":"Freqtrade 中文文档","description":"Freqtrade 中文文档","authors":[{"id":"Freqtrade","name":"Freqtrade"}],"github":"https://github.com/freqtrade-cn/docs_zh-CN","keywords":["Freqtrade","中文文档","交易机器人","量化交易","加密货币","数字货币","区块链","人工智能","机器学习"],"id":"111d4f50-18b2-4ed2-9189-3954f232e613","toc":[{"file":"index.md"},{"file":"terms.md"},{"file":"docker_quickstart.md"},{"children":[{"file":"installation.md"},{"file":"windows_installation.md"}],"title":"安装"},{"file":"bot-basics.md"},{"file":"configuration.md"},{"file":"strategy-101.md"},{"file":"strategy-customization.md"},{"file":"strategy-callbacks.md"},{"file":"stoploss.md"},{"file":"plugins.md"},{"file":"bot-usage.md"},{"children":[{"file":"telegram-usage.md"},{"file":"freq-ui.md"},{"file":"rest-api.md"},{"file":"webhook-config.md"}],"title":"机器人控制和管理"},{"file":"data-download.md"},{"file":"backtesting.md"},{"file":"hyperopt.md"},{"children":[{"file":"freqai.md"},{"file":"freqai-configuration.md"},{"file":"freqai-parameter-table.md"},{"file":"freqai-feature-engineering.md"},{"file":"freqai-running.md"},{"file":"freqai-reinforcement-learning.md"},{"file":"freqai-developers.md"}],"title":"FreqAI"},{"file":"leverage.md"},{"file":"utils.md"},{"file":"plotting.md"},{"file":"exchanges.md"},{"children":[{"file":"data-analysis.md"},{"file":"strategy_analysis_example.md"},{"file":"advanced-backtesting.md"}],"title":"数据分析"},{"children":[{"file":"advanced-setup.md"},{"file":"trade-object.md"},{"file":"lookahead-analysis.md"},{"file":"recursive-analysis.md"},{"file":"strategy-advanced.md"},{"file":"advanced-hyperopt.md"},{"file":"advanced-orderflow.md"},{"file":"producer-consumer.md"},{"file":"sql_cheatsheet.md"},{"file":"edge.md"}],"title":"高级话题"},{"file":"faq.md"},{"file":"strategy_migration.md"},{"file":"updating.md"},{"file":"commands.md"},{"file":"deprecated.md"},{"file":"developer.md"},{"children":[{"file":"commands/main.md"},{"file":"commands/backtesting-analysis.md"},{"file":"commands/backtesting.md"},{"file":"commands/backtesting-show.md"},{"file":"commands/convert-data.md"},{"file":"commands/convert-db.md"},{"file":"commands/convert-trade-data.md"},{"file":"commands/create-userdir.md"},{"file":"commands/download-data.md"},{"file":"commands/edge.md"},{"file":"commands/hyperopt-list.md"},{"file":"commands/hyperopt.md"},{"file":"commands/hyperopt-show.md"},{"file":"commands/install-ui.md"},{"file":"commands/list-data.md"},{"file":"commands/list-exchanges.md"},{"file":"commands/list-freqaimodels.md"},{"file":"commands/list-hyperoptloss.md"},{"file":"commands/list-markets.md"},{"file":"commands/list-pairs.md"},{"file":"commands/list-strategies.md"},{"file":"commands/list-timeframes.md"},{"file":"commands/lookahead-analysis.md"},{"file":"commands/new-config.md"},{"file":"commands/new-strategy.md"},{"file":"commands/plot-dataframe.md"},{"file":"commands/plot-profit.md"},{"file":"commands/recursive-analysis.md"},{"file":"commands/show-config.md"},{"file":"commands/show-trades.md"},{"file":"commands/strategy-updater.md"},{"file":"commands/test-pairlist.md"},{"file":"commands/trade.md"},{"file":"commands/trades-to-ohlcv.md"},{"file":"commands/webserver.md"}],"title":"Commands"}],"thumbnail":"/build/freqtrade_poweredby-54c1a23e325977ebc310429538f96a71.svg","exports":[],"bibliography":[],"index":"index","pages":[{"slug":"terms","title":"Freqtrade 术语词典","short_title":"术语词典","description":"本文档详细解释了 Freqtrade 和量化交易中的核心术语，为用户提供全面的概念参考。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["术语","概念","词典","参考","量化交易","Freqtrade"],"level":1},{"slug":"docker-quickstart","title":"使用 Docker 运行 Freqtrade","short_title":"Docker 快速入门","description":"了解如何使用 Docker 容器运行和管理 Freqtrade 交易机器人,包括安装、配置和常见问题解决","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["Docker","容器","快速入门","部署"],"level":1},{"level":1,"title":"安装"},{"slug":"installation","title":"安装 Freqtrade","short_title":"安装","description":"了解如何安装和配置 Freqtrade 交易机器人,包括脚本安装、手动安装和 Conda 安装等多种方式","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["安装","配置","指南","入门"],"level":2},{"slug":"windows-installation","title":"Windows 安装指南","short_title":"Windows 安装","description":"本文档详细介绍了如何在 Windows 系统上安装 Freqtrade 交易机器人,包括自动安装和手动安装两种方式。","date":"","thumbnail":"/build/windows_install-36fd100b8143b6955258a9fa59765217.png","thumbnailOptimized":"/build/windows_install-36fd100b8143b6955258a9fa59765217.webp","banner":"","bannerOptimized":"","tags":["Windows","安装","配置","指南"],"level":2},{"slug":"bot-basics","title":"Freqtrade 基础","short_title":"基础指南","description":"本文档介绍了 Freqtrade 的基本术语、概念和执行逻辑,帮助你理解 Freqtrade 的工作原理。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"configuration","title":"配置 Freqtrade","short_title":"配置","description":"了解如何配置 Freqtrade 交易机器人,包括配置文件、环境变量等多种配置方式","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["配置","参数","环境变量","设置"],"level":1},{"slug":"strategy-101","title":"Freqtrade 策略开发指南","short_title":"策略开发指南","description":"本文档介绍了 Freqtrade 策略开发的基础知识,包括必备概念、策略结构以及如何开发自己的交易策略。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"strategy-customization","title":"策略自定义指南","short_title":"策略自定义","description":"本文档介绍如何在 Freqtrade 中自定义交易策略,包括添加新指标、设置交易规则等内容。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["策略开发","自定义","指标","交易规则","编程"],"level":1},{"slug":"strategy-callbacks","title":"策略回调指南","short_title":"策略回调","description":"本文档详细介绍了 Freqtrade 交易机器人中可用的各种策略回调函数,包括它们的用途、调用时机以及使用方法。","date":"","thumbnail":"/build/freqUI-chart-annotat-6ca425e986932e863842497203176546.png","thumbnailOptimized":"/build/freqUI-chart-annotat-6ca425e986932e863842497203176546.webp","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"stoploss","title":"止损配置指南","short_title":"止损","description":"详细介绍 Freqtrade 中的止损功能,包括静态止损、追踪止损等多种止损模式的配置方法。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"plugins","title":"插件体系","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"bot-usage","title":"机器人使用指南","short_title":"机器人使用","description":"本文档介绍了如何启动和运行 FreqTrade 机器人,包括命令行参数、配置文件使用等基本操作说明。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"level":1,"title":"机器人控制和管理"},{"slug":"telegram-usage","title":"Telegram 使用指南","short_title":"Telegram 指南","description":"本文档详细介绍了如何为 Freqtrade 创建和配置 Telegram 机器人，以及如何获取必要的用户 ID 和群组 ID。","date":"","thumbnail":"/build/telegram_forcebuy-73d7978f775ad92a8fe74de0313966a6.png","thumbnailOptimized":"/build/telegram_forcebuy-73d7978f775ad92a8fe74de0313966a6.webp","banner":"","bannerOptimized":"","tags":["Telegram","通知","机器人","配置","消息推送"],"level":2},{"slug":"freq-ui","title":"FreqUI 用户界面","short_title":"FreqUI","description":"FreqUI 是 Freqtrade 的内置 Web 界面,提供了一个现代化的响应式界面来监控和控制您的交易机器人。本文档介绍了如何安装、配置和使用 FreqUI。","date":"","thumbnail":"/build/frequi-login-CORS-li-92549992a8d3a76bc770a0f5b151e366.png","thumbnailOptimized":"/build/frequi-login-CORS-li-92549992a8d3a76bc770a0f5b151e366.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"rest-api","title":"REST API 指南","short_title":"REST API","description":"本文档介绍了 Freqtrade 的 REST API 功能,包括如何配置 API 服务器、安全设置、身份验证以及各种 API 端点的使用方法。","date":"","thumbnail":"/build/frequi_url-75e93be0830e56c293348021fb304d08.png","thumbnailOptimized":"/build/frequi_url-75e93be0830e56c293348021fb304d08.webp","banner":"","bannerOptimized":"","tags":["REST API","接口","配置","安全","自动化"],"level":2},{"slug":"webhook-config","title":"Webhook 配置指南","short_title":"Webhook 指南","description":"Freqtrade 的 Webhook 功能允许您在交易事件发生时发送通知到外部服务。本文档详细介绍了如何配置和使用 Webhook。","date":"","thumbnail":"/build/discord_notification-0536645313306293db781a3e0e0489d8.png","thumbnailOptimized":"/build/discord_notification-0536645313306293db781a3e0e0489d8.webp","banner":"","bannerOptimized":"","tags":["Webhook","通知","外部服务","事件","配置"],"level":2},{"slug":"data-download","title":"数据下载","description":"了解如何使用 Freqtrade 下载历史交易数据，包括 K 线数据、回测数据和超参优化所需数据的下载方法和命令参数说明","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"backtesting","title":"回测","short_title":"回测","description":"了解如何使用 Freqtrade 的回测功能验证和优化你的交易策略,包括回测命令、参数配置和结果分析","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["回测","策略验证","性能分析","历史数据"],"level":1},{"slug":"hyperopt","title":"Hyperopt 超参数优化指南","short_title":"Hyperopt 指南","description":"Hyperopt 是 Freqtrade 中用于自动化策略参数优化的工具,通过搜索最佳参数组合来提升策略性能。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["超参数优化","Hyperopt","策略优化","机器学习","参数调优"],"level":1},{"level":1,"title":"FreqAI"},{"slug":"freqai","title":"Freqai","description":"","date":"","thumbnail":"/build/freqai_doc_logo-3f2859a5a8ebe9e577941dd454c6c5ee.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"freqai-configuration","title":"FreqAI 配置指南","short_title":"FreqAI 配置","description":"本文档详细介绍了如何配置 FreqAI,包括配置文件设置和策略构建。FreqAI 是 Freqtrade 的机器学习框架,可用于构建和训练预测模型。","date":"","thumbnail":"/build/freqai_pytorch-diagr-d0712f166402f727b4f65efd22bf6315.png","thumbnailOptimized":"/build/freqai_pytorch-diagr-d0712f166402f727b4f65efd22bf6315.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"freqai-parameter-table","title":"FreqAI 参数表","short_title":"参数表","description":"本文档详细列出了 FreqAI 的所有配置参数,包括通用配置参数和特征参数,并对每个参数的功能、数据类型和默认值进行了说明。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"freqai-feature-engineering","title":"FreqAI 特征工程指南","short_title":"特征工程","description":"本文档详细介绍了 FreqAI 的特征工程功能,包括如何定义和扩展特征、数据处理管道、异常值检测等内容。这些功能可以帮助用户构建更强大的预测模型。","date":"","thumbnail":"/build/freqai_weight-factor-70f8aa4395fdd17979cf8f96e17171d0.jpg","thumbnailOptimized":"/build/freqai_weight-factor-70f8aa4395fdd17979cf8f96e17171d0.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"freqai-running","title":"FreqAI 运行指南","short_title":"FreqAI 运行","description":"FreqAI 是一个自适应机器学习框架，本文档介绍了如何在实时和回测模式下运行 FreqAI，包括模型训练、部署和管理等内容。","date":"","thumbnail":"/build/freqai_moving-window-05da86a83d6712baee031086385a7735.jpg","thumbnailOptimized":"/build/freqai_moving-window-05da86a83d6712baee031086385a7735.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"freqai-reinforcement-learning","title":"FreqAI 强化学习指南","short_title":"强化学习","description":"本文档详细介绍了 FreqAI 的强化学习功能,包括基本概念、运行方法、环境配置等内容。这些功能可以帮助用户构建和训练强化学习模型进行自动交易。","date":"","thumbnail":"/build/tensorboard-27f8850881840b007f5a56a202abb949.jpg","thumbnailOptimized":"/build/tensorboard-27f8850881840b007f5a56a202abb949.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"freqai-developers","title":"FreqAI 开发者指南","short_title":"FreqAI 开发","description":"本文档详细介绍了 FreqAI 的项目架构、数据处理流程和文件结构,为开发者提供了深入了解 FreqAI 内部工作原理的指南。","date":"","thumbnail":"/build/freqai_algorithm-dia-6d1ac15cf50f9103773ecaea4b8fd261.jpg","thumbnailOptimized":"/build/freqai_algorithm-dia-6d1ac15cf50f9103773ecaea4b8fd261.webp","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"leverage","title":"使用杠杆交易","description":"了解如何在 Freqtrade 中使用杠杆交易,包括做空、保证金和期货交易等高级功能","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"utils","title":"实用工具命令指南","short_title":"实用工具指南","description":"本文档详细介绍了 Freqtrade 中的各种实用工具子命令,包括创建用户目录、配置文件、列出交易所和交易对等功能。","date":"","thumbnail":"/build/show-config-output-2a74674e687e07d8afa7ace1b96df8bb.png","thumbnailOptimized":"/build/show-config-output-2a74674e687e07d8afa7ace1b96df8bb.webp","banner":"","bannerOptimized":"","tags":["工具","命令","配置","策略","交易所"],"level":1},{"slug":"plotting","title":"绘图","short_title":"绘图","description":"了解如何使用 Freqtrade 的绘图功能可视化价格、指标和利润数据,包括安装配置、命令参数和示例","date":"","thumbnail":"/build/plot-dataframe-40c25f36af7de6fc6f078d42ae5f90f5.png","thumbnailOptimized":"/build/plot-dataframe-40c25f36af7de6fc6f078d42ae5f90f5.webp","banner":"","bannerOptimized":"","tags":["绘图","可视化","指标","回测","利润"],"level":1},{"slug":"exchanges","title":"交易所特定说明","short_title":"交易所说明","description":"了解各个交易所的特殊配置和常见问题","date":"","thumbnail":"/build/binance_futures_sett-b4a8da10c6eb01bf904d6fc3533999b6.png","thumbnailOptimized":"/build/binance_futures_sett-b4a8da10c6eb01bf904d6fc3533999b6.webp","banner":"","bannerOptimized":"","tags":["交易所","配置","API","连接","问题解决"],"level":1},{"level":1,"title":"数据分析"},{"slug":"data-analysis","title":"使用 Jupyter 笔记本分析机器人数据","description":"使用 Jupyter 笔记本分析 Freqtrade 机器人的回测结果和交易历史数据","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"strategy-analysis-example","title":"Freqtrade 策略分析示例","short_title":"策略分析示例","description":"本文档介绍如何使用 Freqtrade 提供的工具来分析和调试交易策略,包括数据可视化、回测分析等功能。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"advanced-backtesting","title":"高级回测分析","short_title":"高级回测","description":"本文档介绍了 FreqTrade 的高级回测分析功能,包括买入/卖出标签分析、信号导出等高级特性。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"高级话题"},{"slug":"advanced-setup","title":"高级安装后配置","short_title":"高级安装","description":"本文档介绍了 FreqTrade 安装后可以执行的高级任务和配置选项,包括多实例运行、日志配置等高级特性。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"trade-object","title":"交易对象文档","short_title":"交易对象指南","description":"本文档详细介绍了 Freqtrade 中的交易对象(Trade)，包括其属性、方法以及在策略中的使用方式。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"lookahead-analysis","title":"前瞻性分析指南","short_title":"前瞻性分析","description":"前瞻性分析是一个用于检测和验证交易策略中是否存在前瞻性偏差的工具。本文档详细介绍了如何使用该工具来确保策略的有效性。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"recursive-analysis","title":"递归分析指南","short_title":"递归分析","description":"递归分析是一个用于检测和验证交易策略中是否存在因递归公式导致的不准确性的工具。本文档详细介绍了如何使用该工具来确保策略的有效性。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"strategy-advanced","title":"Freqtrade 高级策略指南","short_title":"高级策略","description":"本文档详细介绍了 Freqtrade 交易机器人的高级策略开发概念,包括持久化存储、回调方法等进阶功能。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"advanced-hyperopt","title":"高级超参数优化","short_title":"高级超参数优化","description":"本文档介绍了 FreqTrade 的高级超参数优化功能,包括自定义损失函数等高级特性。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"advanced-orderflow","title":"高级委托流分析","short_title":"委托流分析","description":"本文档介绍了 FreqTrade 的委托流分析功能,包括如何配置和使用公共成交数据进行高级委托流分析。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"producer-consumer","title":"生产者/消费者模式","short_title":"生产者/消费者","description":"本文档介绍了 Freqtrade 的生产者/消费者模式,包括如何配置多个机器人实例共享计算指标和信号,以及相关的 websocket 设置。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["生产者","消费者","分布式","多实例","WebSocket"],"level":2},{"slug":"sql-cheatsheet","title":"SQL 助手","short_title":"SQL 助手","description":"本文档提供了使用 SQLite 数据库进行查询的详细指南和常用命令参考。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"edge","title":"Edge Positioning - 边缘定位","short_title":"Edge","description":"Edge Positioning 模块使用概率统计来计算交易胜率和风险回报比,从而优化策略的入场点、头寸大小和止损设置。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["Edge","概率","统计","策略优化","风险管理"],"level":2},{"slug":"faq","title":"Freqtrade 常见问题","short_title":"FAQ","description":"本文档回答了关于 Freqtrade 交易机器人的常见问题,包括支持的市场、初学者指南以及常见问题的故障排除。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"strategy-migration","title":"策略迁移指南","short_title":"策略迁移","description":"本文档详细介绍了如何将 Freqtrade V2 策略迁移到 V3，包括接口变更、方法重命名以及新增功能的完整说明。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"updating","title":"更新指南","short_title":"更新指南","description":"本文档详细介绍了如何更新 Freqtrade 的不同安装方式,包括 Docker、安装脚本和原生安装等方法。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"commands","title":"Commands","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"deprecated","title":"已弃用功能","short_title":"已弃用功能","description":"本文档介绍了 FreqTrade 中已弃用和移除的命令行参数、配置参数和机器人功能,帮助用户避免使用不再受支持的特性。","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"developer","title":"开发者指南","short_title":"开发者指南","description":"本文档面向 FreqTrade 的开发者,介绍如何为项目做出贡献、配置开发环境、编写测试以及其他开发相关的重要信息。","date":"","thumbnail":"/build/pycharm_debug-7a8a6d1f4a91d643a2d41ff932bf9a82.png","thumbnailOptimized":"/build/pycharm_debug-7a8a6d1f4a91d643a2d41ff932bf9a82.webp","banner":"","bannerOptimized":"","tags":[],"level":1},{"level":1,"title":"Commands"},{"slug":"main","title":"Main","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"backtesting-analysis","title":"Backtesting Analysis","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"backtesting-1","title":"Backtesting","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"backtesting-show","title":"Backtesting Show","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"convert-data","title":"Convert Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"convert-db","title":"Convert Db","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"convert-trade-data","title":"Convert Trade Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"create-userdir","title":"Create Userdir","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"download-data","title":"Download Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"edge-1","title":"Edge","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"hyperopt-list","title":"Hyperopt List","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"hyperopt-1","title":"Hyperopt","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"hyperopt-show","title":"Hyperopt Show","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"install-ui","title":"Install Ui","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"list-data","title":"List Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"list-exchanges","title":"List Exchanges","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"list-freqaimodels","title":"List Freqaimodels","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"list-hyperoptloss","title":"List Hyperoptloss","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"list-markets","title":"List Markets","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"list-pairs","title":"List Pairs","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"list-strategies","title":"List Strategies","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"list-timeframes","title":"List Timeframes","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"lookahead-analysis-1","title":"Lookahead Analysis","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"new-config","title":"New Config","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"new-strategy","title":"New Strategy","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"plot-dataframe","title":"Plot Dataframe","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"plot-profit","title":"Plot Profit","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"recursive-analysis-1","title":"Recursive Analysis","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"show-config","title":"Show Config","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"show-trades","title":"Show Trades","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"strategy-updater","title":"Strategy Updater","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"test-pairlist","title":"Test Pairlist","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"trade","title":"Trade","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"trades-to-ohlcv","title":"Trades To Ohlcv","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"webserver","title":"Webserver","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2}]}}},"actionData":null,"errors":null},"future":{"unstable_dev":false,"unstable_postcss":false,"unstable_tailwind":false,"v2_errorBoundary":true,"v2_headers":true,"v2_meta":true,"v2_normalizeFormMethod":true,"v2_routeConvention":true}};</script><script type="module" async="">import "/build/manifest-98DF227B.js";
import * as route0 from "/build/root-PZGRQ5GW.js";
import * as route1 from "/build/routes/$-IZLSCQFJ.js";
window.__remixRouteModules = {"root":route0,"routes/$":route1};

import("/build/entry.client-UNPC4GT3.js");</script></body></html>