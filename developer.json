{"version":2,"kind":"Article","sha256":"862ca5d524450a4e21d3f64790fac672b44f65ea197f142dd39383941d4fa1b4","slug":"developer","location":"/developer.md","dependencies":[],"frontmatter":{"title":"开发者指南","description":"本文档面向 FreqTrade 的开发者,介绍如何为项目做出贡献、配置开发环境、编写测试以及其他开发相关的重要信息。","short_title":"开发者指南","subtitle":"为开发者提供的详细指南","subject":"FreqTrade 开发者指南","authors":[{"id":"Freqtrade","name":"Freqtrade"}],"github":"https://github.com/freqtrade-cn/docs_zh-CN","keywords":["Freqtrade","中文文档","交易机器人","量化交易","加密货币","数字货币","区块链","人工智能","机器学习"],"edit_url":"https://github.com/freqtrade-cn/docs_zh-CN/blob/main/developer.md","thumbnail":"/build/pycharm_debug-7a8a6d1f4a91d643a2d41ff932bf9a82.png","thumbnailOptimized":"/build/pycharm_debug-7a8a6d1f4a91d643a2d41ff932bf9a82.webp","exports":[{"format":"md","filename":"developer.md","url":"/build/developer-6334b24dc6c81b5dbf52e182d89a6b8c.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"开发帮助","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"C3U3xZ1X3A"}],"identifier":"id","label":"开发帮助","html_id":"id","implicit":true,"key":"GkjEmyWXjm"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"本页面面向 Freqtrade 的开发者、想要为 Freqtrade 代码库或文档做出贡献的人，或者想要了解他们正在运行的应用程序源代码的人。","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"I6LeAfloUn"}],"key":"Iyi2K5YubP"},{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"我们欢迎所有贡献、错误报告、错误修复、文档改进、增强和想法。我们在 ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"B0ED5NrjYV"},{"type":"link","url":"https://github.com","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"GitHub","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"F6GaQhdZyO"}],"urlSource":"https://github.com","key":"PWg62ZxFH6"},{"type":"text","value":" 上","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"NupzWuhiyx"},{"type":"link","url":"https://github.com/freqtrade/freqtrade/issues","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"跟踪问题","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"FvynvGrDqi"}],"urlSource":"https://github.com/freqtrade/freqtrade/issues","error":true,"key":"OZyhw0Drp1"},{"type":"text","value":"，并且在 ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"XgdqX2l0gu"},{"type":"link","url":"https://discord.gg/p7nuUNVfP7","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"discord","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"gSQmLLMPCd"}],"urlSource":"https://discord.gg/p7nuUNVfP7","key":"KYOHeVtom2"},{"type":"text","value":" 上有一个开发频道，你可以在那里提问。","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"h94EJxCmk9"}],"key":"F76WgAeKo8"},{"type":"heading","depth":3,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"文档","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"UxTYZpNlvK"}],"identifier":"id","label":"文档","html_id":"id-1","implicit":true,"key":"Kk38uu2J9W"},{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"文档可在 ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"ZfgOUNCSgw"},{"type":"link","url":"https://www.freqtrade.io/","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"https://​freqtrade​.io","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"AbtkKKykXf"}],"urlSource":"https://www.freqtrade.io/","key":"AQLBN6xCyZ"},{"type":"text","value":" 获取，每个新功能 PR 都需要提供文档。","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"YGP3eFYa3V"}],"key":"hU0wkfsUZV"},{"type":"paragraph","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"文档的特殊字段（如注释框等）可以在","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"xb1qGcsRCi"},{"type":"link","url":"https://squidfunk.github.io/mkdocs-material/reference/admonitions/","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"这里","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"cNPhf7YUg4"}],"urlSource":"https://squidfunk.github.io/mkdocs-material/reference/admonitions/","key":"E8J6mHYWGi"},{"type":"text","value":"找到。","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"fPjkFj7ggb"}],"key":"Uw7cXI2POH"},{"type":"paragraph","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"要在本地测试文档，请使用以下命令。","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"nkAOf2A6gk"}],"key":"NFJTkV2JpM"},{"type":"code","lang":"bash","value":"pip install -r docs/requirements-docs.txt\nmkdocs serve","position":{"start":{"line":23,"column":1},"end":{"line":26,"column":1}},"key":"PnThqm3Fc5"},{"type":"paragraph","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"这将启动一个本地服务器（通常在端口 8000 上），这样你就可以查看是否一切看起来都符合你的预期。","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"iaaFf19qqa"}],"key":"Nw2P3MyfAf"},{"type":"heading","depth":3,"position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"text","value":"开发者设置","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"FTcpm03Vm0"}],"identifier":"id","label":"开发者设置","html_id":"id-2","implicit":true,"key":"Cc7LPW3pkY"},{"type":"paragraph","position":{"start":{"line":32,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"text","value":"要配置开发环境，你可以使用提供的 ","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"gM1faWt9yc"},{"type":"link","url":"#devcontainer-setup","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"text","value":"DevContainer","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"afCGWIz69c"}],"urlSource":"#devcontainer-setup","key":"kMIrF4zpZu"},{"type":"text","value":"，或者使用 ","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"dNZEZWYb19"},{"type":"inlineCode","value":"setup.sh","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"WYLFStjtl9"},{"type":"text","value":" 脚本并在询问\"Do you want to install dependencies for dev [y/N]? “时回答\"y”。\n或者（例如，如果你的系统不受 ","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"X8DHvS9LVz"},{"type":"link","url":"http://setup.sh","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"text","value":"setup.sh","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"mcSqui4hff"}],"urlSource":"http://setup.sh","key":"ceFKkwF25r"},{"type":"text","value":" 脚本支持），按照手动安装过程并运行 ","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"PZ5aVZ6xwv"},{"type":"inlineCode","value":"pip3 install -r requirements-dev.txt","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"e2WMDsfWqG"},{"type":"text","value":" - 然后运行 ","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"e1G7XVXM1t"},{"type":"inlineCode","value":"pip3 install -e .[all]","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"gBH3V0v4F0"},{"type":"text","value":"。","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"u0Nu4Lmk4Z"}],"key":"zOZZz2vseA"},{"type":"paragraph","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"text","value":"这将安装开发所需的所有工具，包括 ","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"h6iQSbNSKv"},{"type":"inlineCode","value":"pytest","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"YXgy932owj"},{"type":"text","value":"、","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"utAGJACZAA"},{"type":"inlineCode","value":"ruff","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"FB0zMwvocr"},{"type":"text","value":"、","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"ZlaG5UjHdP"},{"type":"inlineCode","value":"mypy","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"GJXOjmpQH4"},{"type":"text","value":" 和 ","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"RCnQ1di9Nr"},{"type":"inlineCode","value":"coveralls","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"wJL7kWHIrn"},{"type":"text","value":"。","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"hNUDPxdrXM"}],"key":"qPhXp94zDx"},{"type":"paragraph","position":{"start":{"line":37,"column":1},"end":{"line":38,"column":1}},"children":[{"type":"text","value":"然后通过运行 ","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"uNSlhjJQAe"},{"type":"inlineCode","value":"pre-commit install","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"ahRvnRRQiU"},{"type":"text","value":" 安装 git hook 脚本，这样你的更改将在提交前在本地进行验证。\n这已经避免了很多等待 CI 的时间，因为一些基本的格式检查是在你的机器上本地完成的。","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"hUioNkcy1J"}],"key":"TdUK1Kjc4F"},{"type":"paragraph","position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"children":[{"type":"text","value":"在打开拉取请求之前，请熟悉我们的","position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"key":"KJhCBLDpzH"},{"type":"link","url":"https://github.com/freqtrade/freqtrade/blob/develop/CONTRIBUTING.md","position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"children":[{"type":"text","value":"贡献指南","position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"key":"cfMI9HntIm"}],"urlSource":"https://github.com/freqtrade/freqtrade/blob/develop/CONTRIBUTING.md","data":{"kind":"file","org":"freqtrade","repo":"freqtrade","reference":"develop","file":"CONTRIBUTING.md","raw":"https://raw.githubusercontent.com/freqtrade/freqtrade/develop/CONTRIBUTING.md"},"internal":false,"protocol":"github","key":"RkajzcyEX8"},{"type":"text","value":"。","position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"key":"TZG3dXAJlp"}],"key":"gGlQm8KZiw"},{"type":"heading","depth":4,"position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"children":[{"type":"text","value":"Devcontainer 设置","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"key":"LDJsgwL1ec"}],"identifier":"devcontainer","label":"Devcontainer 设置","html_id":"devcontainer","implicit":true,"key":"Ns6VLmhfMC"},{"type":"paragraph","position":{"start":{"line":44,"column":1},"end":{"line":45,"column":1}},"children":[{"type":"text","value":"最快和最简单的方法是使用带有 Remote container 扩展的 ","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"Qp5BW1uxAO"},{"type":"link","url":"https://code.visualstudio.com/","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"children":[{"type":"text","value":"VSCode","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"eBBXYTtNYu"}],"urlSource":"https://code.visualstudio.com/","key":"ZquozrodZx"},{"type":"text","value":"。\n这使开发者能够启动机器人，而","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"sAiCbv1Mnb"},{"type":"emphasis","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"children":[{"type":"text","value":"不需要","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"JU13FTbNYd"}],"key":"my42ITyp6J"},{"type":"text","value":"在本地机器上安装任何 freqtrade 特定的依赖项。","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"fOnbFQue2M"}],"key":"QU75u1aR9u"},{"type":"heading","depth":5,"position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"children":[{"type":"text","value":"Devcontainer 依赖项","position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"key":"KCOobRxTWm"}],"identifier":"devcontainer","label":"Devcontainer 依赖项","html_id":"devcontainer-1","implicit":true,"key":"pTs6d07krc"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":49,"column":1},"end":{"line":52,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":49,"column":1},"end":{"line":49,"column":1}},"children":[{"type":"link","url":"https://code.visualstudio.com/","position":{"start":{"line":49,"column":1},"end":{"line":49,"column":1}},"children":[{"type":"text","value":"VSCode","position":{"start":{"line":49,"column":1},"end":{"line":49,"column":1}},"key":"zU5J7mgjpS"}],"urlSource":"https://code.visualstudio.com/","key":"YF0GGYWI0O"}],"key":"dfzgsIAxak"},{"type":"listItem","spread":true,"position":{"start":{"line":50,"column":1},"end":{"line":50,"column":1}},"children":[{"type":"link","url":"https://docs.docker.com/install/","position":{"start":{"line":50,"column":1},"end":{"line":50,"column":1}},"children":[{"type":"text","value":"docker","position":{"start":{"line":50,"column":1},"end":{"line":50,"column":1}},"key":"H5AgyJCEfe"}],"urlSource":"https://docs.docker.com/install/","key":"uY1SaOLa20"}],"key":"J66fGwwN3g"},{"type":"listItem","spread":true,"position":{"start":{"line":51,"column":1},"end":{"line":52,"column":1}},"children":[{"type":"link","url":"https://code.visualstudio.com/docs/remote","position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"children":[{"type":"text","value":"Remote container 扩展文档","position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"key":"R5ZXGyLDjQ"}],"urlSource":"https://code.visualstudio.com/docs/remote","key":"FLeUK4CDvu"}],"key":"ItHKy7QGir"}],"key":"Ht2sucmn4S"},{"type":"paragraph","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"children":[{"type":"text","value":"有关 ","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"key":"ue8kF6VOPU"},{"type":"link","url":"https://code.visualstudio.com/docs/remote","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"children":[{"type":"text","value":"Remote container 扩展","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"key":"OnCqWT94oM"}],"urlSource":"https://code.visualstudio.com/docs/remote","key":"l4NRQQ7ooR"},{"type":"text","value":" 的更多信息，最好查阅文档。","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"key":"ESqA3Gjmy6"}],"key":"fGKrn8Kiqf"},{"type":"heading","depth":4,"position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"children":[{"type":"text","value":"测试","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"AkpV59AgQv"}],"identifier":"id","label":"测试","html_id":"id-3","implicit":true,"key":"HI7te0ONyD"},{"type":"paragraph","position":{"start":{"line":57,"column":1},"end":{"line":58,"column":1}},"children":[{"type":"text","value":"新代码应该由基本的单元测试覆盖。根据功能的复杂性，审查者可能会要求更深入的单元测试。\n如有必要，Freqtrade 团队可以协助并提供编写良好测试的指导（但请不要期望有人为你编写测试）。","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"YWcYNDuCYz"}],"key":"vxqFkoItkL"},{"type":"heading","depth":5,"position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"text","value":"如何运行测试","position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"key":"W3DBHtafGS"}],"identifier":"id","label":"如何运行测试","html_id":"id-4","implicit":true,"key":"wQlm0H6N8w"},{"type":"paragraph","position":{"start":{"line":62,"column":1},"end":{"line":62,"column":1}},"children":[{"type":"text","value":"在根文件夹中使用 ","position":{"start":{"line":62,"column":1},"end":{"line":62,"column":1}},"key":"kE6JGN3OGk"},{"type":"inlineCode","value":"pytest","position":{"start":{"line":62,"column":1},"end":{"line":62,"column":1}},"key":"PZIs545q1V"},{"type":"text","value":" 运行所有可用的测试用例，并确认你的本地环境设置正确","position":{"start":{"line":62,"column":1},"end":{"line":62,"column":1}},"key":"YWDw7iWBis"}],"key":"Rvgent2ByD"},{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"功能分支","position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"key":"VrosSHIzGp"}],"key":"lvRxxwfbBR"},{"type":"paragraph","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"children":[{"type":"text","value":"测试应该在 ","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"Hbz5yJNQqP"},{"type":"inlineCode","value":"develop","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"qFIKGh8WQu"},{"type":"text","value":" 和 ","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"igNfPw1czr"},{"type":"inlineCode","value":"stable","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"TJ2JovOm1E"},{"type":"text","value":" 分支上通过。其他分支可能是正在进行的工作，测试可能尚未工作。","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"yNBcK6tRLH"}],"key":"KNFAHMFGbv"}],"key":"laiKVM8qKn"},{"type":"heading","depth":5,"position":{"start":{"line":68,"column":1},"end":{"line":68,"column":1}},"children":[{"type":"text","value":"在测试中检查日志内容","position":{"start":{"line":68,"column":1},"end":{"line":68,"column":1}},"key":"b5ScG058Rz"}],"identifier":"id","label":"在测试中检查日志内容","html_id":"id-5","implicit":true,"key":"v0UvbMJLSk"},{"type":"paragraph","position":{"start":{"line":70,"column":1},"end":{"line":71,"column":1}},"children":[{"type":"text","value":"Freqtrade 使用 2 种主要方法来检查测试中的日志内容，","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"key":"o0rkCPio7Y"},{"type":"inlineCode","value":"log_has()","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"key":"kfX8brvWt6"},{"type":"text","value":" 和 ","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"key":"aePymxfQRL"},{"type":"inlineCode","value":"log_has_re()","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"key":"voGX9nVNNt"},{"type":"text","value":"（用于使用正则表达式检查，在动态日志消息的情况下）。\n这些可以从 ","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"key":"Vhv8sQAdve"},{"type":"inlineCode","value":"conftest.py","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"key":"i1R6h8qr5H"},{"type":"text","value":" 导入，并可以在任何测试模块中使用。","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"key":"cvQMpemgoE"}],"key":"odXcF5ce86"},{"type":"paragraph","position":{"start":{"line":73,"column":1},"end":{"line":73,"column":1}},"children":[{"type":"text","value":"示例检查如下：","position":{"start":{"line":73,"column":1},"end":{"line":73,"column":1}},"key":"rZOjrEiJ8t"}],"key":"ml5sdpSGIH"},{"type":"code","lang":"python","value":"from tests.conftest import log_has, log_has_re\n\ndef test_method_to_test(caplog):\n    method_to_test()\n\n    assert log_has(\"This event happened\", caplog)\n    # 检查带有尾随数字的正则表达式 ...\n    assert log_has_re(r\"This dynamic event happened and produced \\d+\", caplog)\n","position":{"start":{"line":75,"column":1},"end":{"line":85,"column":1}},"key":"shCuQ2yg8S"},{"type":"heading","depth":4,"position":{"start":{"line":87,"column":1},"end":{"line":87,"column":1}},"children":[{"type":"text","value":"调试配置","position":{"start":{"line":87,"column":1},"end":{"line":87,"column":1}},"key":"M4mO0pZpbh"}],"identifier":"id","label":"调试配置","html_id":"id-6","implicit":true,"key":"ajN5iOKp6h"},{"type":"paragraph","position":{"start":{"line":89,"column":1},"end":{"line":90,"column":1}},"children":[{"type":"text","value":"要调试 freqtrade，我们推荐使用 VSCode（带有 Python 扩展）和以下启动配置（位于 ","position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"key":"vCHZGU2z7h"},{"type":"inlineCode","value":".vscode/launch.json","position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"key":"fdXR86Cj8v"},{"type":"text","value":"）。\n细节显然会因设置而异 - 但这应该可以帮助你开始。","position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"key":"ZUyYslhZ16"}],"key":"PtlcbQxGU9"},{"type":"code","lang":"json","value":"{\n    \"name\": \"freqtrade trade\",\n    \"type\": \"debugpy\",\n    \"request\": \"launch\",\n    \"module\": \"freqtrade\",\n    \"console\": \"integratedTerminal\",\n    \"args\": [\n        \"trade\",\n        // 可选：\n        // \"--userdir\", \"user_data\",\n        \"--strategy\", \n        \"MyAwesomeStrategy\",\n    ]\n},","position":{"start":{"line":92,"column":1},"end":{"line":107,"column":1}},"key":"PfZx9UtJpf"},{"type":"paragraph","position":{"start":{"line":109,"column":1},"end":{"line":110,"column":1}},"children":[{"type":"text","value":"命令行参数可以在 ","position":{"start":{"line":109,"column":1},"end":{"line":109,"column":1}},"key":"s3jPN6QKYK"},{"type":"inlineCode","value":"\"args\"","position":{"start":{"line":109,"column":1},"end":{"line":109,"column":1}},"key":"xYJSPdU811"},{"type":"text","value":" 数组中添加。\n此方法也可用于调试策略，通过在策略中设置断点。","position":{"start":{"line":109,"column":1},"end":{"line":109,"column":1}},"key":"vGK4smUQvy"}],"key":"IquUWgU8FV"},{"type":"paragraph","position":{"start":{"line":112,"column":1},"end":{"line":112,"column":1}},"children":[{"type":"text","value":"Pycharm 也可以使用类似的设置 - 使用 ","position":{"start":{"line":112,"column":1},"end":{"line":112,"column":1}},"key":"KSSegIf0fQ"},{"type":"inlineCode","value":"freqtrade","position":{"start":{"line":112,"column":1},"end":{"line":112,"column":1}},"key":"V52orOUZhv"},{"type":"text","value":" 作为模块名称，并将命令行参数设置为\"parameters\"。","position":{"start":{"line":112,"column":1},"end":{"line":112,"column":1}},"key":"JpZDz3maU2"}],"key":"LFCQdriX94"},{"type":"admonition","kind":"tip","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"正确使用虚拟环境","position":{"start":{"line":114,"column":1},"end":{"line":114,"column":1}},"key":"n0ByFfzzcG"}],"key":"TwQl437cLD"},{"type":"paragraph","position":{"start":{"line":115,"column":1},"end":{"line":115,"column":1}},"children":[{"type":"text","value":"使用虚拟环境时（你应该这样做），确保你的编辑器使用正确的虚拟环境，以避免问题或\"未知导入\"错误。","position":{"start":{"line":115,"column":1},"end":{"line":115,"column":1}},"key":"D4Qkou31qJ"}],"key":"KEeOMnoIat"}],"key":"ABCzpL3i1g"},{"type":"heading","depth":5,"position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"children":[{"type":"text","value":"Vscode","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"key":"XQU9bnYQip"}],"identifier":"vscode","label":"Vscode","html_id":"vscode","implicit":true,"key":"fAo6JkcgS0"},{"type":"paragraph","position":{"start":{"line":120,"column":1},"end":{"line":121,"column":1}},"children":[{"type":"text","value":"你可以使用命令\"Python: Select Interpreter\"在 VSCode 中选择正确的环境 - 这将显示扩展检测到的环境。\n如果你的环境未被检测到，你也可以手动选择路径。","position":{"start":{"line":120,"column":1},"end":{"line":120,"column":1}},"key":"CEKDjcU9Q1"}],"key":"YX6cvK1Qpy"},{"type":"heading","depth":5,"position":{"start":{"line":123,"column":1},"end":{"line":123,"column":1}},"children":[{"type":"text","value":"Pycharm","position":{"start":{"line":123,"column":1},"end":{"line":123,"column":1}},"key":"B2RvxC0CFP"}],"identifier":"pycharm","label":"Pycharm","html_id":"pycharm","implicit":true,"key":"GGkBgDs89C"},{"type":"paragraph","position":{"start":{"line":125,"column":1},"end":{"line":126,"column":1}},"children":[{"type":"text","value":"在 pycharm 中，你可以在\"Run/Debug Configurations\"窗口中选择适当的环境。\n","position":{"start":{"line":125,"column":1},"end":{"line":125,"column":1}},"key":"xmVwsd4oki"},{"type":"image","url":"/build/pycharm_debug-7a8a6d1f4a91d643a2d41ff932bf9a82.png","alt":"Pycharm 调试配置","position":{"start":{"line":125,"column":1},"end":{"line":125,"column":1}},"key":"IDn6QuXpP8","urlSource":"assets/pycharm_debug.png","urlOptimized":"/build/pycharm_debug-7a8a6d1f4a91d643a2d41ff932bf9a82.webp"}],"key":"JacxL8b9Ui"},{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"启动目录","position":{"start":{"line":128,"column":1},"end":{"line":128,"column":1}},"key":"esTDrn8NLM"}],"key":"lA7OusFWrO"},{"type":"paragraph","position":{"start":{"line":129,"column":1},"end":{"line":129,"column":1}},"children":[{"type":"text","value":"这假设你已经检出仓库，并且编辑器在仓库根级别启动（所以 pyproject.toml 在你的仓库的顶层）。","position":{"start":{"line":129,"column":1},"end":{"line":129,"column":1}},"key":"QOJ4Yg1G2O"}],"key":"ROTtcspAUH"}],"key":"n31xFXVLEz"},{"type":"heading","depth":3,"position":{"start":{"line":132,"column":1},"end":{"line":132,"column":1}},"children":[{"type":"text","value":"错误处理","position":{"start":{"line":132,"column":1},"end":{"line":132,"column":1}},"key":"HUjcC2SDxr"}],"identifier":"id","label":"错误处理","html_id":"id-7","implicit":true,"key":"KQq472eYku"},{"type":"paragraph","position":{"start":{"line":134,"column":1},"end":{"line":135,"column":1}},"children":[{"type":"text","value":"Freqtrade 异常都继承自 ","position":{"start":{"line":134,"column":1},"end":{"line":134,"column":1}},"key":"ZddFAMvbZg"},{"type":"inlineCode","value":"FreqtradeException","position":{"start":{"line":134,"column":1},"end":{"line":134,"column":1}},"key":"v4gQVaWa3O"},{"type":"text","value":"。\n但是，这个通用错误类不应该直接使用。相反，存在多个专门的子异常。","position":{"start":{"line":134,"column":1},"end":{"line":134,"column":1}},"key":"MRCxqCCLVB"}],"key":"iAn2I4WCFe"},{"type":"paragraph","position":{"start":{"line":137,"column":1},"end":{"line":137,"column":1}},"children":[{"type":"text","value":"以下是异常继承层次结构的概述：","position":{"start":{"line":137,"column":1},"end":{"line":137,"column":1}},"key":"ukXB2YpEsz"}],"key":"SvrYiQN19Z"},{"type":"code","lang":"","value":"+ FreqtradeException\n|\n+---+ OperationalException\n|   |\n|   +---+ ConfigurationError\n|\n+---+ DependencyException\n|   |\n|   +---+ PricingError\n|   |\n|   +---+ ExchangeError\n|       |\n|       +---+ TemporaryError\n|       |\n|       +---+ DDosProtection\n|       |\n|       +---+ InvalidOrderException\n|           |\n|           +---+ RetryableOrderError\n|           |\n|           +---+ InsufficientFundsError\n|\n+---+ StrategyError","position":{"start":{"line":139,"column":1},"end":{"line":163,"column":1}},"key":"eLjrQPO8EE"},{"type":"thematicBreak","position":{"start":{"line":165,"column":1},"end":{"line":165,"column":1}},"key":"EvlD1qgSC4"},{"type":"heading","depth":3,"position":{"start":{"line":167,"column":1},"end":{"line":167,"column":1}},"children":[{"type":"text","value":"插件","position":{"start":{"line":167,"column":1},"end":{"line":167,"column":1}},"key":"EFkX41ATcT"}],"identifier":"id","label":"插件","html_id":"id-8","implicit":true,"key":"qJQiDinluT"},{"type":"heading","depth":4,"position":{"start":{"line":169,"column":1},"end":{"line":169,"column":1}},"children":[{"type":"text","value":"交易对列表","position":{"start":{"line":169,"column":1},"end":{"line":169,"column":1}},"key":"u6gkJBiBIR"}],"identifier":"id","label":"交易对列表","html_id":"id-9","implicit":true,"key":"W9qbLleOwp"},{"type":"paragraph","position":{"start":{"line":171,"column":1},"end":{"line":172,"column":1}},"children":[{"type":"text","value":"你有一个想要尝试的新交易对选择算法的好主意？太好了。\n希望你也想将其贡献回上游。","position":{"start":{"line":171,"column":1},"end":{"line":171,"column":1}},"key":"NmO1hRJq9G"}],"key":"iEAFIyw4oN"},{"type":"paragraph","position":{"start":{"line":174,"column":1},"end":{"line":174,"column":1}},"children":[{"type":"text","value":"无论你的动机是什么 - 这应该能让你开始开发一个新的交易对列表处理器。","position":{"start":{"line":174,"column":1},"end":{"line":174,"column":1}},"key":"jKjlFothHn"}],"key":"eZYEKoDebw"},{"type":"paragraph","position":{"start":{"line":176,"column":1},"end":{"line":176,"column":1}},"children":[{"type":"text","value":"首先，查看 ","position":{"start":{"line":176,"column":1},"end":{"line":176,"column":1}},"key":"RpnudSNgo3"},{"type":"link","url":"https://github.com/freqtrade/freqtrade/blob/develop/freqtrade/plugins/pairlist/VolumePairList.py","position":{"start":{"line":176,"column":1},"end":{"line":176,"column":1}},"children":[{"type":"text","value":"VolumePairList","position":{"start":{"line":176,"column":1},"end":{"line":176,"column":1}},"key":"Y9cVJ85zIG"}],"urlSource":"https://github.com/freqtrade/freqtrade/blob/develop/freqtrade/plugins/pairlist/VolumePairList.py","data":{"kind":"file","org":"freqtrade","repo":"freqtrade","reference":"develop","file":"freqtrade/plugins/pairlist/VolumePairList.py","raw":"https://raw.githubusercontent.com/freqtrade/freqtrade/develop/freqtrade/plugins/pairlist/VolumePairList.py"},"internal":false,"protocol":"github","key":"pHhiUdj9qN"},{"type":"text","value":" 处理器，最好复制这个文件并命名为你的新交易对列表处理器。","position":{"start":{"line":176,"column":1},"end":{"line":176,"column":1}},"key":"awLOyQ4TcR"}],"key":"OH3lA9uxF9"},{"type":"paragraph","position":{"start":{"line":178,"column":1},"end":{"line":178,"column":1}},"children":[{"type":"text","value":"这是一个简单的处理器，但它可以作为开始开发的好例子。","position":{"start":{"line":178,"column":1},"end":{"line":178,"column":1}},"key":"PVz6c4IzNi"}],"key":"NLQGEsKoTk"},{"type":"paragraph","position":{"start":{"line":180,"column":1},"end":{"line":180,"column":1}},"children":[{"type":"text","value":"接下来，修改处理器的类名（最好与模块文件名保持一致）。","position":{"start":{"line":180,"column":1},"end":{"line":180,"column":1}},"key":"T5msQWnfD1"}],"key":"N7D4AbqX2e"},{"type":"paragraph","position":{"start":{"line":182,"column":1},"end":{"line":182,"column":1}},"children":[{"type":"text","value":"基类提供了交易所实例（","position":{"start":{"line":182,"column":1},"end":{"line":182,"column":1}},"key":"yyj6xhpCfr"},{"type":"inlineCode","value":"self._exchange","position":{"start":{"line":182,"column":1},"end":{"line":182,"column":1}},"key":"uiZmhGn41x"},{"type":"text","value":"）、交易对列表管理器（","position":{"start":{"line":182,"column":1},"end":{"line":182,"column":1}},"key":"XiJBLNpQrg"},{"type":"inlineCode","value":"self._pairlistmanager","position":{"start":{"line":182,"column":1},"end":{"line":182,"column":1}},"key":"ybzepcwcKP"},{"type":"text","value":"），以及主配置（","position":{"start":{"line":182,"column":1},"end":{"line":182,"column":1}},"key":"ylb7vuyN0f"},{"type":"inlineCode","value":"self._config","position":{"start":{"line":182,"column":1},"end":{"line":182,"column":1}},"key":"wpMqvxfLvR"},{"type":"text","value":"）、交易对列表专用配置（","position":{"start":{"line":182,"column":1},"end":{"line":182,"column":1}},"key":"lTs5ChkVny"},{"type":"inlineCode","value":"self._pairlistconfig","position":{"start":{"line":182,"column":1},"end":{"line":182,"column":1}},"key":"ruEWG7UogV"},{"type":"text","value":"）和交易对列表中的绝对位置。","position":{"start":{"line":182,"column":1},"end":{"line":182,"column":1}},"key":"lIAoLqQ92m"}],"key":"BqW1VFbG52"},{"type":"code","lang":"python","value":"        self._exchange = exchange\n        self._pairlistmanager = pairlistmanager\n        self._config = config\n        self._pairlistconfig = pairlistconfig\n        self._pairlist_pos = pairlist_pos","position":{"start":{"line":184,"column":1},"end":{"line":190,"column":1}},"key":"KSG71DS0Os"},{"type":"admonition","kind":"tip","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Tip","key":"agaXktQ8gR"}],"key":"aZv6ssnLlz"},{"type":"paragraph","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"children":[{"type":"text","value":"别忘了在 ","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"xpocTn9JS1"},{"type":"inlineCode","value":"constants.py","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"jrpBKyb28X"},{"type":"text","value":" 中的 ","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"PjOWEpeYMk"},{"type":"inlineCode","value":"AVAILABLE_PAIRLISTS","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"W0SfLLoacy"},{"type":"text","value":" 变量下注册你的交易对列表 - 否则它将不可选择。","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"lDkyz3sDmN"}],"key":"ewiJBDCdOD"}],"key":"wBDKM4LNas"},{"type":"paragraph","position":{"start":{"line":196,"column":1},"end":{"line":196,"column":1}},"children":[{"type":"text","value":"现在，让我们逐步了解需要操作的方法：","position":{"start":{"line":196,"column":1},"end":{"line":196,"column":1}},"key":"yaDdvEqTei"}],"key":"O91ulJbpGs"},{"type":"heading","depth":5,"position":{"start":{"line":198,"column":1},"end":{"line":198,"column":1}},"children":[{"type":"text","value":"交易对列表配置","position":{"start":{"line":198,"column":1},"end":{"line":198,"column":1}},"key":"ESUCuRwmfC"}],"identifier":"id","label":"交易对列表配置","html_id":"id-10","implicit":true,"key":"LSLfIzIwJx"},{"type":"paragraph","position":{"start":{"line":200,"column":1},"end":{"line":200,"column":1}},"children":[{"type":"text","value":"交易对列表处理器链的配置在机器人配置文件的 ","position":{"start":{"line":200,"column":1},"end":{"line":200,"column":1}},"key":"bJs5oYn9H9"},{"type":"inlineCode","value":"\"pairlists\"","position":{"start":{"line":200,"column":1},"end":{"line":200,"column":1}},"key":"sDR8JjqxFE"},{"type":"text","value":" 元素中完成，这是链中每个交易对列表处理器的配置参数数组。","position":{"start":{"line":200,"column":1},"end":{"line":200,"column":1}},"key":"gxMbhlzjmD"}],"key":"JDFHOnfiBG"},{"type":"paragraph","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"children":[{"type":"text","value":"按照惯例，","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"DChBe9vQwA"},{"type":"inlineCode","value":"\"number_assets\"","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"PlpeATnZW1"},{"type":"text","value":" 用于指定要在交易对列表中保留的最大交易对数量。请遵循这一点以确保一致的用户体验。","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"NztYtjVUNO"}],"key":"ViEDZ5Hyy8"},{"type":"paragraph","position":{"start":{"line":204,"column":1},"end":{"line":204,"column":1}},"children":[{"type":"text","value":"可以根据需要配置其他参数。例如，","position":{"start":{"line":204,"column":1},"end":{"line":204,"column":1}},"key":"VJ21dX7Rk6"},{"type":"inlineCode","value":"VolumePairList","position":{"start":{"line":204,"column":1},"end":{"line":204,"column":1}},"key":"ZJERwm0u2D"},{"type":"text","value":" 使用 ","position":{"start":{"line":204,"column":1},"end":{"line":204,"column":1}},"key":"P1U03eJLYF"},{"type":"inlineCode","value":"\"sort_key\"","position":{"start":{"line":204,"column":1},"end":{"line":204,"column":1}},"key":"OueFHJpnGm"},{"type":"text","value":" 来指定排序值 - 但请随意指定你的优秀算法成功和动态所需的任何内容。","position":{"start":{"line":204,"column":1},"end":{"line":204,"column":1}},"key":"DEEO85hoJv"}],"key":"dXpkqRZBSn"},{"type":"heading","depth":5,"position":{"start":{"line":206,"column":1},"end":{"line":206,"column":1}},"children":[{"type":"text","value":"short_desc","position":{"start":{"line":206,"column":1},"end":{"line":206,"column":1}},"key":"s0cQrUWMyh"}],"identifier":"short-desc","label":"short_desc","html_id":"short-desc","implicit":true,"key":"qnuE4ZmOkf"},{"type":"paragraph","position":{"start":{"line":208,"column":1},"end":{"line":208,"column":1}},"children":[{"type":"text","value":"返回用于 Telegram 消息的描述。","position":{"start":{"line":208,"column":1},"end":{"line":208,"column":1}},"key":"NAkYJ1Dyjx"}],"key":"PgTvz4JoDo"},{"type":"paragraph","position":{"start":{"line":210,"column":1},"end":{"line":210,"column":1}},"children":[{"type":"text","value":"这应该包含交易对列表处理器的名称，以及包含资产数量的简短描述。请遵循格式 ","position":{"start":{"line":210,"column":1},"end":{"line":210,"column":1}},"key":"fBzGQFOPjz"},{"type":"inlineCode","value":"\"PairlistName - top/bottom X pairs\"","position":{"start":{"line":210,"column":1},"end":{"line":210,"column":1}},"key":"oDmlaWjd36"},{"type":"text","value":"。","position":{"start":{"line":210,"column":1},"end":{"line":210,"column":1}},"key":"zDIZDUSJWz"}],"key":"nshx4IQCoL"},{"type":"heading","depth":5,"position":{"start":{"line":212,"column":1},"end":{"line":212,"column":1}},"children":[{"type":"text","value":"gen_pairlist","position":{"start":{"line":212,"column":1},"end":{"line":212,"column":1}},"key":"Bt5Z52358G"}],"identifier":"gen-pairlist","label":"gen_pairlist","html_id":"gen-pairlist","implicit":true,"key":"fg7vbXNoDv"},{"type":"paragraph","position":{"start":{"line":214,"column":1},"end":{"line":214,"column":1}},"children":[{"type":"text","value":"如果交易对列表处理器可以用作链中的主导交易对列表处理器，定义初始交易对列表，然后由链中的所有交易对列表处理器处理，则覆盖此方法。例如 ","position":{"start":{"line":214,"column":1},"end":{"line":214,"column":1}},"key":"eJ9BXBoKw9"},{"type":"inlineCode","value":"StaticPairList","position":{"start":{"line":214,"column":1},"end":{"line":214,"column":1}},"key":"GmhPRHAHJa"},{"type":"text","value":" 和 ","position":{"start":{"line":214,"column":1},"end":{"line":214,"column":1}},"key":"inj6zTJdcL"},{"type":"inlineCode","value":"VolumePairList","position":{"start":{"line":214,"column":1},"end":{"line":214,"column":1}},"key":"R8j44kT0Qf"},{"type":"text","value":"。","position":{"start":{"line":214,"column":1},"end":{"line":214,"column":1}},"key":"m2mf1wpnuU"}],"key":"GClvtlbN4Z"},{"type":"paragraph","position":{"start":{"line":216,"column":1},"end":{"line":216,"column":1}},"children":[{"type":"text","value":"这在机器人的每次迭代中调用（仅当交易对列表处理器位于第一个位置时）- 所以考虑为计算/网络密集型计算实现缓存。","position":{"start":{"line":216,"column":1},"end":{"line":216,"column":1}},"key":"jeWOuEWG9h"}],"key":"XaVG5x1Ju8"},{"type":"paragraph","position":{"start":{"line":218,"column":1},"end":{"line":218,"column":1}},"children":[{"type":"text","value":"它必须返回结果交易对列表（然后可以传递给交易对列表处理器链）。","position":{"start":{"line":218,"column":1},"end":{"line":218,"column":1}},"key":"F9J0VjgJAi"}],"key":"qk4IFjNW1U"},{"type":"paragraph","position":{"start":{"line":220,"column":1},"end":{"line":220,"column":1}},"children":[{"type":"text","value":"验证是可选的，父类提供了 ","position":{"start":{"line":220,"column":1},"end":{"line":220,"column":1}},"key":"AGWWdMhVYJ"},{"type":"inlineCode","value":"verify_blacklist(pairlist)","position":{"start":{"line":220,"column":1},"end":{"line":220,"column":1}},"key":"O6KC3sErWz"},{"type":"text","value":" 和 ","position":{"start":{"line":220,"column":1},"end":{"line":220,"column":1}},"key":"egryrb8Nvv"},{"type":"inlineCode","value":"_whitelist_for_active_markets(pairlist)","position":{"start":{"line":220,"column":1},"end":{"line":220,"column":1}},"key":"qsMWuHMVsz"},{"type":"text","value":" 来进行默认过滤。如果你将结果限制为特定数量的交易对，请使用此功能 - 这样最终结果不会比预期的短。","position":{"start":{"line":220,"column":1},"end":{"line":220,"column":1}},"key":"MBEks3cV6m"}],"key":"ZRvOqxqflo"},{"type":"heading","depth":5,"position":{"start":{"line":222,"column":1},"end":{"line":222,"column":1}},"children":[{"type":"text","value":"filter_pairlist","position":{"start":{"line":222,"column":1},"end":{"line":222,"column":1}},"key":"t3YCKWNBZ9"}],"identifier":"filter-pairlist","label":"filter_pairlist","html_id":"filter-pairlist","implicit":true,"key":"QNYr1PxWrO"},{"type":"paragraph","position":{"start":{"line":224,"column":1},"end":{"line":224,"column":1}},"children":[{"type":"text","value":"此方法由交易对列表管理器为链中的每个交易对列表处理器调用。","position":{"start":{"line":224,"column":1},"end":{"line":224,"column":1}},"key":"jr0QpwivSh"}],"key":"hrK0Rquvw2"},{"type":"paragraph","position":{"start":{"line":226,"column":1},"end":{"line":226,"column":1}},"children":[{"type":"text","value":"这在机器人的每次迭代中调用 - 所以考虑为计算/网络密集型计算实现缓存。","position":{"start":{"line":226,"column":1},"end":{"line":226,"column":1}},"key":"BAEAkLg5H8"}],"key":"DlbiJrVhc3"},{"type":"paragraph","position":{"start":{"line":228,"column":1},"end":{"line":228,"column":1}},"children":[{"type":"text","value":"它接收一个交易对列表（可以是之前交易对列表的结果）以及 ","position":{"start":{"line":228,"column":1},"end":{"line":228,"column":1}},"key":"x94g5TLdTC"},{"type":"inlineCode","value":"tickers","position":{"start":{"line":228,"column":1},"end":{"line":228,"column":1}},"key":"GUWbpWFG6T"},{"type":"text","value":"，这是 ","position":{"start":{"line":228,"column":1},"end":{"line":228,"column":1}},"key":"TFMUFUxMIn"},{"type":"inlineCode","value":"get_tickers()","position":{"start":{"line":228,"column":1},"end":{"line":228,"column":1}},"key":"xUo6nz6ce4"},{"type":"text","value":" 的预获取版本。","position":{"start":{"line":228,"column":1},"end":{"line":228,"column":1}},"key":"KMzyEzrI5G"}],"key":"Zm87OHB0D9"},{"type":"paragraph","position":{"start":{"line":230,"column":1},"end":{"line":230,"column":1}},"children":[{"type":"text","value":"基类中的默认实现只是为交易对列表中的每个交易对调用 ","position":{"start":{"line":230,"column":1},"end":{"line":230,"column":1}},"key":"FYHaYA2tKt"},{"type":"inlineCode","value":"_validate_pair()","position":{"start":{"line":230,"column":1},"end":{"line":230,"column":1}},"key":"XftcZnS0Qo"},{"type":"text","value":" 方法，但你可以覆盖它。所以你应该在交易对列表处理器中实现 ","position":{"start":{"line":230,"column":1},"end":{"line":230,"column":1}},"key":"gpqF2ETefu"},{"type":"inlineCode","value":"_validate_pair()","position":{"start":{"line":230,"column":1},"end":{"line":230,"column":1}},"key":"t42yGJNHys"},{"type":"text","value":" 或覆盖 ","position":{"start":{"line":230,"column":1},"end":{"line":230,"column":1}},"key":"TiAR3Zphw4"},{"type":"inlineCode","value":"filter_pairlist()","position":{"start":{"line":230,"column":1},"end":{"line":230,"column":1}},"key":"fV1zlFLO9V"},{"type":"text","value":" 来做其他事情。","position":{"start":{"line":230,"column":1},"end":{"line":230,"column":1}},"key":"g8F16joaYa"}],"key":"Qn2YHaPoQn"},{"type":"paragraph","position":{"start":{"line":232,"column":1},"end":{"line":232,"column":1}},"children":[{"type":"text","value":"如果被覆盖，它必须返回结果交易对列表（然后可以传递给链中的下一个交易对列表处理器）。","position":{"start":{"line":232,"column":1},"end":{"line":232,"column":1}},"key":"ikcJ9Pn7uT"}],"key":"B0hxCBUvDt"},{"type":"paragraph","position":{"start":{"line":234,"column":1},"end":{"line":234,"column":1}},"children":[{"type":"text","value":"验证是可选的，父类提供了 ","position":{"start":{"line":234,"column":1},"end":{"line":234,"column":1}},"key":"fACtUMrQ5M"},{"type":"inlineCode","value":"verify_blacklist(pairlist)","position":{"start":{"line":234,"column":1},"end":{"line":234,"column":1}},"key":"pZnDsee1p4"},{"type":"text","value":" 和 ","position":{"start":{"line":234,"column":1},"end":{"line":234,"column":1}},"key":"vr8gH5lPbD"},{"type":"inlineCode","value":"_whitelist_for_active_markets(pairlist)","position":{"start":{"line":234,"column":1},"end":{"line":234,"column":1}},"key":"Jj6G2qECKS"},{"type":"text","value":" 来进行默认过滤。如果你将结果限制为特定数量的交易对，请使用此功能 - 这样最终结果不会比预期的短。","position":{"start":{"line":234,"column":1},"end":{"line":234,"column":1}},"key":"rsTfsHSaht"}],"key":"CV0TaXkZBx"},{"type":"paragraph","position":{"start":{"line":236,"column":1},"end":{"line":236,"column":1}},"children":[{"type":"text","value":"在 ","position":{"start":{"line":236,"column":1},"end":{"line":236,"column":1}},"key":"F5QrSQlfHe"},{"type":"inlineCode","value":"VolumePairList","position":{"start":{"line":236,"column":1},"end":{"line":236,"column":1}},"key":"yioFmlq4jP"},{"type":"text","value":" 中，这实现了不同的排序方法，进行早期验证，因此只返回预期数量的交易对。","position":{"start":{"line":236,"column":1},"end":{"line":236,"column":1}},"key":"M5UgqSNs1f"}],"key":"iSO76gk0QE"},{"type":"heading","depth":6,"position":{"start":{"line":238,"column":1},"end":{"line":238,"column":1}},"children":[{"type":"text","value":"示例","position":{"start":{"line":238,"column":1},"end":{"line":238,"column":1}},"key":"ZcO88gE0M5"}],"identifier":"id","label":"示例","html_id":"id-11","implicit":true,"key":"uHnOVAtiA4"},{"type":"code","lang":"python","value":"    def filter_pairlist(self, pairlist: list[str], tickers: dict) -> List[str]:\n        # 生成动态白名单\n        pairs = self._calculate_pairlist(pairlist, tickers)\n        return pairs","position":{"start":{"line":240,"column":1},"end":{"line":245,"column":1}},"key":"w4kOd34X0K"},{"type":"heading","depth":4,"position":{"start":{"line":247,"column":1},"end":{"line":247,"column":1}},"children":[{"type":"text","value":"保护","position":{"start":{"line":247,"column":1},"end":{"line":247,"column":1}},"key":"OTNzabZjy3"}],"identifier":"id","label":"保护","html_id":"id-12","implicit":true,"key":"cnlIqsL8ri"},{"type":"paragraph","position":{"start":{"line":249,"column":1},"end":{"line":250,"column":1}},"children":[{"type":"text","value":"最好阅读","position":{"start":{"line":249,"column":1},"end":{"line":249,"column":1}},"key":"OjzuHWypZ3"},{"type":"crossReference","url":"/plugins","position":{"start":{"line":249,"column":1},"end":{"line":249,"column":1}},"children":[{"type":"text","value":"保护文档","position":{"start":{"line":249,"column":1},"end":{"line":249,"column":1}},"key":"Rkm5397ASa"}],"urlSource":"plugins.md#protections","dataUrl":"/plugins.json","identifier":"protections","label":"protections","remote":true,"protocol":"file","key":"q2DfGooSwc"},{"type":"text","value":"以了解保护。\n本指南面向想要开发新保护的开发者。","position":{"start":{"line":249,"column":1},"end":{"line":249,"column":1}},"key":"V3LjWUBLwX"}],"key":"qh7gNz1iQ1"},{"type":"paragraph","position":{"start":{"line":252,"column":1},"end":{"line":252,"column":1}},"children":[{"type":"text","value":"任何保护都不应该直接使用 datetime，而是使用提供的 ","position":{"start":{"line":252,"column":1},"end":{"line":252,"column":1}},"key":"WI2AcWM69T"},{"type":"inlineCode","value":"date_now","position":{"start":{"line":252,"column":1},"end":{"line":252,"column":1}},"key":"N6AjSKcpEH"},{"type":"text","value":" 变量进行日期计算。这保留了回测保护的能力。","position":{"start":{"line":252,"column":1},"end":{"line":252,"column":1}},"key":"k5edRROMJ5"}],"key":"NCm92Tw2tf"},{"type":"admonition","kind":"tip","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"编写新的保护","position":{"start":{"line":254,"column":1},"end":{"line":254,"column":1}},"key":"aAKQUlcZ9O"}],"key":"iqoWP9638Z"},{"type":"paragraph","position":{"start":{"line":255,"column":1},"end":{"line":255,"column":1}},"children":[{"type":"text","value":"最好复制一个现有的保护作为好例子。","position":{"start":{"line":255,"column":1},"end":{"line":255,"column":1}},"key":"xtAn2j2HSs"}],"key":"PZfM6rpyr1"}],"key":"LM6L7lqH8q"},{"type":"heading","depth":5,"position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"children":[{"type":"text","value":"实现新的保护","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"Bhmj0F1UiX"}],"identifier":"id","label":"实现新的保护","html_id":"id-13","implicit":true,"key":"X88HUVxvHh"},{"type":"paragraph","position":{"start":{"line":260,"column":1},"end":{"line":261,"column":1}},"children":[{"type":"text","value":"所有保护实现都必须以 ","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"fhkwfHpCGn"},{"type":"inlineCode","value":"IProtection","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"Uiwri94CfY"},{"type":"text","value":" 作为父类。\n因此，它们必须实现以下方法：","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"LTuDSSb12w"}],"key":"zlARZ18ZdE"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":263,"column":1},"end":{"line":266,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"children":[{"type":"inlineCode","value":"short_desc()","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"Uw8HPyRU5w"}],"key":"V9GXWqu1az"},{"type":"listItem","spread":true,"position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"children":[{"type":"inlineCode","value":"global_stop()","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"NXSEZDgUkf"}],"key":"dB58TLYQwO"},{"type":"listItem","spread":true,"position":{"start":{"line":265,"column":1},"end":{"line":266,"column":1}},"children":[{"type":"inlineCode","value":"stop_per_pair()","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"FVKNnQjk5D"},{"type":"text","value":"。","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"GBZ3FeE7sN"}],"key":"Dgj7d3hOvg"}],"key":"TbGSMIx2ZF"},{"type":"paragraph","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"children":[{"type":"inlineCode","value":"global_stop()","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"key":"bGI5a1j69u"},{"type":"text","value":" 和 ","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"key":"xcJZfmR41h"},{"type":"inlineCode","value":"stop_per_pair()","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"key":"tgMG2haX3m"},{"type":"text","value":" 必须返回一个 ProtectionReturn 对象，它包含：","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"key":"jUWwt3Ry1D"}],"key":"dhLNgjfw4N"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":269,"column":1},"end":{"line":273,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":269,"column":1},"end":{"line":269,"column":1}},"children":[{"type":"text","value":"lock pair - 布尔值","position":{"start":{"line":269,"column":1},"end":{"line":269,"column":1}},"key":"G6UWbx5aqf"}],"key":"EmH86z6ICR"},{"type":"listItem","spread":true,"position":{"start":{"line":270,"column":1},"end":{"line":270,"column":1}},"children":[{"type":"text","value":"lock until - datetime - 交易对应该被锁定到什么时候（将向上取整到下一个新蜡烛）","position":{"start":{"line":270,"column":1},"end":{"line":270,"column":1}},"key":"KapKvR2Y2C"}],"key":"LeoFgBVFzp"},{"type":"listItem","spread":true,"position":{"start":{"line":271,"column":1},"end":{"line":271,"column":1}},"children":[{"type":"text","value":"reason - 字符串，用于日志记录和数据库存储","position":{"start":{"line":271,"column":1},"end":{"line":271,"column":1}},"key":"uCWH7NC8Qg"}],"key":"TR1Y0UlOD5"},{"type":"listItem","spread":true,"position":{"start":{"line":272,"column":1},"end":{"line":273,"column":1}},"children":[{"type":"text","value":"lock_side - long、short 或 ‘*’。","position":{"start":{"line":272,"column":1},"end":{"line":272,"column":1}},"key":"pjjgqyPRcb"}],"key":"ZoDAtTjo7D"}],"key":"oYL546DtjV"},{"type":"paragraph","position":{"start":{"line":274,"column":1},"end":{"line":274,"column":1}},"children":[{"type":"inlineCode","value":"until","position":{"start":{"line":274,"column":1},"end":{"line":274,"column":1}},"key":"CyFdgCXZQE"},{"type":"text","value":" 部分应该使用提供的 ","position":{"start":{"line":274,"column":1},"end":{"line":274,"column":1}},"key":"kPXUQLDWXj"},{"type":"inlineCode","value":"calculate_lock_end()","position":{"start":{"line":274,"column":1},"end":{"line":274,"column":1}},"key":"iiIZKopCru"},{"type":"text","value":" 方法计算。","position":{"start":{"line":274,"column":1},"end":{"line":274,"column":1}},"key":"nxdIL1mG3x"}],"key":"Qgd6zHwvy3"},{"type":"paragraph","position":{"start":{"line":276,"column":1},"end":{"line":277,"column":1}},"children":[{"type":"text","value":"所有保护都应该使用 ","position":{"start":{"line":276,"column":1},"end":{"line":276,"column":1}},"key":"wESIUA7BRy"},{"type":"inlineCode","value":"\"stop_duration\"","position":{"start":{"line":276,"column":1},"end":{"line":276,"column":1}},"key":"fZuEeI0TDL"},{"type":"text","value":" / ","position":{"start":{"line":276,"column":1},"end":{"line":276,"column":1}},"key":"JEPGEH6oFX"},{"type":"inlineCode","value":"\"stop_duration_candles\"","position":{"start":{"line":276,"column":1},"end":{"line":276,"column":1}},"key":"jnRHLWkqvB"},{"type":"text","value":" 来定义交易对（或所有交易对）应该被锁定多长时间。\n这个内容作为 ","position":{"start":{"line":276,"column":1},"end":{"line":276,"column":1}},"key":"lxXmzyNhBB"},{"type":"inlineCode","value":"self._stop_duration","position":{"start":{"line":276,"column":1},"end":{"line":276,"column":1}},"key":"vwcZ6Kzurj"},{"type":"text","value":" 提供给每个保护。","position":{"start":{"line":276,"column":1},"end":{"line":276,"column":1}},"key":"CUWgDBFKTS"}],"key":"GxgynAjo6V"},{"type":"paragraph","position":{"start":{"line":279,"column":1},"end":{"line":279,"column":1}},"children":[{"type":"text","value":"如果你的保护需要回溯期，请使用 ","position":{"start":{"line":279,"column":1},"end":{"line":279,"column":1}},"key":"qdeqbMefxn"},{"type":"inlineCode","value":"\"lookback_period\"","position":{"start":{"line":279,"column":1},"end":{"line":279,"column":1}},"key":"kuRYVsGbAg"},{"type":"text","value":" / ","position":{"start":{"line":279,"column":1},"end":{"line":279,"column":1}},"key":"BXxDclt0Ze"},{"type":"inlineCode","value":"\"lockback_period_candles\"","position":{"start":{"line":279,"column":1},"end":{"line":279,"column":1}},"key":"SKzPmmgbOi"},{"type":"text","value":" 以保持所有保护一致。","position":{"start":{"line":279,"column":1},"end":{"line":279,"column":1}},"key":"sXgp6xgP1N"}],"key":"nvhj4WJBoO"},{"type":"heading","depth":5,"position":{"start":{"line":281,"column":1},"end":{"line":281,"column":1}},"children":[{"type":"text","value":"全局与本地停止","position":{"start":{"line":281,"column":1},"end":{"line":281,"column":1}},"key":"WBPZxaWf5o"}],"identifier":"id","label":"全局与本地停止","html_id":"id-14","implicit":true,"key":"Tb91f8y0q0"},{"type":"paragraph","position":{"start":{"line":283,"column":1},"end":{"line":283,"column":1}},"children":[{"type":"text","value":"保护可以有 2 种不同的方式来暂时停止交易：","position":{"start":{"line":283,"column":1},"end":{"line":283,"column":1}},"key":"YrwyG38T39"}],"key":"RWIvx2QUS1"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":285,"column":1},"end":{"line":287,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":285,"column":1},"end":{"line":285,"column":1}},"children":[{"type":"text","value":"每个交易对（本地）","position":{"start":{"line":285,"column":1},"end":{"line":285,"column":1}},"key":"oOFHL2HKLr"}],"key":"HjhTKYDktW"},{"type":"listItem","spread":true,"position":{"start":{"line":286,"column":1},"end":{"line":287,"column":1}},"children":[{"type":"text","value":"所有交易对（全局）","position":{"start":{"line":286,"column":1},"end":{"line":286,"column":1}},"key":"sPWvOx3N0P"}],"key":"xf0MKCQWVF"}],"key":"OwtyTVD46a"},{"type":"heading","depth":6,"position":{"start":{"line":288,"column":1},"end":{"line":288,"column":1}},"children":[{"type":"text","value":"保护 - 每个交易对","position":{"start":{"line":288,"column":1},"end":{"line":288,"column":1}},"key":"LxKnFWL11l"}],"identifier":"id","label":"保护 - 每个交易对","html_id":"id-15","implicit":true,"key":"TEB4LJPRZj"},{"type":"paragraph","position":{"start":{"line":290,"column":1},"end":{"line":291,"column":1}},"children":[{"type":"text","value":"实现每个交易对方法的保护必须设置 ","position":{"start":{"line":290,"column":1},"end":{"line":290,"column":1}},"key":"XuudUO8CGw"},{"type":"inlineCode","value":"has_local_stop=True","position":{"start":{"line":290,"column":1},"end":{"line":290,"column":1}},"key":"SUQd0blaUm"},{"type":"text","value":"。\n每当交易关闭（出场订单完成）时，都会调用 ","position":{"start":{"line":290,"column":1},"end":{"line":290,"column":1}},"key":"eLBeePAfyt"},{"type":"inlineCode","value":"stop_per_pair()","position":{"start":{"line":290,"column":1},"end":{"line":290,"column":1}},"key":"TJrVM4733c"},{"type":"text","value":" 方法。","position":{"start":{"line":290,"column":1},"end":{"line":290,"column":1}},"key":"vGYByYXObU"}],"key":"krlMJcA9GN"},{"type":"heading","depth":6,"position":{"start":{"line":293,"column":1},"end":{"line":293,"column":1}},"children":[{"type":"text","value":"保护 - 全局保护","position":{"start":{"line":293,"column":1},"end":{"line":293,"column":1}},"key":"hxOPsMEyFT"}],"identifier":"id","label":"保护 - 全局保护","html_id":"id-16","implicit":true,"key":"wbr89w4YdH"},{"type":"paragraph","position":{"start":{"line":295,"column":1},"end":{"line":297,"column":1}},"children":[{"type":"text","value":"这些保护应该对所有交易对进行评估，因此也会锁定所有交易对的交易（称为全局交易对锁定）。\n全局保护必须设置 ","position":{"start":{"line":295,"column":1},"end":{"line":295,"column":1}},"key":"AVdcyzRKZk"},{"type":"inlineCode","value":"has_global_stop=True","position":{"start":{"line":295,"column":1},"end":{"line":295,"column":1}},"key":"S01KnYe771"},{"type":"text","value":" 才能被评估为全局停止。\n每当交易关闭（出场订单完成）时，都会调用 ","position":{"start":{"line":295,"column":1},"end":{"line":295,"column":1}},"key":"S55pcq0O91"},{"type":"inlineCode","value":"global_stop()","position":{"start":{"line":295,"column":1},"end":{"line":295,"column":1}},"key":"qXBaWAY1X7"},{"type":"text","value":" 方法。","position":{"start":{"line":295,"column":1},"end":{"line":295,"column":1}},"key":"beTuKeU3AC"}],"key":"W9S47hnnTG"},{"type":"heading","depth":6,"position":{"start":{"line":299,"column":1},"end":{"line":299,"column":1}},"children":[{"type":"text","value":"保护 - 计算锁定结束时间","position":{"start":{"line":299,"column":1},"end":{"line":299,"column":1}},"key":"ks3dFoFIIq"}],"identifier":"id","label":"保护 - 计算锁定结束时间","html_id":"id-17","implicit":true,"key":"jkT41F7gJ5"},{"type":"paragraph","position":{"start":{"line":301,"column":1},"end":{"line":302,"column":1}},"children":[{"type":"text","value":"保护应该根据它考虑的最后一个交易计算锁定结束时间。\n这避免了在回溯期长于实际锁定期时重新锁定。","position":{"start":{"line":301,"column":1},"end":{"line":301,"column":1}},"key":"KYY3gPDV7L"}],"key":"CwMHHwnu0Y"},{"type":"paragraph","position":{"start":{"line":304,"column":1},"end":{"line":304,"column":1}},"children":[{"type":"inlineCode","value":"IProtection","position":{"start":{"line":304,"column":1},"end":{"line":304,"column":1}},"key":"Oikoad8FFE"},{"type":"text","value":" 父类在 ","position":{"start":{"line":304,"column":1},"end":{"line":304,"column":1}},"key":"oKYJ6p0drP"},{"type":"inlineCode","value":"calculate_lock_end()","position":{"start":{"line":304,"column":1},"end":{"line":304,"column":1}},"key":"ssIvOM1jkc"},{"type":"text","value":" 中为此提供了一个辅助方法。","position":{"start":{"line":304,"column":1},"end":{"line":304,"column":1}},"key":"gqJBerlTG0"}],"key":"ZZgRYuRj4c"},{"type":"thematicBreak","position":{"start":{"line":306,"column":1},"end":{"line":306,"column":1}},"key":"b8kFbW1ga6"},{"type":"heading","depth":3,"position":{"start":{"line":308,"column":1},"end":{"line":308,"column":1}},"children":[{"type":"text","value":"实现新的交易所（进行中）","position":{"start":{"line":308,"column":1},"end":{"line":308,"column":1}},"key":"W4zLINCD73"}],"identifier":"id","label":"实现新的交易所（进行中）","html_id":"id-18","implicit":true,"key":"vsu2IbsApZ"},{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Note","key":"RYphnbqbVf"}],"key":"hMl3BnVMWN"},{"type":"paragraph","position":{"start":{"line":311,"column":1},"end":{"line":311,"column":1}},"children":[{"type":"text","value":"本节正在进行中，不是关于如何使用 Freqtrade 测试新交易所的完整指南。","position":{"start":{"line":311,"column":1},"end":{"line":311,"column":1}},"key":"G7ymYKtNNZ"}],"key":"U7YkPPBpVe"}],"key":"jyUicvJzxd"},{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Note","key":"yAMWcafAGn"}],"key":"KyelkbqWzw"},{"type":"paragraph","position":{"start":{"line":315,"column":1},"end":{"line":315,"column":1}},"children":[{"type":"text","value":"在运行以下任何测试之前，请确保使用最新版本的 CCXT。","position":{"start":{"line":315,"column":1},"end":{"line":315,"column":1}},"key":"OqHKruoH7d"}],"key":"mIa6VOqzZi"},{"type":"paragraph","position":{"start":{"line":317,"column":1},"end":{"line":317,"column":1}},"children":[{"type":"text","value":"你可以通过在激活的虚拟环境中运行 ","position":{"start":{"line":317,"column":1},"end":{"line":317,"column":1}},"key":"th2VbYJyWE"},{"type":"inlineCode","value":"pip install -U ccxt","position":{"start":{"line":317,"column":1},"end":{"line":317,"column":1}},"key":"QA33Sz7EWR"},{"type":"text","value":" 来获取最新版本的 ccxt。","position":{"start":{"line":317,"column":1},"end":{"line":317,"column":1}},"key":"Pvt45iw88y"}],"key":"BC4efCxHSw"},{"type":"paragraph","position":{"start":{"line":319,"column":1},"end":{"line":319,"column":1}},"children":[{"type":"text","value":"这些测试不支持原生 docker，但是可用的 dev-container 将支持所有必需的操作和最终必要的更改。","position":{"start":{"line":319,"column":1},"end":{"line":319,"column":1}},"key":"VAvGbdUfPz"}],"key":"D4XYDR6tNc"}],"key":"HI8VJAj9gU"},{"type":"paragraph","position":{"start":{"line":322,"column":1},"end":{"line":322,"column":1}},"children":[{"type":"text","value":"大多数 CCXT 支持的交易所应该可以直接工作。","position":{"start":{"line":322,"column":1},"end":{"line":322,"column":1}},"key":"C2eTjEZVCo"}],"key":"NzKujpEz5v"},{"type":"paragraph","position":{"start":{"line":324,"column":1},"end":{"line":325,"column":1}},"children":[{"type":"text","value":"要快速测试交易所的公共端点，将你的交易所配置添加到 ","position":{"start":{"line":324,"column":1},"end":{"line":324,"column":1}},"key":"s4uLm4k2oQ"},{"type":"inlineCode","value":"tests/exchange_online/conftest.py","position":{"start":{"line":324,"column":1},"end":{"line":324,"column":1}},"key":"UxbWjgtE67"},{"type":"text","value":" 并使用 ","position":{"start":{"line":324,"column":1},"end":{"line":324,"column":1}},"key":"v7ZbzcUwTd"},{"type":"inlineCode","value":"pytest --longrun tests/exchange_online/test_ccxt_compat.py","position":{"start":{"line":324,"column":1},"end":{"line":324,"column":1}},"key":"eC0xllZZV2"},{"type":"text","value":" 运行这些测试。\n成功完成这些测试是一个良好的基础点（实际上这是一个要求），但这些并不能保证交易所功能正确，因为这只测试公共端点，而不是私有端点（如生成订单或类似操作）。","position":{"start":{"line":324,"column":1},"end":{"line":324,"column":1}},"key":"jwrCLIMhUF"}],"key":"DyYBhPyxUF"},{"type":"paragraph","position":{"start":{"line":327,"column":1},"end":{"line":327,"column":1}},"children":[{"type":"text","value":"还要尝试使用 ","position":{"start":{"line":327,"column":1},"end":{"line":327,"column":1}},"key":"l5yltEFOqX"},{"type":"inlineCode","value":"freqtrade download-data","position":{"start":{"line":327,"column":1},"end":{"line":327,"column":1}},"key":"ZpenAauWcz"},{"type":"text","value":" 下载扩展时间范围（几个月）的数据，并验证数据是否正确下载（没有漏洞，实际下载了指定的时间范围）。","position":{"start":{"line":327,"column":1},"end":{"line":327,"column":1}},"key":"sp4e4LMqUZ"}],"key":"ZmGfV80Na8"},{"type":"paragraph","position":{"start":{"line":329,"column":1},"end":{"line":330,"column":1}},"children":[{"type":"text","value":"这些是将交易所列为支持或社区测试（在主页上列出）的先决条件。\n以下是\"额外\"内容，这将使交易所更好（功能完整）- 但对于这两个类别中的任何一个都不是绝对必要的。","position":{"start":{"line":329,"column":1},"end":{"line":329,"column":1}},"key":"ebIF3d5AVX"}],"key":"VmuYVIdJfa"},{"type":"paragraph","position":{"start":{"line":332,"column":1},"end":{"line":332,"column":1}},"children":[{"type":"text","value":"要完成的额外测试/步骤：","position":{"start":{"line":332,"column":1},"end":{"line":332,"column":1}},"key":"R2DLDV6A1D"}],"key":"HiWbXkgUtR"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":334,"column":1},"end":{"line":343,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":334,"column":1},"end":{"line":334,"column":1}},"children":[{"type":"text","value":"验证 ","position":{"start":{"line":334,"column":1},"end":{"line":334,"column":1}},"key":"qGPyMhdx9Y"},{"type":"inlineCode","value":"fetch_ohlcv()","position":{"start":{"line":334,"column":1},"end":{"line":334,"column":1}},"key":"oV8vibMaiV"},{"type":"text","value":" 提供的数据 - 并最终为此交易所调整 ","position":{"start":{"line":334,"column":1},"end":{"line":334,"column":1}},"key":"zP5hVL0us1"},{"type":"inlineCode","value":"ohlcv_candle_limit","position":{"start":{"line":334,"column":1},"end":{"line":334,"column":1}},"key":"LQGYFkvkQx"}],"key":"W0anLW0m7E"},{"type":"listItem","spread":true,"position":{"start":{"line":335,"column":1},"end":{"line":335,"column":1}},"children":[{"type":"text","value":"检查 L2 订单簿限制范围（API 文档）- 并根据需要设置","position":{"start":{"line":335,"column":1},"end":{"line":335,"column":1}},"key":"xBQzScXQ4X"}],"key":"haz8C2ckms"},{"type":"listItem","spread":true,"position":{"start":{"line":336,"column":1},"end":{"line":336,"column":1}},"children":[{"type":"text","value":"检查余额是否正确显示（*）","position":{"start":{"line":336,"column":1},"end":{"line":336,"column":1}},"key":"ue9MOM8v8c"}],"key":"uBpN0ooRmp"},{"type":"listItem","spread":true,"position":{"start":{"line":337,"column":1},"end":{"line":337,"column":1}},"children":[{"type":"text","value":"创建市价单（*）","position":{"start":{"line":337,"column":1},"end":{"line":337,"column":1}},"key":"oHL7nPqany"}],"key":"xNQTCVUXPv"},{"type":"listItem","spread":true,"position":{"start":{"line":338,"column":1},"end":{"line":338,"column":1}},"children":[{"type":"text","value":"创建限价单（*）","position":{"start":{"line":338,"column":1},"end":{"line":338,"column":1}},"key":"aZT0w2hMgE"}],"key":"bqUg4Y7NWR"},{"type":"listItem","spread":true,"position":{"start":{"line":339,"column":1},"end":{"line":339,"column":1}},"children":[{"type":"text","value":"取消订单（*）","position":{"start":{"line":339,"column":1},"end":{"line":339,"column":1}},"key":"viglrVfRJZ"}],"key":"Wa62rTxQRt"},{"type":"listItem","spread":true,"position":{"start":{"line":340,"column":1},"end":{"line":343,"column":1}},"children":[{"type":"text","value":"完成交易（入场 + 出场）（*）","position":{"start":{"line":340,"column":1},"end":{"line":340,"column":1}},"key":"SGzCF2W7QZ"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":341,"column":1},"end":{"line":343,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":341,"column":1},"end":{"line":341,"column":1}},"children":[{"type":"text","value":"比较交易所和机器人之间的结果计算","position":{"start":{"line":341,"column":1},"end":{"line":341,"column":1}},"key":"iv9OtLNhki"}],"key":"SBd3LmPmdt"},{"type":"listItem","spread":true,"position":{"start":{"line":342,"column":1},"end":{"line":343,"column":1}},"children":[{"type":"text","value":"确保正确应用费用（根据交易所检查数据库）","position":{"start":{"line":342,"column":1},"end":{"line":342,"column":1}},"key":"gNdyrTBEZu"}],"key":"qEmJz6Rd4T"}],"key":"YCU620ChWk"}],"key":"eWLJHrYcrp"}],"key":"hJI5gGa0FI"},{"type":"paragraph","position":{"start":{"line":344,"column":1},"end":{"line":344,"column":1}},"children":[{"type":"text","value":"（*）需要 API 密钥和交易所余额。","position":{"start":{"line":344,"column":1},"end":{"line":344,"column":1}},"key":"JdmHyehAzv"}],"key":"oBBq7zoD3X"},{"type":"heading","depth":4,"position":{"start":{"line":346,"column":1},"end":{"line":346,"column":1}},"children":[{"type":"text","value":"交易所止损","position":{"start":{"line":346,"column":1},"end":{"line":346,"column":1}},"key":"yHLERJOkPd"}],"identifier":"id","label":"交易所止损","html_id":"id-19","implicit":true,"key":"asL1d7S7mj"},{"type":"paragraph","position":{"start":{"line":348,"column":1},"end":{"line":348,"column":1}},"children":[{"type":"text","value":"检查新交易所是否通过其 API 支持交易所止损订单。","position":{"start":{"line":348,"column":1},"end":{"line":348,"column":1}},"key":"Mr0WkwXKdS"}],"key":"T1nmYF8aCy"},{"type":"paragraph","position":{"start":{"line":350,"column":1},"end":{"line":350,"column":1}},"children":[{"type":"text","value":"由于 CCXT 尚未为交易所止损提供统一，我们需要自己实现交易所特定的参数。最好查看 ","position":{"start":{"line":350,"column":1},"end":{"line":350,"column":1}},"key":"W85YYGInfy"},{"type":"inlineCode","value":"binance.py","position":{"start":{"line":350,"column":1},"end":{"line":350,"column":1}},"key":"frwxEUALoA"},{"type":"text","value":" 作为此实现的示例。你需要深入研究交易所 API 的文档，了解如何做到这一点。","position":{"start":{"line":350,"column":1},"end":{"line":350,"column":1}},"key":"KWKNo6uuw5"},{"type":"link","url":"https://github.com/ccxt/ccxt/issues","position":{"start":{"line":350,"column":1},"end":{"line":350,"column":1}},"children":[{"type":"text","value":"CCXT Issues","position":{"start":{"line":350,"column":1},"end":{"line":350,"column":1}},"key":"pH5mlvTeB3"}],"urlSource":"https://github.com/ccxt/ccxt/issues","error":true,"key":"JJevE7zBVx"},{"type":"text","value":" 也可能提供很大帮助，因为其他人可能已经为他们的项目实现了类似的东西。","position":{"start":{"line":350,"column":1},"end":{"line":350,"column":1}},"key":"hEKlk8jAoH"}],"key":"wbpyG2FMqD"},{"type":"heading","depth":4,"position":{"start":{"line":352,"column":1},"end":{"line":352,"column":1}},"children":[{"type":"text","value":"不完整的蜡烛","position":{"start":{"line":352,"column":1},"end":{"line":352,"column":1}},"key":"yg8UavdSLV"}],"identifier":"id","label":"不完整的蜡烛","html_id":"id-20","implicit":true,"key":"cuFWShxbs4"},{"type":"paragraph","position":{"start":{"line":354,"column":1},"end":{"line":356,"column":1}},"children":[{"type":"text","value":"在获取蜡烛（OHLCV）数据时，我们可能会得到不完整的蜡烛（取决于交易所）。\n为了演示这一点，我们将使用日线蜡烛（","position":{"start":{"line":354,"column":1},"end":{"line":354,"column":1}},"key":"q1Jfwx3cTN"},{"type":"inlineCode","value":"\"1d\"","position":{"start":{"line":354,"column":1},"end":{"line":354,"column":1}},"key":"nckgGoNx32"},{"type":"text","value":"）来保持简单。\n我们查询 api（","position":{"start":{"line":354,"column":1},"end":{"line":354,"column":1}},"key":"jyUniMtwHq"},{"type":"inlineCode","value":"ct.fetch_ohlcv()","position":{"start":{"line":354,"column":1},"end":{"line":354,"column":1}},"key":"WlmCUuKsHZ"},{"type":"text","value":"）获取时间框架，并查看最后一个条目的日期。如果这个条目发生变化或显示\"不完整\"蜡烛的日期，那么我们应该删除它，因为有不完整的蜡烛是有问题的，因为指标假设只传递完整的蜡烛给它们，并且会生成大量错误的买入信号。因此，默认情况下，我们假设最后一个蜡烛不完整并将其删除。","position":{"start":{"line":354,"column":1},"end":{"line":354,"column":1}},"key":"Fhq6a4YUWD"}],"key":"n0x0JWv2IG"},{"type":"paragraph","position":{"start":{"line":358,"column":1},"end":{"line":358,"column":1}},"children":[{"type":"text","value":"要检查新交易所的行为，你可以使用以下代码片段：","position":{"start":{"line":358,"column":1},"end":{"line":358,"column":1}},"key":"dj59u2clvZ"}],"key":"Q4MSWujnps"},{"type":"code","lang":"python","value":"import ccxt\nfrom datetime import datetime, timezone\nfrom freqtrade.data.converter import ohlcv_to_dataframe\nct = ccxt.binance()  # 使用你正在测试的交易所\ntimeframe = \"1d\"\npair = \"BTC/USDT\"  # 确保使用在该交易所存在的交易对！\nraw = ct.fetch_ohlcv(pair, timeframe=timeframe)\n\n# 转换为数据框\ndf1 = ohlcv_to_dataframe(raw, timeframe, pair=pair, drop_incomplete=False)\n\nprint(df1.tail(1))\nprint(datetime.now(timezone.utc))","position":{"start":{"line":360,"column":1},"end":{"line":374,"column":1}},"key":"ScGY4w0w2H"},{"type":"code","lang":"output","value":"                         date      open      high       low     close  volume  \n499 2019-06-08 00:00:00+00:00  0.000007  0.000007  0.000007  0.000007   26264344.0  \n2019-06-09 12:30:27.873327","position":{"start":{"line":376,"column":1},"end":{"line":380,"column":1}},"key":"TlGL803y2A"},{"type":"paragraph","position":{"start":{"line":382,"column":1},"end":{"line":384,"column":1}},"children":[{"type":"text","value":"输出将显示交易所的最后一个条目以及当前 UTC 日期。\n如果日期显示同一天，那么最后一个蜡烛可以被认为是不完整的，应该被删除（保持交易所类中的 ","position":{"start":{"line":382,"column":1},"end":{"line":382,"column":1}},"key":"GrfG2thCWZ"},{"type":"inlineCode","value":"\"ohlcv_partial_candle\"","position":{"start":{"line":382,"column":1},"end":{"line":382,"column":1}},"key":"kIf6eZEZ5I"},{"type":"text","value":" 设置不变 / True）。否则，将 ","position":{"start":{"line":382,"column":1},"end":{"line":382,"column":1}},"key":"AMPu5Vrivx"},{"type":"inlineCode","value":"\"ohlcv_partial_candle\"","position":{"start":{"line":382,"column":1},"end":{"line":382,"column":1}},"key":"EF0ogRboWo"},{"type":"text","value":" 设置为 ","position":{"start":{"line":382,"column":1},"end":{"line":382,"column":1}},"key":"BBGfR3Whpz"},{"type":"inlineCode","value":"False","position":{"start":{"line":382,"column":1},"end":{"line":382,"column":1}},"key":"NDWGX5eMdw"},{"type":"text","value":" 以不删除蜡烛（如上例所示）。\n另一种方法是连续多次运行此命令，观察成交量是否变化（而日期保持不变）。","position":{"start":{"line":382,"column":1},"end":{"line":382,"column":1}},"key":"hGyeKZYvce"}],"key":"EDWkhCOT7k"},{"type":"heading","depth":4,"position":{"start":{"line":386,"column":1},"end":{"line":386,"column":1}},"children":[{"type":"text","value":"更新币安缓存的杠杆层级","position":{"start":{"line":386,"column":1},"end":{"line":386,"column":1}},"key":"WTLVzuXXLA"}],"identifier":"id","label":"更新币安缓存的杠杆层级","html_id":"id-21","implicit":true,"key":"B8ndtwVRDj"},{"type":"paragraph","position":{"start":{"line":388,"column":1},"end":{"line":388,"column":1}},"children":[{"type":"text","value":"更新杠杆层级应该定期进行 - 并且需要一个启用了期货的认证账户。","position":{"start":{"line":388,"column":1},"end":{"line":388,"column":1}},"key":"OtfjqnUw5h"}],"key":"XPPTWZF5me"},{"type":"code","lang":"python","value":"import ccxt\nimport json\nfrom pathlib import Path\n\nexchange = ccxt.binance({\n    'apiKey': '<apikey>',\n    'secret': '<secret>',\n    'options': {'defaultType': 'swap'}\n    })\n_ = exchange.load_markets()\n\nlev_tiers = exchange.fetch_leverage_tiers()\n\n# 假设这是在仓库的根目录运行。\nfile = Path('freqtrade/exchange/binance_leverage_tiers.json')\njson.dump(dict(sorted(lev_tiers.items())), file.open('w'), indent=2)\n","position":{"start":{"line":390,"column":1},"end":{"line":408,"column":1}},"key":"J4xgIdsqly"},{"type":"paragraph","position":{"start":{"line":410,"column":1},"end":{"line":410,"column":1}},"children":[{"type":"text","value":"然后应该将此文件贡献给上游，这样其他人也可以从中受益。","position":{"start":{"line":410,"column":1},"end":{"line":410,"column":1}},"key":"MhrMipsNLo"}],"key":"OG2yqdS49i"},{"type":"heading","depth":3,"position":{"start":{"line":412,"column":1},"end":{"line":412,"column":1}},"children":[{"type":"text","value":"更新示例笔记本","position":{"start":{"line":412,"column":1},"end":{"line":412,"column":1}},"key":"H7NyD1GrVo"}],"identifier":"id","label":"更新示例笔记本","html_id":"id-22","implicit":true,"key":"chs6gr4K7O"},{"type":"paragraph","position":{"start":{"line":414,"column":1},"end":{"line":414,"column":1}},"children":[{"type":"text","value":"为了保持 jupyter 笔记本与文档一致，在更新示例笔记本后应该运行以下命令。","position":{"start":{"line":414,"column":1},"end":{"line":414,"column":1}},"key":"lX7AgAfIDt"}],"key":"bHDtm0VAFD"},{"type":"code","lang":"bash","value":"jupyter nbconvert --ClearOutputPreprocessor.enabled=True --inplace freqtrade/templates/strategy_analysis_example.ipynb\njupyter nbconvert --ClearOutputPreprocessor.enabled=True --to markdown freqtrade/templates/strategy_analysis_example.ipynb --stdout > docs/strategy_analysis_example.md","position":{"start":{"line":416,"column":1},"end":{"line":419,"column":1}},"key":"IBn2cIqaSn"},{"type":"heading","depth":3,"position":{"start":{"line":421,"column":1},"end":{"line":421,"column":1}},"children":[{"type":"text","value":"回测文档结果","position":{"start":{"line":421,"column":1},"end":{"line":421,"column":1}},"key":"CvpMRcxwjZ"}],"identifier":"id","label":"回测文档结果","html_id":"id-23","implicit":true,"key":"s8BHQuS9dl"},{"type":"paragraph","position":{"start":{"line":423,"column":1},"end":{"line":423,"column":1}},"children":[{"type":"text","value":"要生成回测输出，请使用以下命令：","position":{"start":{"line":423,"column":1},"end":{"line":423,"column":1}},"key":"rlPxSAzYmi"}],"key":"RzVR9OWtJR"},{"type":"code","lang":"bash","value":"# 假设为此输出创建专用的用户目录\nfreqtrade create-userdir --userdir user_data_bttest/\n# 设置 can_short = True\nsed -i \"s/can_short: bool = False/can_short: bool = True/\" user_data_bttest/strategies/sample_strategy.py\n\nfreqtrade download-data --timerange 20250625-20250801 --config tests/testdata/config.tests.usdt.json --userdir user_data_bttest/ -t 5m\n\nfreqtrade backtesting --config tests/testdata/config.tests.usdt.json -s SampleStrategy --userdir user_data_bttest/ --cache none --timerange 20250701-20250801","position":{"start":{"line":425,"column":1},"end":{"line":434,"column":1}},"key":"s0vwNIKm8m"},{"type":"heading","depth":3,"position":{"start":{"line":436,"column":1},"end":{"line":436,"column":1}},"children":[{"type":"text","value":"持续集成","position":{"start":{"line":436,"column":1},"end":{"line":436,"column":1}},"key":"EvDcprdTuD"}],"identifier":"id","label":"持续集成","html_id":"id-24","implicit":true,"key":"BlwZuuDLey"},{"type":"paragraph","position":{"start":{"line":438,"column":1},"end":{"line":438,"column":1}},"children":[{"type":"text","value":"本文档记录了一些为 CI 流水线做出的决定。","position":{"start":{"line":438,"column":1},"end":{"line":438,"column":1}},"key":"dl7Sk7Yda9"}],"key":"fREL6z9TtL"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":440,"column":1},"end":{"line":447,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":440,"column":1},"end":{"line":440,"column":1}},"children":[{"type":"text","value":"CI 在所有操作系统变体上运行，Linux（ubuntu）、macOS 和 Windows。","position":{"start":{"line":440,"column":1},"end":{"line":440,"column":1}},"key":"iG79kCVIRd"}],"key":"gukvH9ZWHh"},{"type":"listItem","spread":true,"position":{"start":{"line":441,"column":1},"end":{"line":441,"column":1}},"children":[{"type":"text","value":"Docker 镜像为 ","position":{"start":{"line":441,"column":1},"end":{"line":441,"column":1}},"key":"OlZHFRmvbI"},{"type":"inlineCode","value":"stable","position":{"start":{"line":441,"column":1},"end":{"line":441,"column":1}},"key":"kVukG2R6I6"},{"type":"text","value":" 和 ","position":{"start":{"line":441,"column":1},"end":{"line":441,"column":1}},"key":"mrZ05TOJG3"},{"type":"inlineCode","value":"develop","position":{"start":{"line":441,"column":1},"end":{"line":441,"column":1}},"key":"NBMCK3G8sf"},{"type":"text","value":" 分支构建，并作为多架构构建构建，通过同一标签支持多个平台。","position":{"start":{"line":441,"column":1},"end":{"line":441,"column":1}},"key":"yvF4ARDzXG"}],"key":"Ccifj6DkS4"},{"type":"listItem","spread":true,"position":{"start":{"line":442,"column":1},"end":{"line":442,"column":1}},"children":[{"type":"text","value":"包含绘图依赖项的 Docker 镜像也可用，作为 ","position":{"start":{"line":442,"column":1},"end":{"line":442,"column":1}},"key":"pmaXV02yS2"},{"type":"inlineCode","value":"stable_plot","position":{"start":{"line":442,"column":1},"end":{"line":442,"column":1}},"key":"TRCO3VmWAH"},{"type":"text","value":" 和 ","position":{"start":{"line":442,"column":1},"end":{"line":442,"column":1}},"key":"UKceP70mti"},{"type":"inlineCode","value":"develop_plot","position":{"start":{"line":442,"column":1},"end":{"line":442,"column":1}},"key":"jPbz9s4GwT"},{"type":"text","value":"。","position":{"start":{"line":442,"column":1},"end":{"line":442,"column":1}},"key":"pdU9RfBmft"}],"key":"qPONlzen7o"},{"type":"listItem","spread":true,"position":{"start":{"line":443,"column":1},"end":{"line":443,"column":1}},"children":[{"type":"text","value":"Docker 镜像包含一个文件 ","position":{"start":{"line":443,"column":1},"end":{"line":443,"column":1}},"key":"xLru8IRIz3"},{"type":"inlineCode","value":"/freqtrade/freqtrade_commit","position":{"start":{"line":443,"column":1},"end":{"line":443,"column":1}},"key":"n2TaNfAjrp"},{"type":"text","value":"，其中包含此镜像所基于的提交。","position":{"start":{"line":443,"column":1},"end":{"line":443,"column":1}},"key":"mM7qUSNIPW"}],"key":"Ft5Gd9huq0"},{"type":"listItem","spread":true,"position":{"start":{"line":444,"column":1},"end":{"line":444,"column":1}},"children":[{"type":"text","value":"完整的 docker 镜像重建每周通过计划运行一次。","position":{"start":{"line":444,"column":1},"end":{"line":444,"column":1}},"key":"MgwfCp7n7Y"}],"key":"kkbtbQXE1Y"},{"type":"listItem","spread":true,"position":{"start":{"line":445,"column":1},"end":{"line":445,"column":1}},"children":[{"type":"text","value":"部署在 ubuntu 上运行。","position":{"start":{"line":445,"column":1},"end":{"line":445,"column":1}},"key":"jq88eXX7Ui"}],"key":"LlFo382OMT"},{"type":"listItem","spread":true,"position":{"start":{"line":446,"column":1},"end":{"line":447,"column":1}},"children":[{"type":"text","value":"所有测试必须通过才能将 PR 合并到 ","position":{"start":{"line":446,"column":1},"end":{"line":446,"column":1}},"key":"url5XKnWLR"},{"type":"inlineCode","value":"stable","position":{"start":{"line":446,"column":1},"end":{"line":446,"column":1}},"key":"uu7QJhfPTV"},{"type":"text","value":" 或 ","position":{"start":{"line":446,"column":1},"end":{"line":446,"column":1}},"key":"Uuhv0PSN7t"},{"type":"inlineCode","value":"develop","position":{"start":{"line":446,"column":1},"end":{"line":446,"column":1}},"key":"oNvPF67aTo"},{"type":"text","value":"。","position":{"start":{"line":446,"column":1},"end":{"line":446,"column":1}},"key":"lrs6yU1uqZ"}],"key":"ETg6gpza4J"}],"key":"OFMCTgqnBQ"},{"type":"heading","depth":3,"position":{"start":{"line":448,"column":1},"end":{"line":448,"column":1}},"children":[{"type":"text","value":"创建发布","position":{"start":{"line":448,"column":1},"end":{"line":448,"column":1}},"key":"rAmyZZiIQG"}],"identifier":"id","label":"创建发布","html_id":"id-25","implicit":true,"key":"OFRJNOlrZm"},{"type":"paragraph","position":{"start":{"line":450,"column":1},"end":{"line":450,"column":1}},"children":[{"type":"text","value":"本文档的这一部分面向维护者，并展示了如何创建发布。","position":{"start":{"line":450,"column":1},"end":{"line":450,"column":1}},"key":"vc7XFPfsfJ"}],"key":"DUzApeBTga"},{"type":"heading","depth":4,"position":{"start":{"line":452,"column":1},"end":{"line":452,"column":1}},"children":[{"type":"text","value":"创建发布分支","position":{"start":{"line":452,"column":1},"end":{"line":452,"column":1}},"key":"mJ9mrz7THf"}],"identifier":"id","label":"创建发布分支","html_id":"id-26","implicit":true,"key":"PPjTPWkNUQ"},{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Note","key":"zXtQvR1MUN"}],"key":"mGWQd3PaJ1"},{"type":"paragraph","position":{"start":{"line":455,"column":1},"end":{"line":455,"column":1}},"children":[{"type":"text","value":"确保 ","position":{"start":{"line":455,"column":1},"end":{"line":455,"column":1}},"key":"Q9ImolPZNl"},{"type":"inlineCode","value":"stable","position":{"start":{"line":455,"column":1},"end":{"line":455,"column":1}},"key":"UhXc9P1sw6"},{"type":"text","value":" 分支是最新的！","position":{"start":{"line":455,"column":1},"end":{"line":455,"column":1}},"key":"aOJmXdtlyh"}],"key":"OW5f8JOc9O"}],"key":"s2L2MM072J"},{"type":"paragraph","position":{"start":{"line":458,"column":1},"end":{"line":458,"column":1}},"children":[{"type":"text","value":"首先，选择一个大约一周前的提交（以不包括最新添加到发布中的内容）。","position":{"start":{"line":458,"column":1},"end":{"line":458,"column":1}},"key":"FIKZc1eI7T"}],"key":"lrEnFbmBwQ"},{"type":"code","lang":"bash","value":"# 创建新分支\ngit checkout -b new_release <commitid>","position":{"start":{"line":460,"column":1},"end":{"line":463,"column":1}},"key":"GAIRn16T0h"},{"type":"paragraph","position":{"start":{"line":465,"column":1},"end":{"line":465,"column":1}},"children":[{"type":"text","value":"确定在此提交和当前状态之间是否进行了关键的错误修复，并最终选择这些修复。","position":{"start":{"line":465,"column":1},"end":{"line":465,"column":1}},"key":"FstJ77MMkj"}],"key":"zxTWmaS35l"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":467,"column":1},"end":{"line":472,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":467,"column":1},"end":{"line":467,"column":1}},"children":[{"type":"text","value":"将发布分支（stable）合并到此分支。","position":{"start":{"line":467,"column":1},"end":{"line":467,"column":1}},"key":"IE1P3H5xeu"}],"key":"XOpJrc0CLk"},{"type":"listItem","spread":true,"position":{"start":{"line":468,"column":1},"end":{"line":468,"column":1}},"children":[{"type":"text","value":"编辑 ","position":{"start":{"line":468,"column":1},"end":{"line":468,"column":1}},"key":"J4T16Tfq2P"},{"type":"inlineCode","value":"freqtrade/__init__.py","position":{"start":{"line":468,"column":1},"end":{"line":468,"column":1}},"key":"RQHA7J3jEr"},{"type":"text","value":" 并添加与当前日期匹配的版本（例如 ","position":{"start":{"line":468,"column":1},"end":{"line":468,"column":1}},"key":"dVZ3xWTUf7"},{"type":"inlineCode","value":"2019.7","position":{"start":{"line":468,"column":1},"end":{"line":468,"column":1}},"key":"z7irfPWVFi"},{"type":"text","value":" 表示 2019 年 7 月）。次要版本可以是 ","position":{"start":{"line":468,"column":1},"end":{"line":468,"column":1}},"key":"vbGk79NP3c"},{"type":"inlineCode","value":"2019.7.1","position":{"start":{"line":468,"column":1},"end":{"line":468,"column":1}},"key":"cFEkielkIf"},{"type":"text","value":"，如果我们需要在该月进行第二次发布。版本号必须遵循 PEP0440 允许的版本，以避免推送到 pypi 时失败。","position":{"start":{"line":468,"column":1},"end":{"line":468,"column":1}},"key":"rj2yJd6mX8"}],"key":"RyMLzeVx79"},{"type":"listItem","spread":true,"position":{"start":{"line":469,"column":1},"end":{"line":469,"column":1}},"children":[{"type":"text","value":"提交这部分。","position":{"start":{"line":469,"column":1},"end":{"line":469,"column":1}},"key":"fVxDeDzcG9"}],"key":"UHKi4y2QXg"},{"type":"listItem","spread":true,"position":{"start":{"line":470,"column":1},"end":{"line":470,"column":1}},"children":[{"type":"text","value":"将该分支推送到远程，并创建一个针对","position":{"start":{"line":470,"column":1},"end":{"line":470,"column":1}},"key":"uEVDEkn1oE"},{"type":"strong","position":{"start":{"line":470,"column":1},"end":{"line":470,"column":1}},"children":[{"type":"text","value":"stable 分支","position":{"start":{"line":470,"column":1},"end":{"line":470,"column":1}},"key":"dYJ4eAPLeD"}],"key":"QXttwRLTOZ"},{"type":"text","value":"的 PR。","position":{"start":{"line":470,"column":1},"end":{"line":470,"column":1}},"key":"VN1bSBr6kX"}],"key":"ZHiEqjKrLj"},{"type":"listItem","spread":true,"position":{"start":{"line":471,"column":1},"end":{"line":472,"column":1}},"children":[{"type":"text","value":"将 develop 版本更新为下一个版本，遵循模式 ","position":{"start":{"line":471,"column":1},"end":{"line":471,"column":1}},"key":"zf6bL2KXcJ"},{"type":"inlineCode","value":"2019.8-dev","position":{"start":{"line":471,"column":1},"end":{"line":471,"column":1}},"key":"veWTbf2h1s"},{"type":"text","value":"。","position":{"start":{"line":471,"column":1},"end":{"line":471,"column":1}},"key":"yGq0Cv7UFp"}],"key":"KzwL9JHdXB"}],"key":"bBJshyVI7E"},{"type":"heading","depth":4,"position":{"start":{"line":473,"column":1},"end":{"line":473,"column":1}},"children":[{"type":"text","value":"从 git 提交创建更新日志","position":{"start":{"line":473,"column":1},"end":{"line":473,"column":1}},"key":"xuL17molMS"}],"identifier":"id-git","label":"从 git 提交创建更新日志","html_id":"id-git","implicit":true,"key":"YEQSJZWHY8"},{"type":"code","lang":"bash","value":"# 需要在合并/拉取该分支之前完成。\ngit log --oneline --no-decorate --no-merges stable..new_release","position":{"start":{"line":475,"column":1},"end":{"line":478,"column":1}},"key":"KLY5Ysqu3Z"},{"type":"paragraph","position":{"start":{"line":480,"column":1},"end":{"line":480,"column":1}},"children":[{"type":"text","value":"为了保持发布日志简短，最好将完整的 git 更新日志包装在一个可折叠的详细信息部分中。","position":{"start":{"line":480,"column":1},"end":{"line":480,"column":1}},"key":"oMwRkzgV1Y"}],"key":"cXgFQgHjmH"},{"type":"code","lang":"markdown","value":"<details>\n<summary>展开完整更新日志</summary>\n\n... 完整的 git 更新日志\n\n</details>","position":{"start":{"line":482,"column":1},"end":{"line":489,"column":1}},"key":"HySLAP2Sbz"},{"type":"heading","depth":4,"position":{"start":{"line":491,"column":1},"end":{"line":491,"column":1}},"children":[{"type":"text","value":"FreqUI 发布","position":{"start":{"line":491,"column":1},"end":{"line":491,"column":1}},"key":"xYEBzF3Wm7"}],"identifier":"frequi","label":"FreqUI 发布","html_id":"frequi","implicit":true,"key":"kq7leqzQPO"},{"type":"paragraph","position":{"start":{"line":493,"column":1},"end":{"line":494,"column":1}},"children":[{"type":"text","value":"如果 FreqUI 已大幅更新，确保在合并发布分支之前创建发布。\n确保在合并发布之前，发布上的 freqUI CI 已完成并通过。","position":{"start":{"line":493,"column":1},"end":{"line":493,"column":1}},"key":"GdYSB1Y9Lh"}],"key":"gyiU4QJTJI"},{"type":"heading","depth":4,"position":{"start":{"line":496,"column":1},"end":{"line":496,"column":1}},"children":[{"type":"text","value":"创建 github 发布/标签","position":{"start":{"line":496,"column":1},"end":{"line":496,"column":1}},"key":"e9x1UFqETW"}],"identifier":"id-github","label":"创建 github 发布/标签","html_id":"id-github","implicit":true,"key":"kmM8DnUQS3"},{"type":"paragraph","position":{"start":{"line":498,"column":1},"end":{"line":498,"column":1}},"children":[{"type":"text","value":"一旦针对 stable 的 PR 被合并（最好在合并后立即）：","position":{"start":{"line":498,"column":1},"end":{"line":498,"column":1}},"key":"Adc88LlOii"}],"key":"FyvbWJplQO"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":500,"column":1},"end":{"line":505,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":500,"column":1},"end":{"line":500,"column":1}},"children":[{"type":"text","value":"在 Github UI 中使用\"起草新发布\"按钮（发布子部分）。","position":{"start":{"line":500,"column":1},"end":{"line":500,"column":1}},"key":"jIMrV8bCLa"}],"key":"RMcwJUIEsC"},{"type":"listItem","spread":true,"position":{"start":{"line":501,"column":1},"end":{"line":501,"column":1}},"children":[{"type":"text","value":"使用指定的版本号作为标签。","position":{"start":{"line":501,"column":1},"end":{"line":501,"column":1}},"key":"GzfWCizbGy"}],"key":"t3wP692BDl"},{"type":"listItem","spread":true,"position":{"start":{"line":502,"column":1},"end":{"line":502,"column":1}},"children":[{"type":"text","value":"使用\"stable\"作为参考（这一步在合并上述 PR 之后）。","position":{"start":{"line":502,"column":1},"end":{"line":502,"column":1}},"key":"FgUEyefWSf"}],"key":"vkn4i0UmLD"},{"type":"listItem","spread":true,"position":{"start":{"line":503,"column":1},"end":{"line":503,"column":1}},"children":[{"type":"text","value":"使用上述更新日志作为发布评论（作为代码块）。","position":{"start":{"line":503,"column":1},"end":{"line":503,"column":1}},"key":"DLIUEXN1lp"}],"key":"i2TwVHrzWV"},{"type":"listItem","spread":true,"position":{"start":{"line":504,"column":1},"end":{"line":505,"column":1}},"children":[{"type":"text","value":"使用以下代码片段作为新发布","position":{"start":{"line":504,"column":1},"end":{"line":504,"column":1}},"key":"i4lVkLkeof"}],"key":"Td8i17M3re"}],"key":"lp8ry1tWMe"},{"type":"admonition","kind":"tip","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"发布模板","position":{"start":{"line":506,"column":1},"end":{"line":506,"column":1}},"key":"beVOuPM4sJ"}],"key":"ObKCyPuTxc"},{"type":"include","file":"includes/release_template.md","literal":false,"lang":"markdown","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Highlighted changes","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"nu44r670XL"}],"identifier":"highlighted-changes","label":"Highlighted changes","html_id":"highlighted-changes","implicit":true,"key":"TzJoMspuKO"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"...","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ZdQNOOFI62"}],"key":"QheIEr7je2"}],"key":"JgpHelpjVP"},{"type":"heading","depth":4,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"How to update","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"XlFWb3LyhA"}],"identifier":"how-to-update","label":"How to update","html_id":"how-to-update","implicit":true,"key":"Pf9fRiRCEG"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"As always, you can update your bot using one of the following commands:","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"EPuliWZWWo"}],"key":"seTJ7iIzIu"},{"type":"heading","depth":5,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"docker-compose","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"JJgUaFXh2P"}],"identifier":"docker-compose","label":"docker-compose","html_id":"docker-compose","implicit":true,"key":"ksY4JJUHtu"},{"type":"code","lang":"bash","value":"docker-compose pull\ndocker-compose up -d","position":{"start":{"line":11,"column":1},"end":{"line":14,"column":1}},"key":"zxphiG2ZpG"},{"type":"heading","depth":5,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Installation via setup script","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"vdiRx0LlH7"}],"identifier":"installation-via-setup-script","label":"Installation via setup script","html_id":"installation-via-setup-script","implicit":true,"key":"JJUHe69TcE"},{"type":"code","lang":"bash","value":"# Deactivate venv and run \n./setup.sh --update","position":{"start":{"line":18,"column":1},"end":{"line":21,"column":1}},"key":"suLApZ86HH"},{"type":"heading","depth":5,"position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"Plain native installation","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"N4CL1KmhaO"}],"identifier":"plain-native-installation","label":"Plain native installation","html_id":"plain-native-installation","implicit":true,"key":"y7eP0X72uY"},{"type":"code","lang":"bash","value":"git pull\npip install -U -r requirements.txt","position":{"start":{"line":25,"column":1},"end":{"line":28,"column":1}},"key":"kPBETIP71u"},{"type":"details","children":[{"type":"summary","children":[{"type":"text","value":"Expand full changelog","key":"cXCP5a4fUW"}],"key":"YdkpVVXKHk"},{"type":"code","lang":"bash","meta":null,"value":"<Paste your changelog here>","key":"GXeDS23nwq"}],"key":"VRH4TwGBRq"}],"key":"Kf6x31ayFw"}],"key":"lB4R1YrRJp"},{"type":"heading","depth":3,"position":{"start":{"line":511,"column":1},"end":{"line":511,"column":1}},"children":[{"type":"text","value":"发布","position":{"start":{"line":511,"column":1},"end":{"line":511,"column":1}},"key":"K5B1XzF42D"}],"identifier":"id","label":"发布","html_id":"id-27","implicit":true,"key":"HJWGLy8pMj"},{"type":"heading","depth":4,"position":{"start":{"line":513,"column":1},"end":{"line":513,"column":1}},"children":[{"type":"text","value":"pypi","position":{"start":{"line":513,"column":1},"end":{"line":513,"column":1}},"key":"SArbeLiYJP"}],"identifier":"pypi","label":"pypi","html_id":"pypi","implicit":true,"key":"Q1YIJPLtaj"},{"type":"admonition","kind":"warning","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"手动发布","position":{"start":{"line":515,"column":1},"end":{"line":515,"column":1}},"key":"ZSM9tqFLUr"}],"key":"i1ojDx6D4H"},{"type":"paragraph","position":{"start":{"line":516,"column":1},"end":{"line":517,"column":1}},"children":[{"type":"text","value":"此过程作为 Github Actions 的一部分自动化。\n不应该需要手动 pypi 推送。","position":{"start":{"line":516,"column":1},"end":{"line":516,"column":1}},"key":"XF1eDWNDos"}],"key":"IXKVL7VuA4"}],"key":"WB6wk0BP8N"},{"type":"admonition","kind":"tip","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"手动发布","position":{"start":{"line":520,"column":1},"end":{"line":520,"column":1}},"key":"UvoXRPaDwp"}],"key":"b3m0ZnIdqe"},{"type":"paragraph","position":{"start":{"line":521,"column":1},"end":{"line":521,"column":1}},"children":[{"type":"text","value":"要手动创建 pypi 发布，请运行以下命令：","position":{"start":{"line":521,"column":1},"end":{"line":521,"column":1}},"key":"OxBkafkq8P"}],"key":"dyFEIb1ysU"},{"type":"paragraph","position":{"start":{"line":523,"column":1},"end":{"line":523,"column":1}},"children":[{"type":"text","value":"额外要求：","position":{"start":{"line":523,"column":1},"end":{"line":523,"column":1}},"key":"R8ac1wgpUm"},{"type":"inlineCode","value":"wheel","position":{"start":{"line":523,"column":1},"end":{"line":523,"column":1}},"key":"hj2J6H0Coi"},{"type":"text","value":"、","position":{"start":{"line":523,"column":1},"end":{"line":523,"column":1}},"key":"X1wvFG4hD2"},{"type":"inlineCode","value":"twine","position":{"start":{"line":523,"column":1},"end":{"line":523,"column":1}},"key":"eMxVdrI4Qa"},{"type":"text","value":"（用于上传）、具有适当权限的 pypi 账户。","position":{"start":{"line":523,"column":1},"end":{"line":523,"column":1}},"key":"dcwcLtreg9"}],"key":"FqtpjlybHv"},{"type":"code","lang":"bash","value":"pip install -U build\npython -m build --sdist --wheel\n\n# 对于 pypi 测试（检查安装的某些更改是否有效）\ntwine upload --repository-url https://test.pypi.org/legacy/ dist/*\n\n# 对于生产：\ntwine upload dist/*","position":{"start":{"line":525,"column":1},"end":{"line":534,"column":1}},"key":"AeWK0MmWUN"},{"type":"paragraph","position":{"start":{"line":536,"column":1},"end":{"line":536,"column":1}},"children":[{"type":"text","value":"请不要将非发布版本推送到生产/真实的 pypi 实例。","position":{"start":{"line":536,"column":1},"end":{"line":536,"column":1}},"key":"DqHrILjAvy"}],"key":"VAk8s8LjSu"}],"key":"hsFMlGzb1U"}],"key":"k0AkYD4fF6"}],"key":"BKfzkMdyzH"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"已弃用功能","short_title":"已弃用功能","url":"/deprecated","group":"高级话题"},"next":{"title":"Main","url":"/main","group":"Commands"}}},"domain":"http://localhost:3002"}